const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BqT2oUA2.js","assets/hmac-DmOlH3i_.js","assets/ccip-BryMFCnT.js","assets/localBatchGatewayRequest-CfP0AsKt.js","assets/secp256k1-Cx_FYN0b.js","assets/embedded-wallet-EC5_tlvE.js","assets/if-defined-D_715Pgs.js","assets/HelpersUtil-BpVYWVcL.js","assets/index-BPEnBOwp.js","assets/ref-CQ-Dmw0Q.js","assets/index-Bx0bWmYT.js","assets/index-ChXxPU4J.js","assets/index-CMvAOTv4.js","assets/index-CuR239H7.js","assets/index-HsXCQXt9.js","assets/index-sJP39poa.js","assets/index-B_cyY1fP.js","assets/email-381UbEW6.js","assets/index-BYDEZ8pk.js","assets/socials-CQ970wnQ.js","assets/index-LJBojUDz.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-mtUHiaeG.js","assets/index-CSr0Xt5e.js","assets/index-DC-cEUZb.js","assets/index-BwvL3oWg.js","assets/swaps-BZ8IQfWC.js","assets/index-Dv-vqbeP.js","assets/index-jgKUbcLV.js","assets/SwapController-Ckn3bFxC.js","assets/index-BkZe5wEQ.js","assets/send-xcD8_sTN.js","assets/index-DNdCDT6E.js","assets/index-Buh55pDS.js","assets/receive-BEzbPL71.js","assets/index-DVLeu_ZL.js","assets/onramp-DRDoP1HG.js","assets/index-CTdLdtHY.js","assets/index-DRfArQA2.js","assets/transactions-CviMqMgT.js","assets/index-Bjsy0nXp.js","assets/index-1-9WV-4h.js","assets/index-DDXQXm71.js","assets/ui-BhHQALR3.js","assets/index-DP_aqsjC.js","assets/index-k__C3sj9.js","assets/w3m-modal-COzpH2jU.js","assets/index-9zzmQXxm.js","assets/index-CRdTOFSh.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lw(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Et={},Nc=[],Hr=()=>{},iR=()=>!1,pp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),uw=t=>t.startsWith("onUpdate:"),rn=Object.assign,dw=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},oR=Object.prototype.hasOwnProperty,ot=(t,e)=>oR.call(t,e),$e=Array.isArray,xc=t=>Rd(t)==="[object Map]",gp=t=>Rd(t)==="[object Set]",uv=t=>Rd(t)==="[object Date]",je=t=>typeof t=="function",Lt=t=>typeof t=="string",ys=t=>typeof t=="symbol",pt=t=>t!==null&&typeof t=="object",TI=t=>(pt(t)||je(t))&&je(t.then)&&je(t.catch),NI=Object.prototype.toString,Rd=t=>NI.call(t),aR=t=>Rd(t).slice(8,-1),xI=t=>Rd(t)==="[object Object]",fw=t=>Lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,tu=lw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mp=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},cR=/-(\w)/g,Vr=mp(t=>t.replace(cR,(e,n)=>n?n.toUpperCase():"")),lR=/\B([A-Z])/g,Uo=mp(t=>t.replace(lR,"-$1").toLowerCase()),yp=mp(t=>t.charAt(0).toUpperCase()+t.slice(1)),vg=mp(t=>t?`on${yp(t)}`:""),bo=(t,e)=>!Object.is(t,e),qf=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},PI=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},uR=t=>{const e=parseFloat(t);return isNaN(e)?t:e},dR=t=>{const e=Lt(t)?Number(t):NaN;return isNaN(e)?t:e};let dv;const wp=()=>dv||(dv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function hw(t){if($e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Lt(r)?gR(r):hw(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Lt(t)||pt(t))return t}const fR=/;(?![^(]*\))/g,hR=/:([^]+)/,pR=/\/\*[^]*?\*\//g;function gR(t){const e={};return t.replace(pR,"").split(fR).forEach(n=>{if(n){const r=n.split(hR);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function pw(t){let e="";if(Lt(t))e=t;else if($e(t))for(let n=0;n<t.length;n++){const r=pw(t[n]);r&&(e+=r+" ")}else if(pt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const mR="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yR=lw(mR);function OI(t){return!!t||t===""}function wR(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=bp(t[r],e[r]);return n}function bp(t,e){if(t===e)return!0;let n=uv(t),r=uv(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ys(t),r=ys(e),n||r)return t===e;if(n=$e(t),r=$e(e),n||r)return n&&r?wR(t,e):!1;if(n=pt(t),r=pt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!bp(t[o],e[o]))return!1}}return String(t)===String(e)}function RI(t,e){return t.findIndex(n=>bp(n,e))}const DI=t=>!!(t&&t.__v_isRef===!0),bR=t=>Lt(t)?t:t==null?"":$e(t)||pt(t)&&(t.toString===NI||!je(t.toString))?DI(t)?bR(t.value):JSON.stringify(t,$I,2):String(t),$I=(t,e)=>DI(e)?$I(t,e.value):xc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Eg(r,i)+" =>"]=s,n),{})}:gp(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Eg(n))}:ys(e)?Eg(e):pt(e)&&!$e(e)&&!xI(e)?String(e):e,Eg=(t,e="")=>{var n;return ys(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hn;class kI{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Hn,!e&&Hn&&(this.index=(Hn.scopes||(Hn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Hn;try{return Hn=this,e()}finally{Hn=n}}}on(){Hn=this}off(){Hn=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function gw(t){return new kI(t)}function mw(){return Hn}function UI(t,e=!1){Hn&&Hn.cleanups.push(t)}let Tt;const _g=new WeakSet;class LI{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Hn&&Hn.active&&Hn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_g.has(this)&&(_g.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||BI(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fv(this),FI(this);const e=Tt,n=hs;Tt=this,hs=!0;try{return this.fn()}finally{jI(this),Tt=e,hs=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bw(e);this.deps=this.depsTail=void 0,fv(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_g.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){uy(this)&&this.run()}get dirty(){return uy(this)}}let MI=0,nu,ru;function BI(t,e=!1){if(t.flags|=8,e){t.next=ru,ru=t;return}t.next=nu,nu=t}function yw(){MI++}function ww(){if(--MI>0)return;if(ru){let e=ru;for(ru=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;nu;){let e=nu;for(nu=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function FI(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function jI(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),bw(r),vR(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function uy(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(HI(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function HI(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Tu))return;t.globalVersion=Tu;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!uy(t)){t.flags&=-3;return}const n=Tt,r=hs;Tt=t,hs=!0;try{FI(t);const s=t.fn(t._value);(e.version===0||bo(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Tt=n,hs=r,jI(t),t.flags&=-3}}function bw(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bw(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function vR(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let hs=!0;const WI=[];function Lo(){WI.push(hs),hs=!1}function Mo(){const t=WI.pop();hs=t===void 0?!0:t}function fv(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Tt;Tt=void 0;try{e()}finally{Tt=n}}}let Tu=0;class ER{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vw{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Tt||!hs||Tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Tt)n=this.activeLink=new ER(Tt,this),Tt.deps?(n.prevDep=Tt.depsTail,Tt.depsTail.nextDep=n,Tt.depsTail=n):Tt.deps=Tt.depsTail=n,qI(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Tt.depsTail,n.nextDep=void 0,Tt.depsTail.nextDep=n,Tt.depsTail=n,Tt.deps===n&&(Tt.deps=r)}return n}trigger(e){this.version++,Tu++,this.notify(e)}notify(e){yw();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ww()}}}function qI(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)qI(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const ph=new WeakMap,ma=Symbol(""),dy=Symbol(""),Nu=Symbol("");function Dn(t,e,n){if(hs&&Tt){let r=ph.get(t);r||ph.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new vw),s.map=r,s.key=n),s.track()}}function _i(t,e,n,r,s,i){const o=ph.get(t);if(!o){Tu++;return}const a=c=>{c&&c.trigger()};if(yw(),e==="clear")o.forEach(a);else{const c=$e(t),l=c&&fw(n);if(c&&n==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===Nu||!ys(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(Nu)),e){case"add":c?l&&a(o.get("length")):(a(o.get(ma)),xc(t)&&a(o.get(dy)));break;case"delete":c||(a(o.get(ma)),xc(t)&&a(o.get(dy)));break;case"set":xc(t)&&a(o.get(ma));break}}ww()}function _R(t,e){const n=ph.get(t);return n&&n.get(e)}function Ga(t){const e=Qe(t);return e===t?e:(Dn(e,"iterate",Nu),Wr(t)?e:e.map($n))}function vp(t){return Dn(t=Qe(t),"iterate",Nu),t}const CR={__proto__:null,[Symbol.iterator](){return Cg(this,Symbol.iterator,$n)},concat(...t){return Ga(this).concat(...t.map(e=>$e(e)?Ga(e):e))},entries(){return Cg(this,"entries",t=>(t[1]=$n(t[1]),t))},every(t,e){return ni(this,"every",t,e,void 0,arguments)},filter(t,e){return ni(this,"filter",t,e,n=>n.map($n),arguments)},find(t,e){return ni(this,"find",t,e,$n,arguments)},findIndex(t,e){return ni(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ni(this,"findLast",t,e,$n,arguments)},findLastIndex(t,e){return ni(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ni(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ag(this,"includes",t)},indexOf(...t){return Ag(this,"indexOf",t)},join(t){return Ga(this).join(t)},lastIndexOf(...t){return Ag(this,"lastIndexOf",t)},map(t,e){return ni(this,"map",t,e,void 0,arguments)},pop(){return bl(this,"pop")},push(...t){return bl(this,"push",t)},reduce(t,...e){return hv(this,"reduce",t,e)},reduceRight(t,...e){return hv(this,"reduceRight",t,e)},shift(){return bl(this,"shift")},some(t,e){return ni(this,"some",t,e,void 0,arguments)},splice(...t){return bl(this,"splice",t)},toReversed(){return Ga(this).toReversed()},toSorted(t){return Ga(this).toSorted(t)},toSpliced(...t){return Ga(this).toSpliced(...t)},unshift(...t){return bl(this,"unshift",t)},values(){return Cg(this,"values",$n)}};function Cg(t,e,n){const r=vp(t),s=r[e]();return r!==t&&!Wr(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const AR=Array.prototype;function ni(t,e,n,r,s,i){const o=vp(t),a=o!==t&&!Wr(t),c=o[e];if(c!==AR[e]){const d=c.apply(t,i);return a?$n(d):d}let l=n;o!==t&&(a?l=function(d,f){return n.call(this,$n(d),f,t)}:n.length>2&&(l=function(d,f){return n.call(this,d,f,t)}));const u=c.call(o,l,r);return a&&s?s(u):u}function hv(t,e,n,r){const s=vp(t);let i=n;return s!==t&&(Wr(t)?n.length>3&&(i=function(o,a,c){return n.call(this,o,a,c,t)}):i=function(o,a,c){return n.call(this,o,$n(a),c,t)}),s[e](i,...r)}function Ag(t,e,n){const r=Qe(t);Dn(r,"iterate",Nu);const s=r[e](...n);return(s===-1||s===!1)&&Cw(n[0])?(n[0]=Qe(n[0]),r[e](...n)):s}function bl(t,e,n=[]){Lo(),yw();const r=Qe(t)[e].apply(t,n);return ww(),Mo(),r}const IR=lw("__proto__,__v_isRef,__isVue"),zI=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ys));function SR(t){ys(t)||(t=String(t));const e=Qe(this);return Dn(e,"has",t),e.hasOwnProperty(t)}class VI{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?UR:ZI:i?YI:GI).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=$e(e);if(!s){let c;if(o&&(c=CR[n]))return c;if(n==="hasOwnProperty")return SR}const a=Reflect.get(e,n,Ut(e)?e:r);return(ys(n)?zI.has(n):IR(n))||(s||Dn(e,"get",n),i)?a:Ut(a)?o&&fw(n)?a:a.value:pt(a)?s?Ep(a):Dd(a):a}}class KI extends VI{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=Ea(i);if(!Wr(r)&&!Ea(r)&&(i=Qe(i),r=Qe(r)),!$e(e)&&Ut(i)&&!Ut(r))return c?!1:(i.value=r,!0)}const o=$e(e)&&fw(n)?Number(n)<e.length:ot(e,n),a=Reflect.set(e,n,r,Ut(e)?e:s);return e===Qe(s)&&(o?bo(r,i)&&_i(e,"set",n,r):_i(e,"add",n,r)),a}deleteProperty(e,n){const r=ot(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&_i(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!ys(n)||!zI.has(n))&&Dn(e,"has",n),r}ownKeys(e){return Dn(e,"iterate",$e(e)?"length":ma),Reflect.ownKeys(e)}}class TR extends VI{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const NR=new KI,xR=new TR,PR=new KI(!0);const fy=t=>t,rf=t=>Reflect.getPrototypeOf(t);function OR(t,e,n){return function(...r){const s=this.__v_raw,i=Qe(s),o=xc(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,l=s[t](...r),u=n?fy:e?hy:$n;return!e&&Dn(i,"iterate",c?dy:ma),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function sf(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function RR(t,e){const n={get(s){const i=this.__v_raw,o=Qe(i),a=Qe(s);t||(bo(s,a)&&Dn(o,"get",s),Dn(o,"get",a));const{has:c}=rf(o),l=e?fy:t?hy:$n;if(c.call(o,s))return l(i.get(s));if(c.call(o,a))return l(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Dn(Qe(s),"iterate",ma),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=Qe(i),a=Qe(s);return t||(bo(s,a)&&Dn(o,"has",s),Dn(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,c=Qe(a),l=e?fy:t?hy:$n;return!t&&Dn(c,"iterate",ma),a.forEach((u,d)=>s.call(i,l(u),l(d),o))}};return rn(n,t?{add:sf("add"),set:sf("set"),delete:sf("delete"),clear:sf("clear")}:{add(s){!e&&!Wr(s)&&!Ea(s)&&(s=Qe(s));const i=Qe(this);return rf(i).has.call(i,s)||(i.add(s),_i(i,"add",s,s)),this},set(s,i){!e&&!Wr(i)&&!Ea(i)&&(i=Qe(i));const o=Qe(this),{has:a,get:c}=rf(o);let l=a.call(o,s);l||(s=Qe(s),l=a.call(o,s));const u=c.call(o,s);return o.set(s,i),l?bo(i,u)&&_i(o,"set",s,i):_i(o,"add",s,i),this},delete(s){const i=Qe(this),{has:o,get:a}=rf(i);let c=o.call(i,s);c||(s=Qe(s),c=o.call(i,s)),a&&a.call(i,s);const l=i.delete(s);return c&&_i(i,"delete",s,void 0),l},clear(){const s=Qe(this),i=s.size!==0,o=s.clear();return i&&_i(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=OR(s,t,e)}),n}function Ew(t,e){const n=RR(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ot(n,s)&&s in r?n:r,s,i)}const DR={get:Ew(!1,!1)},$R={get:Ew(!1,!0)},kR={get:Ew(!0,!1)};const GI=new WeakMap,YI=new WeakMap,ZI=new WeakMap,UR=new WeakMap;function LR(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function MR(t){return t.__v_skip||!Object.isExtensible(t)?0:LR(aR(t))}function Dd(t){return Ea(t)?t:_w(t,!1,NR,DR,GI)}function JI(t){return _w(t,!1,PR,$R,YI)}function Ep(t){return _w(t,!0,xR,kR,ZI)}function _w(t,e,n,r,s){if(!pt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=MR(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function vo(t){return Ea(t)?vo(t.__v_raw):!!(t&&t.__v_isReactive)}function Ea(t){return!!(t&&t.__v_isReadonly)}function Wr(t){return!!(t&&t.__v_isShallow)}function Cw(t){return t?!!t.__v_raw:!1}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function Aw(t){return!ot(t,"__v_skip")&&Object.isExtensible(t)&&PI(t,"__v_skip",!0),t}const $n=t=>pt(t)?Dd(t):t,hy=t=>pt(t)?Ep(t):t;function Ut(t){return t?t.__v_isRef===!0:!1}function Cr(t){return XI(t,!1)}function _p(t){return XI(t,!0)}function XI(t,e){return Ut(t)?t:new BR(t,e)}class BR{constructor(e,n){this.dep=new vw,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Qe(e),this._value=n?e:$n(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Wr(e)||Ea(e);e=r?e:Qe(e),bo(e,n)&&(this._rawValue=e,this._value=r?e:$n(e),this.dep.trigger())}}function zn(t){return Ut(t)?t.value:t}const FR={get:(t,e,n)=>e==="__v_raw"?t:zn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ut(s)&&!Ut(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function QI(t){return vo(t)?t:new Proxy(t,FR)}function jR(t){const e=$e(t)?new Array(t.length):{};for(const n in t)e[n]=eS(t,n);return e}class HR{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return _R(Qe(this._object),this._key)}}class WR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Voe(t,e,n){return Ut(t)?t:je(t)?new WR(t):pt(t)&&arguments.length>1?eS(t,e,n):Cr(t)}function eS(t,e,n){const r=t[e];return Ut(r)?r:new HR(t,e,n)}class qR{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new vw(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Tu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return BI(this,!0),!0}get value(){const e=this.dep.track();return HI(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function zR(t,e,n=!1){let r,s;return je(t)?r=t:(r=t.get,s=t.set),new qR(r,s,n)}const of={},gh=new WeakMap;let ea;function VR(t,e=!1,n=ea){if(n){let r=gh.get(n);r||gh.set(n,r=[]),r.push(t)}}function KR(t,e,n=Et){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:c}=n,l=E=>s?E:Wr(E)||s===!1||s===0?Ci(E,1):Ci(E);let u,d,f,h,p=!1,g=!1;if(Ut(t)?(d=()=>t.value,p=Wr(t)):vo(t)?(d=()=>l(t),p=!0):$e(t)?(g=!0,p=t.some(E=>vo(E)||Wr(E)),d=()=>t.map(E=>{if(Ut(E))return E.value;if(vo(E))return l(E);if(je(E))return c?c(E,2):E()})):je(t)?e?d=c?()=>c(t,2):t:d=()=>{if(f){Lo();try{f()}finally{Mo()}}const E=ea;ea=u;try{return c?c(t,3,[h]):t(h)}finally{ea=E}}:d=Hr,e&&s){const E=d,v=s===!0?1/0:s;d=()=>Ci(E(),v)}const m=mw(),y=()=>{u.stop(),m&&m.active&&dw(m.effects,u)};if(i&&e){const E=e;e=(...v)=>{E(...v),y()}}let b=g?new Array(t.length).fill(of):of;const w=E=>{if(!(!(u.flags&1)||!u.dirty&&!E))if(e){const v=u.run();if(s||p||(g?v.some((_,A)=>bo(_,b[A])):bo(v,b))){f&&f();const _=ea;ea=u;try{const A=[v,b===of?void 0:g&&b[0]===of?[]:b,h];c?c(e,3,A):e(...A),b=v}finally{ea=_}}}else u.run()};return a&&a(w),u=new LI(d),u.scheduler=o?()=>o(w,!1):w,h=E=>VR(E,!1,u),f=u.onStop=()=>{const E=gh.get(u);if(E){if(c)c(E,4);else for(const v of E)v();gh.delete(u)}},e?r?w(!0):b=u.run():o?o(w.bind(null,!0),!0):u.run(),y.pause=u.pause.bind(u),y.resume=u.resume.bind(u),y.stop=y,y}function Ci(t,e=1/0,n){if(e<=0||!pt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ut(t))Ci(t.value,e,n);else if($e(t))for(let r=0;r<t.length;r++)Ci(t[r],e,n);else if(gp(t)||xc(t))t.forEach(r=>{Ci(r,e,n)});else if(xI(t)){for(const r in t)Ci(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Ci(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $d(t,e,n,r){try{return r?t(...r):t()}catch(s){Cp(s,e,n)}}function ws(t,e,n,r){if(je(t)){const s=$d(t,e,n,r);return s&&TI(s)&&s.catch(i=>{Cp(i,e,n)}),s}if($e(t)){const s=[];for(let i=0;i<t.length;i++)s.push(ws(t[i],e,n,r));return s}}function Cp(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Et;if(e){let a=e.parent;const c=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,c,l)===!1)return}a=a.parent}if(i){Lo(),$d(i,null,10,[t,c,l]),Mo();return}}GR(t,n,s,r,o)}function GR(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Wn=[];let ks=-1;const Pc=[];let ro=null,wc=0;const tS=Promise.resolve();let mh=null;function Ap(t){const e=mh||tS;return t?e.then(this?t.bind(this):t):e}function YR(t){let e=ks+1,n=Wn.length;for(;e<n;){const r=e+n>>>1,s=Wn[r],i=xu(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Iw(t){if(!(t.flags&1)){const e=xu(t),n=Wn[Wn.length-1];!n||!(t.flags&2)&&e>=xu(n)?Wn.push(t):Wn.splice(YR(e),0,t),t.flags|=1,nS()}}function nS(){mh||(mh=tS.then(sS))}function ZR(t){$e(t)?Pc.push(...t):ro&&t.id===-1?ro.splice(wc+1,0,t):t.flags&1||(Pc.push(t),t.flags|=1),nS()}function pv(t,e,n=ks+1){for(;n<Wn.length;n++){const r=Wn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Wn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function rS(t){if(Pc.length){const e=[...new Set(Pc)].sort((n,r)=>xu(n)-xu(r));if(Pc.length=0,ro){ro.push(...e);return}for(ro=e,wc=0;wc<ro.length;wc++){const n=ro[wc];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ro=null,wc=0}}const xu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function sS(t){try{for(ks=0;ks<Wn.length;ks++){const e=Wn[ks];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),$d(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ks<Wn.length;ks++){const e=Wn[ks];e&&(e.flags&=-2)}ks=-1,Wn.length=0,rS(),mh=null,(Wn.length||Pc.length)&&sS()}}let en=null,iS=null;function yh(t){const e=en;return en=t,iS=t&&t.type.__scopeId||null,e}function oS(t,e=en,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Nv(-1);const i=yh(e);let o;try{o=t(...s)}finally{yh(i),r._d&&Nv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Koe(t,e){if(en===null)return t;const n=xp(en),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=Et]=e[s];i&&(je(i)&&(i={mounted:i,updated:i}),i.deep&&Ci(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function Wo(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Lo(),ws(c,n,8,[t.el,a,t,e]),Mo())}}const aS=Symbol("_vte"),cS=t=>t.__isTeleport,su=t=>t&&(t.disabled||t.disabled===""),gv=t=>t&&(t.defer||t.defer===""),mv=t=>typeof SVGElement<"u"&&t instanceof SVGElement,yv=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,py=(t,e)=>{const n=t&&t.to;return Lt(n)?e?e(n):null:n},lS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,c,l){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:g,createComment:m}}=l,y=su(e.props);let{shapeFlag:b,children:w,dynamicChildren:E}=e;if(t==null){const v=e.el=g(""),_=e.anchor=g("");h(v,n,r),h(_,n,r);const A=(C,x)=>{b&16&&(s&&s.isCE&&(s.ce._teleportTarget=C),u(w,C,x,s,i,o,a,c))},N=()=>{const C=e.target=py(e.props,p),x=uS(C,e,g,h);C&&(o!=="svg"&&mv(C)?o="svg":o!=="mathml"&&yv(C)&&(o="mathml"),y||(A(C,x),zf(e,!1)))};y&&(A(n,_),zf(e,!0)),gv(e.props)?Fn(()=>{N(),e.el.__isMounted=!0},i):N()}else{if(gv(e.props)&&!t.el.__isMounted){Fn(()=>{lS.process(t,e,n,r,s,i,o,a,c,l),delete t.el.__isMounted},i);return}e.el=t.el,e.targetStart=t.targetStart;const v=e.anchor=t.anchor,_=e.target=t.target,A=e.targetAnchor=t.targetAnchor,N=su(t.props),C=N?n:_,x=N?v:A;if(o==="svg"||mv(_)?o="svg":(o==="mathml"||yv(_))&&(o="mathml"),E?(f(t.dynamicChildren,E,C,s,i,o,a),Ow(t,e,!0)):c||d(t,e,C,x,s,i,o,a,!1),y)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):af(e,n,v,l,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const P=e.target=py(e.props,p);P&&af(e,P,null,l,0)}else N&&af(e,_,A,l,1);zf(e,y)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:c,targetStart:l,targetAnchor:u,target:d,props:f}=t;if(d&&(s(l),s(u)),i&&s(c),o&16){const h=i||!su(f);for(let p=0;p<a.length;p++){const g=a[p];r(g,e,n,h,!!g.dynamicChildren)}}},move:af,hydrate:JR};function af(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:c,children:l,props:u}=t,d=i===2;if(d&&r(o,e,n),(!d||su(u))&&c&16)for(let f=0;f<l.length;f++)s(l[f],e,n,2);d&&r(a,e,n)}function JR(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:c,insert:l,createText:u}},d){const f=e.target=py(e.props,c);if(f){const h=su(e.props),p=f._lpa||f.firstChild;if(e.shapeFlag&16)if(h)e.anchor=d(o(t),e,a(t),n,r,s,i),e.targetStart=p,e.targetAnchor=p&&o(p);else{e.anchor=o(t);let g=p;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&o(e.targetAnchor);break}}g=o(g)}e.targetAnchor||uS(f,e,u,l),d(p&&o(p),e,f,n,r,s,i)}zf(e,h)}return e.anchor&&o(e.anchor)}const Goe=lS;function zf(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function uS(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[aS]=i,t&&(r(s,t),r(i,t)),i}const so=Symbol("_leaveCb"),cf=Symbol("_enterCb");function dS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tp(()=>{t.isMounted=!0}),bS(()=>{t.isUnmounting=!0}),t}const Or=[Function,Array],fS={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Or,onEnter:Or,onAfterEnter:Or,onEnterCancelled:Or,onBeforeLeave:Or,onLeave:Or,onAfterLeave:Or,onLeaveCancelled:Or,onBeforeAppear:Or,onAppear:Or,onAfterAppear:Or,onAppearCancelled:Or},hS=t=>{const e=t.subTree;return e.component?hS(e.component):e},XR={name:"BaseTransition",props:fS,setup(t,{slots:e}){const n=Ar(),r=dS();return()=>{const s=e.default&&Sw(e.default(),!0);if(!s||!s.length)return;const i=pS(s),o=Qe(t),{mode:a}=o;if(r.isLeaving)return Ig(i);const c=wv(i);if(!c)return Ig(i);let l=Pu(c,o,r,n,d=>l=d);c.type!==qn&&_a(c,l);let u=n.subTree&&wv(n.subTree);if(u&&u.type!==qn&&!ra(c,u)&&hS(n).type!==qn){let d=Pu(u,o,r,n);if(_a(u,d),a==="out-in"&&c.type!==qn)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},Ig(i);a==="in-out"&&c.type!==qn?d.delayLeave=(f,h,p)=>{const g=gS(r,u);g[String(u.key)]=u,f[so]=()=>{h(),f[so]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{p(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function pS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==qn){e=n;break}}return e}const QR=XR;function gS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Pu(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:y,onAfterAppear:b,onAppearCancelled:w}=e,E=String(t.key),v=gS(n,t),_=(C,x)=>{C&&ws(C,r,9,x)},A=(C,x)=>{const P=x[1];_(C,x),$e(C)?C.every(D=>D.length<=1)&&P():C.length<=1&&P()},N={mode:o,persisted:a,beforeEnter(C){let x=c;if(!n.isMounted)if(i)x=m||c;else return;C[so]&&C[so](!0);const P=v[E];P&&ra(t,P)&&P.el[so]&&P.el[so](),_(x,[C])},enter(C){let x=l,P=u,D=d;if(!n.isMounted)if(i)x=y||l,P=b||u,D=w||d;else return;let H=!1;const B=C[cf]=I=>{H||(H=!0,I?_(D,[C]):_(P,[C]),N.delayedLeave&&N.delayedLeave(),C[cf]=void 0)};x?A(x,[C,B]):B()},leave(C,x){const P=String(t.key);if(C[cf]&&C[cf](!0),n.isUnmounting)return x();_(f,[C]);let D=!1;const H=C[so]=B=>{D||(D=!0,x(),B?_(g,[C]):_(p,[C]),C[so]=void 0,v[P]===t&&delete v[P])};v[P]=t,h?A(h,[C,H]):H()},clone(C){const x=Pu(C,e,n,r,s);return s&&s(x),x}};return N}function Ig(t){if(Ip(t))return t=No(t),t.children=null,t}function wv(t){if(!Ip(t))return cS(t.type)&&t.children?pS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&je(n.default))return n.default()}}function _a(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_a(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Sw(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===kn?(o.patchFlag&128&&s++,r=r.concat(Sw(o.children,e,a))):(e||o.type!==qn)&&r.push(a!=null?No(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ma(t,e){return je(t)?rn({name:t.name},e,{setup:t}):t}function mS(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Yoe(t){const e=Ar(),n=_p(null);if(e){const s=e.refs===Et?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}function wh(t,e,n,r,s=!1){if($e(t)){t.forEach((p,g)=>wh(p,e&&($e(e)?e[g]:e),n,r,s));return}if(Oc(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&wh(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?xp(r.component):r.el,o=s?null:i,{i:a,r:c}=t,l=e&&e.r,u=a.refs===Et?a.refs={}:a.refs,d=a.setupState,f=Qe(d),h=d===Et?()=>!1:p=>ot(f,p);if(l!=null&&l!==c&&(Lt(l)?(u[l]=null,h(l)&&(d[l]=null)):Ut(l)&&(l.value=null)),je(c))$d(c,a,12,[o,u]);else{const p=Lt(c),g=Ut(c);if(p||g){const m=()=>{if(t.f){const y=p?h(c)?d[c]:u[c]:c.value;s?$e(y)&&dw(y,i):$e(y)?y.includes(i)||y.push(i):p?(u[c]=[i],h(c)&&(d[c]=u[c])):(c.value=[i],t.k&&(u[t.k]=c.value))}else p?(u[c]=o,h(c)&&(d[c]=o)):g&&(c.value=o,t.k&&(u[t.k]=o))};o?(m.id=-1,Fn(m,n)):m()}}}wp().requestIdleCallback;wp().cancelIdleCallback;const Oc=t=>!!t.type.__asyncLoader,Ip=t=>t.type.__isKeepAlive;function e3(t,e){yS(t,"a",e)}function t3(t,e){yS(t,"da",e)}function yS(t,e,n=dn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Sp(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ip(s.parent.vnode)&&n3(r,e,n,s),s=s.parent}}function n3(t,e,n,r){const s=Sp(e,t,r,!0);Tw(()=>{dw(r[e],s)},n)}function Sp(t,e,n=dn,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Lo();const a=Ud(n),c=ws(e,n,t,o);return a(),Mo(),c});return r?s.unshift(i):s.push(i),i}}const ki=t=>(e,n=dn)=>{(!Du||t==="sp")&&Sp(t,(...r)=>e(...r),n)},r3=ki("bm"),Tp=ki("m"),s3=ki("bu"),wS=ki("u"),bS=ki("bum"),Tw=ki("um"),i3=ki("sp"),o3=ki("rtg"),a3=ki("rtc");function c3(t,e=dn){Sp("ec",t,e)}const Nw="components",l3="directives";function u3(t,e){return xw(Nw,t,!0,e)||t}const vS=Symbol.for("v-ndc");function Zoe(t){return Lt(t)?xw(Nw,t,!1)||t:t||vS}function Joe(t){return xw(l3,t)}function xw(t,e,n=!0,r=!1){const s=en||dn;if(s){const i=s.type;if(t===Nw){const a=Q3(i,!1);if(a&&(a===e||a===Vr(e)||a===yp(Vr(e))))return i}const o=bv(s[t]||i[t],e)||bv(s.appContext[t],e);return!o&&r?i:o}}function bv(t,e){return t&&(t[e]||t[Vr(e)]||t[yp(Vr(e))])}function Xoe(t,e,n,r){let s;const i=n,o=$e(t);if(o||Lt(t)){const a=o&&vo(t);let c=!1;a&&(c=!Wr(t),t=vp(t)),s=new Array(t.length);for(let l=0,u=t.length;l<u;l++)s[l]=e(c?$n(t[l]):t[l],l,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(pt(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];s[c]=e(t[u],u,c,i)}}else s=[];return s}function Qoe(t,e){for(let n=0;n<e.length;n++){const r=e[n];if($e(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function d3(t,e,n={},r,s){if(en.ce||en.parent&&Oc(en.parent)&&en.parent.ce)return e!=="default"&&(n.name=e),vh(),Eh(kn,null,[En("slot",n,r&&r())],64);let i=t[e];i&&i._c&&(i._d=!1),vh();const o=i&&ES(i(n)),a=n.key||o&&o.key,c=Eh(kn,{key:(a&&!ys(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function ES(t){return t.some(e=>Ru(e)?!(e.type===qn||e.type===kn&&!ES(e.children)):!0)?t:null}const gy=t=>t?HS(t)?xp(t):gy(t.parent):null,iu=rn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>gy(t.parent),$root:t=>gy(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>AS(t),$forceUpdate:t=>t.f||(t.f=()=>{Iw(t.update)}),$nextTick:t=>t.n||(t.n=Ap.bind(t.proxy)),$watch:t=>$3.bind(t)}),Sg=(t,e)=>t!==Et&&!t.__isScriptSetup&&ot(t,e),f3={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let l;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Sg(r,e))return o[e]=1,r[e];if(s!==Et&&ot(s,e))return o[e]=2,s[e];if((l=t.propsOptions[0])&&ot(l,e))return o[e]=3,i[e];if(n!==Et&&ot(n,e))return o[e]=4,n[e];my&&(o[e]=0)}}const u=iu[e];let d,f;if(u)return e==="$attrs"&&Dn(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==Et&&ot(n,e))return o[e]=4,n[e];if(f=c.config.globalProperties,ot(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Sg(s,e)?(s[e]=n,!0):r!==Et&&ot(r,e)?(r[e]=n,!0):ot(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==Et&&ot(t,o)||Sg(e,o)||(a=i[0])&&ot(a,o)||ot(r,o)||ot(iu,o)||ot(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ot(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function eae(){return _S().slots}function tae(){return _S().attrs}function _S(){const t=Ar();return t.setupContext||(t.setupContext=qS(t))}function vv(t){return $e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let my=!0;function h3(t){const e=AS(t),n=t.proxy,r=t.ctx;my=!1,e.beforeCreate&&Ev(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:w,unmounted:E,render:v,renderTracked:_,renderTriggered:A,errorCaptured:N,serverPrefetch:C,expose:x,inheritAttrs:P,components:D,directives:H,filters:B}=e;if(l&&p3(l,r,null),o)for(const O in o){const U=o[O];je(U)&&(r[O]=U.bind(n))}if(s){const O=s.call(n,n);pt(O)&&(t.data=Dd(O))}if(my=!0,i)for(const O in i){const U=i[O],F=je(U)?U.bind(n,n):je(U.get)?U.get.bind(n,n):Hr,j=!je(U)&&je(U.set)?U.set.bind(n):Hr,G=Je({get:F,set:j});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>G.value,set:J=>G.value=J})}if(a)for(const O in a)CS(a[O],r,n,O);if(c){const O=je(c)?c.call(n):c;Reflect.ownKeys(O).forEach(U=>{ou(U,O[U])})}u&&Ev(u,t,"c");function S(O,U){$e(U)?U.forEach(F=>O(F.bind(n))):U&&O(U.bind(n))}if(S(r3,d),S(Tp,f),S(s3,h),S(wS,p),S(e3,g),S(t3,m),S(c3,N),S(a3,_),S(o3,A),S(bS,b),S(Tw,E),S(i3,C),$e(x))if(x.length){const O=t.exposed||(t.exposed={});x.forEach(U=>{Object.defineProperty(O,U,{get:()=>n[U],set:F=>n[U]=F})})}else t.exposed||(t.exposed={});v&&t.render===Hr&&(t.render=v),P!=null&&(t.inheritAttrs=P),D&&(t.components=D),H&&(t.directives=H),C&&mS(t)}function p3(t,e,n=Hr){$e(t)&&(t=yy(t));for(const r in t){const s=t[r];let i;pt(s)?"default"in s?i=hn(s.from||r,s.default,!0):i=hn(s.from||r):i=hn(s),Ut(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Ev(t,e,n){ws($e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function CS(t,e,n,r){let s=r.includes(".")?US(n,r):()=>n[r];if(Lt(t)){const i=e[t];je(i)&&Ws(s,i)}else if(je(t))Ws(s,t.bind(n));else if(pt(t))if($e(t))t.forEach(i=>CS(i,e,n,r));else{const i=je(t.handler)?t.handler.bind(n):e[t.handler];je(i)&&Ws(s,i,t)}}function AS(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(l=>bh(c,l,o,!0)),bh(c,e,o)),pt(e)&&i.set(e,c),c}function bh(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&bh(t,i,n,!0),s&&s.forEach(o=>bh(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=g3[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const g3={data:_v,props:Cv,emits:Cv,methods:Kl,computed:Kl,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,beforeUnmount:Mn,destroyed:Mn,unmounted:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:Kl,directives:Kl,watch:y3,provide:_v,inject:m3};function _v(t,e){return e?t?function(){return rn(je(t)?t.call(this,this):t,je(e)?e.call(this,this):e)}:e:t}function m3(t,e){return Kl(yy(t),yy(e))}function yy(t){if($e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Mn(t,e){return t?[...new Set([].concat(t,e))]:e}function Kl(t,e){return t?rn(Object.create(null),t,e):e}function Cv(t,e){return t?$e(t)&&$e(e)?[...new Set([...t,...e])]:rn(Object.create(null),vv(t),vv(e??{})):e}function y3(t,e){if(!t)return e;if(!e)return t;const n=rn(Object.create(null),t);for(const r in e)n[r]=Mn(t[r],e[r]);return n}function IS(){return{app:null,config:{isNativeTag:iR,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let w3=0;function b3(t,e){return function(r,s=null){je(r)||(r=rn({},r)),s!=null&&!pt(s)&&(s=null);const i=IS(),o=new WeakSet,a=[];let c=!1;const l=i.app={_uid:w3++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:t5,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&je(u.install)?(o.add(u),u.install(l,...d)):je(u)&&(o.add(u),u(l,...d))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,d){return d?(i.components[u]=d,l):i.components[u]},directive(u,d){return d?(i.directives[u]=d,l):i.directives[u]},mount(u,d,f){if(!c){const h=l._ceVNode||En(r,s);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(h,u,f),c=!0,l._container=u,u.__vue_app__=l,xp(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&(ws(a,l._instance,16),t(null,l._container),delete l._container.__vue_app__)},provide(u,d){return i.provides[u]=d,l},runWithContext(u){const d=ya;ya=l;try{return u()}finally{ya=d}}};return l}}let ya=null;function ou(t,e){if(dn){let n=dn.provides;const r=dn.parent&&dn.parent.provides;r===n&&(n=dn.provides=Object.create(r)),n[t]=e}}function hn(t,e,n=!1){const r=dn||en;if(r||ya){const s=ya?ya._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&je(e)?e.call(r&&r.proxy):e}}function v3(){return!!(dn||en||ya)}const SS={},TS=()=>Object.create(SS),NS=t=>Object.getPrototypeOf(t)===SS;function E3(t,e,n,r=!1){const s={},i=TS();t.propsDefaults=Object.create(null),xS(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:JI(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function _3(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Qe(s),[c]=t.propsOptions;let l=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Np(t.emitsOptions,f))continue;const h=e[f];if(c)if(ot(i,f))h!==i[f]&&(i[f]=h,l=!0);else{const p=Vr(f);s[p]=wy(c,a,p,h,t,!1)}else h!==i[f]&&(i[f]=h,l=!0)}}}else{xS(t,e,s,i)&&(l=!0);let u;for(const d in a)(!e||!ot(e,d)&&((u=Uo(d))===d||!ot(e,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=wy(c,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!ot(e,d))&&(delete i[d],l=!0)}l&&_i(t.attrs,"set","")}function xS(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(tu(c))continue;const l=e[c];let u;s&&ot(s,u=Vr(c))?!i||!i.includes(u)?n[u]=l:(a||(a={}))[u]=l:Np(t.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(i){const c=Qe(n),l=a||Et;for(let u=0;u<i.length;u++){const d=i[u];n[d]=wy(s,c,d,l[d],t,!ot(l,d))}}return o}function wy(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ot(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&je(c)){const{propsDefaults:l}=s;if(n in l)r=l[n];else{const u=Ud(s);r=l[n]=c.call(null,e),u()}}else r=c;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Uo(n))&&(r=!0))}return r}const C3=new WeakMap;function PS(t,e,n=!1){const r=n?C3:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!je(t)){const u=d=>{c=!0;const[f,h]=PS(d,e,!0);rn(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!c)return pt(t)&&r.set(t,Nc),Nc;if($e(i))for(let u=0;u<i.length;u++){const d=Vr(i[u]);Av(d)&&(o[d]=Et)}else if(i)for(const u in i){const d=Vr(u);if(Av(d)){const f=i[u],h=o[d]=$e(f)||je(f)?{type:f}:rn({},f),p=h.type;let g=!1,m=!0;if($e(p))for(let y=0;y<p.length;++y){const b=p[y],w=je(b)&&b.name;if(w==="Boolean"){g=!0;break}else w==="String"&&(m=!1)}else g=je(p)&&p.name==="Boolean";h[0]=g,h[1]=m,(g||ot(h,"default"))&&a.push(d)}}const l=[o,a];return pt(t)&&r.set(t,l),l}function Av(t){return t[0]!=="$"&&!tu(t)}const OS=t=>t[0]==="_"||t==="$stable",Pw=t=>$e(t)?t.map(Ms):[Ms(t)],A3=(t,e,n)=>{if(e._n)return e;const r=oS((...s)=>Pw(e(...s)),n);return r._c=!1,r},RS=(t,e,n)=>{const r=t._ctx;for(const s in t){if(OS(s))continue;const i=t[s];if(je(i))e[s]=A3(s,i,r);else if(i!=null){const o=Pw(i);e[s]=()=>o}}},DS=(t,e)=>{const n=Pw(e);t.slots.default=()=>n},$S=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},I3=(t,e,n)=>{const r=t.slots=TS();if(t.vnode.shapeFlag&32){const s=e._;s?($S(r,e,n),n&&PI(r,"_",s,!0)):RS(e,r)}else e&&DS(t,e)},S3=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Et;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:$S(s,e,n):(i=!e.$stable,RS(e,s)),o=e}else e&&(DS(t,e),o={default:1});if(i)for(const a in s)!OS(a)&&o[a]==null&&delete s[a]},Fn=j3;function T3(t){return N3(t)}function N3(t,e){const n=wp();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Hr,insertStaticContent:p}=t,g=(L,M,z,X=null,te=null,ee=null,$=void 0,k=null,q=!!M.dynamicChildren)=>{if(L===M)return;L&&!ra(L,M)&&(X=K(L),J(L,te,ee,!0),L=null),M.patchFlag===-2&&(q=!1,M.dynamicChildren=null);const{type:Y,ref:we,shapeFlag:ne}=M;switch(Y){case kd:m(L,M,z,X);break;case qn:y(L,M,z,X);break;case Ng:L==null&&b(M,z,X,$);break;case kn:D(L,M,z,X,te,ee,$,k,q);break;default:ne&1?v(L,M,z,X,te,ee,$,k,q):ne&6?H(L,M,z,X,te,ee,$,k,q):(ne&64||ne&128)&&Y.process(L,M,z,X,te,ee,$,k,q,le)}we!=null&&te&&wh(we,L&&L.ref,ee,M||L,!M)},m=(L,M,z,X)=>{if(L==null)r(M.el=a(M.children),z,X);else{const te=M.el=L.el;M.children!==L.children&&l(te,M.children)}},y=(L,M,z,X)=>{L==null?r(M.el=c(M.children||""),z,X):M.el=L.el},b=(L,M,z,X)=>{[L.el,L.anchor]=p(L.children,M,z,X,L.el,L.anchor)},w=({el:L,anchor:M},z,X)=>{let te;for(;L&&L!==M;)te=f(L),r(L,z,X),L=te;r(M,z,X)},E=({el:L,anchor:M})=>{let z;for(;L&&L!==M;)z=f(L),s(L),L=z;s(M)},v=(L,M,z,X,te,ee,$,k,q)=>{M.type==="svg"?$="svg":M.type==="math"&&($="mathml"),L==null?_(M,z,X,te,ee,$,k,q):C(L,M,te,ee,$,k,q)},_=(L,M,z,X,te,ee,$,k)=>{let q,Y;const{props:we,shapeFlag:ne,transition:W,dirs:Z}=L;if(q=L.el=o(L.type,ee,we&&we.is,we),ne&8?u(q,L.children):ne&16&&N(L.children,q,null,X,te,Tg(L,ee),$,k),Z&&Wo(L,null,X,"created"),A(q,L,L.scopeId,$,X),we){for(const Me in we)Me!=="value"&&!tu(Me)&&i(q,Me,null,we[Me],ee,X);"value"in we&&i(q,"value",null,we.value,ee),(Y=we.onVnodeBeforeMount)&&Is(Y,X,L)}Z&&Wo(L,null,X,"beforeMount");const Se=x3(te,W);Se&&W.beforeEnter(q),r(q,M,z),((Y=we&&we.onVnodeMounted)||Se||Z)&&Fn(()=>{Y&&Is(Y,X,L),Se&&W.enter(q),Z&&Wo(L,null,X,"mounted")},te)},A=(L,M,z,X,te)=>{if(z&&h(L,z),X)for(let ee=0;ee<X.length;ee++)h(L,X[ee]);if(te){let ee=te.subTree;if(M===ee||MS(ee.type)&&(ee.ssContent===M||ee.ssFallback===M)){const $=te.vnode;A(L,$,$.scopeId,$.slotScopeIds,te.parent)}}},N=(L,M,z,X,te,ee,$,k,q=0)=>{for(let Y=q;Y<L.length;Y++){const we=L[Y]=k?io(L[Y]):Ms(L[Y]);g(null,we,M,z,X,te,ee,$,k)}},C=(L,M,z,X,te,ee,$)=>{const k=M.el=L.el;let{patchFlag:q,dynamicChildren:Y,dirs:we}=M;q|=L.patchFlag&16;const ne=L.props||Et,W=M.props||Et;let Z;if(z&&qo(z,!1),(Z=W.onVnodeBeforeUpdate)&&Is(Z,z,M,L),we&&Wo(M,L,z,"beforeUpdate"),z&&qo(z,!0),(ne.innerHTML&&W.innerHTML==null||ne.textContent&&W.textContent==null)&&u(k,""),Y?x(L.dynamicChildren,Y,k,z,X,Tg(M,te),ee):$||U(L,M,k,null,z,X,Tg(M,te),ee,!1),q>0){if(q&16)P(k,ne,W,z,te);else if(q&2&&ne.class!==W.class&&i(k,"class",null,W.class,te),q&4&&i(k,"style",ne.style,W.style,te),q&8){const Se=M.dynamicProps;for(let Me=0;Me<Se.length;Me++){const Ke=Se[Me],zt=ne[Ke],Mt=W[Ke];(Mt!==zt||Ke==="value")&&i(k,Ke,zt,Mt,te,z)}}q&1&&L.children!==M.children&&u(k,M.children)}else!$&&Y==null&&P(k,ne,W,z,te);((Z=W.onVnodeUpdated)||we)&&Fn(()=>{Z&&Is(Z,z,M,L),we&&Wo(M,L,z,"updated")},X)},x=(L,M,z,X,te,ee,$)=>{for(let k=0;k<M.length;k++){const q=L[k],Y=M[k],we=q.el&&(q.type===kn||!ra(q,Y)||q.shapeFlag&70)?d(q.el):z;g(q,Y,we,null,X,te,ee,$,!0)}},P=(L,M,z,X,te)=>{if(M!==z){if(M!==Et)for(const ee in M)!tu(ee)&&!(ee in z)&&i(L,ee,M[ee],null,te,X);for(const ee in z){if(tu(ee))continue;const $=z[ee],k=M[ee];$!==k&&ee!=="value"&&i(L,ee,k,$,te,X)}"value"in z&&i(L,"value",M.value,z.value,te)}},D=(L,M,z,X,te,ee,$,k,q)=>{const Y=M.el=L?L.el:a(""),we=M.anchor=L?L.anchor:a("");let{patchFlag:ne,dynamicChildren:W,slotScopeIds:Z}=M;Z&&(k=k?k.concat(Z):Z),L==null?(r(Y,z,X),r(we,z,X),N(M.children||[],z,we,te,ee,$,k,q)):ne>0&&ne&64&&W&&L.dynamicChildren?(x(L.dynamicChildren,W,z,te,ee,$,k),(M.key!=null||te&&M===te.subTree)&&Ow(L,M,!0)):U(L,M,z,we,te,ee,$,k,q)},H=(L,M,z,X,te,ee,$,k,q)=>{M.slotScopeIds=k,L==null?M.shapeFlag&512?te.ctx.activate(M,z,X,$,q):B(M,z,X,te,ee,$,q):I(L,M,q)},B=(L,M,z,X,te,ee,$)=>{const k=L.component=Y3(L,X,te);if(Ip(L)&&(k.ctx.renderer=le),Z3(k,!1,$),k.asyncDep){if(te&&te.registerDep(k,S,$),!L.el){const q=k.subTree=En(qn);y(null,q,M,z)}}else S(k,L,M,z,te,ee,$)},I=(L,M,z)=>{const X=M.component=L.component;if(B3(L,M,z))if(X.asyncDep&&!X.asyncResolved){O(X,M,z);return}else X.next=M,X.update();else M.el=L.el,X.vnode=M},S=(L,M,z,X,te,ee,$)=>{const k=()=>{if(L.isMounted){let{next:ne,bu:W,u:Z,parent:Se,vnode:Me}=L;{const es=kS(L);if(es){ne&&(ne.el=Me.el,O(L,ne,$)),es.asyncDep.then(()=>{L.isUnmounted||k()});return}}let Ke=ne,zt;qo(L,!1),ne?(ne.el=Me.el,O(L,ne,$)):ne=Me,W&&qf(W),(zt=ne.props&&ne.props.onVnodeBeforeUpdate)&&Is(zt,Se,ne,Me),qo(L,!0);const Mt=Sv(L),Pr=L.subTree;L.subTree=Mt,g(Pr,Mt,d(Pr.el),K(Pr),L,te,ee),ne.el=Mt.el,Ke===null&&F3(L,Mt.el),Z&&Fn(Z,te),(zt=ne.props&&ne.props.onVnodeUpdated)&&Fn(()=>Is(zt,Se,ne,Me),te)}else{let ne;const{el:W,props:Z}=M,{bm:Se,m:Me,parent:Ke,root:zt,type:Mt}=L,Pr=Oc(M);qo(L,!1),Se&&qf(Se),!Pr&&(ne=Z&&Z.onVnodeBeforeMount)&&Is(ne,Ke,M),qo(L,!0);{zt.ce&&zt.ce._injectChildStyle(Mt);const es=L.subTree=Sv(L);g(null,es,z,X,L,te,ee),M.el=es.el}if(Me&&Fn(Me,te),!Pr&&(ne=Z&&Z.onVnodeMounted)){const es=M;Fn(()=>Is(ne,Ke,es),te)}(M.shapeFlag&256||Ke&&Oc(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&L.a&&Fn(L.a,te),L.isMounted=!0,M=z=X=null}};L.scope.on();const q=L.effect=new LI(k);L.scope.off();const Y=L.update=q.run.bind(q),we=L.job=q.runIfDirty.bind(q);we.i=L,we.id=L.uid,q.scheduler=()=>Iw(we),qo(L,!0),Y()},O=(L,M,z)=>{M.component=L;const X=L.vnode.props;L.vnode=M,L.next=null,_3(L,M.props,X,z),S3(L,M.children,z),Lo(),pv(L),Mo()},U=(L,M,z,X,te,ee,$,k,q=!1)=>{const Y=L&&L.children,we=L?L.shapeFlag:0,ne=M.children,{patchFlag:W,shapeFlag:Z}=M;if(W>0){if(W&128){j(Y,ne,z,X,te,ee,$,k,q);return}else if(W&256){F(Y,ne,z,X,te,ee,$,k,q);return}}Z&8?(we&16&&he(Y,te,ee),ne!==Y&&u(z,ne)):we&16?Z&16?j(Y,ne,z,X,te,ee,$,k,q):he(Y,te,ee,!0):(we&8&&u(z,""),Z&16&&N(ne,z,X,te,ee,$,k,q))},F=(L,M,z,X,te,ee,$,k,q)=>{L=L||Nc,M=M||Nc;const Y=L.length,we=M.length,ne=Math.min(Y,we);let W;for(W=0;W<ne;W++){const Z=M[W]=q?io(M[W]):Ms(M[W]);g(L[W],Z,z,null,te,ee,$,k,q)}Y>we?he(L,te,ee,!0,!1,ne):N(M,z,X,te,ee,$,k,q,ne)},j=(L,M,z,X,te,ee,$,k,q)=>{let Y=0;const we=M.length;let ne=L.length-1,W=we-1;for(;Y<=ne&&Y<=W;){const Z=L[Y],Se=M[Y]=q?io(M[Y]):Ms(M[Y]);if(ra(Z,Se))g(Z,Se,z,null,te,ee,$,k,q);else break;Y++}for(;Y<=ne&&Y<=W;){const Z=L[ne],Se=M[W]=q?io(M[W]):Ms(M[W]);if(ra(Z,Se))g(Z,Se,z,null,te,ee,$,k,q);else break;ne--,W--}if(Y>ne){if(Y<=W){const Z=W+1,Se=Z<we?M[Z].el:X;for(;Y<=W;)g(null,M[Y]=q?io(M[Y]):Ms(M[Y]),z,Se,te,ee,$,k,q),Y++}}else if(Y>W)for(;Y<=ne;)J(L[Y],te,ee,!0),Y++;else{const Z=Y,Se=Y,Me=new Map;for(Y=Se;Y<=W;Y++){const pr=M[Y]=q?io(M[Y]):Ms(M[Y]);pr.key!=null&&Me.set(pr.key,Y)}let Ke,zt=0;const Mt=W-Se+1;let Pr=!1,es=0;const wl=new Array(Mt);for(Y=0;Y<Mt;Y++)wl[Y]=0;for(Y=Z;Y<=ne;Y++){const pr=L[Y];if(zt>=Mt){J(pr,te,ee,!0);continue}let As;if(pr.key!=null)As=Me.get(pr.key);else for(Ke=Se;Ke<=W;Ke++)if(wl[Ke-Se]===0&&ra(pr,M[Ke])){As=Ke;break}As===void 0?J(pr,te,ee,!0):(wl[As-Se]=Y+1,As>=es?es=As:Pr=!0,g(pr,M[As],z,null,te,ee,$,k,q),zt++)}const cv=Pr?P3(wl):Nc;for(Ke=cv.length-1,Y=Mt-1;Y>=0;Y--){const pr=Se+Y,As=M[pr],lv=pr+1<we?M[pr+1].el:X;wl[Y]===0?g(null,As,z,lv,te,ee,$,k,q):Pr&&(Ke<0||Y!==cv[Ke]?G(As,z,lv,2):Ke--)}}},G=(L,M,z,X,te=null)=>{const{el:ee,type:$,transition:k,children:q,shapeFlag:Y}=L;if(Y&6){G(L.component.subTree,M,z,X);return}if(Y&128){L.suspense.move(M,z,X);return}if(Y&64){$.move(L,M,z,le);return}if($===kn){r(ee,M,z);for(let ne=0;ne<q.length;ne++)G(q[ne],M,z,X);r(L.anchor,M,z);return}if($===Ng){w(L,M,z);return}if(X!==2&&Y&1&&k)if(X===0)k.beforeEnter(ee),r(ee,M,z),Fn(()=>k.enter(ee),te);else{const{leave:ne,delayLeave:W,afterLeave:Z}=k,Se=()=>r(ee,M,z),Me=()=>{ne(ee,()=>{Se(),Z&&Z()})};W?W(ee,Se,Me):Me()}else r(ee,M,z)},J=(L,M,z,X=!1,te=!1)=>{const{type:ee,props:$,ref:k,children:q,dynamicChildren:Y,shapeFlag:we,patchFlag:ne,dirs:W,cacheIndex:Z}=L;if(ne===-2&&(te=!1),k!=null&&wh(k,null,z,L,!0),Z!=null&&(M.renderCache[Z]=void 0),we&256){M.ctx.deactivate(L);return}const Se=we&1&&W,Me=!Oc(L);let Ke;if(Me&&(Ke=$&&$.onVnodeBeforeUnmount)&&Is(Ke,M,L),we&6)de(L.component,z,X);else{if(we&128){L.suspense.unmount(z,X);return}Se&&Wo(L,null,M,"beforeUnmount"),we&64?L.type.remove(L,M,z,le,X):Y&&!Y.hasOnce&&(ee!==kn||ne>0&&ne&64)?he(Y,M,z,!1,!0):(ee===kn&&ne&384||!te&&we&16)&&he(q,M,z),X&&oe(L)}(Me&&(Ke=$&&$.onVnodeUnmounted)||Se)&&Fn(()=>{Ke&&Is(Ke,M,L),Se&&Wo(L,null,M,"unmounted")},z)},oe=L=>{const{type:M,el:z,anchor:X,transition:te}=L;if(M===kn){se(z,X);return}if(M===Ng){E(L);return}const ee=()=>{s(z),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(L.shapeFlag&1&&te&&!te.persisted){const{leave:$,delayLeave:k}=te,q=()=>$(z,ee);k?k(L.el,ee,q):q()}else ee()},se=(L,M)=>{let z;for(;L!==M;)z=f(L),s(L),L=z;s(M)},de=(L,M,z)=>{const{bum:X,scope:te,job:ee,subTree:$,um:k,m:q,a:Y}=L;Iv(q),Iv(Y),X&&qf(X),te.stop(),ee&&(ee.flags|=8,J($,L,M,z)),k&&Fn(k,M),Fn(()=>{L.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},he=(L,M,z,X=!1,te=!1,ee=0)=>{for(let $=ee;$<L.length;$++)J(L[$],M,z,X,te)},K=L=>{if(L.shapeFlag&6)return K(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const M=f(L.anchor||L.el),z=M&&M[aS];return z?f(z):M};let ie=!1;const Q=(L,M,z)=>{L==null?M._vnode&&J(M._vnode,null,null,!0):g(M._vnode||null,L,M,null,null,null,z),M._vnode=L,ie||(ie=!0,pv(),rS(),ie=!1)},le={p:g,um:J,m:G,r:oe,mt:B,mc:N,pc:U,pbc:x,n:K,o:t};return{render:Q,hydrate:void 0,createApp:b3(Q)}}function Tg({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function qo({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function x3(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ow(t,e,n=!1){const r=t.children,s=e.children;if($e(r)&&$e(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=io(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Ow(o,a)),a.type===kd&&(a.el=o.el)}}function P3(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const l=t[r];if(l!==0){if(s=n[n.length-1],t[s]<l){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<l?i=a+1:o=a;l<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function kS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:kS(e)}function Iv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const O3=Symbol.for("v-scx"),R3=()=>hn(O3);function D3(t,e){return Rw(t,null,e)}function Ws(t,e,n){return Rw(t,e,n)}function Rw(t,e,n=Et){const{immediate:r,deep:s,flush:i,once:o}=n,a=rn({},n),c=e&&r||!e&&i!=="post";let l;if(Du){if(i==="sync"){const h=R3();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=Hr,h.resume=Hr,h.pause=Hr,h}}const u=dn;a.call=(h,p,g)=>ws(h,u,p,g);let d=!1;i==="post"?a.scheduler=h=>{Fn(h,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,p)=>{p?h():Iw(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=KR(t,e,a);return Du&&(l?l.push(f):c&&f()),f}function $3(t,e,n){const r=this.proxy,s=Lt(t)?t.includes(".")?US(r,t):()=>r[t]:t.bind(r,r);let i;je(e)?i=e:(i=e.handler,n=e);const o=Ud(this),a=Rw(s,i.bind(r),n);return o(),a}function US(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const k3=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vr(e)}Modifiers`]||t[`${Uo(e)}Modifiers`];function U3(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Et;let s=n;const i=e.startsWith("update:"),o=i&&k3(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>Lt(u)?u.trim():u)),o.number&&(s=n.map(uR)));let a,c=r[a=vg(e)]||r[a=vg(Vr(e))];!c&&i&&(c=r[a=vg(Uo(e))]),c&&ws(c,t,6,s);const l=r[a+"Once"];if(l){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ws(l,t,6,s)}}function LS(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!je(t)){const c=l=>{const u=LS(l,e,!0);u&&(a=!0,rn(o,u))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(pt(t)&&r.set(t,null),null):($e(i)?i.forEach(c=>o[c]=null):rn(o,i),pt(t)&&r.set(t,o),o)}function Np(t,e){return!t||!pp(e)?!1:(e=e.slice(2).replace(/Once$/,""),ot(t,e[0].toLowerCase()+e.slice(1))||ot(t,Uo(e))||ot(t,e))}function Sv(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:d,data:f,setupState:h,ctx:p,inheritAttrs:g}=t,m=yh(t);let y,b;try{if(n.shapeFlag&4){const E=s||r,v=E;y=Ms(l.call(v,E,u,d,h,f,p)),b=a}else{const E=e;y=Ms(E.length>1?E(d,{attrs:a,slots:o,emit:c}):E(d,null)),b=e.props?a:L3(a)}}catch(E){au.length=0,Cp(E,t,1),y=En(qn)}let w=y;if(b&&g!==!1){const E=Object.keys(b),{shapeFlag:v}=w;E.length&&v&7&&(i&&E.some(uw)&&(b=M3(b,i)),w=No(w,b,!1,!0))}return n.dirs&&(w=No(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&_a(w,n.transition),y=w,yh(m),y}const L3=t=>{let e;for(const n in t)(n==="class"||n==="style"||pp(n))&&((e||(e={}))[n]=t[n]);return e},M3=(t,e)=>{const n={};for(const r in t)(!uw(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function B3(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,l=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Tv(r,o,l):!!o;if(c&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!Np(l,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Tv(r,o,l):!0:!!o;return!1}function Tv(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Np(n,i))return!0}return!1}function F3({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const MS=t=>t.__isSuspense;function j3(t,e){e&&e.pendingBranch?$e(t)?e.effects.push(...t):e.effects.push(t):ZR(t)}const kn=Symbol.for("v-fgt"),kd=Symbol.for("v-txt"),qn=Symbol.for("v-cmt"),Ng=Symbol.for("v-stc"),au=[];let Er=null;function vh(t=!1){au.push(Er=t?null:[])}function H3(){au.pop(),Er=au[au.length-1]||null}let Ou=1;function Nv(t,e=!1){Ou+=t,t<0&&Er&&e&&(Er.hasOnce=!0)}function BS(t){return t.dynamicChildren=Ou>0?Er||Nc:null,H3(),Ou>0&&Er&&Er.push(t),t}function nae(t,e,n,r,s,i){return BS(jS(t,e,n,r,s,i,!0))}function Eh(t,e,n,r,s){return BS(En(t,e,n,r,s,!0))}function Ru(t){return t?t.__v_isVNode===!0:!1}function ra(t,e){return t.type===e.type&&t.key===e.key}const FS=({key:t})=>t??null,Vf=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Lt(t)||Ut(t)||je(t)?{i:en,r:t,k:e,f:!!n}:t:null);function jS(t,e=null,n=null,r=0,s=null,i=t===kn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&FS(e),ref:e&&Vf(e),scopeId:iS,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:en};return a?(Dw(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Lt(n)?8:16),Ou>0&&!o&&Er&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Er.push(c),c}const En=W3;function W3(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===vS)&&(t=qn),Ru(t)){const a=No(t,e,!0);return n&&Dw(a,n),Ou>0&&!i&&Er&&(a.shapeFlag&6?Er[Er.indexOf(t)]=a:Er.push(a)),a.patchFlag=-2,a}if(e5(t)&&(t=t.__vccOpts),e){e=q3(e);let{class:a,style:c}=e;a&&!Lt(a)&&(e.class=pw(a)),pt(c)&&(Cw(c)&&!$e(c)&&(c=rn({},c)),e.style=hw(c))}const o=Lt(t)?1:MS(t)?128:cS(t)?64:pt(t)?4:je(t)?2:0;return jS(t,e,n,r,s,o,i,!0)}function q3(t){return t?Cw(t)||NS(t)?rn({},t):t:null}function No(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:c}=t,l=e?V3(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&FS(l),ref:e&&e.ref?n&&i?$e(i)?i.concat(Vf(e)):[i,Vf(e)]:Vf(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==kn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&No(t.ssContent),ssFallback:t.ssFallback&&No(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&_a(u,c.clone(u)),u}function z3(t=" ",e=0){return En(kd,null,t,e)}function rae(t="",e=!1){return e?(vh(),Eh(qn,null,t)):En(qn,null,t)}function Ms(t){return t==null||typeof t=="boolean"?En(qn):$e(t)?En(kn,null,t.slice()):Ru(t)?io(t):En(kd,null,String(t))}function io(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:No(t)}function Dw(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if($e(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Dw(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!NS(e)?e._ctx=en:s===3&&en&&(en.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else je(e)?(e={default:e,_ctx:en},n=32):(e=String(e),r&64?(n=16,e=[z3(e)]):n=8);t.children=e,t.shapeFlag|=n}function V3(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=pw([e.class,r.class]));else if(s==="style")e.style=hw([e.style,r.style]);else if(pp(s)){const i=e[s],o=r[s];o&&i!==o&&!($e(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Is(t,e,n,r=null){ws(t,e,7,[n,r])}const K3=IS();let G3=0;function Y3(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||K3,i={uid:G3++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new kI(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:PS(r,s),emitsOptions:LS(r,s),emit:null,emitted:null,propsDefaults:Et,inheritAttrs:r.inheritAttrs,ctx:Et,data:Et,props:Et,attrs:Et,slots:Et,refs:Et,setupState:Et,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=U3.bind(null,i),t.ce&&t.ce(i),i}let dn=null;const Ar=()=>dn||en;let _h,by;{const t=wp(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};_h=e("__VUE_INSTANCE_SETTERS__",n=>dn=n),by=e("__VUE_SSR_SETTERS__",n=>Du=n)}const Ud=t=>{const e=dn;return _h(t),t.scope.on(),()=>{t.scope.off(),_h(e)}},xv=()=>{dn&&dn.scope.off(),_h(null)};function HS(t){return t.vnode.shapeFlag&4}let Du=!1;function Z3(t,e=!1,n=!1){e&&by(e);const{props:r,children:s}=t.vnode,i=HS(t);E3(t,r,i,e),I3(t,s,n);const o=i?J3(t,e):void 0;return e&&by(!1),o}function J3(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,f3);const{setup:r}=n;if(r){Lo();const s=t.setupContext=r.length>1?qS(t):null,i=Ud(t),o=$d(r,t,0,[t.props,s]),a=TI(o);if(Mo(),i(),(a||t.sp)&&!Oc(t)&&mS(t),a){if(o.then(xv,xv),e)return o.then(c=>{Pv(t,c)}).catch(c=>{Cp(c,t,0)});t.asyncDep=o}else Pv(t,o)}else WS(t)}function Pv(t,e,n){je(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:pt(e)&&(t.setupState=QI(e)),WS(t)}function WS(t,e,n){const r=t.type;t.render||(t.render=r.render||Hr);{const s=Ud(t);Lo();try{h3(t)}finally{Mo(),s()}}}const X3={get(t,e){return Dn(t,"get",""),t[e]}};function qS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,X3),slots:t.slots,emit:t.emit,expose:e}}function xp(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(QI(Aw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in iu)return iu[n](t)},has(e,n){return n in e||n in iu}})):t.proxy}function Q3(t,e=!0){return je(t)?t.displayName||t.name:t.name||e&&t.__name}function e5(t){return je(t)&&"__vccOpts"in t}const Je=(t,e)=>zR(t,e,Du);function Ld(t,e,n){const r=arguments.length;return r===2?pt(e)&&!$e(e)?Ru(e)?En(t,null,[e]):En(t,e):En(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ru(n)&&(n=[n]),En(t,e,n))}const t5="3.5.13",n5=Hr;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vy;const Ov=typeof window<"u"&&window.trustedTypes;if(Ov)try{vy=Ov.createPolicy("vue",{createHTML:t=>t})}catch{}const zS=vy?t=>vy.createHTML(t):t=>t,r5="http://www.w3.org/2000/svg",s5="http://www.w3.org/1998/Math/MathML",bi=typeof document<"u"?document:null,Rv=bi&&bi.createElement("template"),i5={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?bi.createElementNS(r5,t):e==="mathml"?bi.createElementNS(s5,t):n?bi.createElement(t,{is:n}):bi.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>bi.createTextNode(t),createComment:t=>bi.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>bi.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Rv.innerHTML=zS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Rv.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Li="transition",vl="animation",Lc=Symbol("_vtc"),VS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},KS=rn({},fS,VS),o5=t=>(t.displayName="Transition",t.props=KS,t),sae=o5((t,{slots:e})=>Ld(QR,GS(t),e)),zo=(t,e=[])=>{$e(t)?t.forEach(n=>n(...e)):t&&t(...e)},Dv=t=>t?$e(t)?t.some(e=>e.length>1):t.length>1:!1;function GS(t){const e={};for(const D in t)D in VS||(e[D]=t[D]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,p=a5(s),g=p&&p[0],m=p&&p[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:E,onLeaveCancelled:v,onBeforeAppear:_=y,onAppear:A=b,onAppearCancelled:N=w}=e,C=(D,H,B,I)=>{D._enterCancelled=I,to(D,H?u:a),to(D,H?l:o),B&&B()},x=(D,H)=>{D._isLeaving=!1,to(D,d),to(D,h),to(D,f),H&&H()},P=D=>(H,B)=>{const I=D?A:b,S=()=>C(H,D,B);zo(I,[H,S]),$v(()=>{to(H,D?c:i),Ds(H,D?u:a),Dv(I)||kv(H,r,g,S)})};return rn(e,{onBeforeEnter(D){zo(y,[D]),Ds(D,i),Ds(D,o)},onBeforeAppear(D){zo(_,[D]),Ds(D,c),Ds(D,l)},onEnter:P(!1),onAppear:P(!0),onLeave(D,H){D._isLeaving=!0;const B=()=>x(D,H);Ds(D,d),D._enterCancelled?(Ds(D,f),Ey()):(Ey(),Ds(D,f)),$v(()=>{D._isLeaving&&(to(D,d),Ds(D,h),Dv(E)||kv(D,r,m,B))}),zo(E,[D,B])},onEnterCancelled(D){C(D,!1,void 0,!0),zo(w,[D])},onAppearCancelled(D){C(D,!0,void 0,!0),zo(N,[D])},onLeaveCancelled(D){x(D),zo(v,[D])}})}function a5(t){if(t==null)return null;if(pt(t))return[xg(t.enter),xg(t.leave)];{const e=xg(t);return[e,e]}}function xg(t){return dR(t)}function Ds(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Lc]||(t[Lc]=new Set)).add(e)}function to(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Lc];n&&(n.delete(e),n.size||(t[Lc]=void 0))}function $v(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let c5=0;function kv(t,e,n,r){const s=t._endId=++c5,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:c}=YS(t,e);if(!o)return r();const l=o+"end";let u=0;const d=()=>{t.removeEventListener(l,f),i()},f=h=>{h.target===t&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),t.addEventListener(l,f)}function YS(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),s=r(`${Li}Delay`),i=r(`${Li}Duration`),o=Uv(s,i),a=r(`${vl}Delay`),c=r(`${vl}Duration`),l=Uv(a,c);let u=null,d=0,f=0;e===Li?o>0&&(u=Li,d=o,f=i.length):e===vl?l>0&&(u=vl,d=l,f=c.length):(d=Math.max(o,l),u=d>0?o>l?Li:vl:null,f=u?u===Li?i.length:c.length:0);const h=u===Li&&/\b(transform|all)(,|$)/.test(r(`${Li}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function Uv(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Lv(n)+Lv(t[r])))}function Lv(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ey(){return document.body.offsetHeight}function l5(t,e,n){const r=t[Lc];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ch=Symbol("_vod"),ZS=Symbol("_vsh"),iae={beforeMount(t,{value:e},{transition:n}){t[Ch]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):El(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),El(t,!0),r.enter(t)):r.leave(t,()=>{El(t,!1)}):El(t,e))},beforeUnmount(t,{value:e}){El(t,e)}};function El(t,e){t.style.display=e?t[Ch]:"none",t[ZS]=!e}const u5=Symbol(""),d5=/(^|;)\s*display\s*:/;function f5(t,e,n){const r=t.style,s=Lt(n);let i=!1;if(n&&!s){if(e)if(Lt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Kf(r,a,"")}else for(const o in e)n[o]==null&&Kf(r,o,"");for(const o in n)o==="display"&&(i=!0),Kf(r,o,n[o])}else if(s){if(e!==n){const o=r[u5];o&&(n+=";"+o),r.cssText=n,i=d5.test(n)}}else e&&t.removeAttribute("style");Ch in t&&(t[Ch]=i?r.display:"",t[ZS]&&(r.display="none"))}const Mv=/\s*!important$/;function Kf(t,e,n){if($e(n))n.forEach(r=>Kf(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=h5(t,e);Mv.test(n)?t.setProperty(Uo(r),n.replace(Mv,""),"important"):t[r]=n}}const Bv=["Webkit","Moz","ms"],Pg={};function h5(t,e){const n=Pg[e];if(n)return n;let r=Vr(e);if(r!=="filter"&&r in t)return Pg[e]=r;r=yp(r);for(let s=0;s<Bv.length;s++){const i=Bv[s]+r;if(i in t)return Pg[e]=i}return e}const Fv="http://www.w3.org/1999/xlink";function jv(t,e,n,r,s,i=yR(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Fv,e.slice(6,e.length)):t.setAttributeNS(Fv,e,n):n==null||i&&!OI(n)?t.removeAttribute(e):t.setAttribute(e,i?"":ys(n)?String(n):n)}function Hv(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?zS(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=OI(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function JS(t,e,n,r){t.addEventListener(e,n,r)}function p5(t,e,n,r){t.removeEventListener(e,n,r)}const Wv=Symbol("_vei");function g5(t,e,n,r,s=null){const i=t[Wv]||(t[Wv]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=m5(e);if(r){const l=i[e]=b5(r,s);JS(t,a,l,c)}else o&&(p5(t,a,o,c),i[e]=void 0)}}const qv=/(?:Once|Passive|Capture)$/;function m5(t){let e;if(qv.test(t)){e={};let r;for(;r=t.match(qv);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Uo(t.slice(2)),e]}let Og=0;const y5=Promise.resolve(),w5=()=>Og||(y5.then(()=>Og=0),Og=Date.now());function b5(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ws(v5(r,n.value),e,5,[r])};return n.value=t,n.attached=w5(),n}function v5(t,e){if($e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const zv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,E5=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?l5(t,r,o):e==="style"?f5(t,n,r):pp(e)?uw(e)||g5(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_5(t,e,r,o))?(Hv(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&jv(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Lt(r))?Hv(t,Vr(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),jv(t,e,r,o))};function _5(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&zv(e)&&je(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return zv(e)&&Lt(n)?!1:e in t}const XS=new WeakMap,QS=new WeakMap,Ah=Symbol("_moveCb"),Vv=Symbol("_enterCb"),C5=t=>(delete t.props.mode,t),A5=C5({name:"TransitionGroup",props:rn({},KS,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ar(),r=dS();let s,i;return wS(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!N5(s[0].el,n.vnode.el,o))return;s.forEach(I5),s.forEach(S5);const a=s.filter(T5);Ey(),a.forEach(c=>{const l=c.el,u=l.style;Ds(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=l[Ah]=f=>{f&&f.target!==l||(!f||/transform$/.test(f.propertyName))&&(l.removeEventListener("transitionend",d),l[Ah]=null,to(l,o))};l.addEventListener("transitionend",d)})}),()=>{const o=Qe(t),a=GS(o);let c=o.tag||kn;if(s=[],i)for(let l=0;l<i.length;l++){const u=i[l];u.el&&u.el instanceof Element&&(s.push(u),_a(u,Pu(u,a,r,n)),XS.set(u,u.el.getBoundingClientRect()))}i=e.default?Sw(e.default()):[];for(let l=0;l<i.length;l++){const u=i[l];u.key!=null&&_a(u,Pu(u,a,r,n))}return En(c,null,i)}}}),oae=A5;function I5(t){const e=t.el;e[Ah]&&e[Ah](),e[Vv]&&e[Vv]()}function S5(t){QS.set(t,t.el.getBoundingClientRect())}function T5(t){const e=XS.get(t),n=QS.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function N5(t,e,n){const r=t.cloneNode(),s=t[Lc];s&&s.forEach(a=>{a.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=YS(r);return i.removeChild(r),o}const Kv=t=>{const e=t.props["onUpdate:modelValue"]||!1;return $e(e)?n=>qf(e,n):e},Rg=Symbol("_assign"),aae={deep:!0,created(t,e,n){t[Rg]=Kv(n),JS(t,"change",()=>{const r=t._modelValue,s=x5(t),i=t.checked,o=t[Rg];if($e(r)){const a=RI(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const l=[...r];l.splice(a,1),o(l)}}else if(gp(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(eT(t,i))})},mounted:Gv,beforeUpdate(t,e,n){t[Rg]=Kv(n),Gv(t,e,n)}};function Gv(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if($e(e))s=RI(e,r.props.value)>-1;else if(gp(e))s=e.has(r.props.value);else{if(e===n)return;s=bp(e,eT(t,!0))}t.checked!==s&&(t.checked=s)}function x5(t){return"_value"in t?t._value:t.value}function eT(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const P5=["ctrl","shift","alt","meta"],O5={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>P5.some(n=>t[`${n}Key`]&&!e.includes(n))},cae=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=O5[e[o]];if(a&&a(s,e))return}return t(s,...i)})},R5={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},lae=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=Uo(s.key);if(e.some(o=>o===i||R5[o]===i))return t(s)})},D5=rn({patchProp:E5},i5);let Yv;function tT(){return Yv||(Yv=T3(D5))}const uae=(...t)=>{tT().render(...t)},$5=(...t)=>{const e=tT().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=U5(r);if(!s)return;const i=e._component;!je(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,k5(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function k5(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function U5(t){return Lt(t)?document.querySelector(t):t}const nT=Symbol(),Gf="el",L5="is-",Vo=(t,e,n,r,s)=>{let i=`${t}-${e}`;return n&&(i+=`-${n}`),r&&(i+=`__${r}`),s&&(i+=`--${s}`),i},rT=Symbol("namespaceContextKey"),M5=t=>{const e=t||(Ar()?hn(rT,Cr(Gf)):Cr(Gf));return Je(()=>zn(e)||Gf)},B5=(t,e)=>{const n=M5(e);return{namespace:n,b:(g="")=>Vo(n.value,t,g,"",""),e:g=>g?Vo(n.value,t,"",g,""):"",m:g=>g?Vo(n.value,t,"","",g):"",be:(g,m)=>g&&m?Vo(n.value,t,g,m,""):"",em:(g,m)=>g&&m?Vo(n.value,t,"",g,m):"",bm:(g,m)=>g&&m?Vo(n.value,t,g,"",m):"",bem:(g,m,y)=>g&&m&&y?Vo(n.value,t,g,m,y):"",is:(g,...m)=>{const y=m.length>=1?m[0]:!0;return g&&y?`${L5}${g}`:""},cssVar:g=>{const m={};for(const y in g)g[y]&&(m[`--${n.value}-${y}`]=g[y]);return m},cssVarName:g=>`--${n.value}-${g}`,cssVarBlock:g=>{const m={};for(const y in g)g[y]&&(m[`--${n.value}-${t}-${y}`]=g[y]);return m},cssVarBlockName:g=>`--${n.value}-${t}-${g}`}};var F5=typeof global=="object"&&global&&global.Object===Object&&global,j5=typeof self=="object"&&self&&self.Object===Object&&self,$w=F5||j5||Function("return this")(),Mc=$w.Symbol,sT=Object.prototype,H5=sT.hasOwnProperty,W5=sT.toString,_l=Mc?Mc.toStringTag:void 0;function q5(t){var e=H5.call(t,_l),n=t[_l];try{t[_l]=void 0;var r=!0}catch{}var s=W5.call(t);return r&&(e?t[_l]=n:delete t[_l]),s}var z5=Object.prototype,V5=z5.toString;function K5(t){return V5.call(t)}var G5="[object Null]",Y5="[object Undefined]",Zv=Mc?Mc.toStringTag:void 0;function iT(t){return t==null?t===void 0?Y5:G5:Zv&&Zv in Object(t)?q5(t):K5(t)}function Z5(t){return t!=null&&typeof t=="object"}var J5="[object Symbol]";function kw(t){return typeof t=="symbol"||Z5(t)&&iT(t)==J5}function X5(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var Uw=Array.isArray,Jv=Mc?Mc.prototype:void 0,Xv=Jv?Jv.toString:void 0;function oT(t){if(typeof t=="string")return t;if(Uw(t))return X5(t,oT)+"";if(kw(t))return Xv?Xv.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Ih(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Q5="[object AsyncFunction]",eD="[object Function]",tD="[object GeneratorFunction]",nD="[object Proxy]";function rD(t){if(!Ih(t))return!1;var e=iT(t);return e==eD||e==tD||e==Q5||e==nD}var Dg=$w["__core-js_shared__"],Qv=function(){var t=/[^.]+$/.exec(Dg&&Dg.keys&&Dg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function sD(t){return!!Qv&&Qv in t}var iD=Function.prototype,oD=iD.toString;function aD(t){if(t!=null){try{return oD.call(t)}catch{}try{return t+""}catch{}}return""}var cD=/[\\^$.*+?()[\]{}|]/g,lD=/^\[object .+?Constructor\]$/,uD=Function.prototype,dD=Object.prototype,fD=uD.toString,hD=dD.hasOwnProperty,pD=RegExp("^"+fD.call(hD).replace(cD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gD(t){if(!Ih(t)||sD(t))return!1;var e=rD(t)?pD:lD;return e.test(aD(t))}function mD(t,e){return t==null?void 0:t[e]}function Lw(t,e){var n=mD(t,e);return gD(n)?n:void 0}var eE=function(){try{var t=Lw(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yD=9007199254740991,wD=/^(?:0|[1-9]\d*)$/;function bD(t,e){var n=typeof t;return e=e??yD,!!e&&(n=="number"||n!="symbol"&&wD.test(t))&&t>-1&&t%1==0&&t<e}function vD(t,e,n){e=="__proto__"&&eE?eE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function aT(t,e){return t===e||t!==t&&e!==e}var ED=Object.prototype,_D=ED.hasOwnProperty;function CD(t,e,n){var r=t[e];(!(_D.call(t,e)&&aT(r,n))||n===void 0&&!(e in t))&&vD(t,e,n)}var AD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ID=/^\w*$/;function SD(t,e){if(Uw(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||kw(t)?!0:ID.test(t)||!AD.test(t)||e!=null&&t in Object(e)}var $u=Lw(Object,"create");function TD(){this.__data__=$u?$u(null):{},this.size=0}function ND(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var xD="__lodash_hash_undefined__",PD=Object.prototype,OD=PD.hasOwnProperty;function RD(t){var e=this.__data__;if($u){var n=e[t];return n===xD?void 0:n}return OD.call(e,t)?e[t]:void 0}var DD=Object.prototype,$D=DD.hasOwnProperty;function kD(t){var e=this.__data__;return $u?e[t]!==void 0:$D.call(e,t)}var UD="__lodash_hash_undefined__";function LD(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=$u&&e===void 0?UD:e,this}function Ca(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ca.prototype.clear=TD;Ca.prototype.delete=ND;Ca.prototype.get=RD;Ca.prototype.has=kD;Ca.prototype.set=LD;function MD(){this.__data__=[],this.size=0}function Pp(t,e){for(var n=t.length;n--;)if(aT(t[n][0],e))return n;return-1}var BD=Array.prototype,FD=BD.splice;function jD(t){var e=this.__data__,n=Pp(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():FD.call(e,n,1),--this.size,!0}function HD(t){var e=this.__data__,n=Pp(e,t);return n<0?void 0:e[n][1]}function WD(t){return Pp(this.__data__,t)>-1}function qD(t,e){var n=this.__data__,r=Pp(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function nl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}nl.prototype.clear=MD;nl.prototype.delete=jD;nl.prototype.get=HD;nl.prototype.has=WD;nl.prototype.set=qD;var zD=Lw($w,"Map");function VD(){this.size=0,this.__data__={hash:new Ca,map:new(zD||nl),string:new Ca}}function KD(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Op(t,e){var n=t.__data__;return KD(e)?n[typeof e=="string"?"string":"hash"]:n.map}function GD(t){var e=Op(this,t).delete(t);return this.size-=e?1:0,e}function YD(t){return Op(this,t).get(t)}function ZD(t){return Op(this,t).has(t)}function JD(t,e){var n=Op(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Ba(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ba.prototype.clear=VD;Ba.prototype.delete=GD;Ba.prototype.get=YD;Ba.prototype.has=ZD;Ba.prototype.set=JD;var XD="Expected a function";function Mw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(XD);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(Mw.Cache||Ba),n}Mw.Cache=Ba;var QD=500;function e6(t){var e=Mw(t,function(r){return n.size===QD&&n.clear(),r}),n=e.cache;return e}var t6=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n6=/\\(\\)?/g,r6=e6(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(t6,function(n,r,s,i){e.push(s?i.replace(n6,"$1"):r||n)}),e});function s6(t){return t==null?"":oT(t)}function cT(t,e){return Uw(t)?t:SD(t,e)?[t]:r6(s6(t))}function lT(t){if(typeof t=="string"||kw(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function i6(t,e){e=cT(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[lT(e[n++])];return n&&n==r?t:void 0}function uT(t,e,n){var r=t==null?void 0:i6(t,e);return r===void 0?n:r}function o6(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var s=t[e];r[s[0]]=s[1]}return r}function a6(t){return t==null}function c6(t,e,n,r){if(!Ih(t))return t;e=cT(e,t);for(var s=-1,i=e.length,o=i-1,a=t;a!=null&&++s<i;){var c=lT(e[s]),l=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(s!=o){var u=a[c];l=void 0,l===void 0&&(l=Ih(u)?u:bD(e[s+1])?[]:{})}CD(a,c,l),a=a[c]}return t}function l6(t,e,n){return t==null?t:c6(t,e,n)}const dae=t=>t===void 0,fae=t=>typeof t=="boolean",u6=t=>typeof t=="number",hae=t=>typeof Element>"u"?!1:t instanceof Element,pae=t=>a6(t),gae=t=>Lt(t)?!Number.isNaN(Number(t)):!1;var d6=Object.defineProperty,f6=Object.defineProperties,h6=Object.getOwnPropertyDescriptors,tE=Object.getOwnPropertySymbols,p6=Object.prototype.hasOwnProperty,g6=Object.prototype.propertyIsEnumerable,nE=(t,e,n)=>e in t?d6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m6=(t,e)=>{for(var n in e||(e={}))p6.call(e,n)&&nE(t,n,e[n]);if(tE)for(var n of tE(e))g6.call(e,n)&&nE(t,n,e[n]);return t},y6=(t,e)=>f6(t,h6(e));function mae(t,e){var n;const r=_p();return D3(()=>{r.value=t()},y6(m6({},e),{flush:(n=void 0)!=null?n:"sync"})),Ep(r)}var rE;const Bw=typeof window<"u",yae=t=>typeof t=="string",sE=()=>{},wae=Bw&&((rE=window==null?void 0:window.navigator)==null?void 0:rE.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function _y(t){return typeof t=="function"?t():zn(t)}function w6(t,e){function n(...r){return new Promise((s,i)=>{Promise.resolve(t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})).then(s).catch(i)})}return n}function b6(t,e={}){let n,r,s=sE;const i=a=>{clearTimeout(a),s(),s=sE};return a=>{const c=_y(t),l=_y(e.maxWait);return n&&i(n),c<=0||l!==void 0&&l<=0?(r&&(i(r),r=null),Promise.resolve(a())):new Promise((u,d)=>{s=e.rejectOnCancel?d:u,l&&!r&&(r=setTimeout(()=>{n&&i(n),r=null,u(a())},l)),n=setTimeout(()=>{r&&i(r),r=null,u(a())},c)})}}function bae(t){return t}function v6(t){return mw()?(UI(t),!0):!1}function E6(t,e=200,n={}){return w6(b6(e,n),t)}function vae(t,e=200,n={}){const r=Cr(t.value),s=E6(()=>{r.value=t.value},e,n);return Ws(t,()=>s()),r}function Eae(t,e=!0){Ar()?Tp(t):e?t():Ap(t)}function _ae(t,e,n={}){const{immediate:r=!0}=n,s=Cr(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function c(...l){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,t(...l)},_y(e))}return r&&(s.value=!0,Bw&&c()),v6(a),{isPending:Ep(s),start:c,stop:a}}const iE={current:0},oE=Cr(0),dT=2e3,aE=Symbol("elZIndexContextKey"),fT=Symbol("zIndexContextKey"),_6=t=>{const e=Ar()?hn(aE,iE):iE,n=t||(Ar()?hn(fT,void 0):void 0),r=Je(()=>{const o=zn(n);return u6(o)?o:dT}),s=Je(()=>r.value+oE.value),i=()=>(e.current++,oE.value=e.current,s.value);return!Bw&&hn(aE),{initialZIndex:r,currentZIndex:s,nextZIndex:i}};var C6={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const A6=t=>(e,n)=>I6(e,n,zn(t)),I6=(t,e,n)=>uT(n,t,t).replace(/\{(\w+)\}/g,(r,s)=>{var i;return`${(i=e==null?void 0:e[s])!=null?i:`{${s}}`}`}),S6=t=>{const e=Je(()=>zn(t).name),n=Ut(t)?t:Cr(t);return{lang:e,locale:n,t:A6(t)}},hT=Symbol("localeContextKey"),T6=t=>{const e=t||hn(hT,Cr());return S6(Je(()=>e.value||C6))},pT="__epPropKey",Cl=t=>t,N6=t=>pt(t)&&!!t[pT],gT=(t,e)=>{if(!pt(t)||N6(t))return t;const{values:n,required:r,default:s,type:i,validator:o}=t,c={type:i,required:!!r,validator:n||o?l=>{let u=!1,d=[];if(n&&(d=Array.from(n),ot(t,"default")&&d.push(s),u||(u=d.includes(l))),o&&(u||(u=o(l))),!u&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");n5(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(l)}.`)}return u}:void 0,[pT]:!0};return ot(t,"default")&&(c.default=s),c},mT=t=>o6(Object.entries(t).map(([e,n])=>[e,gT(n,e)])),x6=["","default","small","large"],P6=gT({type:String,values:x6,required:!1}),yT=Symbol("size"),Cae=()=>{const t=hn(yT,{});return Je(()=>zn(t.size)||"")},O6=Symbol("emptyValuesContextKey"),R6=mT({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:t=>je(t)?!t():!t}}),cE=t=>Object.keys(t),Aae=(t,e,n)=>({get value(){return uT(t,e,n)},set value(r){l6(t,e,r)}}),Sh=Cr();function wT(t,e=void 0){const n=Ar()?hn(nT,Sh):Sh;return t?Je(()=>{var r,s;return(s=(r=n.value)==null?void 0:r[t])!=null?s:e}):n}function Iae(t,e){const n=wT(),r=B5(t,Je(()=>{var a;return((a=n.value)==null?void 0:a.namespace)||Gf})),s=T6(Je(()=>{var a;return(a=n.value)==null?void 0:a.locale})),i=_6(Je(()=>{var a;return((a=n.value)==null?void 0:a.zIndex)||dT})),o=Je(()=>{var a;return zn(e)||((a=n.value)==null?void 0:a.size)||""});return bT(Je(()=>zn(n)||{})),{ns:r,locale:s,zIndex:i,size:o}}const bT=(t,e,n=!1)=>{var r;const s=!!Ar(),i=s?wT():void 0,o=(r=void 0)!=null?r:s?ou:void 0;if(!o)return;const a=Je(()=>{const c=zn(t);return i!=null&&i.value?D6(i.value,c):c});return o(nT,a),o(hT,Je(()=>a.value.locale)),o(rT,Je(()=>a.value.namespace)),o(fT,Je(()=>a.value.zIndex)),o(yT,{size:Je(()=>a.value.size||"")}),o(O6,Je(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(n||!Sh.value)&&(Sh.value=a.value),a},D6=(t,e)=>{const n=[...new Set([...cE(t),...cE(e)])],r={};for(const s of n)r[s]=e[s]!==void 0?e[s]:t[s];return r},$6=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},Sae=t=>(t.install=Hr,t);var Bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function k6(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Yf={exports:{}},U6=Yf.exports,lE;function vT(){return lE||(lE=1,function(t,e){(function(n,r){t.exports=r()})(U6,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",a="minute",c="hour",l="day",u="week",d="month",f="quarter",h="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var I=["th","st","nd","rd"],S=B%100;return"["+B+(I[(S-20)%10]||I[S]||I[0])+"]"}},w=function(B,I,S){var O=String(B);return!O||O.length>=I?B:""+Array(I+1-O.length).join(S)+B},E={s:w,z:function(B){var I=-B.utcOffset(),S=Math.abs(I),O=Math.floor(S/60),U=S%60;return(I<=0?"+":"-")+w(O,2,"0")+":"+w(U,2,"0")},m:function B(I,S){if(I.date()<S.date())return-B(S,I);var O=12*(S.year()-I.year())+(S.month()-I.month()),U=I.clone().add(O,d),F=S-U<0,j=I.clone().add(O+(F?-1:1),d);return+(-(O+(S-U)/(F?U-j:j-U))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:d,y:h,w:u,d:l,D:p,h:c,m:a,s:o,ms:i,Q:f}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},v="en",_={};_[v]=b;var A="$isDayjsObject",N=function(B){return B instanceof D||!(!B||!B[A])},C=function B(I,S,O){var U;if(!I)return v;if(typeof I=="string"){var F=I.toLowerCase();_[F]&&(U=F),S&&(_[F]=S,U=F);var j=I.split("-");if(!U&&j.length>1)return B(j[0])}else{var G=I.name;_[G]=I,U=G}return!O&&U&&(v=U),U||!O&&v},x=function(B,I){if(N(B))return B.clone();var S=typeof I=="object"?I:{};return S.date=B,S.args=arguments,new D(S)},P=E;P.l=C,P.i=N,P.w=function(B,I){return x(B,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var D=function(){function B(S){this.$L=C(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[A]=!0}var I=B.prototype;return I.parse=function(S){this.$d=function(O){var U=O.date,F=O.utc;if(U===null)return new Date(NaN);if(P.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var j=U.match(m);if(j){var G=j[2]-1||0,J=(j[7]||"0").substring(0,3);return F?new Date(Date.UTC(j[1],G,j[3]||1,j[4]||0,j[5]||0,j[6]||0,J)):new Date(j[1],G,j[3]||1,j[4]||0,j[5]||0,j[6]||0,J)}}return new Date(U)}(S),this.init()},I.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},I.$utils=function(){return P},I.isValid=function(){return this.$d.toString()!==g},I.isSame=function(S,O){var U=x(S);return this.startOf(O)<=U&&U<=this.endOf(O)},I.isAfter=function(S,O){return x(S)<this.startOf(O)},I.isBefore=function(S,O){return this.endOf(O)<x(S)},I.$g=function(S,O,U){return P.u(S)?this[O]:this.set(U,S)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(S,O){var U=this,F=!!P.u(O)||O,j=P.p(S),G=function(Q,le){var Oe=P.w(U.$u?Date.UTC(U.$y,le,Q):new Date(U.$y,le,Q),U);return F?Oe:Oe.endOf(l)},J=function(Q,le){return P.w(U.toDate()[Q].apply(U.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(le)),U)},oe=this.$W,se=this.$M,de=this.$D,he="set"+(this.$u?"UTC":"");switch(j){case h:return F?G(1,0):G(31,11);case d:return F?G(1,se):G(0,se+1);case u:var K=this.$locale().weekStart||0,ie=(oe<K?oe+7:oe)-K;return G(F?de-ie:de+(6-ie),se);case l:case p:return J(he+"Hours",0);case c:return J(he+"Minutes",1);case a:return J(he+"Seconds",2);case o:return J(he+"Milliseconds",3);default:return this.clone()}},I.endOf=function(S){return this.startOf(S,!1)},I.$set=function(S,O){var U,F=P.p(S),j="set"+(this.$u?"UTC":""),G=(U={},U[l]=j+"Date",U[p]=j+"Date",U[d]=j+"Month",U[h]=j+"FullYear",U[c]=j+"Hours",U[a]=j+"Minutes",U[o]=j+"Seconds",U[i]=j+"Milliseconds",U)[F],J=F===l?this.$D+(O-this.$W):O;if(F===d||F===h){var oe=this.clone().set(p,1);oe.$d[G](J),oe.init(),this.$d=oe.set(p,Math.min(this.$D,oe.daysInMonth())).$d}else G&&this.$d[G](J);return this.init(),this},I.set=function(S,O){return this.clone().$set(S,O)},I.get=function(S){return this[P.p(S)]()},I.add=function(S,O){var U,F=this;S=Number(S);var j=P.p(O),G=function(se){var de=x(F);return P.w(de.date(de.date()+Math.round(se*S)),F)};if(j===d)return this.set(d,this.$M+S);if(j===h)return this.set(h,this.$y+S);if(j===l)return G(1);if(j===u)return G(7);var J=(U={},U[a]=r,U[c]=s,U[o]=n,U)[j]||1,oe=this.$d.getTime()+S*J;return P.w(oe,this)},I.subtract=function(S,O){return this.add(-1*S,O)},I.format=function(S){var O=this,U=this.$locale();if(!this.isValid())return U.invalidDate||g;var F=S||"YYYY-MM-DDTHH:mm:ssZ",j=P.z(this),G=this.$H,J=this.$m,oe=this.$M,se=U.weekdays,de=U.months,he=U.meridiem,K=function(le,Oe,L,M){return le&&(le[Oe]||le(O,F))||L[Oe].slice(0,M)},ie=function(le){return P.s(G%12||12,le,"0")},Q=he||function(le,Oe,L){var M=le<12?"AM":"PM";return L?M.toLowerCase():M};return F.replace(y,function(le,Oe){return Oe||function(L){switch(L){case"YY":return String(O.$y).slice(-2);case"YYYY":return P.s(O.$y,4,"0");case"M":return oe+1;case"MM":return P.s(oe+1,2,"0");case"MMM":return K(U.monthsShort,oe,de,3);case"MMMM":return K(de,oe);case"D":return O.$D;case"DD":return P.s(O.$D,2,"0");case"d":return String(O.$W);case"dd":return K(U.weekdaysMin,O.$W,se,2);case"ddd":return K(U.weekdaysShort,O.$W,se,3);case"dddd":return se[O.$W];case"H":return String(G);case"HH":return P.s(G,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return Q(G,J,!0);case"A":return Q(G,J,!1);case"m":return String(J);case"mm":return P.s(J,2,"0");case"s":return String(O.$s);case"ss":return P.s(O.$s,2,"0");case"SSS":return P.s(O.$ms,3,"0");case"Z":return j}return null}(le)||j.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(S,O,U){var F,j=this,G=P.p(O),J=x(S),oe=(J.utcOffset()-this.utcOffset())*r,se=this-J,de=function(){return P.m(j,J)};switch(G){case h:F=de()/12;break;case d:F=de();break;case f:F=de()/3;break;case u:F=(se-oe)/6048e5;break;case l:F=(se-oe)/864e5;break;case c:F=se/s;break;case a:F=se/r;break;case o:F=se/n;break;default:F=se}return U?F:P.a(F)},I.daysInMonth=function(){return this.endOf(d).$D},I.$locale=function(){return _[this.$L]},I.locale=function(S,O){if(!S)return this.$L;var U=this.clone(),F=C(S,O,!0);return F&&(U.$L=F),U},I.clone=function(){return P.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},B}(),H=D.prototype;return x.prototype=H,[["$ms",i],["$s",o],["$m",a],["$H",c],["$W",l],["$M",d],["$y",h],["$D",p]].forEach(function(B){H[B[1]]=function(I){return this.$g(I,B[0],B[1])}}),x.extend=function(B,I){return B.$i||(B(I,D,x),B.$i=!0),x},x.locale=C,x.isDayjs=N,x.unix=function(B){return x(1e3*B)},x.en=_[v],x.Ls=_,x.p={},x})}(Yf)),Yf.exports}var L6=vT();const M6=rl(L6),B6=mT({a11y:{type:Boolean,default:!0},locale:{type:Cl(Object)},size:P6,button:{type:Cl(Object)},link:{type:Cl(Object)},experimentalFeatures:{type:Cl(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Cl(Object)},zIndex:Number,namespace:{type:String,default:"el"},...R6}),F6={},j6=Ma({name:"ElConfigProvider",props:B6,setup(t,{slots:e}){const n=bT(t);return Ws(()=>t.message,r=>{var s,i;Object.assign(F6,(i=(s=n==null?void 0:n.value)==null?void 0:s.message)!=null?i:{},r??{})},{immediate:!0,deep:!0}),()=>d3(e,"default",{config:n==null?void 0:n.value})}}),H6=$6(j6),W6=Symbol(),uE=Object.getPrototypeOf,Cy=new WeakMap,q6=t=>t&&(Cy.has(t)?Cy.get(t):uE(t)===Object.prototype||uE(t)===Array.prototype),z6=t=>q6(t)&&t[W6]||null,dE=(t,e=!0)=>{Cy.set(t,e)},Th={},Fw=t=>typeof t=="object"&&t!==null,V6=t=>Fw(t)&&!Md.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),ET=(t,e)=>{const n=Ay.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return dE(r,!0),Ay.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Md.has(i))dE(i,!1);else if(xo.has(i)){const[c,l]=xo.get(i);a.value=ET(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},K6=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(fE(l,o)||ku.has(o)&&fE(l,ku.get(o))))return!0;n(i),Fw(o)&&(o=z6(o)||o);const u=!xo.has(o)&&Y6(o)?It(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),xo=new WeakMap,Md=new WeakSet,Ay=new WeakMap,Gl=[1,1],ku=new WeakMap;let fE=Object.is,G6=(t,e)=>new Proxy(t,e),Y6=V6,Z6=ET,J6=K6;function It(t={}){if(!Fw(t))throw new Error("object required");const e=ku.get(t);if(e)return e;let n=Gl[0];const r=new Set,s=(m,y=++Gl[0])=>{n!==y&&(n=y,r.forEach(b=>b(m,y)))};let i=Gl[1];const o=(m=++Gl[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([y])=>{const b=y[1](m);b>n&&(n=b)})),n),a=m=>(y,b)=>{const w=[...y];w[1]=[m,...w[1]],s(w,b)},c=new Map,l=(m,y)=>{const b=!Md.has(y)&&xo.get(y);if(b){if((Th?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const w=b[2](a(m));c.set(m,[b,w])}else c.set(m,[b])}},u=m=>{var y;const b=c.get(m);b&&(c.delete(m),(y=b[1])==null||y.call(b))},d=m=>(r.add(m),r.size===1&&c.forEach(([b,w],E)=>{if((Th?"production":void 0)!=="production"&&w)throw new Error("remove already exists");const v=b[2](a(E));c.set(E,[b,v])}),()=>{r.delete(m),r.size===0&&c.forEach(([b,w],E)=>{w&&(w(),c.set(E,[b]))})});let f=!0;const h=J6(()=>f,l,u,s),p=G6(t,h);ku.set(t,p);const g=[t,o,d];return xo.set(p,g),Reflect.ownKeys(t).forEach(m=>{const y=Object.getOwnPropertyDescriptor(t,m);"value"in y&&y.writable&&(p[m]=t[m])}),f=!1,p}function _n(t,e,n){const r=xo.get(t);(Th?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Uu(t){const e=xo.get(t);(Th?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return Z6(n,r())}function Aa(t){return Md.add(t),t}function X6(){return{proxyStateMap:xo,refSet:Md,snapCache:Ay,versionHolder:Gl,proxyCache:ku}}function Cn(t,e,n,r){let s=t[e];return _n(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:Q6,snapCache:e$}=X6(),lf=t=>Q6.has(t);function t$(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=e$.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return lf(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!lf(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!lf(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!lf(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,f)=>{l(this.data[d],f,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=It(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var hE={};const V={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos",sui:"Sui",stacks:"Stacks"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof hE<"u"?hE.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{displayMessage:"Multi-Wallet Not Enabled",debugMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},Lu={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=V.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},_T=["eip155","solana","polkadot","bip122","cosmos","sui","stacks"];var n$=20,r$=1,sl=1e6,s$=1e6,i$=-7,o$=21,a$=!1,Bd="[big.js] ",Fa=Bd+"Invalid ",Rp=Fa+"decimal places",c$=Fa+"rounding mode",CT=Bd+"Division by zero",wt={},qs=void 0,l$=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function AT(){function t(e){var n=this;if(!(n instanceof t))return e===qs?AT():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Fa+"value");e=e===0&&1/e<0?"-0":String(e)}u$(n,e)}n.constructor=t}return t.prototype=wt,t.DP=n$,t.RM=r$,t.NE=i$,t.PE=o$,t.strict=a$,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function u$(t,e){var n,r,s;if(!l$.test(e))throw Error(Fa+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function ja(t,e,n,r){var s=t.c;if(n===qs&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(c$);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==qs))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==qs||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Ha(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}wt.abs=function(){var t=new this.constructor(this);return t.s=1,t};wt.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};wt.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>sl)throw Error(Rp);if(!s[0])throw Error(CT);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,f=s.slice(),h=a=s.length,p=r.length,g=r.slice(0,a),m=g.length,y=t,b=y.c=[],w=0,E=o+(y.e=e.e-t.e)+1;for(y.s=i,i=E<0?0:E,f.unshift(0);m++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(m=g.length))u=a>m?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=m==a?s:f;m;){if(g[--m]<c[m]){for(d=m;d&&!g[--d];)g[d]=9;--g[d],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}else break}b[w++]=u?l:++l,g[0]&&u?g[m]=r[h]||0:g=[r[h]]}while((h++<p||g[0]!==qs)&&i--);return!b[0]&&w!=1&&(b.shift(),y.e--,E--),w>E&&ja(y,E,n.RM,g[0]!==qs),y};wt.eq=function(t){return this.cmp(t)===0};wt.gt=function(t){return this.cmp(t)>0};wt.gte=function(t){return this.cmp(t)>-1};wt.lt=function(t){return this.cmp(t)<0};wt.lte=function(t){return this.cmp(t)<1};wt.minus=wt.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,f=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-f){for((s=a<0)?(a=-a,r=l):(f=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--f;return l[0]||(t.s=1,l=[f=0]),t.c=l,t.e=f,t};wt.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(CT);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};wt.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};wt.plus=wt.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};wt.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-1e6||t>s$)throw Error(Fa+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};wt.prec=function(t,e){if(t!==~~t||t<1||t>sl)throw Error(Fa+"precision");return ja(new this.constructor(this),t,e)};wt.round=function(t,e){if(t===qs)t=0;else if(t!==~~t||t<-1e6||t>sl)throw Error(Rp);return ja(new this.constructor(this),t+this.e+1,e)};wt.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(Bd+"No square root");i=Math.sqrt(+Ha(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ja(t,(s.DP-=4)+t.e+1,s.RM)};wt.times=wt.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};wt.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==qs){if(t!==~~t||t<0||t>sl)throw Error(Rp);for(n=ja(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Ha(n,!0,!!r)};wt.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==qs){if(t!==~~t||t<0||t>sl)throw Error(Rp);for(n=ja(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Ha(n,!1,!!r)};wt[Symbol.for("nodejs.util.inspect.custom")]=wt.toJSON=wt.toString=function(){var t=this,e=t.constructor;return Ha(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};wt.toNumber=function(){var t=+Ha(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Bd+"Imprecise conversion");return t};wt.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==qs){if(t!==~~t||t<1||t>sl)throw Error(Fa+"precision");for(n=ja(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Ha(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};wt.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Bd+"valueOf disallowed");return Ha(t,t.e<=e.NE||t.e>=e.PE,!0)};var Mi=AT();const d$={bigNumber(t){return t?new Mi(t):new Mi(0)},multiply(t,e){if(t===void 0||e===void 0)return new Mi(0);const n=new Mi(t),r=new Mi(e);return n.times(r)},toFixed(t,e=2){return t===void 0||t===""?new Mi(0).toFixed(e):new Mi(t).toFixed(e)},formatNumberToLocalString(t,e=2){return t===void 0||t===""?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e,roundingMode:"floor"})},parseLocalStringToNumber(t){if(t===void 0||t==="")return 0;const e=t.replace(/,/gu,"");return new Mi(e).toNumber()}},f$=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],h$=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],p$=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],g$={getERC20Abi:t=>V.USDT_CONTRACT_ADDRESSES.includes(t)?p$:f$,getSwapAbi:()=>h$},ar={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ke={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids",HISTORY_TRANSACTIONS_CACHE:"@appkit/history_transactions_cache",TOKEN_PRICE_CACHE:"@appkit/token_price_cache",RECENT_EMAILS:"@appkit/recent_emails"};function $g(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Re={setItem(t,e){Ic()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Ic())return localStorage.getItem(t)||void 0},removeItem(t){Ic()&&localStorage.removeItem(t)},clear(){Ic()&&localStorage.clear()}};function Ic(){return typeof window<"u"&&typeof localStorage<"u"}function Ai(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var pE={};const kg=(typeof process<"u"&&typeof pE<"u"?pE.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",IT=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],m$="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ut={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:kg,SECURE_SITE_DASHBOARD:`${kg}/dashboard`,SECURE_SITE_FAVICON:`${kg}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:[V.CHAIN.EVM,V.CHAIN.SOLANA],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[V.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[V.CHAIN.EVM,V.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[V.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[V.CHAIN.EVM,V.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},ae={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=ae.getActiveNamespace(),e=ae.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Re.setItem(ke.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Re.getItem(ke.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Re.removeItem(ke.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Re.setItem(ke.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Re.setItem(ke.ACTIVE_CAIP_NETWORK_ID,t),ae.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Re.getItem(ke.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Re.removeItem(ke.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=$g(t);Re.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=ae.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Re.setItem(ke.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Re.getItem(ke.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=$g(t);Re.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Re.getItem(ke.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=$g(t);return Re.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{Re.setItem(ke.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Re.getItem(ke.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Re.removeItem(ke.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Re.getItem(ke.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Re.getItem(ke.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Re.setItem(ke.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Re.getItem(ke.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Re.getItem(ke.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Re.setItem(ke.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=ae.getConnectedNamespaces();e.includes(t)||(e.push(t),ae.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=ae.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),ae.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Re.getItem(ke.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Re.setItem(ke.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Re.removeItem(ke.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Re.getItem(ke.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=ae.getBalanceCache();Re.setItem(ke.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=ae.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;ae.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=ae.getBalanceCache();e[t.caipAddress]=t,Re.setItem(ke.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Re.getItem(ke.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=ae.getBalanceCache();Re.setItem(ke.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=ae.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),ae.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=ae.getNativeBalanceCache();e[t.caipAddress]=t,Re.setItem(ke.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Re.getItem(ke.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=ae.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;ae.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=ae.getEnsCache();e[t.address]=t,Re.setItem(ke.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=ae.getEnsCache();Re.setItem(ke.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Re.getItem(ke.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=ae.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;ae.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=ae.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Re.setItem(ke.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=ae.getIdentityCache();Re.setItem(ke.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Re.removeItem(ke.PORTFOLIO_CACHE),Re.removeItem(ke.NATIVE_BALANCE_CACHE),Re.removeItem(ke.ENS_CACHE),Re.removeItem(ke.IDENTITY_CACHE),Re.removeItem(ke.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Re.setItem(ke.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Re.getItem(ke.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=ae.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===V.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};Re.setItem(ke.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Re.getItem(ke.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=ae.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),Re.setItem(ke.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=Re.getItem(ke.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=ae.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),Re.setItem(ke.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=ae.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),Re.setItem(ke.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(ae.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1},getTransactionsCache(){try{const t=Re.getItem(ke.HISTORY_TRANSACTIONS_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:t,chainId:e=""}){var n;try{const s=(n=ae.getTransactionsCache()[t])==null?void 0:n[e];if(s&&!this.isCacheExpired(s.timestamp,this.cacheExpiry.transactionsHistory))return s.transactions;ae.removeTransactionsCache({address:t,chainId:e})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:t,chainId:e="",timestamp:n,transactions:r}){try{const s=ae.getTransactionsCache();s[t]={...s[t],[e]:{timestamp:n,transactions:r}},Re.setItem(ke.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:t,chainId:e,timestamp:n,transactions:r})}},removeTransactionsCache({address:t,chainId:e}){try{const n=ae.getTransactionsCache(),r=(n==null?void 0:n[t])||{},{[e]:s,...i}=r;Re.setItem(ke.HISTORY_TRANSACTIONS_CACHE,JSON.stringify({...n,[t]:i}))}catch{console.info("Unable to remove transactions cache",{address:t,chainId:e})}},getTokenPriceCache(){try{const t=Re.getItem(ke.TOKEN_PRICE_CACHE);return t?JSON.parse(t):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(t){try{const n=ae.getTokenPriceCache()[t.join(",")];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tokenPrice))return n.tokenPrice;ae.removeTokenPriceCache(t)}catch{console.info("Unable to get token price cache for addresses",t)}},updateTokenPriceCache(t){try{const e=ae.getTokenPriceCache();e[t.addresses.join(",")]={timestamp:t.timestamp,tokenPrice:t.tokenPrice},Re.setItem(ke.TOKEN_PRICE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update token price cache",t)}},removeTokenPriceCache(t){try{const e=ae.getTokenPriceCache();Re.setItem(ke.TOKEN_PRICE_CACHE,JSON.stringify({...e,[t.join(",")]:void 0}))}catch{console.info("Unable to remove token price cache",t)}}},Ie={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ie.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ut.TEN_SEC_MS:!0},isAllowedRetry(t,e=ut.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ie.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ut.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ie.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ie.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?ae.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ie.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},getApiUrl(){return V.W3M_API_URL},getBlockchainApiUrl(){return V.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return V.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ut.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in V.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Al(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Fd{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Al(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Al(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Al(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Al(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Al(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const y$={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ut.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ie.isTelegram()){if(Ie.isIos())return t.filter(e=>e!=="google");if(Ie.isMac())return t.filter(e=>e!=="x");if(Ie.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},Pe=It({features:ut.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ut.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),re={state:Pe,subscribeKey(t,e){return Cn(Pe,t,e)},setOptions(t){Object.assign(Pe,t)},setRemoteFeatures(t){var n,r;if(!t)return;const e={...Pe.remoteFeatures,...t};Pe.remoteFeatures=e,(n=Pe.remoteFeatures)!=null&&n.socials&&(Pe.remoteFeatures.socials=y$.filterSocialsByPlatform(Pe.remoteFeatures.socials)),(r=Pe.features)!=null&&r.pay&&(Pe.remoteFeatures.email=!1,Pe.remoteFeatures.socials=!1)},setFeatures(t){var n;if(!t)return;Pe.features||(Pe.features=ut.DEFAULT_FEATURES);const e={...Pe.features,...t};Pe.features=e,(n=Pe.features)!=null&&n.pay&&Pe.remoteFeatures&&(Pe.remoteFeatures.email=!1,Pe.remoteFeatures.socials=!1)},setProjectId(t){Pe.projectId=t},setCustomRpcUrls(t){Pe.customRpcUrls=t},setAllWallets(t){Pe.allWallets=t},setIncludeWalletIds(t){Pe.includeWalletIds=t},setExcludeWalletIds(t){Pe.excludeWalletIds=t},setFeaturedWalletIds(t){Pe.featuredWalletIds=t},setTokens(t){Pe.tokens=t},setTermsConditionsUrl(t){Pe.termsConditionsUrl=t},setPrivacyPolicyUrl(t){Pe.privacyPolicyUrl=t},setCustomWallets(t){Pe.customWallets=t},setIsSiweEnabled(t){Pe.isSiweEnabled=t},setIsUniversalProvider(t){Pe.isUniversalProvider=t},setSdkVersion(t){Pe.sdkVersion=t},setMetadata(t){Pe.metadata=t},setDisableAppend(t){Pe.disableAppend=t},setEIP6963Enabled(t){Pe.enableEIP6963=t},setDebug(t){Pe.debug=t},setEnableWalletConnect(t){Pe.enableWalletConnect=t},setEnableWalletGuide(t){Pe.enableWalletGuide=t},setEnableAuthLogger(t){Pe.enableAuthLogger=t},setEnableWallets(t){Pe.enableWallets=t},setPreferUniversalLinks(t){Pe.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ut.SIWX_DEFAULTS))t[e]??(t[e]=n);Pe.siwx=t},setConnectMethodsOrder(t){Pe.features={...Pe.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){Pe.features={...Pe.features,walletFeaturesOrder:t}},setSocialsOrder(t){Pe.remoteFeatures={...Pe.remoteFeatures,socials:t}},setCollapseWallets(t){Pe.features={...Pe.features,collapseWallets:t}},setEnableEmbedded(t){Pe.enableEmbedded=t},setAllowUnsupportedChain(t){Pe.allowUnsupportedChain=t},setManualWCControl(t){Pe.manualWCControl=t},setEnableNetworkSwitch(t){Pe.enableNetworkSwitch=t},setEnableReconnect(t){Pe.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(Pe.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){Pe.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return Pe.universalProviderConfigOverride},getSnapshot(){return Uu(Pe)}},w$=Object.freeze({enabled:!0,events:[]}),b$=new Fd({baseUrl:Ie.getAnalyticsUrl(),clientId:null}),v$=5,E$=60*1e3,Bi=It({...w$}),_$={state:Bi,subscribeKey(t,e){return Cn(Bi,t,e)},async sendError(t,e){if(!Bi.enabled)return;const n=Date.now();if(Bi.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<E$}).length>=v$)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Bi.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=re.state;await b$.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ie.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Bi.enabled=!0},disable(){Bi.enabled=!1},clearEvents(){Bi.events=[]}};class Bc extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Bc.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Bc):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function gE(t,e){const n=t instanceof Bc?t:new Bc(t instanceof Error?t.message:String(t),e,t);throw _$.sendError(n,n.category),n}function Tr(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return gE(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return gE(a,e)}},n[r]=i}else n[r]=s}),n}var Fc={};const C$="https://secure.walletconnect.org/sdk",A$=(typeof process<"u"&&typeof Fc<"u"?Fc.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||C$,I$=(typeof process<"u"&&typeof Fc<"u"?Fc.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",S$=(typeof process<"u"&&typeof Fc<"u"?Fc.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Te={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},nn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},jn={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},T$={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===jn.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${jn.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(t===jn.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${jn.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===V.CHAIN.SOLANA&&t===jn.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${jn.COINBASE.url}/dapp?cb_url=${r}`),e===V.CHAIN.BITCOIN&&t===jn.BINANCE.id&&!("binancew3w"in window)){const s=R.state.activeCaipNetwork,i=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${(s==null?void 0:s.id)??1}`),a=new URL(jn.BINANCE.deeplink);a.searchParams.set("appId",jn.BINANCE.appId),a.searchParams.set("startPagePath",i),a.searchParams.set("startPageQuery",o);const c=new URL(jn.BINANCE.url);c.searchParams.set("_dp",window.btoa(a.toString())),window.location.href=c.toString()}}},gr=It({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),N$={state:gr,subscribeNetworkImages(t){return _n(gr.networkImages,()=>t(gr.networkImages))},subscribeKey(t,e){return Cn(gr,t,e)},subscribe(t){return _n(gr,()=>t(gr))},setWalletImage(t,e){gr.walletImages[t]=e},setNetworkImage(t,e){gr.networkImages[t]=e},setChainImage(t,e){gr.chainImages[t]=e},setConnectorImage(t,e){gr.connectorImages={...gr.connectorImages,[t]:e}},setTokenImage(t,e){gr.tokenImages[t]=e},setCurrencyImage(t,e){gr.currencyImages[t]=e}},as=Tr(N$),x$={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:""},Ug=It({networkImagePromises:{}}),ST={async fetchWalletImage(t){if(t)return await De._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(Ug.networkImagePromises[t]||(Ug.networkImagePromises[t]=De._fetchNetworkImage(t)),await Ug.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return as.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return as.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return as.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return as.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return as.state.connectorImages[t.imageId]},getChainImage(t){return as.state.networkImages[x$[t]]}},Fi=It({message:"",variant:"info",open:!1}),P$={state:Fi,subscribeKey(t,e){return Cn(Fi,t,e)},open(t,e){const{debug:n}=re.state,{code:r,displayMessage:s,debugMessage:i}=t;s&&n&&(Fi.message=s,Fi.variant=e,Fi.open=!0),i&&console.error(typeof i=="function"?i():i,r?{code:r}:void 0)},close(){Fi.open=!1,Fi.message="",Fi.variant="info"}},Pt=Tr(P$),O$=Ie.getAnalyticsUrl(),R$=new Fd({baseUrl:O$,clientId:null}),D$=["MODAL_CREATED"],ri=It({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),yt={state:ri,subscribe(t){return _n(ri,()=>t(ri))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=re.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){var e;try{let n=xe.state.address;if("address"in t.data&&t.data.address&&(n=t.data.address),D$.includes(t.data.event)||typeof window>"u")return;const r=(e=R.getActiveCaipNetwork())==null?void 0:e.caipNetworkId;await R$.post({path:"/e",params:yt.getSdkProperties(),body:{eventId:Ie.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:n,properties:{..."properties"in t.data?t.data.properties:{},caipNetworkId:r}}}}),ri.reportedErrors.FORBIDDEN=!1}catch(n){n instanceof Error&&n.cause instanceof Response&&n.cause.status===V.HTTP_STATUS_CODES.FORBIDDEN&&!ri.reportedErrors.FORBIDDEN&&(Pt.open({displayMessage:"Invalid App Configuration",debugMessage:`Origin ${Ic()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ri.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;ri.timestamp=Date.now(),ri.data=t,((e=re.state.features)!=null&&e.analytics||t.event==="INITIALIZE")&&yt._sendAnalyticsEvent(ri)}},$$=Ie.getApiUrl(),Yn=new Fd({baseUrl:$$,clientId:null}),k$=40,mE=4,U$=20,We=It({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),De={state:We,subscribeKey(t,e){return Cn(We,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=re.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return re.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Yn.baseUrl}/getWalletImage/${t}`,n=await Yn.getBlob({path:e,params:De._getSdkProperties()});as.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Yn.baseUrl}/public/getAssetImage/${t}`,n=await Yn.getBlob({path:e,params:De._getSdkProperties()});as.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Yn.baseUrl}/public/getAssetImage/${t}`,n=await Yn.getBlob({path:e,params:De._getSdkProperties()});as.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Yn.baseUrl}/public/getCurrencyImage/${t}`,n=await Yn.getBlob({path:e,params:De._getSdkProperties()});as.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Yn.baseUrl}/public/getTokenImage/${t}`,n=await Yn.getBlob({path:e,params:De._getSdkProperties()});as.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ie.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===jn.COINBASE.id||n.id===jn.BINANCE.id?!0:R.state.activeChain==="solana"&&(n.id===jn.SOLFLARE.id||n.id===jn.PHANTOM.id)):t},async fetchProjectConfig(){return(await Yn.get({path:"/appkit/v1/config",params:De._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Yn.get({path:"/projects/v1/origins",params:De._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===V.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=V.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=R.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!ST.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>De._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=pe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>De._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>De._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>De._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];De._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(jn).map(o=>o.id));const r=await Yn.get({path:"/getWallets",params:{...De._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:De._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=re.state;if(t!=null&&t.length){const e={...De._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??mE,include:t},{data:n}=await De.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>De._fetchWalletImage(i))),We.featured=r,We.allFeatured=r}},async fetchRecommendedWallets(){try{We.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=re.state,r=[...e??[],...n??[]].filter(Boolean),s=R.getRequestedCaipNetworkIds().join(","),i={page:1,entries:mE,include:t,exclude:r,chains:s},{data:o,count:a}=await De.fetchWallets(i),c=ae.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>De._fetchWalletImage(d))),We.recommended=o,We.allRecommended=o,We.count=a??0}catch{}finally{We.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=re.state,s=R.getRequestedCaipNetworkIds().join(","),i=[...We.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:k$,include:e,exclude:i,chains:s},{data:a,count:c}=await De.fetchWallets(o),l=a.slice(0,U$).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>De._fetchWalletImage(u))),We.wallets=Ie.uniqueBy([...We.wallets,...De._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(f=>s.includes(f))}),We.count=c>We.count?c:We.count,We.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await De.fetchWallets(e);n&&n.forEach(r=>{We.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=re.state,s=R.getRequestedCaipNetworkIds().join(",");We.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await De.fetchWallets(i);yt.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>De._fetchWalletImage(c)),Ie.wait(300)]),We.search=De._filterOutExtensions(o)},initPromise(t,e){const n=We.promises[t];return n||(We.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&De.initPromise("connectorImages",De.fetchConnectorImages),e&&De.initPromise("featuredWallets",De.fetchFeaturedWallets),n&&De.initPromise("recommendedWallets",De.fetchRecommendedWallets),r&&De.initPromise("networkImages",De.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=re.state.features)!=null&&t.analytics&&De.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Yn.get({path:"/getAnalyticsConfig",params:De._getSdkProperties()});re.setFeatures({analytics:t})}catch{re.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){We.featured=We.allFeatured,We.recommended=We.allRecommended;return}const e=R.getRequestedCaipNetworkIds().join(",");We.featured=We.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),We.recommended=We.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),We.filteredWallets=We.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){We.filteredWallets=[]},setFilterByNamespace(t){if(!t){We.featured=We.allFeatured,We.recommended=We.allRecommended;return}const e=R.getRequestedCaipNetworkIds().join(",");We.featured=We.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),We.recommended=We.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),We.filteredWallets=We.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},bt=It({view:"Connect",history:["Connect"],transactionStack:[]}),L$={state:bt,subscribeKey(t,e){return Cn(bt,t,e)},pushTransactionStack(t){bt.transactionStack.push(t)},popTransactionStack(t){const e=bt.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Fe.goBack();break;case"cancel":s==null||s(),Fe.goBack();break}},push(t,e){t!==bt.view&&(bt.view=t,bt.history.push(t),bt.data=e)},reset(t,e){bt.view=t,bt.history=[t],bt.data=e},replace(t,e){bt.history.at(-1)===t||(bt.view=t,bt.history[bt.history.length-1]=t,bt.data=e)},goBack(){var r;const t=R.state.activeCaipAddress,e=Fe.state.view==="ConnectingFarcaster",n=!t&&e;if(bt.history.length>1){bt.history.pop();const[s]=bt.history.slice(-1);s&&(t&&s==="Connect"?bt.view="Account":bt.view=s)}else et.close();(r=bt.data)!=null&&r.wallet&&(bt.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){xe.setFarcasterUrl(void 0,R.state.activeChain);const a=pe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Uu(re.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(bt.history.length>1){bt.history=bt.history.slice(0,t+1);const[e]=bt.history.slice(-1);e&&(bt.view=e)}},goBackOrCloseModal(){Fe.state.history.length>1?Fe.goBack():et.close()}},Fe=Tr(L$),si=It({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Iy={state:si,subscribe(t){return _n(si,()=>t(si))},setThemeMode(t){si.themeMode=t;try{const e=pe.getAuthConnector();if(e){const n=Iy.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Ai(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){si.themeVariables={...si.themeVariables,...t};try{const e=pe.getAuthConnector();if(e){const n=Iy.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Ai(si.themeVariables,si.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Uu(si)}},sr=Tr(Iy),TT=Object.fromEntries(_T.map(t=>[t,void 0])),M$=Object.fromEntries(_T.map(t=>[t,!0])),rt=It({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:TT,filterByNamespaceMap:M$}),B$={state:rt,subscribe(t){return _n(rt,()=>{t(rt)})},subscribeKey(t,e){return Cn(rt,t,e)},initialize(t){t.forEach(e=>{const n=ae.getConnectedConnectorId(e);n&&pe.setConnectorId(n,e)})},setActiveConnector(t){t&&(rt.activeConnector=Aa(t))},setConnectors(t){t.filter(s=>!rt.allConnectors.some(i=>i.id===s.id&&pe.getConnectorName(i.name)===pe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&rt.allConnectors.push(Aa(s))});const n=pe.getEnabledNamespaces(),r=pe.getEnabledConnectors(n);rt.connectors=pe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(rt.filterByNamespaceMap).forEach(e=>{rt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{rt.filterByNamespaceMap[e]=!0}),pe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){rt.filterByNamespaceMap[t]=e,pe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=pe.getEnabledNamespaces(),e=pe.getEnabledConnectors(t),n=pe.areAllNamespacesEnabled();rt.connectors=pe.mergeMultiChainConnectors(e),n?De.clearFilterByNamespaces():De.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(rt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return rt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(rt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=pe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===V.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=pe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===V.CONNECTOR_ID.AUTH){const s=t,i=Uu(re.state),o=sr.getSnapshot().themeMode,a=sr.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Ai(a,o)}),pe.setConnectors([t])}else pe.setConnectors([t])},getAuthConnector(t){var r;const e=t||R.state.activeChain,n=rt.connectors.find(s=>s.id===V.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return rt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return rt.allConnectors.find(e=>e.id===t)},getConnector({id:t,rdns:e,namespace:n}){const r=n||R.state.activeChain;return rt.allConnectors.filter(i=>i.chain===r).find(i=>{var o;return i.explorerId===t||((o=i.info)==null?void 0:o.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Uu(re.state),r=sr.getSnapshot().themeMode,s=sr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Ai(s,r)})},getConnectorsByNamespace(t){const e=rt.allConnectors.filter(n=>n.chain===t);return pe.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return R.checkIfSmartAccountEnabled()&&Ir(t)===nn.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=pe.getConnector({id:t.id,rdns:t.rdns});T$.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,R.state.activeChain),e?Fe.push("ConnectingExternal",{connector:e,wallet:t}):Fe.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?pe.getConnectorsByNamespace(t):pe.mergeMultiChainConnectors(rt.allConnectors)},setFilterByNamespace(t){rt.filterByNamespace=t,rt.connectors=pe.getConnectors(t),De.setFilterByNamespace(t)},setConnectorId(t,e){t&&(rt.activeConnectorIds={...rt.activeConnectorIds,[e]:t},ae.setConnectedConnectorId(e,t))},removeConnectorId(t){rt.activeConnectorIds={...rt.activeConnectorIds,[t]:void 0},ae.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return rt.activeConnectorIds[t]},isConnected(t){return t?!!rt.activeConnectorIds[t]:Object.values(rt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){rt.activeConnectorIds={...TT}}},pe=Tr(B$),F$=1e3,Il={checkNamespaceConnectorId(t,e){return pe.getConnectorId(t)===e},isSocialProvider(t){return ut.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&pe.setActiveConnector(e),s==null||s(Ie.isMobile()&&t),r){const l=et.subscribeKey("open",u=>{u||(Fe.state.view!==r&&Fe.replace(r),l(),a(new Error("Modal closed")))})}const c=R.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&et.close(),c(),o(ar.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=R.subscribeKey("activeCaipAddress",s=>{s&&(et.close(),r(),e(ar.parseCaipAddress(s)))});ye.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,namespace:e,closeModalOnConnect:n=!0,onOpenFarcaster:r,onConnect:s}){let i=xe.state.socialWindow,o=xe.state.socialProvider,a=!1,c=null;const l=e||R.state.activeChain,u=R.subscribeKey("activeCaipAddress",d=>{d&&(n&&et.close(),u())});return new Promise((d,f)=>{async function h(g){var m;if((m=g.data)!=null&&m.resultUri)if(g.origin===V.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",h,!1);try{const y=pe.getAuthConnector(l);if(y&&!a){i&&(i.close(),xe.setSocialWindow(void 0,l),i=xe.state.socialWindow),a=!0;const b=g.data.resultUri;if(o&&yt.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:o}}),o){ae.setConnectedSocialProvider(o),await ye.connectExternal({id:y.id,type:y.type,socialUri:b},y.chain);const w=R.state.activeCaipAddress;if(!w){f(new Error("Failed to connect"));return}d(ar.parseCaipAddress(w)),yt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:o}})}}}catch{o&&yt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}}),f(new Error("Failed to connect"))}}else o&&yt.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:o}})}async function p(){if(t&&(xe.setSocialProvider(t,l),o=xe.state.socialProvider,yt.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:o}})),o==="farcaster"){r==null||r();const g=et.subscribeKey("open",y=>{!y&&t==="farcaster"&&(f(new Error("Popup closed")),s==null||s(),g())}),m=pe.getAuthConnector();if(m&&!xe.state.farcasterUrl)try{const{url:y}=await m.provider.getFarcasterUri();xe.setFarcasterUrl(y,l)}catch{f(new Error("Failed to connect to farcaster"))}}else{const g=pe.getAuthConnector();c=Ie.returnOpenHref(`${V.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(g&&o){const{uri:m}=await g.provider.getSocialRedirectUri({provider:o});if(c&&m){xe.setSocialWindow(c,l),i=xe.state.socialWindow,c.location.href=m;const y=setInterval(()=>{i!=null&&i.closed&&!a&&(f(new Error("Popup closed")),clearInterval(y))},1e3);window.addEventListener("message",h,!1)}else c==null||c.close(),f(new Error("Failed to initiate social connection"))}}catch{f(new Error("Failed to initiate social connection")),c==null||c.close()}}}p()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=et.subscribeKey("open",c=>{c||(Fe.state.view!==e&&Fe.replace(e),a(),i(new Error("Modal closed")))})}const o=R.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&et.close(),o(),s(ar.parseCaipAddress(a)))})})},async updateEmail(){const t=ae.getConnectedConnectorId(R.state.activeChain),e=pe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==V.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return await et.open({view:"UpdateEmailWallet",data:{email:n,redirectView:void 0}}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(et.close(),clearInterval(i),o(),r({email:a}))},F$),o=et.subscribeKey("open",a=>{a||(Fe.state.view!=="Connect"&&Fe.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return R.checkIfSmartAccountEnabled()&&Ir(t)===nn.ACCOUNT_TYPES.EOA}};function NT(){var r,s;const t=((r=R.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=R.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ut.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Ir(t){var n;return(n=R.getAccountData(t))==null?void 0:n.preferredAccountType}function mo(t){var e,n;return t?(n=(e=R.state.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:R.state.activeCaipNetwork}const Nh={getConnectionStatus(t,e){const n=pe.state.activeConnectorIds[e],r=ye.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=re.state.remoteFeatures)!=null&&a.multiWallet),n=pe.state.activeConnectorIds[t],r=ye.getConnections(t),i=(ye.state.recentConnections.get(t)??[]).filter(c=>pe.getConnectorById(c.connectorId)),o=Nh.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},ta=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Yt=It({...ta}),j$={state:Yt,subscribeKey(t,e){return Cn(Yt,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ie.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Yt.message=ta.message,Yt.variant=ta.variant,Yt.svg=ta.svg,Yt.open=ta.open,Yt.autoClose=ta.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ta.autoClose}){Yt.open?(Yt.open=!1,setTimeout(()=>{Yt.message=t,Yt.variant=n,Yt.svg=e,Yt.open=!0,Yt.autoClose=r},150)):(Yt.message=t,Yt.variant=n,Yt.svg=e,Yt.open=!0,Yt.autoClose=r)}},Hs=j$,Dt=It({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),H$={state:Dt,subscribe(t){return _n(Dt,()=>t(Dt))},setLastNetworkInView(t){Dt.lastNetworkInView=t},async fetchTransactions(t){var e;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Dt.loading=!0;try{const n=await Le.fetchTransactions({account:t,cursor:Dt.next,chainId:(e=R.state.activeCaipNetwork)==null?void 0:e.caipNetworkId}),r=Zf.filterSpamTransactions(n.data),s=Zf.filterByConnectedChain(r),i=[...Dt.transactions,...s];Dt.loading=!1,Dt.transactions=i,Dt.transactionsByYear=Zf.groupTransactionsByYearAndMonth(Dt.transactionsByYear,s),Dt.empty=i.length===0,Dt.next=n.next?n.next:void 0}catch{const r=R.state.activeChain;yt.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:re.state.projectId,cursor:Dt.next,isSmartAccount:Ir(r)===nn.ACCOUNT_TYPES.SMART_ACCOUNT}}),Hs.showError("Failed to fetch transactions"),Dt.loading=!1,Dt.empty=!0,Dt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Dt.next=void 0},resetTransactions(){Dt.transactions=[],Dt.transactionsByYear={},Dt.lastNetworkInView=void 0,Dt.loading=!1,Dt.empty=!1,Dt.next=void 0}},Zf=Tr(H$,"API_ERROR"),Xe=It({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Ko;const W$={state:Xe,subscribe(t){return _n(Xe,()=>t(Xe))},subscribeKey(t,e){return Cn(Xe,t,e)},_getClient(){return Xe._client},setClient(t){Xe._client=Aa(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);ye.syncStorageConnections(e)},syncStorageConnections(t){const e=ae.getConnections(),n=t??Array.from(R.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Xe.recentConnections);i.set(r,s),Xe.recentConnections=i}},getConnections(t){return t?Xe.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ye.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(Ie.isTelegram()||Ie.isSafari()&&Ie.isIos()){if(Ko){await Ko,Ko=void 0;return}if(!Ie.isPairingExpired(Xe==null?void 0:Xe.wcPairingExpiry)){const s=Xe.wcUri;Xe.wcUri=s;return}Ko=(e=(t=ye._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ye.state.status="connecting",await Ko,Ko=void 0,Xe.wcPairingExpiry=void 0,ye.state.status="connected"}else await((r=(n=ye._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ye._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&R.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ye._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||R.state.activeChain;e&&pe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;et.setLoading(!0,R.state.activeChain);const n=pe.getAuthConnector();n&&(xe.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),ae.setPreferredAccountTypes(Object.entries(R.state.chains).reduce((s,[i,o])=>{const a=i,c=Ir(a);return c!==void 0&&(s[a]=c),s},{})),await ye.reconnectExternal(n),et.setLoading(!1,R.state.activeChain),yt.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ye._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ye._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ye._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ye._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ye._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ye._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ye._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ye._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ye._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ye._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ye._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ye._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Xe.wcUri=void 0,Xe.wcPairingExpiry=void 0,Xe.wcLinking=void 0,Xe.recentWallet=void 0,Xe.status="disconnected",Zf.resetTransactions(),ae.deleteWalletConnectDeepLink()},resetUri(){Xe.wcUri=void 0,Xe.wcPairingExpiry=void 0,Ko=void 0},finalizeWcConnection(t){var r,s;const{wcLinking:e,recentWallet:n}=ye.state;e&&ae.setWalletConnectDeepLink(e),n&&ae.setAppKitRecent(n),yt.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:t,properties:{method:e?"mobile":"qrcode",name:((s=(r=Fe.state.data)==null?void 0:r.wallet)==null?void 0:s.name)||"Unknown"}})},setWcBasic(t){Xe.wcBasic=t},setUri(t){Xe.wcUri=t,Xe.wcPairingExpiry=Ie.getPairingExpiry()},setWcLinking(t){Xe.wcLinking=t},setWcError(t){Xe.wcError=t,Xe.buffering=!1},setRecentWallet(t){Xe.recentWallet=t},setBuffering(t){Xe.buffering=t},setStatus(t){Xe.status=t},setIsSwitchingConnection(t){Xe.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=ye._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Bc("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Xe.connections);n.set(e,t),Xe.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=xe.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Il.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ye.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=pe.getConnectorById(t.connectorId),s=t.connectorId===V.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await ye.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await ye.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=pe.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===V.CONNECTOR_ID.AUTH,a=t.connectorId===V.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Il.isSocialProvider(i)){const{address:d}=await Il.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){et.open({view:"ConnectingFarcaster"})},onConnect(){Fe.replace("ProfileWallets")}});c=d}else{const{address:d}=await Il.connectEmail({closeModalOnConnect:r,onOpen(){et.open({view:"EmailLogin"})},onConnect(){Fe.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Il.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(f){et.open({view:f?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Fe.replace("ProfileWallets")}});c=d}else{const d=await ye.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ye.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=xe.getCaipAddress(n);if(o){const{address:c}=ar.parseCaipAddress(o);i=c}const a=Nh.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ye.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ye.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ye=Tr(W$),Ya=It({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),ls={state:Ya,subscribe(t){return _n(Ya,()=>t(Ya))},subscribeOpen(t){return Cn(Ya,"open",t)},set(t){Object.assign(Ya,{...Ya,...t})}},q$={async getTokenList(t){var r;const e=await Le.fetchSwapTokens({chainId:t});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=R.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ye==null?void 0:ye.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Le.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Le.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ye.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await lb.getMyTokensWithBalance(t);return xe.setTokenBalance(e,R.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:NT(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},gt=It({tokenBalances:[],loading:!1}),z$={state:gt,subscribe(t){return _n(gt,()=>t(gt))},subscribeKey(t,e){return Cn(gt,t,e)},setToken(t){t&&(gt.token=Aa(t))},setTokenAmount(t){gt.sendTokenAmount=t},setReceiverAddress(t){gt.receiverAddress=t},setReceiverProfileImageUrl(t){gt.receiverProfileImageUrl=t},setReceiverProfileName(t){gt.receiverProfileName=t},setNetworkBalanceInUsd(t){gt.networkBalanceInUSD=t},setLoading(t){gt.loading=t},async sendToken(){var t;try{switch(lt.setLoading(!0),(t=R.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await lt.sendEvmToken();return;case"solana":await lt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{lt.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=R.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Ir(t);if(!lt.state.sendTokenAmount||!lt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!lt.state.token)throw new Error("A token is required");(n=lt.state.token)!=null&&n.address?(yt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===nn.ACCOUNT_TYPES.SMART_ACCOUNT,token:lt.state.token.address,amount:lt.state.sendTokenAmount,network:((r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await lt.sendERC20Token({receiverAddress:lt.state.receiverAddress,tokenAddress:lt.state.token.address,sendTokenAmount:lt.state.sendTokenAmount,decimals:lt.state.token.quantity.decimals})):(yt.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===nn.ACCOUNT_TYPES.SMART_ACCOUNT,token:lt.state.token.symbol||"",amount:lt.state.sendTokenAmount,network:((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await lt.sendNativeToken({receiverAddress:lt.state.receiverAddress,sendTokenAmount:lt.state.sendTokenAmount,decimals:lt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;gt.loading=!0;const e=(i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=R.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=R.state.activeCaipAddress,s=r?Ie.getPlainAddress(r):void 0;if(gt.lastRetry&&!Ie.isAllowedRetry(gt.lastRetry,30*ut.ONE_SEC_MS))return gt.loading=!1,[];try{if(s&&e&&n){const a=await lb.getMyTokensWithBalance();return gt.tokenBalances=a,gt.lastRetry=void 0,a}}catch(a){gt.lastRetry=Date.now(),t==null||t(a),Hs.showError("Token Balance Unavailable")}finally{gt.loading=!1}return[]},fetchNetworkBalance(){if(gt.tokenBalances.length===0)return;const t=q$.mapBalancesToSwapTokens(gt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===NT());e&&(gt.networkBalanceInUSD=e?d$.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Fe.pushTransactionStack({});const e=t.receiverAddress,n=xe.state.address,r=ye.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ye.sendTransaction({chainNamespace:V.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),yt.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ir("eip155")===nn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=lt.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=ye._getClient())==null||a.updateBalance("eip155"),lt.resetSend()},async sendERC20Token(t){Fe.pushTransactionStack({onSuccess(){Fe.replace("Account")}});const e=ye.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(xe.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ie.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await ye.writeContract({fromAddress:xe.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:g$.getERC20Abi(n),chainNamespace:V.CHAIN.EVM}),lt.resetSend()}},async sendSolanaToken(){var t;if(!lt.state.sendTokenAmount||!lt.state.receiverAddress)throw new Error("An amount and receiver address are required");Fe.pushTransactionStack({onSuccess(){Fe.replace("Account")}}),await ye.sendTransaction({chainNamespace:"solana",to:lt.state.receiverAddress,value:lt.state.sendTokenAmount}),(t=ye._getClient())==null||t.updateBalance("solana"),lt.resetSend()},resetSend(){gt.token=void 0,gt.sendTokenAmount=void 0,gt.receiverAddress=void 0,gt.receiverProfileImageUrl=void 0,gt.receiverProfileName=void 0,gt.loading=!1,gt.tokenBalances=[]}},lt=Tr(z$),Lg={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},uf={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},be=It({chains:t$(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),V$={state:be,subscribe(t){return _n(be,()=>{t(be)})},subscribeKey(t,e){return Cn(be,t,e)},subscribeChainProp(t,e,n){let r;return _n(be.chains,()=>{var i;const s=n||be.activeChain;if(s){const o=(i=be.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=ae.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=re.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(be.noAdapters=!0),be.noAdapters||(be.activeChain=a==null?void 0:a.namespace,be.activeCaipNetwork=i,R.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),be.activeChain&&ls.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),f=ae.getPreferredAccountTypes()||{},h={...re.state.defaultAccountTypes,...f};R.state.chains.set(u,{namespace:u,networkState:It({...uf,caipNetwork:d==null?void 0:d[0]}),accountState:It({...Lg,preferredAccountType:h[u]}),caipNetworks:d??[],...n}),R.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(be.activeChain===t){const r=Array.from(be.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&R.setActiveCaipNetwork(s)}}be.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");be.chains.set(t.namespace,{namespace:t.namespace,networkState:{...uf,caipNetwork:r[0]},accountState:Lg,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),R.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=be.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),be.chains.set(t.chainNamespace,{...e,caipNetworks:r}),R.setRequestedCaipNetworks(r,t.chainNamespace),pe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=be.chains.get(t);if(n){const o=((r=be.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&R.setActiveCaipNetwork(n.caipNetworks[0]),be.chains.set(t,{...n,caipNetworks:a}),R.setRequestedCaipNetworks(a||[],t),a.length===0&&pe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=be.chains.get(t);n&&(n.networkState={...n.networkState||uf,...e},be.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=be.chains.get(t);if(r){const s={...r.accountState||Lg,...e};be.chains.set(t,{...r,accountState:s}),(be.chains.size===1||be.activeChain===t)&&(e.caipAddress&&(be.activeCaipAddress=e.caipAddress),xe.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=be.chains.get(t);if(n){const r={...n.networkState||uf,...e};be.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){R.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;be.activeChain=t;const e=t?be.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(be.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,be.activeCaipNetwork=n,R.setChainNetworkData(t,{caipNetwork:n}),ae.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),ls.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;be.activeChain!==t.chainNamespace&&R.setIsSwitchingNamespace(!0);const e=be.chains.get(t.chainNamespace);be.activeChain=t.chainNamespace,be.activeCaipNetwork=t,R.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?be.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:be.activeCaipAddress=void 0,R.setAccountProp("caipAddress",be.activeCaipAddress,t.chainNamespace),e&&xe.replaceState(e.accountState),lt.resetSend(),ls.set({activeChain:be.activeChain,selectedNetworkId:(i=be.activeCaipNetwork)==null?void 0:i.caipNetworkId}),ae.setActiveCaipNetworkId(t.caipNetworkId),!R.checkIfSupportedNetwork(t.chainNamespace)&&re.state.enableNetworkSwitch&&!re.state.allowUnsupportedChain&&!ye.state.wcBasic&&R.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=be.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==R.state.activeChain,n=(s=R.getNetworkData(t))==null?void 0:s.caipNetwork,r=R.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await R.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=R.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=R.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=be.activeCaipNetwork)==null?void 0:a.id)})),s=R.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&et.close()}catch{Fe.goBack()}yt.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||be.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=be.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||be.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=be.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getNetworkProp(t,e){var r;const n=(r=be.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=be.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ie.sortRequestedNetworks(n,r).filter(o=>o==null?void 0:o.id)},getAllRequestedCaipNetworks(){const t=[];return be.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=R.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){R.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=R.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));pe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return be.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=R.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=be.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:be.activeCaipNetwork},getActiveCaipAddress(){return be.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=be.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=R.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());R.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){var s;const n=e||((s=be.activeCaipNetwork)==null?void 0:s.caipNetworkId),r=R.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(i=>i.caipNetworkId===n):!0},checkIfSupportedChainId(t){if(!be.activeChain)return!0;const e=R.getRequestedCaipNetworks(be.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){R.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=Lu.caipNetworkIdToNumber((r=be.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=be.activeChain;if(!e||!t)return!1;const n=R.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){et.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=be.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ut.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){R.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){var s,i;const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=(i=(s=R.state.chains.get(e))==null?void 0:s.accountState)==null?void 0:i.preferredAccountType,r=re.state.defaultAccountTypes[e];be.activeCaipAddress=void 0,R.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),pe.removeConnectorId(e)},setIsSwitchingNamespace(t){be.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(be.chains.forEach(s=>{V.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=be.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var n;const e=t||be.activeChain;if(e)return(n=R.state.chains.get(e))==null?void 0:n.accountState},getNetworkData(t){var n;const e=t||be.activeChain;if(e)return(n=R.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=R.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=pe.state.filterByNamespace;return(t?[be.chains.get(t)]:Array.from(be.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?R.getRequestedCaipNetworks(t):R.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){be.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return be.lastConnectedSIWECaipNetwork}},R=Tr(V$),K$={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},xT=Ie.getBlockchainApiUrl(),Zn=It({clientId:null,api:new Fd({baseUrl:xT,clientId:null}),supportedChains:{http:[],ws:[]}}),Le={state:Zn,async get(t){const{st:e,sv:n}=Le.getSdkProperties(),r=re.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Zn.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=re.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Zn.supportedChains.http.length||await Le.getSupportedNetworks()}catch{return!1}return Zn.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Le.get({path:"v1/supported-chains"});return Zn.supportedChains=t,t}catch{return Zn.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Le.isNetworkSupported(e))return{avatar:"",name:""};const r=ae.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Le.get({path:`/v1/identity/${t}`,params:{sender:R.state.activeCaipAddress?Ie.getPlainAddress(R.state.activeCaipAddress):void 0}});return ae.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,signal:n,cache:r,chainId:s}){var c;if(!await Le.isNetworkSupported((c=R.state.activeCaipNetwork)==null?void 0:c.caipNetworkId))return{data:[],next:void 0};const o=ae.getTransactionsCacheForAddress({address:t,chainId:s});if(o)return o;const a=await Le.get({path:`/v1/account/${t}/history`,params:{cursor:e,chainId:s},signal:n,cache:r});return ae.updateTransactionsCache({address:t,chainId:s,timestamp:Date.now(),transactions:a}),a},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Le.isNetworkSupported((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Le.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Le.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Le.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var s;if(!await Le.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))return{fungibles:[]};const n=ae.getTokenPriceCacheForAddresses(t);if(n)return n;const r=await Zn.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:re.state.projectId},headers:{"Content-Type":"application/json"}});return ae.updateTokenPriceCache({addresses:t,timestamp:Date.now(),tokenPrice:r}),r},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Le.isNetworkSupported((r=R.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Le.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Le.getSdkProperties();if(!await Le.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Le.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Le.isNetworkSupported((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Zn.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ut.CONVERT_SLIPPAGE_TOLERANCE},projectId:re.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Le.getSdkProperties();if(!await Le.isNetworkSupported((o=R.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Le.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Le.getSdkProperties();if(!await Le.isNetworkSupported((l=R.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Hs.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=ae.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Le.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return ae.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Le.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Le.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Le.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Le.get({path:`/v1/profile/reverse/${t}`,params:{sender:xe.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Le.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Le.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Le.isNetworkSupported((i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Zn.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Le.isNetworkSupported((a=R.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Zn.api.post({path:"/v1/generators/onrampurl",params:{projectId:re.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Le.isNetworkSupported((e=R.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Le.get({path:"/v1/onramp/options"})}catch{return K$}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Le.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Zn.api.post({path:"/v1/onramp/quote",params:{projectId:re.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Le.isNetworkSupported((n=R.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Le.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Le.isNetworkSupported((s=R.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Zn.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:re.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Zn.clientId=t,Zn.api=new Fd({baseUrl:xT,clientId:t})}},G$="1.0.8";let Nr=class Sy extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Sy?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Sy&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${G$}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Ui(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const PT=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,OT=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,RT=/^\(.+?\).*?$/,yE=/^tuple(?<array>(\[(\d*)\])*)$/;function Ty(t){let e=t.type;if(yE.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Ty(i),s<n-1&&(e+=", ")}const r=Ui(yE,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Ty({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Sl(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Ty(s),r!==n-1&&(e+=", ")}return e}function Y$(t){var e;return t.type==="function"?`function ${t.name}(${Sl(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Sl(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Sl(t.inputs)})`:t.type==="error"?`error ${t.name}(${Sl(t.inputs)})`:t.type==="constructor"?`constructor(${Sl(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const DT=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Z$(t){return DT.test(t)}function J$(t){return Ui(DT,t)}const $T=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function X$(t){return $T.test(t)}function Q$(t){return Ui($T,t)}const kT=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function ek(t){return kT.test(t)}function tk(t){return Ui(kT,t)}const UT=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function LT(t){return UT.test(t)}function nk(t){return Ui(UT,t)}const MT=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function rk(t){return MT.test(t)}function sk(t){return Ui(MT,t)}const BT=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function ik(t){return BT.test(t)}function ok(t){return Ui(BT,t)}const ak=/^receive\(\) external payable$/;function ck(t){return ak.test(t)}const lk=new Set(["indexed"]),Ny=new Set(["calldata","memory","storage"]);class Tae extends Nr{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class uk extends Nr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class dk extends Nr{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class fk extends Nr{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class hk extends Nr{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class pk extends Nr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class gk extends Nr{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class mk extends Nr{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class il extends Nr{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class yk extends Nr{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class wk extends Nr{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class bk extends Nr{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class vk extends Nr{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Ek(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const Mg=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function _k(t,e={}){if(ek(t))return Ck(t,e);if(X$(t))return Ak(t,e);if(Z$(t))return Ik(t,e);if(rk(t))return Sk(t,e);if(ik(t))return Tk(t);if(ck(t))return{type:"receive",stateMutability:"payable"};throw new yk({signature:t})}function Ck(t,e={}){const n=tk(t);if(!n)throw new il({signature:t,type:"function"});const r=cs(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Ia(r[a],{modifiers:Ny,structs:e,type:"function"}));const o=[];if(n.returns){const a=cs(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Ia(a[l],{modifiers:Ny,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Ak(t,e={}){const n=Q$(t);if(!n)throw new il({signature:t,type:"event"});const r=cs(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ia(r[o],{modifiers:lk,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Ik(t,e={}){const n=J$(t);if(!n)throw new il({signature:t,type:"error"});const r=cs(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ia(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Sk(t,e={}){const n=sk(t);if(!n)throw new il({signature:t,type:"constructor"});const r=cs(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Ia(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Tk(t){const e=ok(t);if(!e)throw new il({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Nk=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,xk=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Pk=/^u?int$/;function Ia(t,e){var d,f;const n=Ek(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(Mg.has(n))return Mg.get(n);const r=RT.test(t),s=Ui(r?xk:Nk,t);if(!s)throw new fk({param:t});if(s.name&&Rk(s.name))throw new hk({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const h=cs(s.type),p=[],g=h.length;for(let m=0;m<g;m++)p.push(Ia(h[m],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Pk.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!FT(c))throw new dk({type:c});if(s.modifier){if(!((f=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&f.call(d,s.modifier)))throw new pk({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Ny.has(s.modifier)&&!Dk(c,!!s.array))throw new gk({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return Mg.set(n,u),u}function cs(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?cs(a,[...e,n.trim()]):cs(a,e,`${n}${o}`,r);case"(":return cs(a,e,`${n}${o}`,r+1);case")":return cs(a,e,`${n}${o}`,r-1);default:return cs(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new vk({current:n,depth:r});return e.push(n.trim()),e}function FT(t){return t==="address"||t==="bool"||t==="function"||t==="string"||PT.test(t)||OT.test(t)}const Ok=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Rk(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||PT.test(t)||OT.test(t)||Ok.test(t)}function Dk(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function $k(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!LT(a))continue;const c=nk(a);if(!c)throw new il({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let f=0;f<d;f++){const p=l[f].trim();if(!p)continue;const g=Ia(p,{type:"struct"});u.push(g)}if(!u.length)throw new wk({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=jT(c,e)}return r}const kk=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function jT(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(RT.test(o.type))r.push(o);else{const c=Ui(kk,o.type);if(!(c!=null&&c.type))throw new mk({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new bk({type:u});r.push({...o,type:`tuple${l??""}`,components:jT(e[u]??[],e,new Set([...n,u]))})}else if(FT(u))r.push(o);else throw new uk({type:u})}}return r}function HT(t){const e=$k(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];LT(i)||n.push(_k(i,e))}return n}function Rt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Po(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Kk(t.type);return`${t.name}(${Dp(t.inputs,{includeName:e})})`}function Dp(t,{includeName:e=!1}={}){return t?t.map(n=>Uk(n,{includeName:e})).join(e?", ":","):""}function Uk(t,{includeName:e}){return t.type.startsWith("tuple")?`(${Dp(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Oo(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function tn(t){return Oo(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const WT="2.33.3";let Tl={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${WT}`},ue=class xy extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof xy?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof xy&&n.cause.docsPath||n.docsPath,i=(a=Tl.getDocsUrl)==null?void 0:a.call(Tl,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Tl.version?[`Version: ${Tl.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=WT}walk(e){return qT(this,e)}};function qT(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?qT(t.cause,e):e?null:t}class Lk extends ue{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class wE extends ue{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class zT extends ue{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Dp(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class $p extends ue{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Mk extends ue{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Bk extends ue{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${tn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Fk extends ue{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Nae extends ue{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class xae extends ue{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class VT extends ue{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class jk extends ue{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class KT extends ue{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Pae extends ue{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class xh extends ue{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Hk extends ue{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Oae extends ue{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Wk extends ue{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Po(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Po(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class Rae extends ue{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class Py extends ue{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Dp(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class GT extends ue{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Po(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class qk extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class zk extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class Vk extends ue{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Kk extends ue{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Dae extends ue{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}let YT=class extends ue{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},ZT=class extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class bE extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function ol(t,{dir:e,size:n=32}={}){return typeof t=="string"?Eo(t,{dir:e,size:n}):Gk(t,{dir:e,size:n})}function Eo(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new ZT({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Gk(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new ZT({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let JT=class extends ue{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Yk extends ue{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Zk extends ue{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Jk=class extends ue{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function _o(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Zr(t,{size:e}){if(tn(t)>e)throw new Jk({givenSize:tn(t),maxSize:e})}function jc(t,e={}){const{signed:n}=e;e.size&&Zr(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Mae(t,e={}){let n=t;if(e.size&&(Zr(n,{size:e.size}),n=_o(n)),_o(n)==="0x00")return!1;if(_o(n)==="0x01")return!0;throw new Zk(n)}function Sa(t,e={}){return Number(jc(t,e))}function XT(t,e={}){let n=Ys(t);return e.size&&(Zr(n,{size:e.size}),n=_o(n,{dir:"right"})),new TextDecoder().decode(n)}const Xk=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Hc(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ge(t,e):typeof t=="string"?kp(t,e):typeof t=="boolean"?QT(t,e):dr(t,e)}function QT(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Zr(n,{size:e.size}),ol(n,{size:e.size})):n}function dr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Xk[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Zr(r,{size:e.size}),ol(r,{dir:"right",size:e.size})):r}function Ge(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new JT({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ol(a,{size:r}):a}const Qk=new TextEncoder;function kp(t,e={}){const n=Qk.encode(t);return dr(n,e)}const e8=new TextEncoder;function Up(t,e={}){return typeof t=="number"||typeof t=="bigint"?n8(t,e):typeof t=="boolean"?t8(t,e):Oo(t)?Ys(t,e):eN(t,e)}function t8(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Zr(n,{size:e.size}),ol(n,{size:e.size})):n}const ii={zero:48,nine:57,A:65,F:70,a:97,f:102};function vE(t){if(t>=ii.zero&&t<=ii.nine)return t-ii.zero;if(t>=ii.A&&t<=ii.F)return t-(ii.A-10);if(t>=ii.a&&t<=ii.f)return t-(ii.a-10)}function Ys(t,e={}){let n=t;e.size&&(Zr(n,{size:e.size}),n=ol(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=vE(r.charCodeAt(a++)),l=vE(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ue(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function n8(t,e){const n=Ge(t,e);return Ys(n)}function eN(t,e={}){const n=e8.encode(t);return typeof e.size=="number"?(Zr(n,{size:e.size}),ol(n,{dir:"right",size:e.size})):n}const df=BigInt(2**32-1),EE=BigInt(32);function r8(t,e=!1){return e?{h:Number(t&df),l:Number(t>>EE&df)}:{h:Number(t>>EE&df)|0,l:Number(t&df)|0}}function tN(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=r8(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const _E=(t,e,n)=>t>>>n,CE=(t,e,n)=>t<<32-n|e>>>n,Za=(t,e,n)=>t>>>n|e<<32-n,Ja=(t,e,n)=>t<<32-n|e>>>n,ff=(t,e,n)=>t<<64-n|e>>>n-32,hf=(t,e,n)=>t>>>n-32|e<<64-n,s8=(t,e,n)=>t<<n|e>>>32-n,i8=(t,e,n)=>e<<n|t>>>32-n,o8=(t,e,n)=>e<<n-32|t>>>64-n,a8=(t,e,n)=>t<<n-32|e>>>64-n;function oi(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const c8=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),l8=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,u8=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),d8=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,f8=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),h8=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Xa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function p8(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ph(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ta(t,...e){if(!p8(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bae(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ph(t.outputLen),Ph(t.blockLen)}function Oh(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nN(t,e){Ta(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function g8(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Na(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Bg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ss(t,e){return t<<32-e|t>>>e}const m8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function y8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function w8(t){for(let e=0;e<t.length;e++)t[e]=y8(t[e]);return t}const AE=m8?t=>t:w8,rN=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",b8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fae(t){if(Ta(t),rN)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=b8[t[n]];return e}const ai={_0:48,_9:57,A:65,F:70,a:97,f:102};function IE(t){if(t>=ai._0&&t<=ai._9)return t-ai._0;if(t>=ai.A&&t<=ai.F)return t-(ai.A-10);if(t>=ai.a&&t<=ai.f)return t-(ai.a-10)}function jae(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(rN)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=IE(t.charCodeAt(i)),a=IE(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function v8(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function jw(t){return typeof t=="string"&&(t=v8(t)),Ta(t),t}function Hae(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ta(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class sN{}function Lp(t){const e=r=>t().update(jw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Wae(t=32){if(Xa&&typeof Xa.getRandomValues=="function")return Xa.getRandomValues(new Uint8Array(t));if(Xa&&typeof Xa.randomBytes=="function")return Uint8Array.from(Xa.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const E8=BigInt(0),Nl=BigInt(1),_8=BigInt(2),C8=BigInt(7),A8=BigInt(256),I8=BigInt(113),iN=[],oN=[],aN=[];for(let t=0,e=Nl,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],iN.push(2*(5*r+n)),oN.push((t+1)*(t+2)/2%64);let s=E8;for(let i=0;i<7;i++)e=(e<<Nl^(e>>C8)*I8)%A8,e&_8&&(s^=Nl<<(Nl<<BigInt(i))-Nl);aN.push(s)}const cN=tN(aN,!0),S8=cN[0],T8=cN[1],SE=(t,e,n)=>n>32?o8(t,e,n):s8(t,e,n),TE=(t,e,n)=>n>32?a8(t,e,n):i8(t,e,n);function N8(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=SE(l,u,1)^n[a],f=TE(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=oN[o],c=SE(s,i,a),l=TE(s,i,a),u=iN[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=S8[r],t[1]^=T8[r]}Na(n)}class Hw extends sN{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Ph(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=g8(this.state)}clone(){return this._cloneInto()}keccak(){AE(this.state32),N8(this.state32,this.rounds),AE(this.state32),this.posOut=0,this.pos=0}update(e){Oh(this),e=jw(e),Ta(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Oh(this,!1),Ta(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ph(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(nN(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Na(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Hw(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const x8=(t,e,n)=>Lp(()=>new Hw(e,t,n)),lN=x8(1,136,256/8);function jd(t,e){const n=e||"hex",r=lN(Oo(t,{strict:!1})?Up(t):t);return n==="bytes"?r:Hc(r)}const P8=t=>jd(Up(t));function O8(t){return P8(t)}function R8(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ue("Unable to normalize signature.");return s}const D8=t=>{const e=typeof t=="string"?t:Y$(t);return R8(e)};function uN(t){return O8(D8(t))}const Ww=uN;class xa extends ue{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let Mp=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Fg=new Mp(8192);function Bp(t,e){if(Fg.has(`${t}.${e}`))return Fg.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=jd(eN(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Fg.set(`${t}.${e}`,i),i}function aa(t,e){if(!Zs(t,{strict:!1}))throw new xa({address:t});return Bp(t,e)}const $8=/^0x[a-fA-F0-9]{40}$/,jg=new Mp(8192);function Zs(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(jg.has(r))return jg.get(r);const s=$8.test(t)?t.toLowerCase()===t?!0:n?Bp(t)===t:!0:!1;return jg.set(r,s),s}function Wc(t){return typeof t[0]=="string"?Fp(t):k8(t)}function k8(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Fp(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Rh(t,e,n,{strict:r}={}){return Oo(t,{strict:!1})?U8(t,e,n,{strict:r}):hN(t,e,n,{strict:r})}function dN(t,e){if(typeof e=="number"&&e>0&&e>tn(t)-1)throw new YT({offset:e,position:"start",size:tn(t)})}function fN(t,e,n){if(typeof e=="number"&&typeof n=="number"&&tn(t)!==n-e)throw new YT({offset:n,position:"end",size:tn(t)})}function hN(t,e,n,{strict:r}={}){dN(t,e);const s=t.slice(e,n);return r&&fN(s,e,n),s}function U8(t,e,n,{strict:r}={}){dN(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&fN(s,e,n),s}const zae=/^(.*)\[([0-9]*)\]$/,Vae=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,L8=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function pN(t,e){if(t.length!==e.length)throw new Fk({expectedLength:t.length,givenLength:e.length});const n=M8({params:t,values:e}),r=zw(n);return r.length===0?"0x":r}function M8({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(qw({param:t[r],value:e[r]}));return n}function qw({param:t,value:e}){const n=Vw(t.type);if(n){const[r,s]=n;return F8(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return z8(e,{param:t});if(t.type==="address")return B8(e);if(t.type==="bool")return H8(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=L8.exec(t.type)??[];return W8(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return j8(e,{param:t});if(t.type==="string")return q8(e);throw new qk(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function zw(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=tn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ge(e+s,{size:32})),r.push(a),s+=tn(a)):n.push(a)}return Wc([...n,...r])}function B8(t){if(!Zs(t))throw new xa({address:t});return{dynamic:!1,encoded:Eo(t.toLowerCase())}}function F8(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Vk(t);if(!r&&t.length!==e)throw new Mk({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=qw({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=zw(i);if(r){const a=Ge(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Wc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Wc(i.map(({encoded:o})=>o))}}function j8(t,{param:e}){const[,n]=e.type.split("bytes"),r=tn(t);if(!n){let s=t;return r%32!==0&&(s=Eo(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Wc([Eo(Ge(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Bk({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Eo(t,{dir:"right"})}}function H8(t){if(typeof t!="boolean")throw new ue(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Eo(QT(t))}}function W8(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new JT({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ge(t,{size:32,signed:e})}}function q8(t){const e=kp(t),n=Math.ceil(tn(e)/32),r=[];for(let s=0;s<n;s++)r.push(Eo(Rh(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Wc([Eo(Ge(tn(e),{size:32})),...r])}}function z8(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=qw({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?zw(r):Wc(r.map(({encoded:s})=>s))}}function Vw(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Kw=t=>Rh(uN(t),0,4);function Gw(t){const{abi:e,args:n=[],name:r}=t,s=Oo(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?Kw(a)===r:a.type==="event"?Ww(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?Oy(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=gN(a.inputs,o.inputs,n);if(l)throw new Wk({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function Oy(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Zs(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Oy(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Oy(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function gN(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return gN(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Zs(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Zs(n[r],{strict:!1}):!1)return o}}function V8(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}function ti(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const NE="/docs/contract/encodeFunctionData";function K8(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Gw({abi:e,args:n,name:r});if(!i)throw new xh(r,{docsPath:NE});s=i}if(s.type!=="function")throw new xh(void 0,{docsPath:NE});return{abi:[s],functionName:Kw(Po(s))}}function jp(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:K8(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?pN(s.inputs,e??[]):void 0;return Fp([i,o??"0x"])}const G8={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Y8={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Z8={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class xE extends ue{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class mN extends ue{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class J8 extends ue{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const X8={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new J8({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new mN({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new xE({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new xE({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function Yw(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(X8);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function Q8(t,e={}){typeof e.size<"u"&&Zr(t,{size:e.size});const n=dr(t,e);return jc(n,e)}function eU(t,e={}){let n=t;if(typeof e.size<"u"&&(Zr(n,{size:e.size}),n=_o(n)),n.length>1||n[0]>1)throw new Yk(n);return!!n[0]}function Ti(t,e={}){typeof e.size<"u"&&Zr(t,{size:e.size});const n=dr(t,e);return Sa(n,e)}function tU(t,e={}){let n=t;return typeof e.size<"u"&&(Zr(n,{size:e.size}),n=_o(n,{dir:"right"})),new TextDecoder().decode(n)}function Hp(t,e){const n=typeof e=="string"?Ys(e):e,r=Yw(n);if(tn(n)===0&&t.length>0)throw new $p;if(tn(e)&&tn(e)<32)throw new zT({data:typeof e=="string"?e:dr(e),params:t,size:tn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Rc(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Rc(t,e,{staticPosition:n}){const r=Vw(e.type);if(r){const[s,i]=r;return rU(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return aU(t,e,{staticPosition:n});if(e.type==="address")return nU(t);if(e.type==="bool")return sU(t);if(e.type.startsWith("bytes"))return iU(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return oU(t,e);if(e.type==="string")return cU(t,{staticPosition:n});throw new zk(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const PE=32,Ry=32;function nU(t){const e=t.readBytes(32);return[Bp(dr(hN(e,-20))),32]}function rU(t,e,{length:n,staticPosition:r}){if(!n){const o=Ti(t.readBytes(Ry)),a=r+o,c=a+PE;t.setPosition(a);const l=Ti(t.readBytes(PE)),u=Mu(e);let d=0;const f=[];for(let h=0;h<l;++h){t.setPosition(c+(u?h*32:d));const[p,g]=Rc(t,e,{staticPosition:c});d+=g,f.push(p)}return t.setPosition(r+32),[f,32]}if(Mu(e)){const o=Ti(t.readBytes(Ry)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Rc(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Rc(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function sU(t){return[eU(t.readBytes(32),{size:32}),32]}function iU(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Ti(t.readBytes(32));t.setPosition(n+o);const a=Ti(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[dr(c),32]}return[dr(t.readBytes(Number.parseInt(s),32)),32]}function oU(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Q8(s,{signed:n}):Ti(s,{signed:n}),32]}function aU(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(Mu(e)){const o=Ti(t.readBytes(Ry)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Rc(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Rc(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function cU(t,{staticPosition:e}){const n=Ti(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ti(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=tU(_o(i));return t.setPosition(e+32),[o,32]}function Mu(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Mu);const n=Vw(t.type);return!!(n&&Mu({...t,type:n[1]}))}function lU(t){const{abi:e,data:n}=t,r=Rh(n,0,4);if(r==="0x")throw new $p;const i=[...e||[],Y8,Z8].find(o=>o.type==="error"&&r===Kw(Po(o)));if(!i)throw new VT(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?Hp(i.inputs,Rh(n,4)):void 0,errorName:i.name}}const qr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function yN({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?qr(e[i]):e[i]}`).join(", ")})`}const uU={gwei:9,wei:18},dU={ether:-9,wei:9},fU={ether:-18,gwei:-9};function al(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Zw(t,e="wei"){return al(t,uU[e])}function lr(t,e="wei"){return al(t,dU[e])}class hU extends ue{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class pU extends ue{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function OE(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function gU(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=OE(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=OE(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Hd(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class mU extends ue{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class yU extends ue{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Hd(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class wU extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:f}){var p;const h=Hd({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${Zw(f)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lr(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",h].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class wN extends ue{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class bN extends ue{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class bU extends ue{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const vU=t=>t,Jw=t=>t;class EU extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:f,stateOverride:h}){var m;const p=n?ti(n):void 0;let g=Hd({from:p==null?void 0:p.address,to:d,value:typeof f<"u"&&`${Zw(f)} ${((m=s==null?void 0:s.nativeCurrency)==null?void 0:m.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lr(l)} gwei`,nonce:u});h&&(g+=`
${gU(h)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class vN extends ue{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Gw({abi:n,args:r,name:o}),l=c?yN({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Po(c,{includeName:!0}):void 0,d=Hd({address:s&&vU(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class _U extends ue{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=lU({abi:e,data:n});const{abiItem:u,errorName:d,args:f}=o;if(d==="Error")c=f[0];else if(d==="Panic"){const[h]=f;c=G8[h]}else{const h=u?Po(u,{includeName:!0}):void 0,p=u&&f?yN({abiItem:u,args:f,includeFunctionName:!1,includeName:!1}):void 0;a=[h?`Error: ${h}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof VT&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class CU extends ue{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class AU extends ue{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Xw extends ue{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class cu extends ue{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${Jw(o)}`,e&&`Request body: ${qr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class Qw extends ue{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Jw(r)}`,`Request body: ${qr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class RE extends ue{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Jw(n)}`,`Request body: ${qr(e)}`],name:"TimeoutError"})}}const IU=-1;class fr extends ue{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Qw?e.code:n??IU}}class xr extends fr{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Bu extends fr{constructor(e){super(e,{code:Bu.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Bu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Fu extends fr{constructor(e){super(e,{code:Fu.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Fu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class ju extends fr{constructor(e,{method:n}={}){super(e,{code:ju.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(ju,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Hu extends fr{constructor(e){super(e,{code:Hu.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Hu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Pa extends fr{constructor(e){super(e,{code:Pa.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Pa,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Wu extends fr{constructor(e){super(e,{code:Wu.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Wu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class qu extends fr{constructor(e){super(e,{code:qu.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(qu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Co extends fr{constructor(e){super(e,{code:Co.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Co,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class qc extends fr{constructor(e){super(e,{code:qc.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(qc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ca extends fr{constructor(e,{method:n}={}){super(e,{code:ca.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(ca,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class zc extends fr{constructor(e){super(e,{code:zc.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(zc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class zu extends fr{constructor(e){super(e,{code:zu.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(zu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Xt extends xr{constructor(e){super(e,{code:Xt.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Vu extends xr{constructor(e){super(e,{code:Vu.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Vu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Ku extends xr{constructor(e,{method:n}={}){super(e,{code:Ku.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Ku,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Gu extends xr{constructor(e){super(e,{code:Gu.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Gu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Yu extends xr{constructor(e){super(e,{code:Yu.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Yu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Js extends xr{constructor(e){super(e,{code:Js.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Js,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Zu extends xr{constructor(e){super(e,{code:Zu.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Zu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Ju extends xr{constructor(e){super(e,{code:Ju.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Ju,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Xu extends xr{constructor(e){super(e,{code:Xu.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Xu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Qu extends xr{constructor(e){super(e,{code:Qu.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Qu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class ed extends xr{constructor(e){super(e,{code:ed.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(ed,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class td extends xr{constructor(e){super(e,{code:td.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(td,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class nd extends xr{constructor(e){super(e,{code:nd.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(nd,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class SU extends fr{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const TU=3;function Dh(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof Xw?t:t instanceof ue?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:f}=a,h=t instanceof $p?new CU({functionName:i}):[TU,Pa.code].includes(c)&&(l||u||d||f)?new _U({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof Qw?u:f??d}):t;return new vN(h,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function NU(t){const e=jd(`0x${t.substring(4)}`).substring(26);return Bp(`0x${e}`)}const xU="modulepreload",PU=function(t){return"/alpha/"+t},DE={},cn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=PU(c),c in DE)return;DE[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":xU,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function OU({hash:t,signature:e}){const n=Oo(t)?t:Hc(t),{secp256k1:r}=await cn(async()=>{const{secp256k1:o}=await import("./secp256k1-BqT2oUA2.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:f}=e,h=Number(f??d),p=$E(h);return new r.Signature(jc(l),jc(u)).addRecoveryBit(p)}const o=Oo(e)?e:Hc(e);if(tn(o)!==65)throw new Error("invalid signature length");const a=Sa(`0x${o.slice(130)}`),c=$E(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function $E(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function RU({hash:t,signature:e}){return NU(await OU({hash:t,signature:e}))}function DU(t,e="hex"){const n=EN(t),r=Yw(new Uint8Array(n.length));return n.encode(r),e==="hex"?dr(r.bytes):r.bytes}function EN(t){return Array.isArray(t)?$U(t.map(e=>EN(e))):kU(t)}function $U(t){const e=t.reduce((s,i)=>s+i.length,0),n=_N(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function kU(t){const e=typeof t=="string"?Ys(t):t,n=_N(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function _N(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ue("Length is too large.")}function UU(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=jd(Fp(["0x05",DU([e?Ge(e):"0x",s,n?Ge(n):"0x"])]));return r==="bytes"?Ys(i):i}async function CN(t){const{authorization:e,signature:n}=t;return RU({hash:UU(e),signature:n??e})}class LU extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:f}){var p;const h=Hd({from:n==null?void 0:n.address,to:d,value:typeof f<"u"&&`${Zw(f)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lr(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lr(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lr(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",h].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class la extends ue{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(la,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(la,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class $h extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${lr(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty($h,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Dy extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${lr(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(Dy,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class $y extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty($y,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class ky extends ue{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(ky,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Uy extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Uy,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Ly extends ue{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Ly,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class My extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(My,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class By extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(By,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Fy extends ue{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Fy,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class kh extends ue{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${lr(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${lr(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(kh,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Wp extends ue{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function eb(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ue?t.walk(s=>(s==null?void 0:s.code)===la.code):t;return r instanceof ue?new la({cause:t,message:r.details}):la.nodeMessage.test(n)?new la({cause:t,message:t.details}):$h.nodeMessage.test(n)?new $h({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Dy.nodeMessage.test(n)?new Dy({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):$y.nodeMessage.test(n)?new $y({cause:t,nonce:e==null?void 0:e.nonce}):ky.nodeMessage.test(n)?new ky({cause:t,nonce:e==null?void 0:e.nonce}):Uy.nodeMessage.test(n)?new Uy({cause:t,nonce:e==null?void 0:e.nonce}):Ly.nodeMessage.test(n)?new Ly({cause:t}):My.nodeMessage.test(n)?new My({cause:t,gas:e==null?void 0:e.gas}):By.nodeMessage.test(n)?new By({cause:t,gas:e==null?void 0:e.gas}):Fy.nodeMessage.test(n)?new Fy({cause:t}):kh.nodeMessage.test(n)?new kh({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new Wp({cause:t})}function MU(t,{docsPath:e,...n}){const r=(()=>{const s=eb(t,n);return s instanceof Wp?t:s})();return new LU(r,{docsPath:e,...n})}function tb(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const BU={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function nb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=FU(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>dr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ge(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ge(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ge(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ge(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ge(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ge(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=BU[t.type]),typeof t.value<"u"&&(e.value=Ge(t.value)),e}function FU(t){return t.map(e=>({address:e.address,r:e.r?Ge(BigInt(e.r)):e.r,s:e.s?Ge(BigInt(e.s)):e.s,chainId:Ge(e.chainId),nonce:Ge(e.nonce),...typeof e.yParity<"u"?{yParity:Ge(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ge(e.v)}:{}}))}function kE(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new bE({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new bE({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function jU(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ge(e)),n!==void 0&&(o.nonce=Ge(n)),r!==void 0&&(o.state=kE(r)),s!==void 0){if(o.state)throw new pU;o.stateDiff=kE(s)}return o}function AN(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Zs(n,{strict:!1}))throw new xa({address:n});if(e[n])throw new hU({address:n});e[n]=jU(r)}return e}const HU=2n**256n-1n;function qp(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?ti(e):void 0;if(o&&!Zs(o.address))throw new xa({address:o.address});if(i&&!Zs(i))throw new xa({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new mU;if(r&&r>HU)throw new $h({maxFeePerGas:r});if(s&&r&&s>r)throw new kh({maxFeePerGas:r,maxPriorityFeePerGas:s})}class WU extends ue{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class rb extends ue{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class qU extends ue{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${lr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class IN extends ue{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const SN={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function TN(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Sa(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Sa(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?SN[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=zU(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function zU(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function VU(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:TN(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function rd(t,{blockHash:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest",includeTransactions:s}={}){var l,u,d;const i=s??!1,o=n!==void 0?Ge(n):void 0;let a=null;if(e?a=await t.request({method:"eth_getBlockByHash",params:[e,i]},{dedupe:!0}):a=await t.request({method:"eth_getBlockByNumber",params:[o||r,i]},{dedupe:!!o}),!a)throw new IN({blockHash:e,blockNumber:n});return(((d=(u=(l=t.chain)==null?void 0:l.formatters)==null?void 0:u.block)==null?void 0:d.format)||VU)(a)}async function NN(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Kae(t,e){return xN(t,e)}async function xN(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Rt(t,rd,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return jc(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Rt(t,rd,"getBlock")({}),Rt(t,NN,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new rb;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Gae(t,e){return jy(t,e)}async function jy(t,e){var f,h;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new WU;const c=10**(((f=o.toString().split(".")[1])==null?void 0:f.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Rt(t,rd,"getBlock")({});if(typeof((h=r==null?void 0:r.fees)==null?void 0:h.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new rb;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await xN(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Rt(t,NN,"getGasPrice")({}))}}async function KU(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ge(r):n]},{dedupe:!!r});return Sa(s)}function PN(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ys(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>dr(i))}function ON(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ys(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ys(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>dr(o))}function GU(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function YU(t,e,n){return t&e^~t&n}function ZU(t,e,n){return t&e^t&n^e&n}class RN extends sN{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Bg(this.buffer)}update(e){Oh(this),e=jw(e),Ta(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Bg(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oh(this),nN(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Na(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;GU(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Bg(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const ji=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Tn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Nn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),JU=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hi=new Uint32Array(64);class XU extends RN{constructor(e=32){super(64,e,8,!1),this.A=ji[0]|0,this.B=ji[1]|0,this.C=ji[2]|0,this.D=ji[3]|0,this.E=ji[4]|0,this.F=ji[5]|0,this.G=ji[6]|0,this.H=ji[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Hi[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Hi[d-15],h=Hi[d-2],p=Ss(f,7)^Ss(f,18)^f>>>3,g=Ss(h,17)^Ss(h,19)^h>>>10;Hi[d]=g+Hi[d-7]+p+Hi[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Ss(a,6)^Ss(a,11)^Ss(a,25),h=u+f+YU(a,c,l)+JU[d]+Hi[d]|0,g=(Ss(r,2)^Ss(r,13)^Ss(r,22))+ZU(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Na(Hi)}destroy(){this.set(0,0,0,0,0,0,0,0),Na(this.buffer)}}const DN=tN(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),QU=DN[0],eL=DN[1],Wi=new Uint32Array(80),qi=new Uint32Array(80);class $N extends RN{constructor(e=64){super(128,e,16,!1),this.Ah=Nn[0]|0,this.Al=Nn[1]|0,this.Bh=Nn[2]|0,this.Bl=Nn[3]|0,this.Ch=Nn[4]|0,this.Cl=Nn[5]|0,this.Dh=Nn[6]|0,this.Dl=Nn[7]|0,this.Eh=Nn[8]|0,this.El=Nn[9]|0,this.Fh=Nn[10]|0,this.Fl=Nn[11]|0,this.Gh=Nn[12]|0,this.Gl=Nn[13]|0,this.Hh=Nn[14]|0,this.Hl=Nn[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let w=0;w<16;w++,n+=4)Wi[w]=e.getUint32(n),qi[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=Wi[w-15]|0,v=qi[w-15]|0,_=Za(E,v,1)^Za(E,v,8)^_E(E,v,7),A=Ja(E,v,1)^Ja(E,v,8)^CE(E,v,7),N=Wi[w-2]|0,C=qi[w-2]|0,x=Za(N,C,19)^ff(N,C,61)^_E(N,C,6),P=Ja(N,C,19)^hf(N,C,61)^CE(N,C,6),D=u8(A,P,qi[w-7],qi[w-16]),H=d8(D,_,x,Wi[w-7],Wi[w-16]);Wi[w]=H|0,qi[w]=D|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const E=Za(d,f,14)^Za(d,f,18)^ff(d,f,41),v=Ja(d,f,14)^Ja(d,f,18)^hf(d,f,41),_=d&h^~d&g,A=f&p^~f&m,N=f8(b,v,A,eL[w],qi[w]),C=h8(N,y,E,_,QU[w],Wi[w]),x=N|0,P=Za(r,s,28)^ff(r,s,34)^ff(r,s,39),D=Ja(r,s,28)^hf(r,s,34)^hf(r,s,39),H=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=m|0,g=h|0,m=p|0,h=d|0,p=f|0,{h:d,l:f}=oi(l|0,u|0,C|0,x|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=c8(x,D,B);r=l8(I,C,P,H),s=I|0}({h:r,l:s}=oi(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=oi(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=oi(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=oi(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=oi(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=oi(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:m}=oi(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:b}=oi(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,f,h,p,g,m,y,b)}roundClean(){Na(Wi,qi)}destroy(){Na(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class tL extends $N{constructor(){super(48),this.Ah=Tn[0]|0,this.Al=Tn[1]|0,this.Bh=Tn[2]|0,this.Bl=Tn[3]|0,this.Ch=Tn[4]|0,this.Cl=Tn[5]|0,this.Dh=Tn[6]|0,this.Dl=Tn[7]|0,this.Eh=Tn[8]|0,this.El=Tn[9]|0,this.Fh=Tn[10]|0,this.Fl=Tn[11]|0,this.Gh=Tn[12]|0,this.Gl=Tn[13]|0,this.Hh=Tn[14]|0,this.Hl=Tn[15]|0}}const nL=Lp(()=>new XU),Yae=Lp(()=>new $N),Zae=Lp(()=>new tL),rL=nL;function sL(t,e){return rL(Oo(t,{strict:!1})?Up(t):t)}function iL(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=sL(e);return s.set([n],0),r==="bytes"?s:dr(s)}function oL(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(iL({commitment:i,to:r,version:n}));return s}const UE=6,kN=32,sb=4096,UN=kN*sb,LE=UN*UE-1-1*sb*UE;class aL extends ue{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class cL extends ue{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function lL(t){const e=typeof t.data=="string"?Ys(t.data):t.data,n=tn(e);if(!n)throw new cL;if(n>LE)throw new aL({maxSize:LE,size:n});const r=[];let s=!0,i=0;for(;s;){const o=Yw(new Uint8Array(UN));let a=0;for(;a<sb;){const c=e.slice(i,i+(kN-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>dr(o.bytes))}function uL(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??lL({data:e}),i=t.commitments??PN({blobs:s,kzg:n,to:r}),o=t.proofs??ON({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function dL(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new yU({transaction:t})}async function LN(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Sa(e)}const MN=["blobVersionedHashes","chainId","fees","gas","nonce","type"],ME=new Map;async function ib(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=MN,type:u}=e,d=n&&ti(n),f={...e,...d?{from:d==null?void 0:d.address}:{}};let h;async function p(){return h||(h=await Rt(t,rd,"getBlock")({blockTag:"latest"}),h)}let g;async function m(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await Rt(t,LN,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await m();f.nonce=await c.consume({address:d.address,chainId:y,client:t})}else f.nonce=await Rt(t,KU,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=PN({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=oL({commitments:y,to:"hex"});f.blobVersionedHashes=b}if(l.includes("sidecars")){const b=ON({blobs:r,commitments:y,kzg:o}),w=uL({blobs:r,commitments:y,proofs:b,to:"hex"});f.sidecars=w}}if(l.includes("chainId")&&(f.chainId=await m()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{f.type=dL(f)}catch{let y=ME.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",ME.set(t.uid,y)}f.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:w}=await jy(t,{block:y,chain:s,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<w)throw new qU({maxPriorityFeePerGas:w});f.maxPriorityFeePerGas=w,f.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new rb;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await jy(t,{block:y,chain:s,request:f,type:"legacy"});f.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(f.gas=await Rt(t,FN,"estimateGas")({...f,account:d&&{address:d.address,type:"json-rpc"}})),qp(f),delete f.parameters,f}async function BN(t,{address:e,blockNumber:n,blockTag:r=t.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?Ge(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function FN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?ti(n):void 0;try{let B=function(S){const{block:O,request:U,rpcStateOverride:F}=S;return t.request({method:"eth_estimateGas",params:F?[U,O??t.experimental_blockTag??"latest",F]:O?[U,O]:[U]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:f,data:h,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,value:E,stateOverride:v,..._}=await ib(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?Ge(d):void 0)||f,C=AN(v),x=await(async()=>{if(_.to)return _.to;if(c&&c.length>0)return await CN({authorization:c[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`")})})();qp(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,H=(P||nb)({...tb(_,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:h,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,to:x,value:E});let I=BigInt(await B({block:N,request:H,rpcStateOverride:C}));if(c){const S=await BN(t,{address:H.from}),O=await Promise.all(c.map(async U=>{const{address:F}=U,j=await B({block:N,request:{authorizationList:void 0,data:h,from:r==null?void 0:r.address,to:F,value:Ge(S)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(j)}));I+=O.reduce((U,F)=>U+F,0n)}return I}catch(a){throw MU(a,{...e,account:r,chain:t.chain})}}function fL(t,e){if(!Zs(t,{strict:!1}))throw new xa({address:t});if(!Zs(e,{strict:!1}))throw new xa({address:e});return t.toLowerCase()===e.toLowerCase()}const BE="/docs/contract/decodeEventLog";function hL(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new jk({docsPath:BE});const c=e.find(g=>g.type==="event"&&o===Ww(Po(g)));if(!(c&&"name"in c)||c.type!=="event")throw new KT(o,{docsPath:BE});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),f=d?[]:{},h=u.map((g,m)=>[g,m]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<h.length;g++){const[m,y]=h[g],b=a[g];if(!b)throw new GT({abiItem:c,param:m});f[d?y:m.name||y]=pL({param:m,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=Hp(p,n);if(g)if(d)for(let m=0;m<u.length;m++)f[m]=f[m]??g.shift();else for(let m=0;m<p.length;m++)f[p[m].name]=g[m]}catch(g){if(i)throw g instanceof zT||g instanceof mN?new Py({abiItem:c,data:n,params:p,size:tn(n)}):g}else if(i)throw new Py({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(f).length>0?f:void 0}}function pL({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(Hp([t],e)||[])[0]}function gL(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===Ww(u));if(!c)return null;const l=hL({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!mL({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof KT)return null;if(c instanceof Py||c instanceof GT){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function mL(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?fL(o,a):i.type==="string"||i.type==="bytes"?jd(Up(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function jN(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}const Hg="/docs/contract/decodeFunctionResult";function ob(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Gw({abi:e,args:n,name:r});if(!a)throw new xh(r,{docsPath:Hg});i=a}if(i.type!=="function")throw new xh(void 0,{docsPath:Hg});if(!i.outputs)throw new Hk(i.name,{docsPath:Hg});const o=Hp(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const yL="0.1.1";function wL(){return yL}let cl=class Hy extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Hy){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Hy&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${wL()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return HN(this,e)}};function HN(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?HN(t.cause,e):e?null:t}const bL="#__bigint";function vL(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+bL:s,n)}function WN(t,e){if(Vc(t)>e)throw new xL({givenSize:Vc(t),maxSize:e})}function EL(t,e){if(typeof e=="number"&&e>0&&e>Vc(t)-1)throw new VN({offset:e,position:"start",size:Vc(t)})}function _L(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Vc(t)!==n-e)throw new VN({offset:n,position:"end",size:Vc(t)})}function qN(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new PL({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const CL=new TextEncoder,AL=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IL(t,e={}){const{strict:n=!1}=e;if(!t)throw new FE(t);if(typeof t!="string")throw new FE(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new jE(t);if(!t.startsWith("0x"))throw new jE(t)}function Jae(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Xae(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(WN(n,e.size),zN(n,e.size)):n}function SL(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=AL[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(WN(r,e.size),TL(r,e.size)):r}function vi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new NL({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?zN(c,r):c}function Qae(t,e={}){return SL(CL.encode(t),e)}function zN(t,e){return qN(t,{dir:"left",size:e})}function TL(t,e){return qN(t,{dir:"right",size:e})}function ece(t,e,n,r={}){const{strict:s}=r;EL(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&_L(i,e,n),i}function Vc(t){return Math.ceil((t.length-2)/2)}function tce(t,e={}){const{strict:n=!1}=e;try{return IL(t,{strict:n}),!0}catch{return!1}}let NL=class extends cl{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class FE extends cl{constructor(e){super(`Value \`${typeof e=="object"?vL(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class jE extends cl{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let xL=class extends cl{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class VN extends cl{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let PL=class extends cl{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function OL(t){return{address:t.address,amount:vi(t.amount),index:vi(t.index),validatorIndex:vi(t.validatorIndex)}}function RL(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:vi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:vi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:vi(t.gasLimit)},...typeof t.number=="bigint"&&{number:vi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:vi(t.prevRandao)},...typeof t.time=="bigint"&&{time:vi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(OL)}}}const Wy=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],ice=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],KN=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],oce=[...KN,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],ace=[...KN,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],cce=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],lce=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],uce=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],dce=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],DL="0x82ad56cb",$L="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",kL="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",fce="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class qy extends ue{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class UL extends ue{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class LL extends ue{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class GN extends ue{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const Wg="/docs/contract/encodeDeployData";function YN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Lk({docsPath:Wg});if(!("inputs"in s))throw new wE({docsPath:Wg});if(!s.inputs||s.inputs.length===0)throw new wE({docsPath:Wg});const i=pN(s.inputs,n);return Fp([r,i])}function ZN({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new qy({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new qy({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function ML(t,{docsPath:e,...n}){const r=(()=>{const s=eb(t,n);return s instanceof Wp?t:s})();return new EU(r,{docsPath:e,...n})}function JN(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const qg=new Map;function XN({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:f})=>f);d.length!==0&&t(d).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let h=0;h<u.length;h++){const{resolve:p}=u[h];p==null||p([f[h],f])}}).catch(f=>{for(let h=0;h<u.length;h++){const{reject:p}=u[h];p==null||p(f)}})},o=()=>qg.delete(e),a=()=>c().map(({args:u})=>u),c=()=>qg.get(e)||[],l=u=>qg.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:f,reject:h}=JN();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:f,reject:h}),d):(l({args:u,resolve:f,reject:h}),setTimeout(i,r),d)}}}async function QN(t,e){var H,B,I,S;const{account:n=t.account,authorizationList:r,batch:s=!!((H=t.batch)!=null&&H.multicall),blockNumber:i,blockTag:o=t.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:f,factoryData:h,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,to:E,value:v,stateOverride:_,...A}=e,N=n?ti(n):void 0;if(u&&(f||h))throw new ue("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new ue("Cannot provide both `code` & `to` as parameters.");const C=u&&d,x=f&&h&&E&&d,P=C||x,D=C?jL({code:u,data:d}):x?HL({data:d,factory:f,factoryData:h,to:E}):d;try{qp(e);const U=(typeof i=="bigint"?Ge(i):void 0)||o,F=l?RL(l):void 0,j=AN(_),G=(S=(I=(B=t.chain)==null?void 0:B.formatters)==null?void 0:I.transactionRequest)==null?void 0:S.format,oe=(G||nb)({...tb(A,{format:G}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:D,gas:p,gasPrice:g,maxFeePerBlobGas:m,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:w,to:P?void 0:E,value:v});if(s&&BL({request:oe})&&!j&&!F)try{return await FL(t,{...oe,blockNumber:i,blockTag:o})}catch(he){if(!(he instanceof GN)&&!(he instanceof qy))throw he}const se=(()=>{const he=[oe,U];return j&&F?[...he,j,F]:j?[...he,j]:F?[...he,{},F]:he})(),de=await t.request({method:"eth_call",params:se});return de==="0x"?{data:void 0}:{data:de}}catch(O){const U=WL(O),{offchainLookup:F,offchainLookupSignature:j}=await cn(async()=>{const{offchainLookup:G,offchainLookupSignature:J}=await import("./ccip-BryMFCnT.js");return{offchainLookup:G,offchainLookupSignature:J}},__vite__mapDeps([2,3]));if(t.ccipRead!==!1&&(U==null?void 0:U.slice(0,10))===j&&E)return{data:await F(t,{data:U,to:E})};throw P&&(U==null?void 0:U.slice(0,10))==="0x101bb98d"?new AU({factory:f}):ML(O,{...e,account:N,chain:t.chain})}}function BL({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(DL)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function FL(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i=t.experimental_blockTag??"latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new GN;l=ZN({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ge(s):void 0)||i,{schedule:f}=XN({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(m){return m.reduce((b,{data:w})=>b+(w.length-2),0)>n*2},fn:async m=>{const y=m.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),b=jp({abi:Wy,args:[y],functionName:"aggregate3"}),w=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return ob({abi:Wy,args:[y],functionName:"aggregate3",data:w||"0x"})}}),[{returnData:h,success:p}]=await f({data:o,to:c});if(!p)throw new Xw({data:h});return h==="0x"?{data:void 0}:{data:h}}function jL(t){const{code:e,data:n}=t;return YN({abi:HT(["constructor(bytes, bytes)"]),bytecode:$L,args:[e,n]})}function HL(t){const{data:e,factory:n,factoryData:r,to:s}=t;return YN({abi:HT(["constructor(address, bytes, address, bytes)"]),bytecode:kL,args:[s,e,n,r]})}function WL(t){var n;if(!(t instanceof ue))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function ex(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=jp({abi:n,args:s,functionName:i});try{const{data:c}=await Rt(t,QN,"call")({...o,data:a,to:r});return ob({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Dh(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}const zg=new Map,HE=new Map;let qL=0;function Uh(t,e,n){const r=++qL,s=()=>zg.get(t)||[],i=()=>{const u=s();zg.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(f=>f.id===r))return;const d=HE.get(t);if(u.length===1&&d){const f=d();f instanceof Promise&&f.catch(()=>{})}i()},a=s();if(zg.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var h,p;const f=s();if(f.length!==0)for(const g of f)(p=(h=g.fns)[u])==null||p.call(h,...d)};const l=n(c);return typeof l=="function"&&HE.set(t,l),o}async function Lh(t){return new Promise(e=>setTimeout(e,t))}function tx(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await Lh(c);const l=async()=>{s&&(await t({unpoll:i}),await Lh(r),l())};l()})(),i}const zL=new Map,VL=new Map;function KL(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,zL),r=e(t,VL);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function GL(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=KL(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const YL=t=>`blockNumber.${t}`;async function ZL(t,{cacheTime:e=t.cacheTime}={}){const n=await GL(()=>t.request({method:"eth_blockNumber"}),{cacheKey:YL(t.uid),cacheTime:e});return BigInt(n)}async function JL(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>jN(i));return!("abi"in e)||!e.abi?s:gL({abi:e.abi,logs:s,strict:n})}async function XL(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}class ab extends ue{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class Vg extends ue{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function QL({chain:t,currentChainId:e}){if(!t)throw new LL;if(e!==t.id)throw new UL({chain:t,currentChainId:e})}function e4(t,{docsPath:e,...n}){const r=(()=>{const s=eb(t,n);return s instanceof Wp?t:s})();return new wU(r,{docsPath:e,...n})}async function t4(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Kg=new Mp(128);async function nx(t,e){var b,w,E,v;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,type:p,value:g,...m}=e;if(typeof n>"u")throw new ab({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?ti(n):null;try{qp(e);const _=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await CN({authorization:i[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let A;r!==null&&(A=await Rt(t,LN,"getChainId")({}),QL({currentChainId:A,chain:r}));const N=(E=(w=(b=t.chain)==null?void 0:b.formatters)==null?void 0:w.transactionRequest)==null?void 0:E.format,x=(N||nb)({...tb(m,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,to:_,type:p,value:g}),P=Kg.get(t.uid),D=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:D,params:[x]},{retryCount:0})}catch(H){if(P===!1)throw H;const B=H;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[x]},{retryCount:0}).then(I=>(Kg.set(t.uid,!0),I)).catch(I=>{const S=I;throw S.name==="MethodNotFoundRpcError"||S.name==="MethodNotSupportedRpcError"?(Kg.set(t.uid,!1),B):S});throw B}}if((y==null?void 0:y.type)==="local"){const A=await Rt(t,ib,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:h,nonceManager:y.nonceManager,parameters:[...MN,"sidecars"],type:p,value:g,...m,to:_}),N=(v=r==null?void 0:r.serializers)==null?void 0:v.transaction,C=await y.signTransaction(A,{serializer:N});return await Rt(t,t4,"sendRawTransaction")({serializedTransaction:C})}throw(y==null?void 0:y.type)==="smart"?new Vg({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Vg({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(_){throw _ instanceof Vg?_:e4(_,{...e,account:y,chain:e.chain||void 0})}}async function n4(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new ab({docsPath:"/docs/contract/writeContract"});const l=r?ti(r):null,u=jp({abi:n,args:i,functionName:a});try{return await Rt(t,nx,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Dh(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Mh(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await Lh(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}const r4={"0x0":"reverted","0x1":"success"};function s4(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>jN(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Sa(t.transactionIndex):null,status:t.status?r4[t.status]:null,type:t.type?SN[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const zy=256;let pf=zy,gf;function rx(t=11){if(!gf||pf+t>zy*2){gf="",pf=0;for(let e=0;e<zy;e++)gf+=(256+Math.random()*256|0).toString(16).substring(1)}return gf.substring(pf,pf+++t)}function sx(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=t.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=t.pollingInterval??l,d=t.cacheTime??u,f=t.account?ti(t.account):void 0,{config:h,request:p,value:g}=t.transport({chain:n,pollingInterval:u}),m={...h,...g},y={account:f,batch:e,cacheTime:d,ccipRead:r,chain:n,key:s,name:i,pollingInterval:u,request:p,transport:m,type:o,uid:rx(),...a?{experimental_blockTag:a}:{}};function b(w){return E=>{const v=E(w);for(const A in y)delete v[A];const _={...w,...v};return Object.assign(_,{extend:b(_)})}}return Object.assign(y,{extend:b(y)})}const mf=new Mp(8192);function i4(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(mf.get(n))return mf.get(n);const r=t().finally(()=>mf.delete(n));return mf.set(n,r),r}function o4(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new ca(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new ca(new Error("method not supported"),{method:l});const u=s?kp(`${c}.${qr(n)}`):void 0;return i4(()=>Mh(async()=>{try{return await t(n)}catch(f){const h=f;switch(h.code){case Bu.code:throw new Bu(h);case Fu.code:throw new Fu(h);case ju.code:throw new ju(h,{method:n.method});case Hu.code:throw new Hu(h);case Pa.code:throw new Pa(h);case Wu.code:throw new Wu(h);case qu.code:throw new qu(h);case Co.code:throw new Co(h);case qc.code:throw new qc(h);case ca.code:throw new ca(h,{method:n.method});case zc.code:throw new zc(h);case zu.code:throw new zu(h);case Xt.code:throw new Xt(h);case Vu.code:throw new Vu(h);case Ku.code:throw new Ku(h);case Gu.code:throw new Gu(h);case Yu.code:throw new Yu(h);case Js.code:throw new Js(h);case Zu.code:throw new Zu(h);case Ju.code:throw new Ju(h);case Xu.code:throw new Xu(h);case Qu.code:throw new Qu(h);case ed.code:throw new ed(h);case td.code:throw new td(h);case nd.code:throw new nd(h);case 5e3:throw new Xt(h);default:throw f instanceof ue?f:new SU(h)}}},{delay:({count:f,error:h})=>{var p;if(h&&h instanceof cu){const g=(p=h==null?void 0:h.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<f)*o},retryCount:a,shouldRetry:({error:f})=>a4(f)}),{enabled:s,id:u})}}function a4(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===zc.code||t.code===Pa.code:t instanceof cu&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function cb({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=rx();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:o4(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function c4(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>cb({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function WE(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=l4,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let f=t,h=()=>{};const p=cb({key:n,name:r,async request({method:g,params:m}){let y;const b=async(w=0)=>{const E=f[w]({...d,chain:c,retryCount:0,timeout:u});try{const v=await E.request({method:g,params:m});return h({method:g,params:m,response:v,transport:E,status:"success"}),v}catch(v){if(h({error:v,method:g,params:m,transport:E,status:"error"}),i(v)||w===f.length-1||(y??(y=f.slice(w+1).some(_=>{const{include:A,exclude:N}=_({chain:c}).config.methods||{};return A?A.includes(g):N?!N.includes(g):!0})),!y))throw v;return b(w+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>h=g,transports:f.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};u4({chain:c,interval:g.interval??l,onTransports:m=>f=m,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:f,weights:g.weights})}return p}}function l4(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===qc.code||t.code===Xt.code||la.nodeMessage.test(t.message)||t.code===5e3))}function u4({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const f=await Promise.all(o.map(async g=>{const m=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,w;try{await(r?r({transport:m}):m.request({method:"net_listening"})),w=1}catch{w=0}finally{b=Date.now()}return{latency:b-y,success:w}}));u.push(f),u.length>s&&u.shift();const h=Math.max(...u.map(g=>Math.max(...g.map(({latency:m})=>m)))),p=o.map((g,m)=>{const y=u.map(_=>_[m].latency),w=1-y.reduce((_,A)=>_+A,0)/y.length/h,E=u.map(_=>_[m].success),v=E.reduce((_,A)=>_+A,0)/E.length;return v===0?[0,m]:[l*w+c*v,m]}).sort((g,m)=>m[0]-g[0]);n(p.map(([,g])=>o[g])),await Lh(e),d()};d()}class d4 extends ue{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function ix(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function f4(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const qE=f4();function h4(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const f=await ix(async({signal:p})=>{const g={...a,body:Array.isArray(r)?qr(r.map(w=>({jsonrpc:"2.0",id:w.id??qE.take(),...w}))):qr({jsonrpc:"2.0",id:r.id??qE.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},m=new Request(t,g),y=await(s==null?void 0:s(m,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new RE({body:r,url:t}),timeout:o,signal:!0});i&&await i(f);let h;if((d=f.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))h=await f.json();else{h=await f.text();try{h=JSON.parse(h||"{}")}catch(p){if(f.ok)throw p;h={error:h}}}if(!f.ok)throw new cu({body:r,details:qr(h.error)||f.statusText,headers:f.headers,status:f.status,url:t});return h}catch(f){throw f instanceof cu||f instanceof RE?f:new cu({body:r,cause:f,url:t})}}}}function Yl(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:f,timeout:h})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},m=e.retryCount??f,y=h??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new d4;const w=h4(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return cb({key:s,methods:i,name:o,async request({method:E,params:v}){const _={method:E,params:v},{schedule:A}=XN({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>w.request({body:P}),sort:(P,D)=>P.id-D.id}),N=async P=>n?A(P):[await w.request({body:P})],[{error:C,result:x}]=await N(_);if(u)return{error:C,result:x};if(C)throw new Qw({body:_,error:C,url:b});return x},retryCount:m,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}async function p4(t){const e=V8(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}function g4(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class m4 extends ue{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function y4(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new m4({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}async function ox(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,f;const o=r||"latest",a=n!==void 0?Ge(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ge(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ge(i)]},{dedupe:!!a}),!c)throw new wN({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((f=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:f.format)||TN)(c)}async function Gg(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new bN({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||s4)(n)}async function w4(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=ZN({blockNumber:i,chain:t.chain,contract:"multicall3"})}const f=[[]];let h=0,p=0;for(let b=0;b<l.length;b++){const{abi:w,address:E,args:v,functionName:_}=l[b];try{const A=jp({abi:w,args:v,functionName:_});p+=(A.length-2)/2,u>0&&p>u&&f[h].length>0&&(h++,p=(A.length-2)/2,f[h]=[]),f[h]=[...f[h],{allowFailure:!0,callData:A,target:E}]}catch(A){const N=Dh(A,{abi:w,address:E,args:v,docsPath:"/docs/contract/multicall",functionName:_,sender:n});if(!r)throw N;f[h]=[...f[h],{allowFailure:!0,callData:"0x",target:E}]}}const g=await Promise.allSettled(f.map(b=>Rt(t,ex,"readContract")({abi:Wy,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),m=[];for(let b=0;b<g.length;b++){const w=g[b];if(w.status==="rejected"){if(!r)throw w.reason;for(let v=0;v<f[b].length;v++)m.push({status:"failure",error:w.reason,result:void 0});continue}const E=w.value;for(let v=0;v<E.length;v++){const{returnData:_,success:A}=E[v],{callData:N}=f[b][v],{abi:C,address:x,functionName:P,args:D}=l[m.length];try{if(N==="0x")throw new $p;if(!A)throw new Xw({data:_});const H=ob({abi:C,args:D,data:_,functionName:P});m.push(r?{result:H,status:"success"}:H)}catch(H){const B=Dh(H,{abi:C,address:x,args:D,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw B;m.push({error:B,result:void 0,status:"failure"})}}}if(m.length!==l.length)throw new ue("multicall results mismatch");return m}function b4(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=qr(["watchBlockNumber",t.uid,e,n,o]);return Uh(d,{onBlockNumber:r,onError:s},f=>tx(async()=>{var h;try{const p=await Rt(t,ZL,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)f.onBlockNumber(g,c),c=g}(!c||p>c)&&(f.onBlockNumber(p,c),c=p)}catch(p){(h=f.onError)==null||h.call(f,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=qr(["watchBlockNumber",t.uid,e,n]);return Uh(d,{onBlockNumber:r,onError:s},f=>{let h=!0,p=()=>h=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:m}=await g.subscribe({params:["newHeads"],onData(y){var w;if(!h)return;const b=jc((w=y.result)==null?void 0:w.number);f.onBlockNumber(b,c),c=b},onError(y){var b;(b=f.onError)==null||b.call(f,y)}});p=m,h||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function v4(t,e){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:i,retryCount:o=6,retryDelay:a=({count:v})=>~~(1<<v)*200,timeout:c=18e4}=e,l=qr(["waitForTransactionReceipt",t.uid,s]),u=(()=>{var v;return e.pollingInterval?e.pollingInterval:(v=t.chain)!=null&&v.experimental_preconfirmationTime?t.chain.experimental_preconfirmationTime:t.pollingInterval})();let d,f,h,p=!1,g,m;const{promise:y,resolve:b,reject:w}=JN(),E=c?setTimeout(()=>{m(),g(),w(new bU({hash:s}))},c):void 0;return g=Uh(l,{onReplaced:i,resolve:b,reject:w},async v=>{if(h=await Rt(t,Gg,"getTransactionReceipt")({hash:s}).catch(()=>{}),h&&r<=1){clearTimeout(E),v.resolve(h),g();return}m=Rt(t,b4,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:u,async onBlockNumber(_){const A=C=>{clearTimeout(E),m(),C(),g()};let N=_;if(!p)try{if(h){if(r>1&&(!h.blockNumber||N-h.blockNumber+1n<r))return;A(()=>v.resolve(h));return}if(n&&!d&&(p=!0,await Mh(async()=>{d=await Rt(t,ox,"getTransaction")({hash:s}),d.blockNumber&&(N=d.blockNumber)},{delay:a,retryCount:o}),p=!1),h=await Rt(t,Gg,"getTransactionReceipt")({hash:s}),r>1&&(!h.blockNumber||N-h.blockNumber+1n<r))return;A(()=>v.resolve(h))}catch(C){if(C instanceof wN||C instanceof bN){if(!d){p=!1;return}try{f=d,p=!0;const x=await Mh(()=>Rt(t,rd,"getBlock")({blockNumber:N,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:H})=>H instanceof IN});p=!1;const P=x.transactions.find(({from:H,nonce:B})=>H===f.from&&B===f.nonce);if(!P||(h=await Rt(t,Gg,"getTransactionReceipt")({hash:P.hash}),r>1&&(!h.blockNumber||N-h.blockNumber+1n<r)))return;let D="replaced";P.to===f.to&&P.value===f.value&&P.input===f.input?D="repriced":P.from===P.to&&P.value===0n&&(D="cancelled"),A(()=>{var H;(H=v.onReplaced)==null||H.call(v,{reason:D,replacedTransaction:f,transaction:P,transactionReceipt:h}),v.resolve(h)})}catch(x){A(()=>v.reject(x))}}else A(()=>v.reject(C))}}})}),y}function E4(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=qr(["watchPendingTransactions",t.uid,e,i]);return Uh(l,{onTransactions:r,onError:n},u=>{let d;const f=tx(async()=>{var h;try{if(!d)try{d=await Rt(t,p4,"createPendingTransactionFilter")({});return}catch(g){throw f(),g}const p=await Rt(t,JL,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(h=u.onError)==null||h.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Rt(t,XL,"uninstallFilter")({filter:d}),f()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!l)return;const h=f.result;r([h])},onError(f){n==null||n(f)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function _4(t,{account:e=t.account,message:n}){if(!e)throw new ab({docsPath:"/docs/actions/wallet/signMessage"});const r=ti(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?kp(n):n.raw instanceof Uint8Array?Hc(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}const Yg={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return al(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},lb={async getMyTokensWithBalance(t){const e=xe.state.address,n=R.state.activeCaipNetwork,r=pe.getConnectorId("eip155")===V.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=ae.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===V.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Le.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=Yg.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ye.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ye.walletGetAssets({account:t,chainFilter:[s]});if(!Yg.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>Yg.createBalance(l,e.caipNetworkId));return ae.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ts=It({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),C4={state:Ts,replaceState(t){t&&Object.assign(Ts,Aa(t))},subscribe(t){return R.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return R.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){R.setAccountProp("status",t,e)},getCaipAddress(t){var e,n;if(t)return(n=(e=R.state.chains.get(t))==null?void 0:e.accountState)==null?void 0:n.caipAddress},setCaipAddress(t,e){const n=t?Ie.getPlainAddress(t):void 0;e===R.state.activeChain&&(R.state.activeCaipAddress=t),R.setAccountProp("caipAddress",t,e),R.setAccountProp("address",n,e)},setBalance(t,e,n){R.setAccountProp("balance",t,n),R.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){R.setAccountProp("profileName",t,e)},setProfileImage(t,e){R.setAccountProp("profileImage",t,e)},setUser(t,e){R.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){R.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){R.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){R.setAccountProp("currentTab",t,R.state.activeChain)},setTokenBalance(t,e){t&&R.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){R.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){var s,i;if(!n)return;const r=((i=(s=R.state.chains.get(n))==null?void 0:s.accountState)==null?void 0:i.addressLabels)||new Map;r.set(t,e),R.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){var r,s;if(!e)return;const n=((s=(r=R.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.addressLabels)||new Map;n.delete(t),R.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){R.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){R.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&R.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){R.setAccountProp("socialWindow",t?Aa(t):void 0,e)},setFarcasterUrl(t,e){R.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ts.balanceLoading=!0;const e=(i=R.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=R.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=R.state.activeCaipAddress,s=r?Ie.getPlainAddress(r):void 0;if(Ts.lastRetry&&!Ie.isAllowedRetry(Ts.lastRetry,30*ut.ONE_SEC_MS))return Ts.balanceLoading=!1,[];try{if(s&&e&&n){const a=await lb.getMyTokensWithBalance();return xe.setTokenBalance(a,n),Ts.lastRetry=void 0,Ts.balanceLoading=!1,a}}catch(a){Ts.lastRetry=Date.now(),t==null||t(a),Hs.showError("Token Balance Unavailable")}finally{Ts.balanceLoading=!1}return[]},resetAccount(t){R.resetAccount(t)}},xe=Tr(C4),A4={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=R.state.activeCaipNetwork,r=Fe.state.data;if(t.id===(n==null?void 0:n.id))return;const i=xe.getCaipAddress(R.state.activeChain),o=t.chainNamespace!==R.state.activeChain,a=xe.getCaipAddress(t.chainNamespace),l=pe.getConnectorId(R.state.activeChain)===V.CONNECTOR_ID.AUTH,u=V.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Fe.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Fe.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Fe.push("SwitchNetwork",{...r,network:t})}},Jn=It({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),I4={state:Jn,subscribe(t){return _n(Jn,()=>t(Jn))},subscribeKey(t,e){return Cn(Jn,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=R.state.activeChain,r=e&&e!==n,s=(i=R.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(ye.state.wcBasic?De.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await De.prefetch(),pe.setFilterByNamespace(t==null?void 0:t.namespace),et.setLoading(!0,e),e&&r){const a=((o=R.getNetworkData(e))==null?void 0:o.caipNetwork)||R.getRequestedCaipNetworks(e)[0];a&&A4.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=R.state.noAdapters;re.state.manualWCControl||a&&!s?Ie.isMobile()?Fe.reset("AllWallets"):Fe.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Fe.reset(t.view,t.data):s?Fe.reset("Account"):Fe.reset("Connect")}Jn.open=!0,ls.set({open:!0}),yt.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=re.state.enableEmbedded,e=!!R.state.activeCaipAddress;Jn.open&&yt.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Jn.open=!1,Fe.reset("Connect"),et.clearLoading(),t?e?Fe.replace("Account"):Fe.push("Connect"):ls.set({open:!1}),ye.resetUri()},setLoading(t,e){e&&Jn.loadingNamespaceMap.set(e,t),Jn.loading=t,ls.set({loading:t})},clearLoading(){Jn.loadingNamespaceMap.clear(),Jn.loading=!1,ls.set({loading:!1})},shake(){Jn.shake||(Jn.shake=!0,setTimeout(()=>{Jn.shake=!1},500))}},et=Tr(I4),lu={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},Vy={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},S4={providers:IT,selectedProvider:null,error:null,purchaseCurrency:lu,paymentCurrency:Vy,purchaseCurrencies:[lu],paymentCurrencies:[],quotesLoading:!1},nt=It(S4),T4={state:nt,subscribe(t){return _n(nt,()=>t(nt))},subscribeKey(t,e){return Cn(nt,t,e)},setSelectedProvider(t){var e,n;if(t&&t.name==="meld"){const r=R.state.activeChain,s=r===V.CHAIN.SOLANA?"SOL":"USDC",i=r?((n=(e=R.state.chains.get(r))==null?void 0:e.accountState)==null?void 0:n.address)??"":"",o=new URL(t.url);o.searchParams.append("publicKey",m$),o.searchParams.append("destinationCurrencyCode",s),o.searchParams.append("walletAddress",i),o.searchParams.append("externalCustomerId",re.state.projectId),nt.selectedProvider={...t,url:o.toString()}}else nt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=IT.filter(r=>e.includes(r.name));nt.providers=n}else nt.providers=[]},setPurchaseCurrency(t){nt.purchaseCurrency=t},setPaymentCurrency(t){nt.paymentCurrency=t},setPurchaseAmount(t){Ky.state.purchaseAmount=t},setPaymentAmount(t){Ky.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Le.getOnrampOptions();nt.purchaseCurrencies=t.purchaseCurrencies,nt.paymentCurrencies=t.paymentCurrencies,nt.paymentCurrency=t.paymentCurrencies[0]||Vy,nt.purchaseCurrency=t.purchaseCurrencies[0]||lu,await De.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await De.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;nt.quotesLoading=!0;try{const n=await Le.getOnrampQuote({purchaseCurrency:nt.purchaseCurrency,paymentCurrency:nt.paymentCurrency,amount:((t=nt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=nt.purchaseCurrency)==null?void 0:e.symbol});return nt.quotesLoading=!1,nt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return nt.error=n.message,nt.quotesLoading=!1,null}finally{nt.quotesLoading=!1}},resetState(){nt.selectedProvider=null,nt.error=null,nt.purchaseCurrency=lu,nt.paymentCurrency=Vy,nt.purchaseCurrencies=[lu],nt.paymentCurrencies=[],nt.paymentAmount=void 0,nt.purchaseAmount=void 0,nt.quotesLoading=!1}},Ky=Tr(T4),zE=2147483648,N4={convertEVMChainIdToCoinType(t){if(t>=zE)throw new Error("Invalid chainId");return(zE|t)>>>0}},Rr=It({suggestions:[],loading:!1}),x4={state:Rr,subscribe(t){return _n(Rr,()=>t(Rr))},subscribeKey(t,e){return Cn(Rr,t,e)},async resolveName(t){var e,n;try{return await Le.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Le.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Rr.loading=!0,Rr.suggestions=[];const e=await Le.getEnsNameSuggestions(t);return Rr.suggestions=e.suggestions||[],Rr.suggestions}catch(e){const n=uu.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Rr.loading=!1}},async getNamesForAddress(t){try{if(!R.state.activeCaipNetwork)return[];const n=ae.getEnsFromCacheForAddress(t);if(n)return n;const r=await Le.reverseLookupEnsName({address:t});return ae.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=uu.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=R.state.activeCaipNetwork,n=xe.state.address,r=pe.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Rr.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Fe.pushTransactionStack({onCancel(){Fe.replace("RegisterAccountName")}});const i=await ye.signMessage(s);Rr.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=N4.convertEVMChainIdToCoinType(Number(o));await Le.registerEnsName({coinType:a,address:n,signature:i,message:s}),xe.setProfileName(t,e.chainNamespace),ae.updateEnsCache({address:n,ens:[{name:t,registered_at:new Date().toISOString(),updated_at:void 0,addresses:{},attributes:[]}],timestamp:Date.now()}),Fe.replace("RegisterAccountNameSuccess")}catch(s){const i=uu.parseEnsApiError(s,`Error registering name ${t}`);throw Fe.replace("RegisterAccountName"),new Error(i)}finally{Rr.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},uu=Tr(x4);var yf={exports:{}},VE;function P4(){if(VE)return yf.exports;VE=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(v,_,A){return Function.prototype.apply.call(v,_,A)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:n=function(v){return Object.getOwnPropertyNames(v)};function r(E){console&&console.warn&&console.warn(E)}var s=Number.isNaN||function(v){return v!==v};function i(){i.init.call(this)}yf.exports=i,yf.exports.once=y,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(E){if(typeof E!="number"||E<0||s(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");o=E}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||s(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function c(E){return E._maxListeners===void 0?i.defaultMaxListeners:E._maxListeners}i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(v){for(var _=[],A=1;A<arguments.length;A++)_.push(arguments[A]);var N=v==="error",C=this._events;if(C!==void 0)N=N&&C.error===void 0;else if(!N)return!1;if(N){var x;if(_.length>0&&(x=_[0]),x instanceof Error)throw x;var P=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw P.context=x,P}var D=C[v];if(D===void 0)return!1;if(typeof D=="function")e(D,this,_);else for(var H=D.length,B=p(D,H),A=0;A<H;++A)e(B[A],this,_);return!0};function l(E,v,_,A){var N,C,x;if(a(_),C=E._events,C===void 0?(C=E._events=Object.create(null),E._eventsCount=0):(C.newListener!==void 0&&(E.emit("newListener",v,_.listener?_.listener:_),C=E._events),x=C[v]),x===void 0)x=C[v]=_,++E._eventsCount;else if(typeof x=="function"?x=C[v]=A?[_,x]:[x,_]:A?x.unshift(_):x.push(_),N=c(E),N>0&&x.length>N&&!x.warned){x.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=E,P.type=v,P.count=x.length,r(P)}return E}i.prototype.addListener=function(v,_){return l(this,v,_,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(v,_){return l(this,v,_,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,v,_){var A={fired:!1,wrapFn:void 0,target:E,type:v,listener:_},N=u.bind(A);return N.listener=_,A.wrapFn=N,N}i.prototype.once=function(v,_){return a(_),this.on(v,d(this,v,_)),this},i.prototype.prependOnceListener=function(v,_){return a(_),this.prependListener(v,d(this,v,_)),this},i.prototype.removeListener=function(v,_){var A,N,C,x,P;if(a(_),N=this._events,N===void 0)return this;if(A=N[v],A===void 0)return this;if(A===_||A.listener===_)--this._eventsCount===0?this._events=Object.create(null):(delete N[v],N.removeListener&&this.emit("removeListener",v,A.listener||_));else if(typeof A!="function"){for(C=-1,x=A.length-1;x>=0;x--)if(A[x]===_||A[x].listener===_){P=A[x].listener,C=x;break}if(C<0)return this;C===0?A.shift():g(A,C),A.length===1&&(N[v]=A[0]),N.removeListener!==void 0&&this.emit("removeListener",v,P||_)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(v){var _,A,N;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[v]),this;if(arguments.length===0){var C=Object.keys(A),x;for(N=0;N<C.length;++N)x=C[N],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(_=A[v],typeof _=="function")this.removeListener(v,_);else if(_!==void 0)for(N=_.length-1;N>=0;N--)this.removeListener(v,_[N]);return this};function f(E,v,_){var A=E._events;if(A===void 0)return[];var N=A[v];return N===void 0?[]:typeof N=="function"?_?[N.listener||N]:[N]:_?m(N):p(N,N.length)}i.prototype.listeners=function(v){return f(this,v,!0)},i.prototype.rawListeners=function(v){return f(this,v,!1)},i.listenerCount=function(E,v){return typeof E.listenerCount=="function"?E.listenerCount(v):h.call(E,v)},i.prototype.listenerCount=h;function h(E){var v=this._events;if(v!==void 0){var _=v[E];if(typeof _=="function")return 1;if(_!==void 0)return _.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function p(E,v){for(var _=new Array(v),A=0;A<v;++A)_[A]=E[A];return _}function g(E,v){for(;v+1<E.length;v++)E[v]=E[v+1];E.pop()}function m(E){for(var v=new Array(E.length),_=0;_<v.length;++_)v[_]=E[_].listener||E[_];return v}function y(E,v){return new Promise(function(_,A){function N(x){E.removeListener(v,C),A(x)}function C(){typeof E.removeListener=="function"&&E.removeListener("error",N),_([].slice.call(arguments))}w(E,v,C,{once:!0}),v!=="error"&&b(E,N,{once:!0})})}function b(E,v,_){typeof E.on=="function"&&w(E,"error",v,_)}function w(E,v,_,A){if(typeof E.on=="function")A.once?E.once(v,_):E.on(v,_);else if(typeof E.addEventListener=="function")E.addEventListener(v,function N(C){A.once&&E.removeEventListener(v,N),_(C)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return yf.exports}var Jr=P4();const ub=rl(Jr);var Zg={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gy=function(t,e){return Gy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},Gy(t,e)};function O4(t,e){Gy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yy=function(){return Yy=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yy.apply(this,arguments)};function R4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function D4(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function $4(t,e){return function(n,r){e(n,r,t)}}function k4(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function U4(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function L4(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function M4(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function B4(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Zy(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ax(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function F4(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ax(arguments[e]));return t}function j4(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function sd(t){return this instanceof sd?(this.v=t,this):new sd(t)}function H4(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){r[f]&&(s[f]=function(h){return new Promise(function(p,g){i.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(i[0][3],p)}}function c(f){f.value instanceof sd?Promise.resolve(f.value.v).then(l,u):d(i[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}}function W4(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:sd(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function q4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Zy=="function"?Zy(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function z4(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function V4(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function K4(t){return t&&t.__esModule?t:{default:t}}function G4(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Y4(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Z4=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Yy},__asyncDelegator:W4,__asyncGenerator:H4,__asyncValues:q4,__await:sd,__awaiter:U4,__classPrivateFieldGet:G4,__classPrivateFieldSet:Y4,__createBinding:M4,__decorate:D4,__exportStar:B4,__extends:O4,__generator:L4,__importDefault:K4,__importStar:V4,__makeTemplateObject:z4,__metadata:k4,__param:$4,__read:ax,__rest:R4,__spread:F4,__spreadArrays:j4,__values:Zy},Symbol.toStringTag,{value:"Module"})),Wd=k6(Z4);var Jg={},xl={},KE;function J4(){if(KE)return xl;KE=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return xl.delay=t,xl}var Go={},Xg={},Yo={},GE;function X4(){return GE||(GE=1,Object.defineProperty(Yo,"__esModule",{value:!0}),Yo.ONE_THOUSAND=Yo.ONE_HUNDRED=void 0,Yo.ONE_HUNDRED=100,Yo.ONE_THOUSAND=1e3),Yo}var Qg={},YE;function Q4(){return YE||(YE=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(Qg)),Qg}var ZE;function cx(){return ZE||(ZE=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wd;e.__exportStar(X4(),t),e.__exportStar(Q4(),t)}(Xg)),Xg}var JE;function eM(){if(JE)return Go;JE=1,Object.defineProperty(Go,"__esModule",{value:!0}),Go.fromMiliseconds=Go.toMiliseconds=void 0;const t=cx();function e(r){return r*t.ONE_THOUSAND}Go.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Go.fromMiliseconds=n,Go}var XE;function tM(){return XE||(XE=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wd;e.__exportStar(J4(),t),e.__exportStar(eM(),t)}(Jg)),Jg}var Qa={},QE;function nM(){if(QE)return Qa;QE=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Qa.Watch=t,Qa.default=t,Qa}var em={},Pl={},e1;function rM(){if(e1)return Pl;e1=1,Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.IWatch=void 0;class t{}return Pl.IWatch=t,Pl}var t1;function sM(){return t1||(t1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Wd.__exportStar(rM(),t)}(em)),em}var n1;function iM(){return n1||(n1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wd;e.__exportStar(tM(),t),e.__exportStar(nM(),t),e.__exportStar(sM(),t),e.__exportStar(cx(),t)}(Zg)),Zg}var me=iM();class Wa{}let oM=class extends Wa{constructor(e){super()}};const r1=me.FIVE_SECONDS,qa={pulse:"heartbeat_pulse"};let aM=class lx extends oM{constructor(e){super(e),this.events=new Jr.EventEmitter,this.interval=r1,this.interval=(e==null?void 0:e.interval)||r1}static async init(e){const n=new lx(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),me.toMiliseconds(this.interval))}pulse(){this.events.emit(qa.pulse)}};const cM=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,lM=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,uM=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function dM(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){fM(t);return}return e}function fM(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function wf(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!uM.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(cM.test(t)||lM.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,dM)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function hM(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function an(t,...e){try{return hM(t(...e))}catch(n){return Promise.reject(n)}}function pM(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function gM(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Jf(t){if(pM(t))return String(t);if(gM(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Jf(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Jy="base64:";function mM(t){return typeof t=="string"?t:Jy+bM(t)}function yM(t){return typeof t!="string"||!t.startsWith(Jy)?t:wM(t.slice(Jy.length))}function wM(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function bM(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function nr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function vM(...t){return nr(t.join(":"))}function bf(t){return t=nr(t),t?t+":":""}function EM(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function _M(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const CM="memory",AM=()=>{const t=new Map;return{name:CM,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function IM(t={}){const e={mounts:{"":t.driver||AM()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=nr(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await s1(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const f=new Map,h=p=>{let g=f.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},f.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",m=nr(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},w=n(m);h(w).items.push({key:m,value:y,relativeKey:w.relativeKey,options:b})}return Promise.all([...f.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=nr(l);const{relativeKey:d,driver:f}=n(l);return an(f.hasItem,d,u)},getItem(l,u={}){l=nr(l);const{relativeKey:d,driver:f}=n(l);return an(f.getItem,d,u).then(h=>wf(h))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?an(d.driver.getItems,d.items.map(f=>({key:f.relativeKey,options:f.options})),u).then(f=>f.map(h=>({key:vM(d.base,h.key),value:wf(h.value)}))):Promise.all(d.items.map(f=>an(d.driver.getItem,f.relativeKey,f.options).then(h=>({key:f.key,value:wf(h)})))))},getItemRaw(l,u={}){l=nr(l);const{relativeKey:d,driver:f}=n(l);return f.getItemRaw?an(f.getItemRaw,d,u):an(f.getItem,d,u).then(h=>yM(h))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=nr(l);const{relativeKey:f,driver:h}=n(l);h.setItem&&(await an(h.setItem,f,Jf(u),d),h.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return an(d.driver.setItems,d.items.map(f=>({key:f.relativeKey,value:Jf(f.value),options:f.options})),u);d.driver.setItem&&await Promise.all(d.items.map(f=>an(d.driver.setItem,f.relativeKey,Jf(f.value),f.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=nr(l);const{relativeKey:f,driver:h}=n(l);if(h.setItemRaw)await an(h.setItemRaw,f,u,d);else if(h.setItem)await an(h.setItem,f,mM(u),d);else return;h.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=nr(l);const{relativeKey:d,driver:f}=n(l);f.removeItem&&(await an(f.removeItem,d,u),(u.removeMeta||u.removeMata)&&await an(f.removeItem,d+"$",u),f.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=nr(l);const{relativeKey:d,driver:f}=n(l),h=Object.create(null);if(f.getMeta&&Object.assign(h,await an(f.getMeta,d,u)),!u.nativeOnly){const p=await an(f.getItem,d+"$",u).then(g=>wf(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(h,p))}return h},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var m;l=bf(l);const d=r(l,!0);let f=[];const h=[];let p=!0;for(const y of d){(m=y.driver.flags)!=null&&m.maxDepth||(p=!1);const b=await an(y.driver.getKeys,y.relativeBase,u);for(const w of b){const E=y.mountpoint+nr(w);f.some(v=>E.startsWith(v))||h.push(E)}f=[y.mountpoint,...f.filter(w=>!w.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return h.filter(y=>(!g||EM(y,u.maxDepth))&&_M(y,l))},async clear(l,u={}){l=bf(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return an(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const f=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(f.map(h=>d.driver.removeItem(h,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>i1(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=bf(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,f)=>f.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(s1(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,f;l=bf(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((f=(d=e.unwatch)[l])==null||f.call(d),delete e.unwatch[l]),u&&await i1(e.mounts[l]),e.mountpoints=e.mountpoints.filter(h=>h!==l),delete e.mounts[l])},getMount(l=""){l=nr(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=nr(l),r(l,u.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function s1(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function i1(t){typeof t.dispose=="function"&&await an(t.dispose)}function za(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function ux(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=za(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let tm;function qd(){return tm||(tm=ux("keyval-store","keyval")),tm}function o1(t,e=qd()){return e("readonly",n=>za(n.get(t)))}function SM(t,e,n=qd()){return n("readwrite",r=>(r.put(e,t),za(r.transaction)))}function TM(t,e=qd()){return e("readwrite",n=>(n.delete(t),za(n.transaction)))}function NM(t=qd()){return t("readwrite",e=>(e.clear(),za(e.transaction)))}function xM(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},za(t.transaction)}function PM(t=qd()){return t("readonly",e=>{if(e.getAllKeys)return za(e.getAllKeys());const n=[];return xM(e,r=>n.push(r.key)).then(()=>n)})}const OM=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),RM=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Oa(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return RM(t)}catch{return t}}function Oi(t){return typeof t=="string"?t:OM(t)||""}const DM="idb-keyval";var $M=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=ux(t.dbName,t.storeName)),{name:DM,options:t,async hasItem(s){return!(typeof await o1(n(s),r)>"u")},async getItem(s){return await o1(n(s),r)??null},setItem(s,i){return SM(n(s),i,r)},removeItem(s){return TM(n(s),r)},getKeys(){return PM(r)},clear(){return NM(r)}}};const kM="WALLET_CONNECT_V2_INDEXED_DB",UM="keyvaluestorage";let LM=class{constructor(){this.indexedDb=IM({driver:$M({dbName:kM,storeName:UM})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Oi(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xf={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof nm<"u"&&nm.localStorage?Xf.exports=nm.localStorage:typeof window<"u"&&window.localStorage?Xf.exports=window.localStorage:Xf.exports=new e})();function MM(t){var e;return[t[0],Oa((e=t[1])!=null?e:"")]}let BM=class{constructor(){this.localStorage=Xf.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(MM)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Oa(n)}async setItem(e,n){this.localStorage.setItem(e,Oi(n))}async removeItem(e){this.localStorage.removeItem(e)}};const FM="wc_storage_version",a1=1,jM=async(t,e,n)=>{const r=FM,s=await e.getItem(r);if(s&&s>=a1){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,a1),n(e),HM(t,o)},HM=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let WM=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new BM;this.storage=e;try{const n=new LM;jM(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var rm,c1;function qM(){if(c1)return rm;c1=1;function t(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}rm=e;function e(n,r,s){var i=s&&s.stringify||t,o=1;if(typeof n=="object"&&n!==null){var a=r.length+o;if(a===1)return n;var c=new Array(a);c[0]=i(n);for(var l=1;l<a;l++)c[l]=i(r[l]);return c.join(" ")}if(typeof n!="string")return n;var u=r.length;if(u===0)return n;for(var d="",f=1-o,h=-1,p=n&&n.length||0,g=0;g<p;){if(n.charCodeAt(g)===37&&g+1<p){switch(h=h>-1?h:0,n.charCodeAt(g+1)){case 100:case 102:if(f>=u||r[f]==null)break;h<g&&(d+=n.slice(h,g)),d+=Number(r[f]),h=g+2,g++;break;case 105:if(f>=u||r[f]==null)break;h<g&&(d+=n.slice(h,g)),d+=Math.floor(Number(r[f])),h=g+2,g++;break;case 79:case 111:case 106:if(f>=u||r[f]===void 0)break;h<g&&(d+=n.slice(h,g));var m=typeof r[f];if(m==="string"){d+="'"+r[f]+"'",h=g+2,g++;break}if(m==="function"){d+=r[f].name||"<anonymous>",h=g+2,g++;break}d+=i(r[f]),h=g+2,g++;break;case 115:if(f>=u)break;h<g&&(d+=n.slice(h,g)),d+=String(r[f]),h=g+2,g++;break;case 37:h<g&&(d+=n.slice(h,g)),d+="%",h=g+2,g++,f--;break}++f}++g}return h===-1?n:(h<p&&(d+=n.slice(h)),d)}return rm}var sm,l1;function zM(){if(l1)return sm;l1=1;const t=qM();sm=s;const e=v().console||{},n={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:p,res:p,err:f};function r(_,A){return Array.isArray(_)?_.filter(function(C){return C!=="!stdSerializers.err"}):_===!0?Object.keys(A):!1}function s(_){_=_||{},_.browser=_.browser||{};const A=_.browser.transmit;if(A&&typeof A.send!="function")throw Error("pino: transmit option must have a send function");const N=_.browser.write||e;_.browser.write&&(_.browser.asObject=!0);const C=_.serializers||{},x=r(_.browser.serialize,C);let P=_.browser.serialize;Array.isArray(_.browser.serialize)&&_.browser.serialize.indexOf("!stdSerializers.err")>-1&&(P=!1);const D=["error","fatal","warn","info","debug","trace"];typeof N=="function"&&(N.error=N.fatal=N.warn=N.info=N.debug=N.trace=N),_.enabled===!1&&(_.level="silent");const H=_.level||"info",B=Object.create(N);B.log||(B.log=m),Object.defineProperty(B,"levelVal",{get:S}),Object.defineProperty(B,"level",{get:O,set:U});const I={transmit:A,serialize:x,asObject:_.browser.asObject,levels:D,timestamp:h(_)};B.levels=s.levels,B.level=H,B.setMaxListeners=B.getMaxListeners=B.emit=B.addListener=B.on=B.prependListener=B.once=B.prependOnceListener=B.removeListener=B.removeAllListeners=B.listeners=B.listenerCount=B.eventNames=B.write=B.flush=m,B.serializers=C,B._serialize=x,B._stdErrSerialize=P,B.child=F,A&&(B._logEvent=d());function S(){return this.level==="silent"?1/0:this.levels.values[this.level]}function O(){return this._level}function U(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,i(I,B,"error","log"),i(I,B,"fatal","error"),i(I,B,"warn","error"),i(I,B,"info","log"),i(I,B,"debug","log"),i(I,B,"trace","log")}function F(j,G){if(!j)throw new Error("missing bindings for child Pino");G=G||{},x&&j.serializers&&(G.serializers=j.serializers);const J=G.serializers;if(x&&J){var oe=Object.assign({},C,J),se=_.browser.serialize===!0?Object.keys(oe):x;delete j.serializers,c([j],se,oe,this._stdErrSerialize)}function de(he){this._childLevel=(he._childLevel|0)+1,this.error=l(he,j,"error"),this.fatal=l(he,j,"fatal"),this.warn=l(he,j,"warn"),this.info=l(he,j,"info"),this.debug=l(he,j,"debug"),this.trace=l(he,j,"trace"),oe&&(this.serializers=oe,this._serialize=se),A&&(this._logEvent=d([].concat(he._logEvent.bindings,j)))}return de.prototype=this,new de(this)}return B}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers=n,s.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:b,unixTime:w,isoTime:E});function i(_,A,N,C){const x=Object.getPrototypeOf(A);A[N]=A.levelVal>A.levels.values[N]?m:x[N]?x[N]:e[N]||e[C]||m,o(_,A,N)}function o(_,A,N){!_.transmit&&A[N]===m||(A[N]=function(C){return function(){const P=_.timestamp(),D=new Array(arguments.length),H=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var B=0;B<D.length;B++)D[B]=arguments[B];if(_.serialize&&!_.asObject&&c(D,this._serialize,this.serializers,this._stdErrSerialize),_.asObject?C.call(H,a(this,N,D,P)):C.apply(H,D),_.transmit){const I=_.transmit.level||A.level,S=s.levels.values[I],O=s.levels.values[N];if(O<S)return;u(this,{ts:P,methodLevel:N,methodValue:O,transmitValue:s.levels.values[_.transmit.level||A.level],send:_.transmit.send,val:A.levelVal},D)}}}(A[N]))}function a(_,A,N,C){_._serialize&&c(N,_._serialize,_.serializers,_._stdErrSerialize);const x=N.slice();let P=x[0];const D={};C&&(D.time=C),D.level=s.levels.values[A];let H=(_._childLevel|0)+1;if(H<1&&(H=1),P!==null&&typeof P=="object"){for(;H--&&typeof x[0]=="object";)Object.assign(D,x.shift());P=x.length?t(x.shift(),x):void 0}else typeof P=="string"&&(P=t(x.shift(),x));return P!==void 0&&(D.msg=P),D}function c(_,A,N,C){for(const x in _)if(C&&_[x]instanceof Error)_[x]=s.stdSerializers.err(_[x]);else if(typeof _[x]=="object"&&!Array.isArray(_[x]))for(const P in _[x])A&&A.indexOf(P)>-1&&P in N&&(_[x][P]=N[P](_[x][P]))}function l(_,A,N){return function(){const C=new Array(1+arguments.length);C[0]=A;for(var x=1;x<C.length;x++)C[x]=arguments[x-1];return _[N].apply(this,C)}}function u(_,A,N){const C=A.send,x=A.ts,P=A.methodLevel,D=A.methodValue,H=A.val,B=_._logEvent.bindings;c(N,_._serialize||Object.keys(_.serializers),_.serializers,_._stdErrSerialize===void 0?!0:_._stdErrSerialize),_._logEvent.ts=x,_._logEvent.messages=N.filter(function(I){return B.indexOf(I)===-1}),_._logEvent.level.label=P,_._logEvent.level.value=D,C(P,_._logEvent,H),_._logEvent=d(B)}function d(_){return{ts:0,messages:[],bindings:_||[],level:{label:"",value:0}}}function f(_){const A={type:_.constructor.name,msg:_.message,stack:_.stack};for(const N in _)A[N]===void 0&&(A[N]=_[N]);return A}function h(_){return typeof _.timestamp=="function"?_.timestamp:_.timestamp===!1?y:b}function p(){return{}}function g(_){return _}function m(){}function y(){return!1}function b(){return Date.now()}function w(){return Math.round(Date.now()/1e3)}function E(){return new Date(Date.now()).toISOString()}function v(){function _(A){return typeof A<"u"&&A}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return _(self)||_(window)||_(this)||{}}}return sm}var bc=zM();const zd=rl(bc),VM={level:"info"},Vd="custom_context",db=1e3*1024;let KM=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},u1=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new KM(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},dx=class{constructor(e,n=db){this.level=e??"error",this.levelValue=bc.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new u1(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===bc.levels.values.error?console.error(e):n===bc.levels.values.warn?console.warn(e):n===bc.levels.values.debug?console.debug(e):n===bc.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Oi({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new u1(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Oi({extraMetadata:e})),new Blob(n,{type:"application/json"})}},GM=class{constructor(e,n=db){this.baseChunkLogger=new dx(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},YM=class{constructor(e,n=db){this.baseChunkLogger=new dx(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var ZM=Object.defineProperty,JM=Object.defineProperties,XM=Object.getOwnPropertyDescriptors,d1=Object.getOwnPropertySymbols,QM=Object.prototype.hasOwnProperty,eB=Object.prototype.propertyIsEnumerable,f1=(t,e,n)=>e in t?ZM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bh=(t,e)=>{for(var n in e||(e={}))QM.call(e,n)&&f1(t,n,e[n]);if(d1)for(var n of d1(e))eB.call(e,n)&&f1(t,n,e[n]);return t},Fh=(t,e)=>JM(t,XM(e));function ll(t){return Fh(Bh({},t),{level:(t==null?void 0:t.level)||VM.level})}function tB(t,e=Vd){return t[e]||""}function nB(t,e,n=Vd){return t[n]=e,t}function hr(t,e=Vd){let n="";return typeof t.bindings>"u"?n=tB(t,e):n=t.bindings().context||"",n}function rB(t,e,n=Vd){const r=hr(t,n);return r.trim()?`${r}/${e}`:e}function Ln(t,e,n=Vd){const r=rB(t,e,n),s=t.child({context:r});return nB(s,r,n)}function sB(t){var e,n;const r=new GM((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zd(Fh(Bh({},t.opts),{level:"trace",browser:Fh(Bh({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function iB(t){var e;const n=new YM((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zd(Fh(Bh({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function fb(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?sB(t):iB(t)}var oB=Object.defineProperty,aB=(t,e,n)=>e in t?oB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h1=(t,e,n)=>aB(t,typeof e!="symbol"?e+"":e,n);let cB=class extends Wa{constructor(e){super(),this.opts=e,h1(this,"protocol","wc"),h1(this,"version",2)}};var lB=Object.defineProperty,uB=(t,e,n)=>e in t?lB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dB=(t,e,n)=>uB(t,e+"",n);let fB=class extends Wa{constructor(e,n){super(),this.core=e,this.logger=n,dB(this,"records",new Map)}},hB=class{constructor(e,n){this.logger=e,this.core=n}},pB=class extends Wa{constructor(e,n){super(),this.relayer=e,this.logger=n}},gB=class extends Wa{constructor(e){super()}},mB=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},yB=class extends Wa{constructor(e,n){super(),this.relayer=e,this.logger=n}},wB=class extends Wa{constructor(e,n){super(),this.core=e,this.logger=n}},bB=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},vB=class{constructor(e,n){this.projectId=e,this.logger=n}},EB=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var _B=Object.defineProperty,CB=(t,e,n)=>e in t?_B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,p1=(t,e,n)=>CB(t,typeof e!="symbol"?e+"":e,n);let AB=class{constructor(e){this.opts=e,p1(this,"protocol","wc"),p1(this,"version",2)}},IB=class{constructor(e){this.client=e}};function SB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fx(t,...e){if(!SB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function g1(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function TB(t,e){fx(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ec=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const im=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function NB(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function hx(t){return typeof t=="string"&&(t=NB(t)),fx(t),t}let xB=class{clone(){return this._cloneInto()}};function PB(t){const e=r=>t().update(hx(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function px(t=32){if(ec&&typeof ec.getRandomValues=="function")return ec.getRandomValues(new Uint8Array(t));if(ec&&typeof ec.randomBytes=="function")return ec.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function OB(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let RB=class extends xB{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=im(this.buffer)}update(e){g1(this);const{view:n,buffer:r,blockLen:s}=this;e=hx(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=im(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){g1(this),TB(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;OB(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=im(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const vf=BigInt(2**32-1),Xy=BigInt(32);function gx(t,e=!1){return e?{h:Number(t&vf),l:Number(t>>Xy&vf)}:{h:Number(t>>Xy&vf)|0,l:Number(t&vf)|0}}function DB(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=gx(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const $B=(t,e)=>BigInt(t>>>0)<<Xy|BigInt(e>>>0),kB=(t,e,n)=>t>>>n,UB=(t,e,n)=>t<<32-n|e>>>n,LB=(t,e,n)=>t>>>n|e<<32-n,MB=(t,e,n)=>t<<32-n|e>>>n,BB=(t,e,n)=>t<<64-n|e>>>n-32,FB=(t,e,n)=>t>>>n-32|e<<64-n,jB=(t,e)=>e,HB=(t,e)=>t,WB=(t,e,n)=>t<<n|e>>>32-n,qB=(t,e,n)=>e<<n|t>>>32-n,zB=(t,e,n)=>e<<n-32|t>>>64-n,VB=(t,e,n)=>t<<n-32|e>>>64-n;function KB(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const GB=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),YB=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,ZB=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),JB=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,XB=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),QB=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,ze={fromBig:gx,split:DB,toBig:$B,shrSH:kB,shrSL:UB,rotrSH:LB,rotrSL:MB,rotrBH:BB,rotrBL:FB,rotr32H:jB,rotr32L:HB,rotlSH:WB,rotlSL:qB,rotlBH:zB,rotlBL:VB,add:KB,add3L:GB,add3H:YB,add4L:ZB,add4H:JB,add5H:QB,add5L:XB},[eF,tF]=ze.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zi=new Uint32Array(80),Vi=new Uint32Array(80);let nF=class extends RB{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let w=0;w<16;w++,n+=4)zi[w]=e.getUint32(n),Vi[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=zi[w-15]|0,v=Vi[w-15]|0,_=ze.rotrSH(E,v,1)^ze.rotrSH(E,v,8)^ze.shrSH(E,v,7),A=ze.rotrSL(E,v,1)^ze.rotrSL(E,v,8)^ze.shrSL(E,v,7),N=zi[w-2]|0,C=Vi[w-2]|0,x=ze.rotrSH(N,C,19)^ze.rotrBH(N,C,61)^ze.shrSH(N,C,6),P=ze.rotrSL(N,C,19)^ze.rotrBL(N,C,61)^ze.shrSL(N,C,6),D=ze.add4L(A,P,Vi[w-7],Vi[w-16]),H=ze.add4H(D,_,x,zi[w-7],zi[w-16]);zi[w]=H|0,Vi[w]=D|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const E=ze.rotrSH(d,f,14)^ze.rotrSH(d,f,18)^ze.rotrBH(d,f,41),v=ze.rotrSL(d,f,14)^ze.rotrSL(d,f,18)^ze.rotrBL(d,f,41),_=d&h^~d&g,A=f&p^~f&m,N=ze.add5L(b,v,A,tF[w],Vi[w]),C=ze.add5H(N,y,E,_,eF[w],zi[w]),x=N|0,P=ze.rotrSH(r,s,28)^ze.rotrBH(r,s,34)^ze.rotrBH(r,s,39),D=ze.rotrSL(r,s,28)^ze.rotrBL(r,s,34)^ze.rotrBL(r,s,39),H=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=m|0,g=h|0,m=p|0,h=d|0,p=f|0,{h:d,l:f}=ze.add(l|0,u|0,C|0,x|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=ze.add3L(x,D,B);r=ze.add3H(I,C,P,H),s=I|0}({h:r,l:s}=ze.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ze.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ze.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ze.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=ze.add(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=ze.add(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:m}=ze.add(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:b}=ze.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,f,h,p,g,m,y,b)}roundClean(){zi.fill(0),Vi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const rF=PB(()=>new nF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hb=BigInt(0),mx=BigInt(1),sF=BigInt(2);function pb(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gb(t){if(!pb(t))throw new Error("Uint8Array expected")}function om(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const iF=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mb(t){gb(t);let e="";for(let n=0;n<t.length;n++)e+=iF[t[n]];return e}function yx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?hb:BigInt("0x"+t)}const ci={_0:48,_9:57,A:65,F:70,a:97,f:102};function m1(t){if(t>=ci._0&&t<=ci._9)return t-ci._0;if(t>=ci.A&&t<=ci.F)return t-(ci.A-10);if(t>=ci.a&&t<=ci.f)return t-(ci.a-10)}function wx(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=m1(t.charCodeAt(i)),a=m1(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function oF(t){return yx(mb(t))}function Qf(t){return gb(t),yx(mb(Uint8Array.from(t).reverse()))}function bx(t,e){return wx(t.toString(16).padStart(e*2,"0"))}function Qy(t,e){return bx(t,e).reverse()}function li(t,e,n){let r;if(typeof e=="string")try{r=wx(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(pb(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function y1(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];gb(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const am=t=>typeof t=="bigint"&&hb<=t;function aF(t,e,n){return am(t)&&am(e)&&am(n)&&e<=t&&t<n}function Ol(t,e,n,r){if(!aF(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function cF(t){let e;for(e=0;t>hb;t>>=mx,e+=1);return e}const lF=t=>(sF<<BigInt(t-1))-mx,uF={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||pb(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function yb(t,e,n={}){const r=(s,i,o)=>{const a=uF[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function w1(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const fn=BigInt(0),Wt=BigInt(1),sa=BigInt(2),dF=BigInt(3),e0=BigInt(4),b1=BigInt(5),v1=BigInt(8);function Qt(t,e){const n=t%e;return n>=fn?n:e+n}function fF(t,e,n){if(e<fn)throw new Error("invalid exponent, negatives unsupported");if(n<=fn)throw new Error("invalid modulus");if(n===Wt)return fn;let r=Wt;for(;e>fn;)e&Wt&&(r=r*t%n),t=t*t%n,e>>=Wt;return r}function Ns(t,e,n){let r=t;for(;e-- >fn;)r*=r,r%=n;return r}function E1(t,e){if(t===fn)throw new Error("invert: expected non-zero number");if(e<=fn)throw new Error("invert: expected positive modulus, got "+e);let n=Qt(t,e),r=e,s=fn,i=Wt;for(;n!==fn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Wt)throw new Error("invert: does not exist");return Qt(s,e)}function hF(t){const e=(t-Wt)/sa;let n,r,s;for(n=t-Wt,r=0;n%sa===fn;n/=sa,r++);for(s=sa;s<t&&fF(s,e,t)!==t-Wt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Wt)/e0;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Wt)/sa;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let f=1;for(let p=o.sqr(d);f<c&&!o.eql(p,o.ONE);f++)p=o.sqr(p);const h=o.pow(l,Wt<<BigInt(c-f-1));l=o.sqr(h),u=o.mul(u,h),d=o.mul(d,l),c=f}return u}}function pF(t){if(t%e0===dF){const e=(t+Wt)/e0;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%v1===b1){const e=(t-b1)/v1;return function(n,r){const s=n.mul(r,sa),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,sa),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return hF(t)}const gF=(t,e)=>(Qt(t,e)&Wt)===Wt,mF=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yF(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=mF.reduce((r,s)=>(r[s]="function",r),e);return yb(t,n)}function wF(t,e,n){if(n<fn)throw new Error("invalid exponent, negatives unsupported");if(n===fn)return t.ONE;if(n===Wt)return e;let r=t.ONE,s=e;for(;n>fn;)n&Wt&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Wt;return r}function bF(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function vx(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ex(t,e,n=!1,r={}){if(t<=fn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=vx(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:lF(s),ZERO:fn,ONE:Wt,create:c=>Qt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return fn<=c&&c<t},is0:c=>c===fn,isOdd:c=>(c&Wt)===Wt,neg:c=>Qt(-c,t),eql:(c,l)=>c===l,sqr:c=>Qt(c*c,t),add:(c,l)=>Qt(c+l,t),sub:(c,l)=>Qt(c-l,t),mul:(c,l)=>Qt(c*l,t),pow:(c,l)=>wF(a,c,l),div:(c,l)=>Qt(c*E1(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>E1(c,t),sqrt:r.sqrt||(c=>(o||(o=pF(t)),o(a,c))),invertBatch:c=>bF(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?Qy(c,i):bx(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Qf(c):oF(c)}});return Object.freeze(a)}const _1=BigInt(0),Ef=BigInt(1);function cm(t,e){const n=e.negate();return t?n:e}function _x(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function lm(t,e){_x(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function vF(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function EF(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const um=new WeakMap,Cx=new WeakMap;function dm(t){return Cx.get(t)||1}function _F(t,e){return{constTimeNegate:cm,hasPrecomputes(n){return dm(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>_1;)r&Ef&&(s=s.add(i)),i=i.double(),r>>=Ef;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=lm(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=lm(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let f=0;f<i;f++){const h=f*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=Ef);const g=h,m=h+Math.abs(p)-1,y=f%2!==0,b=p<0;p===0?c=c.add(cm(y,r[g])):a=a.add(cm(b,r[m]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=lm(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const f=d*a;if(s===_1)break;let h=Number(s&c);if(s>>=u,h>a&&(h-=l,s+=Ef),h===0)continue;let p=r[f+Math.abs(h)-1];h<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=um.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&um.set(r,s(i))),i},wNAFCached(n,r,s){const i=dm(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=dm(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){_x(r,e),Cx.set(n,r),um.delete(n)}}}function CF(t,e,n,r){if(vF(n,t),EF(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=cF(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let h=0;h<r.length;h++){const p=r[h],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[h])}let f=s;for(let h=c.length-1,p=s;h>0;h--)p=p.add(c[h]),f=f.add(p);if(u=u.add(f),d!==0)for(let h=0;h<o;h++)u=u.double()}return u}function AF(t){return yF(t.Fp),yb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vx(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ts=BigInt(0),Xn=BigInt(1),_f=BigInt(2),IF=BigInt(8),SF={zip215:!0};function TF(t){const e=AF(t);return yb(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function NF(t){const e=TF(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=_f<<BigInt(a*8)-Xn,u=n.create,d=Ex(e.n,e.nBitLength),f=e.uvRatio||((I,S)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(S))}}catch{return{isValid:!1,value:ts}}}),h=e.adjustScalarBytes||(I=>I),p=e.domain||((I,S,O)=>{if(om("phflag",O),S.length||O)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,S){Ol("coordinate "+I,S,ts,l)}function m(I){if(!(I instanceof w))throw new Error("ExtendedPoint expected")}const y=w1((I,S)=>{const{ex:O,ey:U,ez:F}=I,j=I.is0();S==null&&(S=j?IF:n.inv(F));const G=u(O*S),J=u(U*S),oe=u(F*S);if(j)return{x:ts,y:Xn};if(oe!==Xn)throw new Error("invZ was invalid");return{x:G,y:J}}),b=w1(I=>{const{a:S,d:O}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:U,ey:F,ez:j,et:G}=I,J=u(U*U),oe=u(F*F),se=u(j*j),de=u(se*se),he=u(J*S),K=u(se*u(he+oe)),ie=u(de+u(O*u(J*oe)));if(K!==ie)throw new Error("bad point: equation left != right (1)");const Q=u(U*F),le=u(j*G);if(Q!==le)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(S,O,U,F){this.ex=S,this.ey=O,this.ez=U,this.et=F,g("x",S),g("y",O),g("z",U),g("t",F),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(S){if(S instanceof w)throw new Error("extended point not allowed");const{x:O,y:U}=S||{};return g("x",O),g("y",U),new w(O,U,Xn,u(O*U))}static normalizeZ(S){const O=n.invertBatch(S.map(U=>U.ez));return S.map((U,F)=>U.toAffine(O[F])).map(w.fromAffine)}static msm(S,O){return CF(w,d,S,O)}_setWindowSize(S){_.setWindowSize(this,S)}assertValidity(){b(this)}equals(S){m(S);const{ex:O,ey:U,ez:F}=this,{ex:j,ey:G,ez:J}=S,oe=u(O*J),se=u(j*F),de=u(U*J),he=u(G*F);return oe===se&&de===he}is0(){return this.equals(w.ZERO)}negate(){return new w(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:S}=e,{ex:O,ey:U,ez:F}=this,j=u(O*O),G=u(U*U),J=u(_f*u(F*F)),oe=u(S*j),se=O+U,de=u(u(se*se)-j-G),he=oe+G,K=he-J,ie=oe-G,Q=u(de*K),le=u(he*ie),Oe=u(de*ie),L=u(K*he);return new w(Q,le,L,Oe)}add(S){m(S);const{a:O,d:U}=e,{ex:F,ey:j,ez:G,et:J}=this,{ex:oe,ey:se,ez:de,et:he}=S;if(O===BigInt(-1)){const k=u((j-F)*(se+oe)),q=u((j+F)*(se-oe)),Y=u(q-k);if(Y===ts)return this.double();const we=u(G*_f*he),ne=u(J*_f*de),W=ne+we,Z=q+k,Se=ne-we,Me=u(W*Y),Ke=u(Z*Se),zt=u(W*Se),Mt=u(Y*Z);return new w(Me,Ke,Mt,zt)}const K=u(F*oe),ie=u(j*se),Q=u(J*U*he),le=u(G*de),Oe=u((F+j)*(oe+se)-K-ie),L=le-Q,M=le+Q,z=u(ie-O*K),X=u(Oe*L),te=u(M*z),ee=u(Oe*z),$=u(L*M);return new w(X,te,$,ee)}subtract(S){return this.add(S.negate())}wNAF(S){return _.wNAFCached(this,S,w.normalizeZ)}multiply(S){const O=S;Ol("scalar",O,Xn,r);const{p:U,f:F}=this.wNAF(O);return w.normalizeZ([U,F])[0]}multiplyUnsafe(S,O=w.ZERO){const U=S;return Ol("scalar",U,ts,r),U===ts?v:this.is0()||U===Xn?this:_.wNAFCachedUnsafe(this,U,w.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,r).is0()}toAffine(S){return y(this,S)}clearCofactor(){const{h:S}=e;return S===Xn?this:this.multiplyUnsafe(S)}static fromHex(S,O=!1){const{d:U,a:F}=e,j=n.BYTES;S=li("pointHex",S,j),om("zip215",O);const G=S.slice(),J=S[j-1];G[j-1]=J&-129;const oe=Qf(G),se=O?l:n.ORDER;Ol("pointHex.y",oe,ts,se);const de=u(oe*oe),he=u(de-Xn),K=u(U*de-F);let{isValid:ie,value:Q}=f(he,K);if(!ie)throw new Error("Point.fromHex: invalid y coordinate");const le=(Q&Xn)===Xn,Oe=(J&128)!==0;if(!O&&Q===ts&&Oe)throw new Error("Point.fromHex: x=0 and x_0=1");return Oe!==le&&(Q=u(-Q)),w.fromAffine({x:Q,y:oe})}static fromPrivateKey(S){return C(S).point}toRawBytes(){const{x:S,y:O}=this.toAffine(),U=Qy(O,n.BYTES);return U[U.length-1]|=S&Xn?128:0,U}toHex(){return mb(this.toRawBytes())}}w.BASE=new w(e.Gx,e.Gy,Xn,u(e.Gx*e.Gy)),w.ZERO=new w(ts,Xn,Xn,ts);const{BASE:E,ZERO:v}=w,_=_F(w,a*8);function A(I){return Qt(I,r)}function N(I){return A(Qf(I))}function C(I){const S=n.BYTES;I=li("private key",I,S);const O=li("hashed private key",i(I),2*S),U=h(O.slice(0,S)),F=O.slice(S,2*S),j=N(U),G=E.multiply(j),J=G.toRawBytes();return{head:U,prefix:F,scalar:j,point:G,pointBytes:J}}function x(I){return C(I).pointBytes}function P(I=new Uint8Array,...S){const O=y1(...S);return N(i(p(O,li("context",I),!!s)))}function D(I,S,O={}){I=li("message",I),s&&(I=s(I));const{prefix:U,scalar:F,pointBytes:j}=C(S),G=P(O.context,U,I),J=E.multiply(G).toRawBytes(),oe=P(O.context,J,j,I),se=A(G+oe*F);Ol("signature.s",se,ts,r);const de=y1(J,Qy(se,n.BYTES));return li("result",de,n.BYTES*2)}const H=SF;function B(I,S,O,U=H){const{context:F,zip215:j}=U,G=n.BYTES;I=li("signature",I,2*G),S=li("message",S),O=li("publicKey",O,G),j!==void 0&&om("zip215",j),s&&(S=s(S));const J=Qf(I.slice(G,2*G));let oe,se,de;try{oe=w.fromHex(O,j),se=w.fromHex(I.slice(0,G),j),de=E.multiplyUnsafe(J)}catch{return!1}if(!j&&oe.isSmallOrder())return!1;const he=P(F,se.toRawBytes(),oe.toRawBytes(),S);return se.add(oe.multiplyUnsafe(he)).subtract(de).clearCofactor().equals(w.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:x,sign:D,verify:B,ExtendedPoint:w,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,S=w.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}}}}BigInt(0),BigInt(1);const wb=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),C1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const xF=BigInt(1),A1=BigInt(2);BigInt(3);const PF=BigInt(5),OF=BigInt(8);function RF(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=wb,o=t*t%i*t%i,a=Ns(o,A1,i)*o%i,c=Ns(a,xF,i)*t%i,l=Ns(c,PF,i)*c%i,u=Ns(l,e,i)*l%i,d=Ns(u,n,i)*u%i,f=Ns(d,r,i)*d%i,h=Ns(f,s,i)*f%i,p=Ns(h,s,i)*f%i,g=Ns(p,e,i)*l%i;return{pow_p_5_8:Ns(g,A1,i)*t%i,b2:o}}function DF(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function $F(t,e){const n=wb,r=Qt(e*e*e,n),s=Qt(r*r*e,n),i=RF(t*s).pow_p_5_8;let o=Qt(t*r*i,n);const a=Qt(e*o*o,n),c=o,l=Qt(o*C1,n),u=a===t,d=a===Qt(-t,n),f=a===Qt(-t*C1,n);return u&&(o=c),(d||f)&&(o=l),gF(o,n)&&(o=Qt(-o,n)),{isValid:u||d,value:o}}const kF=Ex(wb,void 0,!0),UF={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:kF,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:OF,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:rF,randomBytes:px,adjustScalarBytes:DF,uvRatio:$F},Ax=NF(UF),LF="EdDSA",MF="JWT",jh=".",zp="base64url",Ix="utf8",Sx="utf8",BF=":",FF="did",jF="key",I1="base58btc",HF="z",WF="K36",qF=32;function bb(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Tx(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?bb(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Nx(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=Tx(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return bb(n)}function zF(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var w=(b-y)*u+1>>>0,E=new Uint8Array(w);y!==b;){for(var v=p[y],_=0,A=w-1;(v!==0||_<m)&&A!==-1;A--,_++)v+=256*E[A]>>>0,E[A]=v%a>>>0,v=v/a>>>0;if(v!==0)throw new Error("Non-zero carry");m=_,y++}for(var N=w-m;N!==w&&E[N]===0;)N++;for(var C=c.repeat(g);N<w;++N)C+=t.charAt(E[N]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,w=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var v=0,_=b-1;(E!==0||v<y)&&_!==-1;_--,v++)E+=a*w[_]>>>0,w[_]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=v,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&w[A]===0;)A++;for(var N=new Uint8Array(m+(b-A)),C=m;A!==b;)N[C++]=w[A++];return N}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var VF=zF,KF=VF;const xx=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},GF=t=>new TextEncoder().encode(t),YF=t=>new TextDecoder().decode(t);let ZF=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},JF=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Px(this,e)}},XF=class{constructor(e){this.decoders=e}or(e){return Px(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const Px=(t,e)=>new XF({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let QF=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new ZF(e,n,r),this.decoder=new JF(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Vp=({name:t,prefix:e,encode:n,decode:r})=>new QF(t,e,n,r),Kd=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=KF(n,e);return Vp({prefix:t,name:e,encode:r,decode:i=>xx(s(i))})},e9=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},t9=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},An=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Vp({prefix:e,name:t,encode(s){return t9(s,r,n)},decode(s){return e9(s,r,n,t)}}),n9=Vp({prefix:"\0",name:"identity",encode:t=>YF(t),decode:t=>GF(t)});var r9=Object.freeze({__proto__:null,identity:n9});const s9=An({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var i9=Object.freeze({__proto__:null,base2:s9});const o9=An({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var a9=Object.freeze({__proto__:null,base8:o9});const c9=Kd({prefix:"9",name:"base10",alphabet:"0123456789"});var l9=Object.freeze({__proto__:null,base10:c9});const u9=An({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),d9=An({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var f9=Object.freeze({__proto__:null,base16:u9,base16upper:d9});const h9=An({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),p9=An({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),g9=An({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),m9=An({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),y9=An({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),w9=An({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),b9=An({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v9=An({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),E9=An({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var _9=Object.freeze({__proto__:null,base32:h9,base32upper:p9,base32pad:g9,base32padupper:m9,base32hex:y9,base32hexupper:w9,base32hexpad:b9,base32hexpadupper:v9,base32z:E9});const C9=Kd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),A9=Kd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var I9=Object.freeze({__proto__:null,base36:C9,base36upper:A9});const S9=Kd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),T9=Kd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var N9=Object.freeze({__proto__:null,base58btc:S9,base58flickr:T9});const x9=An({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),P9=An({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),O9=An({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),R9=An({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var D9=Object.freeze({__proto__:null,base64:x9,base64pad:P9,base64url:O9,base64urlpad:R9});const Ox=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),$9=Ox.reduce((t,e,n)=>(t[n]=e,t),[]),k9=Ox.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function U9(t){return t.reduce((e,n)=>(e+=$9[n],e),"")}function L9(t){const e=[];for(const n of t){const r=k9[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const M9=Vp({prefix:"🚀",name:"base256emoji",encode:U9,decode:L9});var B9=Object.freeze({__proto__:null,base256emoji:M9}),F9=Rx,S1=128,j9=-128,H9=Math.pow(2,31);function Rx(t,e,n){e=e||[],n=n||0;for(var r=n;t>=H9;)e[n++]=t&255|S1,t/=128;for(;t&j9;)e[n++]=t&255|S1,t>>>=7;return e[n]=t|0,Rx.bytes=n-r+1,e}var W9=t0,q9=128,T1=127;function t0(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw t0.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&T1)<<s:(o&T1)*Math.pow(2,s),s+=7}while(o>=q9);return t0.bytes=i-r,n}var z9=Math.pow(2,7),V9=Math.pow(2,14),K9=Math.pow(2,21),G9=Math.pow(2,28),Y9=Math.pow(2,35),Z9=Math.pow(2,42),J9=Math.pow(2,49),X9=Math.pow(2,56),Q9=Math.pow(2,63),ej=function(t){return t<z9?1:t<V9?2:t<K9?3:t<G9?4:t<Y9?5:t<Z9?6:t<J9?7:t<X9?8:t<Q9?9:10},tj={encode:F9,decode:W9,encodingLength:ej},Dx=tj;const N1=(t,e,n=0)=>(Dx.encode(t,e,n),e),x1=t=>Dx.encodingLength(t),n0=(t,e)=>{const n=e.byteLength,r=x1(t),s=r+x1(n),i=new Uint8Array(s+n);return N1(t,i,0),N1(n,i,r),i.set(e,s),new nj(t,n,e,i)};let nj=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const $x=({name:t,code:e,encode:n})=>new rj(t,e,n);let rj=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?n0(this.code,n):n.then(r=>n0(this.code,r))}else throw Error("Unknown type, must be binary type")}};const kx=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sj=$x({name:"sha2-256",code:18,encode:kx("SHA-256")}),ij=$x({name:"sha2-512",code:19,encode:kx("SHA-512")});var oj=Object.freeze({__proto__:null,sha256:sj,sha512:ij});const Ux=0,aj="identity",Lx=xx,cj=t=>n0(Ux,Lx(t)),lj={code:Ux,name:aj,encode:Lx,digest:cj};var uj=Object.freeze({__proto__:null,identity:lj});new TextEncoder,new TextDecoder;const P1={...r9,...i9,...a9,...l9,...f9,..._9,...I9,...N9,...D9,...B9};({...oj,...uj});function Mx(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const O1=Mx("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),fm=Mx("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Tx(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),Bx={utf8:O1,"utf-8":O1,hex:P1.base16,latin1:fm,ascii:fm,binary:fm,...P1};function Kp(t,e="utf8"){const n=Bx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function ul(t,e="utf8"){const n=Bx[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?bb(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function R1(t){return Oa(Kp(ul(t,zp),Ix))}function Hh(t){return Kp(ul(Oi(t),Ix),zp)}function Fx(t){const e=ul(WF,I1),n=HF+Kp(Nx([e,t]),I1);return[FF,jF,n].join(BF)}function dj(t){return Kp(t,zp)}function fj(t){return ul(t,zp)}function hj(t){return ul([Hh(t.header),Hh(t.payload)].join(jh),Sx)}function pj(t){return[Hh(t.header),Hh(t.payload),dj(t.signature)].join(jh)}function r0(t){const e=t.split(jh),n=R1(e[0]),r=R1(e[1]),s=fj(e[2]),i=ul(e.slice(0,2).join(jh),Sx);return{header:n,payload:r,signature:s,data:i}}function D1(t=px(qF)){const e=Ax.getPublicKey(t);return{secretKey:Nx([t,e]),publicKey:e}}async function gj(t,e,n,r,s=me.fromMiliseconds(Date.now())){const i={alg:LF,typ:MF},o=Fx(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=hj({header:i,payload:c}),u=Ax.sign(l,r.secretKey.slice(0,32));return pj({header:i,payload:c,signature:u})}var $1=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},mj=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),yj=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),wj=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),bj=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),vj=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Ej=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,_j=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,k1=3,Cj=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Ej]],U1=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Aj(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new vj:typeof navigator<"u"?Sj(navigator.userAgent):Nj()}function Ij(t){return t!==""&&Cj.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Sj(t){var e=Ij(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new bj;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<k1&&(s=$1($1([],s,!0),xj(k1-s.length),!0)):s=[];var i=s.join("."),o=Tj(t),a=_j.exec(t);return a&&a[1]?new wj(n,i,o,a[1]):new mj(n,i,o)}function Tj(t){for(var e=0,n=U1.length;e<n;e++){var r=U1[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function Nj(){var t=typeof process<"u"&&process.version;return t?new yj(process.version.slice(1)):null}function xj(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Ct={},L1;function jx(){if(L1)return Ct;L1=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.getLocalStorage=Ct.getLocalStorageOrThrow=Ct.getCrypto=Ct.getCryptoOrThrow=Ct.getLocation=Ct.getLocationOrThrow=Ct.getNavigator=Ct.getNavigatorOrThrow=Ct.getDocument=Ct.getDocumentOrThrow=Ct.getFromWindowOrThrow=Ct.getFromWindow=void 0;function t(f){let h;return typeof window<"u"&&typeof window[f]<"u"&&(h=window[f]),h}Ct.getFromWindow=t;function e(f){const h=t(f);if(!h)throw new Error(`${f} is not defined in Window`);return h}Ct.getFromWindowOrThrow=e;function n(){return e("document")}Ct.getDocumentOrThrow=n;function r(){return t("document")}Ct.getDocument=r;function s(){return e("navigator")}Ct.getNavigatorOrThrow=s;function i(){return t("navigator")}Ct.getNavigator=i;function o(){return e("location")}Ct.getLocationOrThrow=o;function a(){return t("location")}Ct.getLocation=a;function c(){return e("crypto")}Ct.getCryptoOrThrow=c;function l(){return t("crypto")}Ct.getCrypto=l;function u(){return e("localStorage")}Ct.getLocalStorageOrThrow=u;function d(){return t("localStorage")}return Ct.getLocalStorage=d,Ct}var Ri=jx(),Rl={},M1;function Pj(){if(M1)return Rl;M1=1,Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.getWindowMetadata=void 0;const t=jx();function e(){let n,r;try{n=t.getDocumentOrThrow(),r=t.getLocationOrThrow()}catch{return null}function s(){const h=n.getElementsByTagName("link"),p=[];for(let g=0;g<h.length;g++){const m=h[g],y=m.getAttribute("rel");if(y&&y.toLowerCase().indexOf("icon")>-1){const b=m.getAttribute("href");if(b)if(b.toLowerCase().indexOf("https:")===-1&&b.toLowerCase().indexOf("http:")===-1&&b.indexOf("//")!==0){let w=r.protocol+"//"+r.host;if(b.indexOf("/")===0)w+=b;else{const E=r.pathname.split("/");E.pop();const v=E.join("/");w+=v+"/"+b}p.push(w)}else if(b.indexOf("//")===0){const w=r.protocol+b;p.push(w)}else p.push(b)}}return p}function i(...h){const p=n.getElementsByTagName("meta");for(let g=0;g<p.length;g++){const m=p[g],y=["itemprop","property","name"].map(b=>m.getAttribute(b)).filter(b=>b?h.includes(b):!1);if(y.length&&y){const b=m.getAttribute("content");if(b)return b}}return""}function o(){let h=i("name","og:site_name","og:title","twitter:title");return h||(h=n.title),h}function a(){return i("description","og:description","twitter:description","keywords")}const c=o(),l=a(),u=r.origin,d=s();return{description:l,url:u,icons:d,name:c}}return Rl.getWindowMetadata=e,Rl}var Oj=Pj();function id(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function s0(t){return id(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Hx="2.31.0";let Dl={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Hx}`},Gp=class i0 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof i0?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof i0&&n.cause.docsPath||n.docsPath,i=(a=Dl.getDocsUrl)==null?void 0:a.call(Dl,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Dl.version?[`Version: ${Dl.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Hx}walk(e){return Wx(this,e)}};function Wx(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?Wx(t.cause,e):e?null:t}class qx extends Gp{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function dl(t,{dir:e,size:n=32}={}){return typeof t=="string"?Rj(t,{dir:e,size:n}):Dj(t,{dir:e,size:n})}function Rj(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new qx({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Dj(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new qx({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class $j extends Gp{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class kj extends Gp{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function fl(t,{size:e}){if(s0(t)>e)throw new kj({givenSize:s0(t),maxSize:e})}function o0(t,e={}){const{signed:n}=e;e.size&&fl(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Uj(t,e={}){return Number(o0(t,e))}const Lj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a0(t,e={}){return typeof t=="number"||typeof t=="bigint"?Vx(t,e):typeof t=="string"?Fj(t,e):typeof t=="boolean"?Mj(t,e):zx(t,e)}function Mj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(fl(n,{size:e.size}),dl(n,{size:e.size})):n}function zx(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Lj[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(fl(r,{size:e.size}),dl(r,{dir:"right",size:e.size})):r}function Vx(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new $j({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?dl(a,{size:r}):a}const Bj=new TextEncoder;function Fj(t,e={}){const n=Bj.encode(t);return zx(n,e)}const jj=new TextEncoder;function Hj(t,e={}){return typeof t=="number"||typeof t=="bigint"?qj(t,e):typeof t=="boolean"?Wj(t,e):id(t)?Kx(t,e):Gx(t,e)}function Wj(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(fl(n,{size:e.size}),dl(n,{size:e.size})):n}const ui={zero:48,nine:57,A:65,F:70,a:97,f:102};function B1(t){if(t>=ui.zero&&t<=ui.nine)return t-ui.zero;if(t>=ui.A&&t<=ui.F)return t-(ui.A-10);if(t>=ui.a&&t<=ui.f)return t-(ui.a-10)}function Kx(t,e={}){let n=t;e.size&&(fl(n,{size:e.size}),n=dl(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=B1(r.charCodeAt(a++)),l=B1(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Gp(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function qj(t,e){const n=Vx(t,e);return Kx(n)}function Gx(t,e={}){const n=jj.encode(t);return typeof e.size=="number"?(fl(n,{size:e.size}),dl(n,{dir:"right",size:e.size})):n}function Yx(t,e){const n=e||"hex",r=lN(id(t,{strict:!1})?Hj(t):t);return n==="bytes"?r:a0(r)}class zj extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const hm=new zj(8192);function Vj(t,e){if(hm.has(`${t}.${e}`))return hm.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=Yx(Gx(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return hm.set(`${t}.${e}`,i),i}function Kj(t){const e=Yx(`0x${t.substring(4)}`).substring(26);return Vj(`0x${e}`)}async function Gj({hash:t,signature:e}){const n=id(t)?t:a0(t),{secp256k1:r}=await cn(async()=>{const{secp256k1:o}=await import("./secp256k1-Cx_FYN0b.js");return{secp256k1:o}},__vite__mapDeps([4,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:f}=e,h=Number(f??d),p=F1(h);return new r.Signature(o0(l),o0(u)).addRecoveryBit(p)}const o=id(e)?e:a0(e);if(s0(o)!==65)throw new Error("invalid signature length");const a=Uj(`0x${o.slice(130)}`),c=F1(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function F1(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Yj({hash:t,signature:e}){return Kj(await Gj({hash:t,signature:e}))}function Zj(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const p=(h-f)*i+1>>>0,g=new Uint8Array(p);for(;f!==h;){let b=l[f],w=0;for(let E=p-1;(b!==0||w<d)&&E!==-1;E--,w++)b+=256*g[E]>>>0,g[E]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=w,f++}let m=p-d;for(;m!==p&&g[m]===0;)m++;let y=r.repeat(u);for(;m<p;++m)y+=t.charAt(g[m]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,f=0;for(;l[u]===r;)d++,u++;const h=(l.length-u)*s+1>>>0,p=new Uint8Array(h);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let w=e[b];if(w===255)return;let E=0;for(let v=h-1;(w!==0||E<f)&&v!==-1;v--,E++)w+=n*p[v]>>>0,p[v]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");f=E,u++}let g=h-f;for(;g!==h&&p[g]===0;)g++;const m=new Uint8Array(d+(h-g));let y=d;for(;g!==h;)m[y++]=p[g++];return m}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Jj="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hl=Zj(Jj);function Xj(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Qj(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const e7=new TextEncoder,t7=50;function n7(t,e,n){e7.encodeInto(t,e.subarray(n))}function r7(t,e,n){t.length>t7?n7(t,e,n):Qj(t,e,n)}const s7=4096;function Zx(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=s7&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const i7=new TextDecoder,o7=200;function a7(t,e,n){const r=t.subarray(e,e+n);return i7.decode(r)}function c7(t,e,n){return n>o7?a7(t,e,n):Zx(t,e,n)}class Cf{constructor(e,n){this.type=e,this.data=n}}class wr extends Error{constructor(e){super(e);const n=Object.create(wr.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:wr.name})}}const $l=4294967295;function l7(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Jx(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function Xx(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function u7(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const d7=-1,f7=4294967296-1,h7=17179869184-1;function p7({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=h7)if(e===0&&t<=f7){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),Jx(r,4,t),n}}function g7(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function m7(t){if(t instanceof Date){const e=g7(t);return p7(e)}else return null}function y7(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=Xx(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new wr(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function w7(t){const e=y7(t);return new Date(e.sec*1e3+e.nsec/1e6)}const b7={type:d7,encode:m7,decode:w7};class Wh{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(b7)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new Cf(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new Cf(o,i)}}}return e instanceof Cf?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new Cf(n,e)}}Wh.defaultCodec=new Wh;function v7(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function c0(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):v7(t)?new Uint8Array(t):Uint8Array.from(t)}const E7=100,_7=2048;let C7=class Qx{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Wh.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??E7,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??_7,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new Qx({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=Xj(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),r7(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=c0(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),l7(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),Jx(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function A7(t,e){return new C7(e).encodeSharedRef(t)}function pm(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const I7=16,S7=16;class T7{constructor(e=I7,n=S7){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=Zx(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const l0="array",du="map_key",e2="map_value",N7=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new wr("The type of key must be string or number but "+typeof t)};class x7{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=l0,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=du,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===l0){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===du||e.type===e2){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const kl=-1,vb=new DataView(new ArrayBuffer(0)),P7=new Uint8Array(vb.buffer);try{vb.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const j1=new RangeError("Insufficient data"),O7=new T7;let R7=class t2{constructor(e){this.totalPos=0,this.pos=0,this.view=vb,this.bytes=P7,this.headByte=kl,this.stack=new x7,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??Wh.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??$l,this.maxBinLength=(e==null?void 0:e.maxBinLength)??$l,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??$l,this.maxMapLength=(e==null?void 0:e.maxMapLength)??$l,this.maxExtLength=(e==null?void 0:e.maxExtLength)??$l,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:O7,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??N7}clone(){return new t2({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=kl,this.stack.reset()}setBuffer(e){const n=c0(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===kl&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=c0(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${pm(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new wr(`Unrecognized type byte: ${pm(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===l0)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===du){if(n==="__proto__")throw new wr("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=e2;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=du;continue e}}return n}}readHeadByte(){return this.headByte===kl&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=kl}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new wr(`Unrecognized array type byte: ${pm(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new wr(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new wr(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new wr(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw j1;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=c7(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===du:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new wr(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw j1;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new wr(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=u7(this.view,this.pos);return this.pos+=8,e}readI64(){const e=Xx(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function D7(t,e){return new R7(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $7(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function n2(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function qh(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Eb(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function u0(t){if(!Array.isArray(t))throw new Error("array expected")}function zh(t,e){if(!n2(!0,e))throw new Error(`${t}: array of strings expected`)}function k7(t,e){if(!n2(!1,e))throw new Error(`${t}: array of numbers expected`)}function U7(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function L7(t){const e=typeof t=="string"?t.split(""):t,n=e.length;zh("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(u0(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(u0(s),s.map(i=>{qh("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function M7(t=""){return qh("join",t),{encode:e=>(zh("join.decode",e),e.join(t)),decode:e=>(qh("join.decode",e),e.split(t))}}function B7(t,e="="){return Eb(t),qh("padding",e),{encode(n){for(zh("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){zh("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const r2=(t,e)=>e===0?t:r2(e,t%e),Vh=(t,e)=>t+(e-r2(t,e)),gm=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function H1(t,e,n,r){if(u0(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Vh(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Vh(e,n)}`);let s=0,i=0;const o=gm[e],a=gm[n]-1,c=[];for(const l of t){if(Eb(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=gm[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function F7(t,e=!1){if(Eb(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Vh(8,t)>32||Vh(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!$7(n))throw new Error("radix2.encode input should be Uint8Array");return H1(Array.from(n),8,t,!e)},decode:n=>(k7("radix2.decode",n),Uint8Array.from(H1(n,t,8,e)))}}const j7=U7(F7(5),L7("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),B7(5),M7(""));function _b(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function s2(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_b(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function fu(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=s2(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return _b(n)}function H7(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var w=(b-y)*u+1>>>0,E=new Uint8Array(w);y!==b;){for(var v=p[y],_=0,A=w-1;(v!==0||_<m)&&A!==-1;A--,_++)v+=256*E[A]>>>0,E[A]=v%a>>>0,v=v/a>>>0;if(v!==0)throw new Error("Non-zero carry");m=_,y++}for(var N=w-m;N!==w&&E[N]===0;)N++;for(var C=c.repeat(g);N<w;++N)C+=t.charAt(E[N]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,w=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var v=0,_=b-1;(E!==0||v<y)&&_!==-1;_--,v++)E+=a*w[_]>>>0,w[_]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=v,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&w[A]===0;)A++;for(var N=new Uint8Array(m+(b-A)),C=m;A!==b;)N[C++]=w[A++];return N}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var W7=H7,q7=W7;const z7=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},V7=t=>new TextEncoder().encode(t),K7=t=>new TextDecoder().decode(t);class G7{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Y7{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return i2(this,e)}}class Z7{constructor(e){this.decoders=e}or(e){return i2(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const i2=(t,e)=>new Z7({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class J7{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new G7(e,n,r),this.decoder=new Y7(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Yp=({name:t,prefix:e,encode:n,decode:r})=>new J7(t,e,n,r),Gd=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=q7(n,e);return Yp({prefix:t,name:e,encode:r,decode:i=>z7(s(i))})},X7=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Q7=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},In=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Yp({prefix:e,name:t,encode(s){return Q7(s,r,n)},decode(s){return X7(s,r,n,t)}}),eH=Yp({prefix:"\0",name:"identity",encode:t=>K7(t),decode:t=>V7(t)}),tH=Object.freeze(Object.defineProperty({__proto__:null,identity:eH},Symbol.toStringTag,{value:"Module"})),nH=In({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),rH=Object.freeze(Object.defineProperty({__proto__:null,base2:nH},Symbol.toStringTag,{value:"Module"})),sH=In({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),iH=Object.freeze(Object.defineProperty({__proto__:null,base8:sH},Symbol.toStringTag,{value:"Module"})),oH=Gd({prefix:"9",name:"base10",alphabet:"0123456789"}),aH=Object.freeze(Object.defineProperty({__proto__:null,base10:oH},Symbol.toStringTag,{value:"Module"})),cH=In({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lH=In({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),uH=Object.freeze(Object.defineProperty({__proto__:null,base16:cH,base16upper:lH},Symbol.toStringTag,{value:"Module"})),dH=In({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fH=In({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hH=In({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pH=In({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gH=In({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mH=In({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yH=In({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wH=In({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bH=In({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),vH=Object.freeze(Object.defineProperty({__proto__:null,base32:dH,base32hex:gH,base32hexpad:yH,base32hexpadupper:wH,base32hexupper:mH,base32pad:hH,base32padupper:pH,base32upper:fH,base32z:bH},Symbol.toStringTag,{value:"Module"})),EH=Gd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_H=Gd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),CH=Object.freeze(Object.defineProperty({__proto__:null,base36:EH,base36upper:_H},Symbol.toStringTag,{value:"Module"})),AH=Gd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),IH=Gd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),SH=Object.freeze(Object.defineProperty({__proto__:null,base58btc:AH,base58flickr:IH},Symbol.toStringTag,{value:"Module"})),TH=In({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),NH=In({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xH=In({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),PH=In({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),OH=Object.freeze(Object.defineProperty({__proto__:null,base64:TH,base64pad:NH,base64url:xH,base64urlpad:PH},Symbol.toStringTag,{value:"Module"})),o2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),RH=o2.reduce((t,e,n)=>(t[n]=e,t),[]),DH=o2.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function $H(t){return t.reduce((e,n)=>(e+=RH[n],e),"")}function kH(t){const e=[];for(const n of t){const r=DH[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const UH=Yp({prefix:"🚀",name:"base256emoji",encode:$H,decode:kH}),LH=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:UH},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const W1={...tH,...rH,...iH,...aH,...uH,...vH,...CH,...SH,...OH,...LH};function a2(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const q1=a2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),mm=a2("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=s2(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),c2={utf8:q1,"utf-8":q1,hex:W1.base16,latin1:mm,ascii:mm,binary:mm,...W1};function jr(t,e="utf8"){const n=c2[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?_b(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ur(t,e="utf8"){const n=c2[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const MH={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var ym,z1;function l2(){if(z1)return ym;z1=1;const t="Input must be an string, Buffer or Uint8Array";function e(o){let a;if(o instanceof Uint8Array)a=o;else if(typeof o=="string")a=new TextEncoder().encode(o);else throw new Error(t);return a}function n(o){return Array.prototype.map.call(o,function(a){return(a<16?"0":"")+a.toString(16)}).join("")}function r(o){return(4294967296+o).toString(16).substring(1)}function s(o,a,c){let l=`
`+o+" = ";for(let u=0;u<a.length;u+=2){if(c===32)l+=r(a[u]).toUpperCase(),l+=" ",l+=r(a[u+1]).toUpperCase();else if(c===64)l+=r(a[u+1]).toUpperCase(),l+=r(a[u]).toUpperCase();else throw new Error("Invalid size "+c);u%6===4?l+=`
`+new Array(o.length+4).join(" "):u<a.length-2&&(l+=" ")}console.log(l)}function i(o,a,c){let l=new Date().getTime();const u=new Uint8Array(a);for(let f=0;f<a;f++)u[f]=f%256;const d=new Date().getTime();console.log("Generated random input in "+(d-l)+"ms"),l=d;for(let f=0;f<c;f++){const h=o(u),p=new Date().getTime(),g=p-l;l=p,console.log("Hashed in "+g+"ms: "+h.substring(0,20)+"..."),console.log(Math.round(a/(1<<20)/(g/1e3)*100)/100+" MB PER SECOND")}}return ym={normalizeInput:e,toHex:n,debugPrint:s,testSpeed:i},ym}var wm,V1;function BH(){if(V1)return wm;V1=1;const t=l2();function e(y,b,w){const E=y[b]+y[w];let v=y[b+1]+y[w+1];E>=4294967296&&v++,y[b]=E,y[b+1]=v}function n(y,b,w,E){let v=y[b]+w;w<0&&(v+=4294967296);let _=y[b+1]+E;v>=4294967296&&_++,y[b]=v,y[b+1]=_}function r(y,b){return y[b]^y[b+1]<<8^y[b+2]<<16^y[b+3]<<24}function s(y,b,w,E,v,_){const A=l[v],N=l[v+1],C=l[_],x=l[_+1];e(c,y,b),n(c,y,A,N);let P=c[E]^c[y],D=c[E+1]^c[y+1];c[E]=D,c[E+1]=P,e(c,w,E),P=c[b]^c[w],D=c[b+1]^c[w+1],c[b]=P>>>24^D<<8,c[b+1]=D>>>24^P<<8,e(c,y,b),n(c,y,C,x),P=c[E]^c[y],D=c[E+1]^c[y+1],c[E]=P>>>16^D<<16,c[E+1]=D>>>16^P<<16,e(c,w,E),P=c[b]^c[w],D=c[b+1]^c[w+1],c[b]=D>>>31^P<<1,c[b+1]=P>>>31^D<<1}const i=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],a=new Uint8Array(o.map(function(y){return y*2})),c=new Uint32Array(32),l=new Uint32Array(32);function u(y,b){let w=0;for(w=0;w<16;w++)c[w]=y.h[w],c[w+16]=i[w];for(c[24]=c[24]^y.t,c[25]=c[25]^y.t/4294967296,b&&(c[28]=~c[28],c[29]=~c[29]),w=0;w<32;w++)l[w]=r(y.b,4*w);for(w=0;w<12;w++)s(0,8,16,24,a[w*16+0],a[w*16+1]),s(2,10,18,26,a[w*16+2],a[w*16+3]),s(4,12,20,28,a[w*16+4],a[w*16+5]),s(6,14,22,30,a[w*16+6],a[w*16+7]),s(0,10,20,30,a[w*16+8],a[w*16+9]),s(2,12,22,24,a[w*16+10],a[w*16+11]),s(4,14,16,26,a[w*16+12],a[w*16+13]),s(6,8,18,28,a[w*16+14],a[w*16+15]);for(w=0;w<16;w++)y.h[w]=y.h[w]^c[w]^c[w+16]}const d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function f(y,b,w,E){if(y===0||y>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(b&&b.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(w&&w.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(E&&E.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const v={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:y};d.fill(0),d[0]=y,b&&(d[1]=b.length),d[2]=1,d[3]=1,w&&d.set(w,32),E&&d.set(E,48);for(let _=0;_<16;_++)v.h[_]=i[_]^r(d,_*4);return b&&(h(v,b),v.c=128),v}function h(y,b){for(let w=0;w<b.length;w++)y.c===128&&(y.t+=y.c,u(y,!1),y.c=0),y.b[y.c++]=b[w]}function p(y){for(y.t+=y.c;y.c<128;)y.b[y.c++]=0;u(y,!0);const b=new Uint8Array(y.outlen);for(let w=0;w<y.outlen;w++)b[w]=y.h[w>>2]>>8*(w&3);return b}function g(y,b,w,E,v){w=w||64,y=t.normalizeInput(y),E&&(E=t.normalizeInput(E)),v&&(v=t.normalizeInput(v));const _=f(w,b,E,v);return h(_,y),p(_)}function m(y,b,w,E,v){const _=g(y,b,w,E,v);return t.toHex(_)}return wm={blake2b:g,blake2bHex:m,blake2bInit:f,blake2bUpdate:h,blake2bFinal:p},wm}var bm,K1;function FH(){if(K1)return bm;K1=1;const t=l2();function e(p,g){return p[g]^p[g+1]<<8^p[g+2]<<16^p[g+3]<<24}function n(p,g,m,y,b,w){o[p]=o[p]+o[g]+b,o[y]=r(o[y]^o[p],16),o[m]=o[m]+o[y],o[g]=r(o[g]^o[m],12),o[p]=o[p]+o[g]+w,o[y]=r(o[y]^o[p],8),o[m]=o[m]+o[y],o[g]=r(o[g]^o[m],7)}function r(p,g){return p>>>g^p<<32-g}const s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),i=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),o=new Uint32Array(16),a=new Uint32Array(16);function c(p,g){let m=0;for(m=0;m<8;m++)o[m]=p.h[m],o[m+8]=s[m];for(o[12]^=p.t,o[13]^=p.t/4294967296,g&&(o[14]=~o[14]),m=0;m<16;m++)a[m]=e(p.b,4*m);for(m=0;m<10;m++)n(0,4,8,12,a[i[m*16+0]],a[i[m*16+1]]),n(1,5,9,13,a[i[m*16+2]],a[i[m*16+3]]),n(2,6,10,14,a[i[m*16+4]],a[i[m*16+5]]),n(3,7,11,15,a[i[m*16+6]],a[i[m*16+7]]),n(0,5,10,15,a[i[m*16+8]],a[i[m*16+9]]),n(1,6,11,12,a[i[m*16+10]],a[i[m*16+11]]),n(2,7,8,13,a[i[m*16+12]],a[i[m*16+13]]),n(3,4,9,14,a[i[m*16+14]],a[i[m*16+15]]);for(m=0;m<8;m++)p.h[m]^=o[m]^o[m+8]}function l(p,g){if(!(p>0&&p<=32))throw new Error("Incorrect output length, should be in [1, 32]");const m=g?g.length:0;if(g&&!(m>0&&m<=32))throw new Error("Incorrect key length, should be in [1, 32]");const y={h:new Uint32Array(s),b:new Uint8Array(64),c:0,t:0,outlen:p};return y.h[0]^=16842752^m<<8^p,m>0&&(u(y,g),y.c=64),y}function u(p,g){for(let m=0;m<g.length;m++)p.c===64&&(p.t+=p.c,c(p,!1),p.c=0),p.b[p.c++]=g[m]}function d(p){for(p.t+=p.c;p.c<64;)p.b[p.c++]=0;c(p,!0);const g=new Uint8Array(p.outlen);for(let m=0;m<p.outlen;m++)g[m]=p.h[m>>2]>>8*(m&3)&255;return g}function f(p,g,m){m=m||32,p=t.normalizeInput(p);const y=l(m,g);return u(y,p),d(y)}function h(p,g,m){const y=f(p,g,m);return t.toHex(y)}return bm={blake2s:f,blake2sHex:h,blake2sInit:l,blake2sUpdate:u,blake2sFinal:d},bm}var vm,G1;function jH(){if(G1)return vm;G1=1;const t=BH(),e=FH();return vm={blake2b:t.blake2b,blake2bHex:t.blake2bHex,blake2bInit:t.blake2bInit,blake2bUpdate:t.blake2bUpdate,blake2bFinal:t.blake2bFinal,blake2s:e.blake2s,blake2sHex:e.blake2sHex,blake2sInit:e.blake2sInit,blake2sUpdate:e.blake2sUpdate,blake2sFinal:e.blake2sFinal},vm}var HH=jH(),WH={};const qH=":";function Dc(t){const[e,n]=t.split(qH);return{namespace:e,reference:n}}function u2(t,e){return t.includes(":")?[t]:e.chains||[]}var zH=Object.defineProperty,VH=Object.defineProperties,KH=Object.getOwnPropertyDescriptors,Y1=Object.getOwnPropertySymbols,GH=Object.prototype.hasOwnProperty,YH=Object.prototype.propertyIsEnumerable,d0=(t,e,n)=>e in t?zH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z1=(t,e)=>{for(var n in e||(e={}))GH.call(e,n)&&d0(t,n,e[n]);if(Y1)for(var n of Y1(e))YH.call(e,n)&&d0(t,n,e[n]);return t},ZH=(t,e)=>VH(t,KH(e)),J1=(t,e,n)=>d0(t,typeof e!="symbol"?e+"":e,n);const JH="ReactNative",_r={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},XH="js";function Kh(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Bo(){return!Ri.getDocument()&&!!Ri.getNavigator()&&navigator.product===JH}function QH(){return Bo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function eW(){return Bo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function pl(){return!Kh()&&!!Ri.getNavigator()&&!!Ri.getDocument()}function Yd(){return Bo()?_r.reactNative:Kh()?_r.node:pl()?_r.browser:_r.unknown}function X1(){var t;try{return Bo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function tW(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function nW(t){var e,n;const r=d2();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),ZH(Z1(Z1({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function d2(){return Oj.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function rW(){if(Yd()===_r.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Aj();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function sW(){var t;const e=Yd();return e===_r.browser?[e,((t=Ri.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function f2(t,e,n){const r=rW(),s=sW();return[[t,e].join("-"),[XH,n].join("-"),r,s].join("/")}function iW({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=f2(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},f=tW(l[1]||"",d);return l[0]+"?"+f}function ua(t,e){return t.filter(n=>e.includes(n)).length===t.length}function f0(t){return Object.fromEntries(t.entries())}function h0(t){return new Map(Object.entries(t))}function na(t=me.FIVE_MINUTES,e){const n=me.toMiliseconds(t||me.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function yo(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function h2(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function oW(t){return h2("topic",t)}function aW(t){return h2("id",t)}function p2(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Jt(t,e){return me.fromMiliseconds(Date.now()+me.toMiliseconds(t))}function oo(t){return Date.now()>=me.toMiliseconds(t)}function ft(t,e){return`${t}${e?`:${e}`:""}`}function zs(t=[],e=[]){return[...new Set([...t,...e])]}async function cW({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=lW(i,t,e),a=Yd();if(a===_r.browser){if(!((r=Ri.getDocument())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}uW(o)}else a===_r.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function lW(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${pW(r,!0)}`}else s=`${s}/wc?${r}`;return s}function uW(t){let e="_self";hW()?e="_top":(fW()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function dW(t,e){let n="";try{if(pl()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Q1(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function e_(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Cb(){return typeof process<"u"&&WH.IS_VITEST==="true"}function fW(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function hW(){try{return window.self!==window.top}catch{return!1}}function pW(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function g2(t){return Buffer.from(t,"base64").toString("utf-8")}function gW(t){return new Promise(e=>setTimeout(e,t))}let mW=class{constructor({limit:e}){J1(this,"limit"),J1(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const n=this.set.values().next().value;n&&this.set.delete(n)}this.set.add(e)}}has(e){return this.set.has(e)}};const Af=BigInt(2**32-1),t_=BigInt(32);function m2(t,e=!1){return e?{h:Number(t&Af),l:Number(t>>t_&Af)}:{h:Number(t>>t_&Af)|0,l:Number(t&Af)|0}}function y2(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=m2(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const n_=(t,e,n)=>t>>>n,r_=(t,e,n)=>t<<32-n|e>>>n,ao=(t,e,n)=>t>>>n|e<<32-n,co=(t,e,n)=>t<<32-n|e>>>n,Zl=(t,e,n)=>t<<64-n|e>>>n-32,Jl=(t,e,n)=>t>>>n-32|e<<64-n,yW=(t,e)=>e,wW=(t,e)=>t,bW=(t,e,n)=>t<<n|e>>>32-n,vW=(t,e,n)=>e<<n|t>>>32-n,EW=(t,e,n)=>e<<n-32|t>>>64-n,_W=(t,e,n)=>t<<n-32|e>>>64-n;function os(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Ab=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ib=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,CW=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),AW=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,IW=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),SW=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,tc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Sb(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Di(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Kr(t,...e){if(!Sb(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Tb(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Di(t.outputLen),Di(t.blockLen)}function Ro(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Nb(t,e){Kr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function od(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Gr(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Em(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xs(t,e){return t<<32-e|t>>>e}const w2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function b2(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const mi=w2?t=>t:t=>b2(t);function TW(t){for(let e=0;e<t.length;e++)t[e]=b2(t[e]);return t}const lo=w2?t=>t:TW,v2=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",NW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ad(t){if(Kr(t),v2)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=NW[t[n]];return e}const di={_0:48,_9:57,A:65,F:70,a:97,f:102};function s_(t){if(t>=di._0&&t<=di._9)return t-di._0;if(t>=di.A&&t<=di.F)return t-(di.A-10);if(t>=di.a&&t<=di.f)return t-(di.a-10)}function xb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(v2)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=s_(t.charCodeAt(i)),a=s_(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function xW(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function ps(t){return typeof t=="string"&&(t=xW(t)),Kr(t),t}function da(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Kr(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let Zp=class{};function Zd(t){const e=r=>t().update(ps(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function PW(t){const e=(r,s)=>t(s).update(ps(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function gl(t=32){if(tc&&typeof tc.getRandomValues=="function")return tc.getRandomValues(new Uint8Array(t));if(tc&&typeof tc.randomBytes=="function")return Uint8Array.from(tc.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const OW=BigInt(0),Ul=BigInt(1),RW=BigInt(2),DW=BigInt(7),$W=BigInt(256),kW=BigInt(113),E2=[],_2=[],C2=[];for(let t=0,e=Ul,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],E2.push(2*(5*r+n)),_2.push((t+1)*(t+2)/2%64);let s=OW;for(let i=0;i<7;i++)e=(e<<Ul^(e>>DW)*kW)%$W,e&RW&&(s^=Ul<<(Ul<<BigInt(i))-Ul);C2.push(s)}const A2=y2(C2,!0),UW=A2[0],LW=A2[1],i_=(t,e,n)=>n>32?EW(t,e,n):bW(t,e,n),o_=(t,e,n)=>n>32?_W(t,e,n):vW(t,e,n);function MW(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=i_(l,u,1)^n[a],f=o_(l,u,1)^n[a+1];for(let h=0;h<50;h+=10)t[o+h]^=d,t[o+h+1]^=f}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=_2[o],c=i_(s,i,a),l=o_(s,i,a),u=E2[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=UW[r],t[1]^=LW[r]}Gr(n)}let BW=class I2 extends Zp{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Di(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=od(this.state)}clone(){return this._cloneInto()}keccak(){lo(this.state32),MW(this.state32,this.rounds),lo(this.state32),this.posOut=0,this.pos=0}update(e){Ro(this),e=ps(e),Kr(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ro(this,!1),Kr(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Di(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Nb(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Gr(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new I2(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const FW=(t,e,n)=>Zd(()=>new BW(e,t,n)),jW=FW(1,136,256/8);function HW(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function WW(t,e,n){return t&e^~t&n}function qW(t,e,n){return t&e^t&n^e&n}let S2=class extends Zp{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Em(this.buffer)}update(e){Ro(this),e=ps(e),Kr(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Em(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ro(this),Nb(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Gr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;HW(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Em(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Ki=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xn=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Pn=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),zW=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Gi=new Uint32Array(64);let VW=class extends S2{constructor(e=32){super(64,e,8,!1),this.A=Ki[0]|0,this.B=Ki[1]|0,this.C=Ki[2]|0,this.D=Ki[3]|0,this.E=Ki[4]|0,this.F=Ki[5]|0,this.G=Ki[6]|0,this.H=Ki[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Gi[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const f=Gi[d-15],h=Gi[d-2],p=xs(f,7)^xs(f,18)^f>>>3,g=xs(h,17)^xs(h,19)^h>>>10;Gi[d]=g+Gi[d-7]+p+Gi[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=xs(a,6)^xs(a,11)^xs(a,25),h=u+f+WW(a,c,l)+zW[d]+Gi[d]|0,p=(xs(r,2)^xs(r,13)^xs(r,22))+qW(r,s,i)|0;u=l,l=c,c=a,a=o+h|0,o=i,i=s,s=r,r=h+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Gr(Gi)}destroy(){this.set(0,0,0,0,0,0,0,0),Gr(this.buffer)}};const T2=y2(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),KW=T2[0],GW=T2[1],Yi=new Uint32Array(80),Zi=new Uint32Array(80);let Pb=class extends S2{constructor(e=64){super(128,e,16,!1),this.Ah=Pn[0]|0,this.Al=Pn[1]|0,this.Bh=Pn[2]|0,this.Bl=Pn[3]|0,this.Ch=Pn[4]|0,this.Cl=Pn[5]|0,this.Dh=Pn[6]|0,this.Dl=Pn[7]|0,this.Eh=Pn[8]|0,this.El=Pn[9]|0,this.Fh=Pn[10]|0,this.Fl=Pn[11]|0,this.Gh=Pn[12]|0,this.Gl=Pn[13]|0,this.Hh=Pn[14]|0,this.Hl=Pn[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:f,Gh:h,Gl:p,Hh:g,Hl:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=f|0,this.Gh=h|0,this.Gl=p|0,this.Hh=g|0,this.Hl=m|0}process(e,n){for(let w=0;w<16;w++,n+=4)Yi[w]=e.getUint32(n),Zi[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const E=Yi[w-15]|0,v=Zi[w-15]|0,_=ao(E,v,1)^ao(E,v,8)^n_(E,v,7),A=co(E,v,1)^co(E,v,8)^r_(E,v,7),N=Yi[w-2]|0,C=Zi[w-2]|0,x=ao(N,C,19)^Zl(N,C,61)^n_(N,C,6),P=co(N,C,19)^Jl(N,C,61)^r_(N,C,6),D=CW(A,P,Zi[w-7],Zi[w-16]),H=AW(D,_,x,Yi[w-7],Yi[w-16]);Yi[w]=H|0,Zi[w]=D|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:f,Fh:h,Fl:p,Gh:g,Gl:m,Hh:y,Hl:b}=this;for(let w=0;w<80;w++){const E=ao(d,f,14)^ao(d,f,18)^Zl(d,f,41),v=co(d,f,14)^co(d,f,18)^Jl(d,f,41),_=d&h^~d&g,A=f&p^~f&m,N=IW(b,v,A,GW[w],Zi[w]),C=SW(N,y,E,_,KW[w],Yi[w]),x=N|0,P=ao(r,s,28)^Zl(r,s,34)^Zl(r,s,39),D=co(r,s,28)^Jl(r,s,34)^Jl(r,s,39),H=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=m|0,g=h|0,m=p|0,h=d|0,p=f|0,{h:d,l:f}=os(l|0,u|0,C|0,x|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ab(x,D,B);r=Ib(I,C,P,H),s=I|0}({h:r,l:s}=os(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=os(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=os(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=os(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:f}=os(this.Eh|0,this.El|0,d|0,f|0),{h,l:p}=os(this.Fh|0,this.Fl|0,h|0,p|0),{h:g,l:m}=os(this.Gh|0,this.Gl|0,g|0,m|0),{h:y,l:b}=os(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,f,h,p,g,m,y,b)}roundClean(){Gr(Yi,Zi)}destroy(){Gr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},YW=class extends Pb{constructor(){super(48),this.Ah=xn[0]|0,this.Al=xn[1]|0,this.Bh=xn[2]|0,this.Bl=xn[3]|0,this.Ch=xn[4]|0,this.Cl=xn[5]|0,this.Dh=xn[6]|0,this.Dl=xn[7]|0,this.Eh=xn[8]|0,this.El=xn[9]|0,this.Fh=xn[10]|0,this.Fl=xn[11]|0,this.Gh=xn[12]|0,this.Gl=xn[13]|0,this.Hh=xn[14]|0,this.Hl=xn[15]|0}};const On=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class ZW extends Pb{constructor(){super(32),this.Ah=On[0]|0,this.Al=On[1]|0,this.Bh=On[2]|0,this.Bl=On[3]|0,this.Ch=On[4]|0,this.Cl=On[5]|0,this.Dh=On[6]|0,this.Dl=On[7]|0,this.Eh=On[8]|0,this.El=On[9]|0,this.Fh=On[10]|0,this.Fl=On[11]|0,this.Gh=On[12]|0,this.Gl=On[13]|0,this.Hh=On[14]|0,this.Hl=On[15]|0}}const Jp=Zd(()=>new VW),JW=Zd(()=>new Pb),XW=Zd(()=>new YW),QW=Zd(()=>new ZW),eq=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Zt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ve=new Uint32Array(32);function Ji(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ve[2*t],l=ve[2*t+1],u=ve[2*e],d=ve[2*e+1],f=ve[2*n],h=ve[2*n+1],p=ve[2*r],g=ve[2*r+1],m=Ab(c,u,o);l=Ib(m,l,d,a),c=m|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:yW(g,p),Dl:wW(g)},{h,l:f}=os(h,f,g,p),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:ao(d,u,24),Bl:co(d,u,24)},ve[2*t]=c,ve[2*t+1]=l,ve[2*e]=u,ve[2*e+1]=d,ve[2*n]=f,ve[2*n+1]=h,ve[2*r]=p,ve[2*r+1]=g}function Xi(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ve[2*t],l=ve[2*t+1],u=ve[2*e],d=ve[2*e+1],f=ve[2*n],h=ve[2*n+1],p=ve[2*r],g=ve[2*r+1],m=Ab(c,u,o);l=Ib(m,l,d,a),c=m|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:ao(g,p,16),Dl:co(g,p,16)},{h,l:f}=os(h,f,g,p),{Bh:d,Bl:u}={Bh:d^h,Bl:u^f},{Bh:d,Bl:u}={Bh:Zl(d,u,63),Bl:Jl(d,u,63)},ve[2*t]=c,ve[2*t+1]=l,ve[2*e]=u,ve[2*e+1]=d,ve[2*n]=f,ve[2*n+1]=h,ve[2*r]=p,ve[2*r+1]=g}function tq(t,e={},n,r,s){if(Di(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class nq extends Zp{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Di(e),Di(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=od(this.buffer)}update(e){Ro(this),e=ps(e),Kr(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(lo(s),this.compress(s,0,!1),lo(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));lo(d);for(let f=0;c+n<i;f+=s.length,c+=n)this.length+=n,this.compress(d,f,!1);lo(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Ro(this),Nb(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Gr(this.buffer.subarray(n)),lo(r),this.compress(r,0,!0),lo(r);const s=od(e);this.get().forEach((i,o)=>s[o]=mi(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class rq extends nq{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=Zt[0]|0,this.v0h=Zt[1]|0,this.v1l=Zt[2]|0,this.v1h=Zt[3]|0,this.v2l=Zt[4]|0,this.v2h=Zt[5]|0,this.v3l=Zt[6]|0,this.v3h=Zt[7]|0,this.v4l=Zt[8]|0,this.v4h=Zt[9]|0,this.v5l=Zt[10]|0,this.v5h=Zt[11]|0,this.v6l=Zt[12]|0,this.v6h=Zt[13]|0,this.v7l=Zt[14]|0,this.v7h=Zt[15]|0,tq(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=ps(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=ps(i);const a=od(i);this.v4l^=mi(a[0]),this.v4h^=mi(a[1]),this.v5l^=mi(a[2]),this.v5h^=mi(a[3])}if(s!==void 0){s=ps(s);const a=od(s);this.v6l^=mi(a[0]),this.v6h^=mi(a[1]),this.v7l^=mi(a[2]),this.v7h^=mi(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:f,v6l:h,v6h:p,v7l:g,v7h:m}=this;return[e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m]}set(e,n,r,s,i,o,a,c,l,u,d,f,h,p,g,m){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=f|0,this.v6l=h|0,this.v6h=p|0,this.v7l=g|0,this.v7h=m|0}compress(e,n,r){this.get().forEach((c,l)=>ve[l]=c),ve.set(Zt,16);let{h:s,l:i}=m2(BigInt(this.length));ve[24]=Zt[8]^i,ve[25]=Zt[9]^s,r&&(ve[28]=~ve[28],ve[29]=~ve[29]);let o=0;const a=eq;for(let c=0;c<12;c++)Ji(0,4,8,12,e,n+2*a[o++]),Xi(0,4,8,12,e,n+2*a[o++]),Ji(1,5,9,13,e,n+2*a[o++]),Xi(1,5,9,13,e,n+2*a[o++]),Ji(2,6,10,14,e,n+2*a[o++]),Xi(2,6,10,14,e,n+2*a[o++]),Ji(3,7,11,15,e,n+2*a[o++]),Xi(3,7,11,15,e,n+2*a[o++]),Ji(0,5,10,15,e,n+2*a[o++]),Xi(0,5,10,15,e,n+2*a[o++]),Ji(1,6,11,12,e,n+2*a[o++]),Xi(1,6,11,12,e,n+2*a[o++]),Ji(2,7,8,13,e,n+2*a[o++]),Xi(2,7,8,13,e,n+2*a[o++]),Ji(3,4,9,14,e,n+2*a[o++]),Xi(3,4,9,14,e,n+2*a[o++]);this.v0l^=ve[0]^ve[16],this.v0h^=ve[1]^ve[17],this.v1l^=ve[2]^ve[18],this.v1h^=ve[3]^ve[19],this.v2l^=ve[4]^ve[20],this.v2h^=ve[5]^ve[21],this.v3l^=ve[6]^ve[22],this.v3h^=ve[7]^ve[23],this.v4l^=ve[8]^ve[24],this.v4h^=ve[9]^ve[25],this.v5l^=ve[10]^ve[26],this.v5h^=ve[11]^ve[27],this.v6l^=ve[12]^ve[28],this.v6h^=ve[13]^ve[29],this.v7l^=ve[14]^ve[30],this.v7h^=ve[15]^ve[31],Gr(ve)}destroy(){this.destroyed=!0,Gr(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sq=PW(t=>new rq(t)),iq="https://rpc.walletconnect.org/v1";function N2(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(jW(n)).toString("hex")}async function oq(t,e,n,r,s,i){switch(n.t){case"eip191":return await aq(t,e,n.s);case"eip1271":return await cq(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function aq(t,e,n){return(await Yj({hash:N2(e),signature:n})).toLowerCase()===t.toLowerCase()}async function cq(t,e,n,r,s,i){const o=Dc(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:N2(e)).substring(2),f=a+d+c+u+l,h=await fetch(`${i||iq}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:lq(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:p}=await h.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function lq(){return Date.now()+Math.floor(Math.random()*1e3)}function uq(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return hl.encode(i)}function dq(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=sq(r,{dkLen:32});return hl.encode(s)}function a_(t){const e=new Uint8Array(Jp(fq(t)));return hl.encode(e)}function fq(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function c_(t){const e=Buffer.from(t,"base64"),n=D7(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=A7(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=QW(i);return j7.encode(o).replace(/=+$/,"")}function _m(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function hq(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(_m(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(_m(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(_m(r.length)),s.push(r);const i=Buffer.concat(s),o=Jp(i);return Buffer.from(o).toString("hex").toUpperCase()}var pq=Object.defineProperty,gq=Object.defineProperties,mq=Object.getOwnPropertyDescriptors,l_=Object.getOwnPropertySymbols,yq=Object.prototype.hasOwnProperty,wq=Object.prototype.propertyIsEnumerable,u_=(t,e,n)=>e in t?pq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bq=(t,e)=>{for(var n in e||(e={}))yq.call(e,n)&&u_(t,n,e[n]);if(l_)for(var n of l_(e))wq.call(e,n)&&u_(t,n,e[n]);return t},vq=(t,e)=>gq(t,mq(e));const Eq="did:pkh:",Ob=t=>t==null?void 0:t.split(":"),_q=t=>{const e=t&&Ob(t);if(e)return t.includes(Eq)?e[3]:e[1]},p0=t=>{const e=t&&Ob(t);if(e)return e[2]+":"+e[3]},Gh=t=>{const e=t&&Ob(t);if(e)return e.pop()};async function d_(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=x2(s,s.iss),o=Gh(s.iss);return await oq(o,i,r,p0(s.iss),n)}const x2=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=Gh(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${_q(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,h=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=eh(t.resources);if(p){const g=cd(p);s=Oq(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,f,h].filter(g=>g!=null).join(`
`)};function Cq(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Aq(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ra(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Iq(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Sq(e,n,r)}}}function Sq(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function P2(t){return Ra(t),`urn:recap:${Cq(t).replace(/=/g,"")}`}function cd(t){const e=Aq(t.replace("urn:recap:",""));return Ra(e),e}function Tq(t,e,n){const r=Iq(t,e,n);return P2(r)}function Nq(t){return t&&t.includes("urn:recap:")}function xq(t,e){const n=cd(t),r=cd(e),s=Pq(n,r);return P2(s)}function Pq(t,e){Ra(t),Ra(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=vq(bq({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Oq(t="",e){Ra(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,f)=>d.action.localeCompare(f.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function f_(t){var e;const n=cd(t);Ra(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function h_(t){const e=cd(t);Ra(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function eh(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Nq(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function O2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function g0(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Cm(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function or(t,...e){if(!O2(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function p_(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Rq(t,e){or(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Ao(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Kc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Dq(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const $q=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function kq(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function m0(t){if(typeof t=="string")t=kq(t);else if(O2(t))t=y0(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Uq(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Lq(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Mq=(t,e)=>{function n(r,...s){if(or(r),!$q)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?or(l):or(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&or(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");or(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,or(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(or(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function g_(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Fq(e))throw new Error("invalid output, must be aligned");return e}function m_(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Bq(t,e,n){g0(n);const r=new Uint8Array(16),s=Dq(r);return m_(s,0,BigInt(e),n),m_(s,8,BigInt(t),n),r}function Fq(t){return t.byteOffset%4===0}function y0(t){return Uint8Array.from(t)}const R2=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),jq=R2("expand 16-byte k"),Hq=R2("expand 32-byte k"),Wq=Ao(jq),qq=Ao(Hq);function st(t,e){return t<<e|t>>>32-e}function w0(t){return t.byteOffset%4===0}const If=64,zq=16,D2=2**32-1,y_=new Uint32Array;function Vq(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(If),u=Ao(l),d=w0(s)&&w0(i),f=d?Ao(s):y_,h=d?Ao(i):y_;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=D2)throw new Error("arx: counter overflow");const g=Math.min(If,c-p);if(d&&g===If){const m=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<zq;y++)b=m+y,h[b]=f[b]^u[y];p+=If;continue}for(let m=0,y;m<g;m++)y=p+m,i[y]=s[y]^l[m];p+=g}}function Kq(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Uq({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Cm(s),Cm(o),g0(i),g0(n),(a,c,l,u,d=0)=>{or(a),or(c),or(l);const f=l.length;if(u===void 0&&(u=new Uint8Array(f)),or(u),Cm(d),d<0||d>=D2)throw new Error("arx: counter overflow");if(u.length<f)throw new Error(`arx: output (${u.length}) is shorter than data (${f})`);const h=[];let p=a.length,g,m;if(p===32)h.push(g=y0(a)),m=qq;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),m=Wq,h.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);w0(c)||h.push(c=y0(c));const y=Ao(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(m,y,Ao(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,h.push(c)}const w=Ao(c);return Vq(t,m,y,w,l,u,d,o),Kc(...h),u}}const gn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Gq{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=m0(e),or(e,32);const n=gn(e,0),r=gn(e,2),s=gn(e,4),i=gn(e,6),o=gn(e,8),a=gn(e,10),c=gn(e,12),l=gn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=gn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],f=o[5],h=o[6],p=o[7],g=o[8],m=o[9],y=gn(e,n+0),b=gn(e,n+2),w=gn(e,n+4),E=gn(e,n+6),v=gn(e,n+8),_=gn(e,n+10),A=gn(e,n+12),N=gn(e,n+14);let C=i[0]+(y&8191),x=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|w<<6)&8191),D=i[3]+((w>>>7|E<<9)&8191),H=i[4]+((E>>>4|v<<12)&8191),B=i[5]+(v>>>1&8191),I=i[6]+((v>>>14|_<<2)&8191),S=i[7]+((_>>>11|A<<5)&8191),O=i[8]+((A>>>8|N<<8)&8191),U=i[9]+(N>>>5|s),F=0,j=F+C*a+x*(5*m)+P*(5*g)+D*(5*p)+H*(5*h);F=j>>>13,j&=8191,j+=B*(5*f)+I*(5*d)+S*(5*u)+O*(5*l)+U*(5*c),F+=j>>>13,j&=8191;let G=F+C*c+x*a+P*(5*m)+D*(5*g)+H*(5*p);F=G>>>13,G&=8191,G+=B*(5*h)+I*(5*f)+S*(5*d)+O*(5*u)+U*(5*l),F+=G>>>13,G&=8191;let J=F+C*l+x*c+P*a+D*(5*m)+H*(5*g);F=J>>>13,J&=8191,J+=B*(5*p)+I*(5*h)+S*(5*f)+O*(5*d)+U*(5*u),F+=J>>>13,J&=8191;let oe=F+C*u+x*l+P*c+D*a+H*(5*m);F=oe>>>13,oe&=8191,oe+=B*(5*g)+I*(5*p)+S*(5*h)+O*(5*f)+U*(5*d),F+=oe>>>13,oe&=8191;let se=F+C*d+x*u+P*l+D*c+H*a;F=se>>>13,se&=8191,se+=B*(5*m)+I*(5*g)+S*(5*p)+O*(5*h)+U*(5*f),F+=se>>>13,se&=8191;let de=F+C*f+x*d+P*u+D*l+H*c;F=de>>>13,de&=8191,de+=B*a+I*(5*m)+S*(5*g)+O*(5*p)+U*(5*h),F+=de>>>13,de&=8191;let he=F+C*h+x*f+P*d+D*u+H*l;F=he>>>13,he&=8191,he+=B*c+I*a+S*(5*m)+O*(5*g)+U*(5*p),F+=he>>>13,he&=8191;let K=F+C*p+x*h+P*f+D*d+H*u;F=K>>>13,K&=8191,K+=B*l+I*c+S*a+O*(5*m)+U*(5*g),F+=K>>>13,K&=8191;let ie=F+C*g+x*p+P*h+D*f+H*d;F=ie>>>13,ie&=8191,ie+=B*u+I*l+S*c+O*a+U*(5*m),F+=ie>>>13,ie&=8191;let Q=F+C*m+x*g+P*p+D*h+H*f;F=Q>>>13,Q&=8191,Q+=B*d+I*u+S*l+O*c+U*a,F+=Q>>>13,Q&=8191,F=(F<<2)+F|0,F=F+j|0,j=F&8191,F=F>>>13,G+=F,i[0]=j,i[1]=G,i[2]=J,i[3]=oe,i[4]=se,i[5]=de,i[6]=he,i[7]=K,i[8]=ie,i[9]=Q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Kc(r)}update(e){p_(this),e=m0(e),or(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Kc(this.h,this.r,this.buffer,this.pad)}digestInto(e){p_(this),Rq(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Yq(t){const e=(r,s)=>t(s).update(m0(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Zq=Yq(t=>new Gq(t));function Jq(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],f=e[2],h=e[3],p=e[4],g=e[5],m=e[6],y=e[7],b=s,w=n[0],E=n[1],v=n[2],_=o,A=a,N=c,C=l,x=u,P=d,D=f,H=h,B=p,I=g,S=m,O=y,U=b,F=w,j=E,G=v;for(let oe=0;oe<i;oe+=2)_=_+x|0,U=st(U^_,16),B=B+U|0,x=st(x^B,12),_=_+x|0,U=st(U^_,8),B=B+U|0,x=st(x^B,7),A=A+P|0,F=st(F^A,16),I=I+F|0,P=st(P^I,12),A=A+P|0,F=st(F^A,8),I=I+F|0,P=st(P^I,7),N=N+D|0,j=st(j^N,16),S=S+j|0,D=st(D^S,12),N=N+D|0,j=st(j^N,8),S=S+j|0,D=st(D^S,7),C=C+H|0,G=st(G^C,16),O=O+G|0,H=st(H^O,12),C=C+H|0,G=st(G^C,8),O=O+G|0,H=st(H^O,7),_=_+P|0,G=st(G^_,16),S=S+G|0,P=st(P^S,12),_=_+P|0,G=st(G^_,8),S=S+G|0,P=st(P^S,7),A=A+D|0,U=st(U^A,16),O=O+U|0,D=st(D^O,12),A=A+D|0,U=st(U^A,8),O=O+U|0,D=st(D^O,7),N=N+H|0,F=st(F^N,16),B=B+F|0,H=st(H^B,12),N=N+H|0,F=st(F^N,8),B=B+F|0,H=st(H^B,7),C=C+x|0,j=st(j^C,16),I=I+j|0,x=st(x^I,12),C=C+x|0,j=st(j^C,8),I=I+j|0,x=st(x^I,7);let J=0;r[J++]=o+_|0,r[J++]=a+A|0,r[J++]=c+N|0,r[J++]=l+C|0,r[J++]=u+x|0,r[J++]=d+P|0,r[J++]=f+D|0,r[J++]=h+H|0,r[J++]=p+B|0,r[J++]=g+I|0,r[J++]=m+S|0,r[J++]=y+O|0,r[J++]=b+U|0,r[J++]=w+F|0,r[J++]=E+j|0,r[J++]=v+G|0}const Xq=Kq(Jq,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Qq=new Uint8Array(16),w_=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Qq.subarray(n))},ez=new Uint8Array(32);function b_(t,e,n,r,s){const i=t(e,n,ez),o=Zq.create(i);s&&w_(o,s),w_(o,r);const a=Bq(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return Kc(i,a),c}const tz=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=g_(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=b_(t,e,n,a,r);return i.set(c,o),Kc(c),i},decrypt(s,i){i=g_(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=b_(t,e,n,o,r);if(!Lq(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Kc(c),i}}),$2=Mq({blockSize:64,nonceLength:12,tagLength:16},tz(Xq));let k2=class extends Zp{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Tb(e);const r=ps(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Gr(i)}update(e){return Ro(this),this.iHash.update(e),this}digestInto(e){Ro(this),Kr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Xp=(t,e,n)=>new k2(t,e).update(n).digest();Xp.create=(t,e)=>new k2(t,e);function nz(t,e,n){return Tb(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Xp(t,ps(n),ps(e))}const Am=Uint8Array.from([0]),v_=Uint8Array.of();function rz(t,e,n,r=32){Tb(t),Di(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=v_);const o=new Uint8Array(i*s),a=Xp.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)Am[0]=u+1,c.update(u===0?v_:l).update(n).update(Am).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Gr(l,Am),o.slice(0,r)}const sz=(t,e,n,r,s)=>rz(t,nz(t,e,n),r,s),Qp=Jp,Rb=BigInt(0),b0=BigInt(1);function Yh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Sf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function U2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Rb:BigInt("0x"+t)}function eg(t){return U2(ad(t))}function Zh(t){return Kr(t),U2(ad(Uint8Array.from(t).reverse()))}function Db(t,e){return xb(t.toString(16).padStart(e*2,"0"))}function $b(t,e){return Db(t,e).reverse()}function ir(t,e,n){let r;if(typeof e=="string")try{r=xb(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Sb(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Im=t=>typeof t=="bigint"&&Rb<=t;function iz(t,e,n){return Im(t)&&Im(e)&&Im(n)&&e<=t&&t<n}function v0(t,e,n,r){if(!iz(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function oz(t){let e;for(e=0;t>Rb;t>>=b0,e+=1);return e}const tg=t=>(b0<<BigInt(t))-b0;function az(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){i=l();const p=i.slice();h.push(p),f+=i.length}return da(...h)};return(f,h)=>{c(),u(f);let p;for(;!(p=h(d()));)u();return c(),p}}function ng(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function E_(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const cr=BigInt(0),Vn=BigInt(1),fa=BigInt(2),cz=BigInt(3),L2=BigInt(4),M2=BigInt(5),B2=BigInt(8);function Mr(t,e){const n=t%e;return n>=cr?n:e+n}function is(t,e,n){let r=t;for(;e-- >cr;)r*=r,r%=n;return r}function __(t,e){if(t===cr)throw new Error("invert: expected non-zero number");if(e<=cr)throw new Error("invert: expected positive modulus, got "+e);let n=Mr(t,e),r=e,s=cr,i=Vn;for(;n!==cr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Vn)throw new Error("invert: does not exist");return Mr(s,e)}function F2(t,e){const n=(t.ORDER+Vn)/L2,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function lz(t,e){const n=(t.ORDER-M2)/B2,r=t.mul(e,fa),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,fa),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function uz(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Vn,n=0;for(;e%fa===cr;)e/=fa,n++;let r=fa;const s=ml(t);for(;C_(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return F2;let i=s.pow(r,e);const o=(e+Vn)/fa;return function(a,c){if(a.is0(c))return c;if(C_(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),f=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let h=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(h++,p=a.sqr(p),h===l)throw new Error("Cannot find square root");const g=Vn<<BigInt(l-h-1),m=a.pow(u,g);l=h,u=a.sqr(m),d=a.mul(d,u),f=a.mul(f,m)}return f}}function dz(t){return t%L2===cz?F2:t%B2===M2?lz:uz(t)}const fz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function hz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=fz.reduce((r,s)=>(r[s]="function",r),e);return ng(t,n),t}function pz(t,e,n){if(n<cr)throw new Error("invalid exponent, negatives unsupported");if(n===cr)return t.ONE;if(n===Vn)return e;let r=t.ONE,s=e;for(;n>cr;)n&Vn&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Vn;return r}function j2(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function C_(t,e){const n=(t.ORDER-Vn)/fa,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function gz(t,e){e!==void 0&&Di(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ml(t,e,n=!1,r={}){if(t<=cr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=gz(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:tg(o),ZERO:cr,ONE:Vn,create:u=>Mr(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return cr<=u&&u<t},is0:u=>u===cr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Vn)===Vn,neg:u=>Mr(-u,t),eql:(u,d)=>u===d,sqr:u=>Mr(u*u,t),add:(u,d)=>Mr(u+d,t),sub:(u,d)=>Mr(u-d,t),mul:(u,d)=>Mr(u*d,t),pow:(u,d)=>pz(l,u,d),div:(u,d)=>Mr(u*__(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>__(u,t),sqrt:i||(u=>(c||(c=dz(t)),c(l,u))),toBytes:u=>n?$b(u,a):Db(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?Zh(u):eg(u)},invertBatch:u=>j2(l,u),cmov:(u,d,f)=>f?d:u});return Object.freeze(l)}function H2(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function W2(t){const e=H2(t);return e+Math.ceil(e/2)}function mz(t,e,n=!1){const r=t.length,s=H2(e),i=W2(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Zh(t):eg(t),a=Mr(o,e-Vn)+Vn;return n?$b(a,s):Db(a,s)}const Gc=BigInt(0),ha=BigInt(1);function hu(t,e){const n=e.negate();return t?n:e}function yz(t,e,n){const r=i=>i.pz,s=j2(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function q2(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Sm(t,e){q2(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=tg(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function A_(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=ha);const l=e*r,u=l+Math.abs(a)-1,d=a===0,f=a<0,h=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:l}}function wz(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function bz(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const Tm=new WeakMap,z2=new WeakMap;function Nm(t){return z2.get(t)||1}function I_(t){if(t!==Gc)throw new Error("invalid wNAF")}function vz(t,e){return{constTimeNegate:hu,hasPrecomputes(n){return Nm(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Gc;)r&ha&&(s=s.add(i)),i=i.double(),r>>=ha;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=Sm(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=Sm(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:f,isNegF:h,offsetF:p}=A_(s,c,a);s=l,d?o=o.add(hu(h,r[p])):i=i.add(hu(f,r[u]))}return I_(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=Sm(n,e);for(let a=0;a<o.windows&&s!==Gc;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=A_(s,a,o);if(s=c,!u){const f=r[l];i=i.add(d?f.negate():f)}}return I_(s),i},getPrecomputes(n,r,s){let i=Tm.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),Tm.set(r,i))),i},wNAFCached(n,r,s){const i=Nm(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=Nm(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){q2(r,e),z2.set(n,r),Tm.delete(n)}}}function Ez(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Gc||r>Gc;)n&ha&&(i=i.add(s)),r&ha&&(o=o.add(s)),s=s.double(),n>>=ha,r>>=ha;return{p1:i,p2:o}}function _z(t,e,n,r){wz(n,t),bz(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=oz(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=tg(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let f=o;for(let h=d;h>=0;h-=c){u.fill(o);for(let g=0;g<i;g++){const m=r[g],y=Number(m>>BigInt(h)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,m=o;g>0;g--)m=m.add(u[g]),p=p.add(m);if(f=f.add(p),h!==0)for(let g=0;g<c;g++)f=f.double()}return f}function S_(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return hz(e),e}else return ml(t)}function Cz(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>Gc))throw new Error(`CURVE.${o} must be positive bigint`)}const r=S_(e.p,n.Fp),s=S_(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Ll=BigInt(0),nc=BigInt(1),Tf=BigInt(2);function Az(t){return ng(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function Iz(t){const e=Az(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||gl,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),f=BigInt(a?121665:39081),h=a?Tf**BigInt(254):Tf**BigInt(447),p=a?BigInt(8)*Tf**BigInt(251)-nc:BigInt(4)*Tf**BigInt(445)-nc,g=h+p+nc,m=C=>Mr(C,n),y=b(d);function b(C){return $b(m(C),u)}function w(C){const x=ir("u coordinate",C,u);return a&&(x[31]&=127),m(Zh(x))}function E(C){return Zh(s(ir("scalar",C,u)))}function v(C,x){const P=N(w(x),E(C));if(P===Ll)throw new Error("invalid private or public key received");return b(P)}function _(C){return v(C,y)}function A(C,x,P){const D=m(C*(x-P));return x=m(x-D),P=m(P+D),{x_2:x,x_3:P}}function N(C,x){v0("u",C,Ll,n),v0("scalar",x,h,g);const P=x,D=C;let H=nc,B=Ll,I=C,S=nc,O=Ll;for(let F=BigInt(l-1);F>=Ll;F--){const j=P>>F&nc;O^=j,{x_2:H,x_3:I}=A(O,H,I),{x_2:B,x_3:S}=A(O,B,S),O=j;const G=H+B,J=m(G*G),oe=H-B,se=m(oe*oe),de=J-se,he=I+S,K=I-S,ie=m(K*G),Q=m(he*oe),le=ie+Q,Oe=ie-Q;I=m(le*le),S=m(D*m(Oe*Oe)),H=m(J*se),B=m(de*(J+m(f*de)))}({x_2:H,x_3:I}=A(O,H,I)),{x_2:B,x_3:S}=A(O,B,S);const U=i(B);return m(H*U)}return{scalarMult:v,scalarMultBase:_,getSharedSecret:(C,x)=>v(C,x),getPublicKey:C=>_(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:y.slice()}}BigInt(0);const Sz=BigInt(1),T_=BigInt(2),Tz=BigInt(3),Nz=BigInt(5);BigInt(8);const V2={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function xz(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=V2.p,o=t*t%i*t%i,a=is(o,T_,i)*o%i,c=is(a,Sz,i)*t%i,l=is(c,Nz,i)*c%i,u=is(l,e,i)*l%i,d=is(u,n,i)*u%i,f=is(d,r,i)*d%i,h=is(f,s,i)*f%i,p=is(h,s,i)*f%i,g=is(p,e,i)*l%i;return{pow_p_5_8:is(g,T_,i)*t%i,b2:o}}function Pz(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const E0=(()=>{const t=V2.p;return Iz({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=xz(e);return Mr(is(n,Tz,t)*r,t)},adjustScalarBytes:Pz})})();function N_(t){t.lowS!==void 0&&Yh("lowS",t.lowS),t.prehash!==void 0&&Yh("prehash",t.prehash)}class Oz extends Error{constructor(e=""){super(e)}}const Ei={Err:Oz,_tlv:{encode:(t,e)=>{const{Err:n}=Ei;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Sf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Sf(s.length/2|128):"";return Sf(t)+i+s+e},decode(t,e){const{Err:n}=Ei;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ei;if(t<pu)throw new e("integer: negative integers are not allowed");let n=Sf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ei;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return eg(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ei,s=ir("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ei,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},pu=BigInt(0),gu=BigInt(1),Rz=BigInt(2),Nf=BigInt(3),Dz=BigInt(4);function $z(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function K2(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ir("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function kz(t,e={}){const{Fp:n,Fn:r}=Cz("weierstrass",t,e),{h:s,n:i}=t;ng(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,C,x){const{x:P,y:D}=C.toAffine(),H=n.toBytes(P);if(Yh("isCompressed",x),x){a();const B=!n.isOdd(D);return da(G2(B),H)}else return da(Uint8Array.of(4),H,n.toBytes(D))}function l(N){Kr(N);const C=n.BYTES,x=C+1,P=2*C+1,D=N.length,H=N[0],B=N.subarray(1);if(D===x&&(H===2||H===3)){const I=n.fromBytes(B);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const S=f(I);let O;try{O=n.sqrt(S)}catch(F){const j=F instanceof Error?": "+F.message:"";throw new Error("bad point: is not on curve, sqrt error"+j)}a();const U=n.isOdd(O);return(H&1)===1!==U&&(O=n.neg(O)),{x:I,y:O}}else if(D===P&&H===4){const I=n.fromBytes(B.subarray(C*0,C*1)),S=n.fromBytes(B.subarray(C*1,C*2));if(!h(I,S))throw new Error("bad point: is not on curve");return{x:I,y:S}}else throw new Error(`bad point: got length ${D}, expected compressed=${x} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,f=$z(n,t.a,t.b);function h(N,C){const x=n.sqr(C),P=f(N);return n.eql(x,P)}if(!h(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Nf),Dz),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function m(N,C,x=!1){if(!n.isValid(C)||x&&n.is0(C))throw new Error(`bad point coordinate ${N}`);return C}function y(N){if(!(N instanceof v))throw new Error("ProjectivePoint expected")}const b=E_((N,C)=>{const{px:x,py:P,pz:D}=N;if(n.eql(D,n.ONE))return{x,y:P};const H=N.is0();C==null&&(C=H?n.ONE:n.inv(D));const B=n.mul(x,C),I=n.mul(P,C),S=n.mul(D,C);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:B,y:I}}),w=E_(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:C,y:x}=N.toAffine();if(!n.isValid(C)||!n.isValid(x))throw new Error("bad point: x or y not field elements");if(!h(C,x))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(N,C,x,P,D){return x=new v(n.mul(x.px,N),x.py,x.pz),C=hu(P,C),x=hu(D,x),C.add(x)}class v{constructor(C,x,P){this.px=m("x",C),this.py=m("y",x,!0),this.pz=m("z",P),Object.freeze(this)}static fromAffine(C){const{x,y:P}=C||{};if(!C||!n.isValid(x)||!n.isValid(P))throw new Error("invalid affine point");if(C instanceof v)throw new Error("projective point not allowed");return n.is0(x)&&n.is0(P)?v.ZERO:new v(x,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return yz(v,"pz",C)}static fromBytes(C){return Kr(C),v.fromHex(C)}static fromHex(C){const x=v.fromAffine(d(ir("pointHex",C)));return x.assertValidity(),x}static fromPrivateKey(C){const x=K2(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return v.BASE.multiply(x(C))}static msm(C,x){return _z(v,r,C,x)}precompute(C=8,x=!0){return A.setWindowSize(this,C),x||this.multiply(Nf),this}_setWindowSize(C){this.precompute(C)}assertValidity(){w(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){y(C);const{px:x,py:P,pz:D}=this,{px:H,py:B,pz:I}=C,S=n.eql(n.mul(x,I),n.mul(H,D)),O=n.eql(n.mul(P,I),n.mul(B,D));return S&&O}negate(){return new v(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:x}=t,P=n.mul(x,Nf),{px:D,py:H,pz:B}=this;let I=n.ZERO,S=n.ZERO,O=n.ZERO,U=n.mul(D,D),F=n.mul(H,H),j=n.mul(B,B),G=n.mul(D,H);return G=n.add(G,G),O=n.mul(D,B),O=n.add(O,O),I=n.mul(C,O),S=n.mul(P,j),S=n.add(I,S),I=n.sub(F,S),S=n.add(F,S),S=n.mul(I,S),I=n.mul(G,I),O=n.mul(P,O),j=n.mul(C,j),G=n.sub(U,j),G=n.mul(C,G),G=n.add(G,O),O=n.add(U,U),U=n.add(O,U),U=n.add(U,j),U=n.mul(U,G),S=n.add(S,U),j=n.mul(H,B),j=n.add(j,j),U=n.mul(j,G),I=n.sub(I,U),O=n.mul(j,F),O=n.add(O,O),O=n.add(O,O),new v(I,S,O)}add(C){y(C);const{px:x,py:P,pz:D}=this,{px:H,py:B,pz:I}=C;let S=n.ZERO,O=n.ZERO,U=n.ZERO;const F=t.a,j=n.mul(t.b,Nf);let G=n.mul(x,H),J=n.mul(P,B),oe=n.mul(D,I),se=n.add(x,P),de=n.add(H,B);se=n.mul(se,de),de=n.add(G,J),se=n.sub(se,de),de=n.add(x,D);let he=n.add(H,I);return de=n.mul(de,he),he=n.add(G,oe),de=n.sub(de,he),he=n.add(P,D),S=n.add(B,I),he=n.mul(he,S),S=n.add(J,oe),he=n.sub(he,S),U=n.mul(F,de),S=n.mul(j,oe),U=n.add(S,U),S=n.sub(J,U),U=n.add(J,U),O=n.mul(S,U),J=n.add(G,G),J=n.add(J,G),oe=n.mul(F,oe),de=n.mul(j,de),J=n.add(J,oe),oe=n.sub(G,oe),oe=n.mul(F,oe),de=n.add(de,oe),G=n.mul(J,de),O=n.add(O,G),G=n.mul(he,de),S=n.mul(se,S),S=n.sub(S,G),G=n.mul(se,J),U=n.mul(he,U),U=n.add(U,G),new v(S,O,U)}subtract(C){return this.add(C.negate())}is0(){return this.equals(v.ZERO)}multiply(C){const{endo:x}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let P,D;const H=B=>A.wNAFCached(this,B,v.normalizeZ);if(x){const{k1neg:B,k1:I,k2neg:S,k2:O}=x.splitScalar(C),{p:U,f:F}=H(I),{p:j,f:G}=H(O);D=F.add(G),P=E(x.beta,U,j,B,S)}else{const{p:B,f:I}=H(C);P=B,D=I}return v.normalizeZ([P,D])[0]}multiplyUnsafe(C){const{endo:x}=e,P=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===pu||P.is0())return v.ZERO;if(C===gu)return P;if(A.hasPrecomputes(this))return this.multiply(C);if(x){const{k1neg:D,k1:H,k2neg:B,k2:I}=x.splitScalar(C),{p1:S,p2:O}=Ez(v,P,H,I);return E(x.beta,S,O,D,B)}else return A.wNAFCachedUnsafe(P,C)}multiplyAndAddUnsafe(C,x,P){const D=this.multiplyUnsafe(x).add(C.multiplyUnsafe(P));return D.is0()?void 0:D}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===gu?!0:C?C(v,this):A.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===gu?this:C?C(v,this):this.multiplyUnsafe(s)}toBytes(C=!0){return Yh("isCompressed",C),this.assertValidity(),u(v,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return ad(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}v.BASE=new v(t.Gx,t.Gy,n.ONE),v.ZERO=new v(n.ZERO,n.ONE,n.ZERO),v.Fp=n,v.Fn=r;const _=r.BITS,A=vz(v,e.endo?Math.ceil(_/2):_);return v}function G2(t){return Uint8Array.of(t?2:3)}function Uz(t,e,n={}){ng(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||gl,s=e.hmac||((P,...D)=>Xp(e.hash,P,da(...D))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const D=a>>gu;return P>D}function u(P){return l(P)?o.neg(P):P}function d(P,D){if(!o.isValidNot0(D))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class f{constructor(D,H,B){d("r",D),d("s",H),this.r=D,this.s=H,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(D){const H=o.BYTES,B=ir("compactSignature",D,H*2);return new f(o.fromBytes(B.subarray(0,H)),o.fromBytes(B.subarray(H,H*2)))}static fromDER(D){const{r:H,s:B}=Ei.toSig(ir("DER",D));return new f(H,B)}assertValidity(){}addRecoveryBit(D){return new f(this.r,this.s,D)}recoverPublicKey(D){const H=i.ORDER,{r:B,s:I,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*Rz<H&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=S===2||S===3?B+a:B;if(!i.isValid(O))throw new Error("recovery id 2 or 3 invalid");const U=i.toBytes(O),F=t.fromHex(da(G2((S&1)===0),U)),j=o.inv(O),G=w(ir("msgHash",D)),J=o.create(-G*j),oe=o.create(I*j),se=t.BASE.multiplyUnsafe(J).add(F.multiplyUnsafe(oe));if(se.is0())throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o.neg(this.s),this.recovery):this}toBytes(D){if(D==="compact")return da(o.toBytes(this.r),o.toBytes(this.s));if(D==="der")return xb(Ei.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ad(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ad(this.toBytes("compact"))}}const h=K2(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return h(P),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const P=a;return mz(r(W2(P)),P)},precompute(P=8,D=t.BASE){return D.precompute(P,!1)}};function g(P,D=!0){return t.fromPrivateKey(P).toBytes(D)}function m(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const D=ir("key",P).length,H=i.BYTES,B=H+1,I=2*H+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===B))return D===B||D===I}function y(P,D,H=!0){if(m(P)===!0)throw new Error("first arg must be private key");if(m(D)===!1)throw new Error("second arg must be public key");return t.fromHex(D).multiply(h(P)).toBytes(H)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const D=eg(P),H=P.length*8-c;return H>0?D>>BigInt(H):D},w=e.bits2int_modN||function(P){return o.create(b(P))},E=tg(c);function v(P){return v0("num < 2^"+c,P,pu,E),o.toBytes(P)}function _(P,D,H=A){if(["recovered","canonical"].some(se=>se in H))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:I,prehash:S,extraEntropy:O}=H;I==null&&(I=!0),P=ir("msgHash",P),N_(H),S&&(P=ir("prehashed msgHash",B(P)));const U=w(P),F=h(D),j=[v(F),v(U)];if(O!=null&&O!==!1){const se=O===!0?r(i.BYTES):O;j.push(ir("extraEntropy",se))}const G=da(...j),J=U;function oe(se){const de=b(se);if(!o.isValidNot0(de))return;const he=o.inv(de),K=t.BASE.multiply(de).toAffine(),ie=o.create(K.x);if(ie===pu)return;const Q=o.create(he*o.create(J+ie*F));if(Q===pu)return;let le=(K.x===ie?0:2)|Number(K.y&gu),Oe=Q;return I&&l(Q)&&(Oe=u(Q),le^=1),new f(ie,Oe,le)}return{seed:G,k2sig:oe}}const A={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function C(P,D,H=A){const{seed:B,k2sig:I}=_(P,D,H);return az(e.hash.outputLen,o.BYTES,s)(B,I)}t.BASE.precompute(8);function x(P,D,H,B=N){const I=P;D=ir("msgHash",D),H=ir("publicKey",H),N_(B);const{lowS:S,prehash:O,format:U}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(U!==void 0&&!["compact","der","js"].includes(U))throw new Error('format must be "compact", "der" or "js"');const F=typeof I=="string"||Sb(I),j=!F&&!U&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!F&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,J;try{if(j)if(U===void 0||U==="js")G=new f(I.r,I.s);else throw new Error("invalid format");if(F){try{U!=="compact"&&(G=f.fromDER(I))}catch(le){if(!(le instanceof Ei.Err))throw le}!G&&U!=="der"&&(G=f.fromCompact(I))}J=t.fromHex(H)}catch{return!1}if(!G||S&&G.hasHighS())return!1;O&&(D=e.hash(D));const{r:oe,s:se}=G,de=w(D),he=o.inv(se),K=o.create(de*he),ie=o.create(oe*he),Q=t.BASE.multiplyUnsafe(K).add(J.multiplyUnsafe(ie));return Q.is0()?!1:o.create(Q.x)===oe}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:C,verify:x,utils:p,Point:t,Signature:f})}function Lz(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=ml(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Mz(t){const{CURVE:e,curveOpts:n}=Lz(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Bz(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Fz(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Mz(t),s=kz(e,n),i=Uz(s,r,n);return Bz(t,i)}function _0(t,e){const n=r=>Fz({...t,hash:r});return{...n(e),create:n}}const Y2={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Z2={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},J2={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},jz=ml(Y2.p),Hz=ml(Z2.p),Wz=ml(J2.p),qz=_0({...Y2,Fp:jz,lowS:!1},Jp);_0({...Z2,Fp:Hz,lowS:!1},XW),_0({...J2,Fp:Wz,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},JW);const zz=qz,X2="base10",Kn="base16",us="base64pad",ho="base64url",Jd="utf8",Q2=0,Ni=1,Xd=2,Vz=0,x_=1,mu=12,kb=32;function Kz(){const t=E0.utils.randomPrivateKey(),e=E0.getPublicKey(t);return{privateKey:ur(t,Kn),publicKey:ur(e,Kn)}}function C0(){const t=gl(kb);return ur(t,Kn)}function Gz(t,e){const n=E0.getSharedSecret(jr(t,Kn),jr(e,Kn)),r=sz(Qp,n,void 0,void 0,kb);return ur(r,Kn)}function th(t){const e=Qp(jr(t,Kn));return ur(e,Kn)}function Fs(t){const e=Qp(jr(t,Jd));return ur(e,Kn)}function eP(t){return jr(`${t}`,X2)}function Da(t){return Number(ur(t,X2))}function tP(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function nP(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Yz(t){const e=eP(typeof t.type<"u"?t.type:Q2);if(Da(e)===Ni&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?jr(t.senderPublicKey,Kn):void 0,r=typeof t.iv<"u"?jr(t.iv,Kn):gl(mu),s=jr(t.symKey,Kn),i=$2(s,r).encrypt(jr(t.message,Jd)),o=rP({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ho?tP(o):o}function Zz(t){const e=jr(t.symKey,Kn),{sealed:n,iv:r}=ld({encoded:t.encoded,encoding:t.encoding}),s=$2(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ur(s,Jd)}function Jz(t,e){const n=eP(Xd),r=gl(mu),s=jr(t,Jd),i=rP({type:n,sealed:s,iv:r});return e===ho?tP(i):i}function Xz(t,e){const{sealed:n}=ld({encoded:t,encoding:e});return ur(n,Jd)}function rP(t){if(Da(t.type)===Xd)return ur(fu([t.type,t.sealed]),us);if(Da(t.type)===Ni){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ur(fu([t.type,t.senderPublicKey,t.iv,t.sealed]),us)}return ur(fu([t.type,t.iv,t.sealed]),us)}function ld(t){const e=(t.encoding||us)===ho?nP(t.encoded):t.encoded,n=jr(e,us),r=n.slice(Vz,x_),s=x_;if(Da(r)===Ni){const c=s+kb,l=c+mu,u=n.slice(s,c),d=n.slice(c,l),f=n.slice(l);return{type:r,sealed:f,iv:d,senderPublicKey:u}}if(Da(r)===Xd){const c=n.slice(s),l=gl(mu);return{type:r,sealed:c,iv:l}}const i=s+mu,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function Qz(t,e){const n=ld({encoded:t,encoding:e==null?void 0:e.encoding});return sP({type:Da(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ur(n.senderPublicKey,Kn):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function sP(t){const e=(t==null?void 0:t.type)||Q2;if(e===Ni){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function P_(t){return t.type===Ni&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function O_(t){return t.type===Xd}function eV(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return fu([new Uint8Array([4]),e,n])}function tV(t,e){const[n,r,s]=t.split("."),i=Buffer.from(nP(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Qp(c),u=eV(e);if(!zz.verify(fu([o,a]),l,u))throw new Error("Invalid signature");return r0(t).payload}const nV="irn";function Jh(t){return(t==null?void 0:t.relay)||{protocol:nV}}function Xl(t){const e=MH[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function rV(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function R_(t){if(!t.includes("wc:")){const l=g2(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:sV(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:rV(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function sV(t){return t.startsWith("//")?t.substring(2):t}function iV(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function D_(t){const e=new URLSearchParams,n=iV(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function xf(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var oV=Object.defineProperty,aV=Object.defineProperties,cV=Object.getOwnPropertyDescriptors,$_=Object.getOwnPropertySymbols,lV=Object.prototype.hasOwnProperty,uV=Object.prototype.propertyIsEnumerable,k_=(t,e,n)=>e in t?oV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dV=(t,e)=>{for(var n in e||(e={}))lV.call(e,n)&&k_(t,n,e[n]);if($_)for(var n of $_(e))uV.call(e,n)&&k_(t,n,e[n]);return t},fV=(t,e)=>aV(t,cV(e));function yl(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function hV(t){const e=[];return Object.values(t).forEach(n=>{e.push(...yl(n.accounts))}),e}function pV(t,e){const n=[];return Object.values(t).forEach(r=>{yl(r.accounts).includes(e)&&n.push(...r.methods)}),n}function gV(t,e){const n=[];return Object.values(t).forEach(r=>{yl(r.accounts).includes(e)&&n.push(...r.events)}),n}function rg(t){return t.includes(":")}function Sc(t){return rg(t)?t.split(":")[0]:t}function U_(t){var e,n,r;const s={};if(!Vs(t))return s;for(const[i,o]of Object.entries(t)){const a=rg(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Sc(i);s[u]=fV(dV({},s[u]),{chains:zs(a,(e=s[u])==null?void 0:e.chains),methods:zs(c,(n=s[u])==null?void 0:n.methods),events:zs(l,(r=s[u])==null?void 0:r.events)})}return s}function mV(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function L_(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=mV(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=zs(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function yV(t,e){var n,r,s,i,o,a;const c=U_(t),l=U_(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const f of d)u[f]={chains:zs((n=c[f])==null?void 0:n.chains,(r=l[f])==null?void 0:r.chains),methods:zs((s=c[f])==null?void 0:s.methods,(i=l[f])==null?void 0:i.methods),events:zs((o=c[f])==null?void 0:o.events,(a=l[f])==null?void 0:a.events)};return u}const wV={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},bV={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ge(t,e){const{message:n,code:r}=bV[t];return{message:e?`${n} ${e}`:n,code:r}}function $t(t,e){const{message:n,code:r}=wV[t];return{message:e?`${n} ${e}`:n,code:r}}function xi(t,e){return!!Array.isArray(t)}function Vs(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function bn(t){return typeof t>"u"}function Kt(t,e){return e&&bn(t)?!0:typeof t=="string"&&!!t.trim().length}function Ub(t,e){return e&&bn(t)?!0:typeof t=="number"&&!isNaN(t)}function vV(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return ua(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=yl(a),d=n[o];(!ua(u2(o,d),u)||!ua(d.methods,c)||!ua(d.events,l))&&(i=!1)}),i):!1}function Xh(t){return Kt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function EV(t){if(Kt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&Xh(n)}}return!1}function _V(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Kt(t,!1)){if(e(t))return!0;const n=g2(t);return e(n)}}catch{}return!1}function CV(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function AV(t){return t==null?void 0:t.topic}function IV(t,e){let n=null;return Kt(t==null?void 0:t.publicKey,!1)||(n=ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function M_(t){let e=!0;return xi(t)?t.length&&(e=t.every(n=>Kt(n,!1))):e=!1,e}function SV(t,e,n){let r=null;return xi(e)&&e.length?e.forEach(s=>{r||Xh(s)||(r=$t("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Xh(t)||(r=$t("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function TV(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=SV(s,u2(s,i),`${e} ${n}`);o&&(r=o)}),r}function NV(t,e){let n=null;return xi(t)?t.forEach(r=>{n||EV(r)||(n=$t("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=$t("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function xV(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=NV(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function PV(t,e){let n=null;return M_(t==null?void 0:t.methods)?M_(t==null?void 0:t.events)||(n=$t("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=$t("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function iP(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=PV(r,`${e}, namespace`);s&&(n=s)}),n}function OV(t,e,n){let r=null;if(t&&Vs(t)){const s=iP(t,e);s&&(r=s);const i=TV(t,e,n);i&&(r=i)}else r=ge("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function xm(t,e){let n=null;if(t&&Vs(t)){const r=iP(t,e);r&&(n=r);const s=xV(t,e);s&&(n=s)}else n=ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function oP(t){return Kt(t.protocol,!0)}function RV(t,e){let n=!1;return t?t&&xi(t)&&t.length&&t.forEach(r=>{n=oP(r)}):n=!0,n}function DV(t){return typeof t=="number"}function rr(t){return typeof t<"u"&&typeof t!==null}function $V(t){return!(!t||typeof t!="object"||!t.code||!Ub(t.code,!1)||!t.message||!Kt(t.message,!1))}function kV(t){return!(bn(t)||!Kt(t.method,!1))}function UV(t){return!(bn(t)||bn(t.result)&&bn(t.error)||!Ub(t.id,!1)||!Kt(t.jsonrpc,!1))}function LV(t){return!(bn(t)||!Kt(t.name,!1))}function B_(t,e){return!(!Xh(e)||!hV(t).includes(e))}function MV(t,e,n){return Kt(n,!1)?pV(t,e).includes(n):!1}function BV(t,e,n){return Kt(n,!1)?gV(t,e).includes(n):!1}function F_(t,e,n){let r=null;const s=FV(t),i=jV(e),o=Object.keys(s),a=Object.keys(i),c=j_(Object.keys(t)),l=j_(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ge("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),ua(o,a)||(r=ge("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const f=yl(e[d].accounts);f.includes(d)||(r=ge("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${f.toString()}`))}),o.forEach(d=>{r||(ua(s[d].methods,i[d].methods)?ua(s[d].events,i[d].events)||(r=ge("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ge("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function FV(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function j_(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function jV(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=yl(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function HV(t,e){return Ub(t,!1)&&t<=e.max&&t>=e.min}function H_(){const t=Yd();return new Promise(e=>{switch(t){case _r.browser:e(WV());break;case _r.reactNative:e(qV());break;case _r.node:e(zV());break;default:e(!0)}})}function WV(){return pl()&&(navigator==null?void 0:navigator.onLine)}async function qV(){if(Bo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function zV(){return!0}function VV(t){switch(Yd()){case _r.browser:KV(t);break;case _r.reactNative:GV(t);break}}function KV(t){!Bo()&&pl()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function GV(t){Bo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function YV(){var t;return pl()&&Ri.getDocument()?((t=Ri.getDocument())==null?void 0:t.visibilityState)==="visible":!0}const Pm={};class Ml{static get(e){return Pm[e]}static set(e,n){Pm[e]=n}static delete(e){delete Pm[e]}}function ZV(t){const e=hl.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function JV({publicKey:t,signature:e,payload:n}){var r;const s=A0(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=eK(n.address),a=n.era==="00"?new Uint8Array([0]):A0(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${QV(n.tip)}`),d=nK(u),f=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),h=tK(f.length+1);return new Uint8Array([...h,i,...f])}function XV(t){const e=A0(t),n=HH.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function A0(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function QV(t){return t.startsWith("0x")?t.slice(2):t}function eK(t){const e=hl.decode(t)[0];return e===42?0:e===60?2:1}function tK(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function nK(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function rK(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=ZV(t.transaction.address),r=JV({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return XV(s)}const sK="PARSE_ERROR",iK="INVALID_REQUEST",oK="METHOD_NOT_FOUND",aK="INVALID_PARAMS",aP="INTERNAL_ERROR",Lb="SERVER_ERROR",cK=[-32700,-32600,-32601,-32602,-32603],yu={[sK]:{code:-32700,message:"Parse error"},[iK]:{code:-32600,message:"Invalid Request"},[oK]:{code:-32601,message:"Method not found"},[aK]:{code:-32602,message:"Invalid params"},[aP]:{code:-32603,message:"Internal error"},[Lb]:{code:-32e3,message:"Server error"}},cP=Lb;function lK(t){return cK.includes(t)}function W_(t){return Object.keys(yu).includes(t)?yu[t]:yu[cP]}function uK(t){const e=Object.values(yu).find(n=>n.code===t);return e||yu[cP]}function lP(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Om={},fi={},q_;function dK(){if(q_)return fi;q_=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.isBrowserCryptoAvailable=fi.getSubtleCrypto=fi.getBrowerCrypto=void 0;function t(){return(Bs==null?void 0:Bs.crypto)||(Bs==null?void 0:Bs.msCrypto)||{}}fi.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}fi.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return fi.isBrowserCryptoAvailable=n,fi}var hi={},z_;function fK(){if(z_)return hi;z_=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.isBrowser=hi.isNode=hi.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}hi.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}hi.isNode=e;function n(){return!t()&&!e()}return hi.isBrowser=n,hi}var V_;function hK(){return V_||(V_=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Wd;e.__exportStar(dK(),t),e.__exportStar(fK(),t)}(Om)),Om}var pK=hK();function Us(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function pa(t=6){return BigInt(Us(t))}function wo(t,e,n){return{id:n||Us(),jsonrpc:"2.0",method:t,params:e}}function sg(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ig(t,e,n){return{id:t,jsonrpc:"2.0",error:gK(e)}}function gK(t,e){return typeof t>"u"?W_(aP):(typeof t=="string"&&(t=Object.assign(Object.assign({},W_(Lb)),{message:t})),lK(t.code)&&(t=uK(t.code)),t)}let mK=class{},yK=class extends mK{constructor(){super()}},wK=class extends yK{constructor(e){super()}};const bK="^https?:",vK="^wss?:";function EK(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function uP(t,e){const n=EK(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function K_(t){return uP(t,bK)}function G_(t){return uP(t,vK)}function _K(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function dP(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Mb(t){return dP(t)&&"method"in t}function og(t){return dP(t)&&(Ls(t)||Lr(t))}function Ls(t){return"result"in t}function Lr(t){return"error"in t}let Xr=class extends wK{constructor(e){super(e),this.events=new Jr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(wo(e.method,e.params||[],e.id||pa().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Lr(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),og(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const CK=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),AK=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Y_=t=>t.split("?")[0],Z_=10,IK=CK();let SK=class{constructor(e){if(this.url=e,this.events=new Jr.EventEmitter,this.registering=!1,!G_(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Oi(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!G_(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=pK.isReactNative()?void 0:{rejectUnauthorized:!_K(e)},i=new IK(e,[],s);AK()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Oa(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=ig(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return lP(e,Y_(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Z_&&this.events.setMaxListeners(Z_)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Y_(this.url)}`));return this.events.emit("register_error",n),n}};var TK={};const fP="wc",hP=2,I0="core",Xs=`${fP}@2:${I0}:`,NK={logger:"error"},xK={database:":memory:"},PK="crypto",J_="client_ed25519_seed",OK=me.ONE_DAY,RK="keychain",DK="0.3",$K="messages",kK="0.3",X_=me.SIX_HOURS,UK="publisher",pP="irn",LK="error",gP="wss://relay.walletconnect.org",MK="relayer",ln={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},BK="_subscription",Dr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},FK=.1,S0="2.21.5",xt={link_mode:"link_mode",relay:"relay"},nh={inbound:"inbound",outbound:"outbound"},jK="0.3",HK="WALLETCONNECT_CLIENT_ID",Q_="WALLETCONNECT_LINK_MODE_APPS",yr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},WK="subscription",qK="0.3",zK="pairing",VK="0.3",Bl={wc_pairingDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:me.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:me.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:me.ONE_DAY,prompt:!1,tag:0},res:{ttl:me.ONE_DAY,prompt:!1,tag:0}}},ia={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ns={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},KK="history",GK="0.3",YK="expirer",Ur={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},ZK="0.3",JK="verify-api",XK="https://verify.walletconnect.com",mP="https://verify.walletconnect.org",wu=mP,QK=`${wu}/v3`,eG=[XK,mP],tG="echo",nG="https://echo.walletconnect.com",$s={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},yi={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},rs={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Zo={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Jo={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Fl={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},rG=.1,sG="event-client",iG=86400,oG="https://pulse.walletconnect.org/batch";function aG(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,m=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var w=(b-y)*u+1>>>0,E=new Uint8Array(w);y!==b;){for(var v=p[y],_=0,A=w-1;(v!==0||_<m)&&A!==-1;A--,_++)v+=256*E[A]>>>0,E[A]=v%a>>>0,v=v/a>>>0;if(v!==0)throw new Error("Non-zero carry");m=_,y++}for(var N=w-m;N!==w&&E[N]===0;)N++;for(var C=c.repeat(g);N<w;++N)C+=t.charAt(E[N]);return C}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var m=0,y=0;p[g]===c;)m++,g++;for(var b=(p.length-g)*l+1>>>0,w=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var v=0,_=b-1;(E!==0||v<y)&&_!==-1;_--,v++)E+=a*w[_]>>>0,w[_]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");y=v,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&w[A]===0;)A++;for(var N=new Uint8Array(m+(b-A)),C=m;A!==b;)N[C++]=w[A++];return N}}}function h(p){var g=f(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var cG=aG,lG=cG;const yP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},uG=t=>new TextEncoder().encode(t),dG=t=>new TextDecoder().decode(t);class fG{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hG{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return wP(this,e)}}class pG{constructor(e){this.decoders=e}or(e){return wP(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const wP=(t,e)=>new pG({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class gG{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new fG(e,n,r),this.decoder=new hG(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const ag=({name:t,prefix:e,encode:n,decode:r})=>new gG(t,e,n,r),Qd=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=lG(n,e);return ag({prefix:t,name:e,encode:r,decode:i=>yP(s(i))})},mG=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},yG=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Sn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ag({prefix:e,name:t,encode(s){return yG(s,r,n)},decode(s){return mG(s,r,n,t)}}),wG=ag({prefix:"\0",name:"identity",encode:t=>dG(t),decode:t=>uG(t)});var bG=Object.freeze({__proto__:null,identity:wG});const vG=Sn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EG=Object.freeze({__proto__:null,base2:vG});const _G=Sn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var CG=Object.freeze({__proto__:null,base8:_G});const AG=Qd({prefix:"9",name:"base10",alphabet:"0123456789"});var IG=Object.freeze({__proto__:null,base10:AG});const SG=Sn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),TG=Sn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var NG=Object.freeze({__proto__:null,base16:SG,base16upper:TG});const xG=Sn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),PG=Sn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),OG=Sn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),RG=Sn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),DG=Sn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$G=Sn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kG=Sn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),UG=Sn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LG=Sn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var MG=Object.freeze({__proto__:null,base32:xG,base32upper:PG,base32pad:OG,base32padupper:RG,base32hex:DG,base32hexupper:$G,base32hexpad:kG,base32hexpadupper:UG,base32z:LG});const BG=Qd({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),FG=Qd({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jG=Object.freeze({__proto__:null,base36:BG,base36upper:FG});const HG=Qd({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),WG=Qd({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qG=Object.freeze({__proto__:null,base58btc:HG,base58flickr:WG});const zG=Sn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),VG=Sn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),KG=Sn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),GG=Sn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var YG=Object.freeze({__proto__:null,base64:zG,base64pad:VG,base64url:KG,base64urlpad:GG});const bP=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ZG=bP.reduce((t,e,n)=>(t[n]=e,t),[]),JG=bP.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function XG(t){return t.reduce((e,n)=>(e+=ZG[n],e),"")}function QG(t){const e=[];for(const n of t){const r=JG[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const eY=ag({prefix:"🚀",name:"base256emoji",encode:XG,decode:QG});var tY=Object.freeze({__proto__:null,base256emoji:eY}),nY=vP,eC=128,rY=-128,sY=Math.pow(2,31);function vP(t,e,n){e=e||[],n=n||0;for(var r=n;t>=sY;)e[n++]=t&255|eC,t/=128;for(;t&rY;)e[n++]=t&255|eC,t>>>=7;return e[n]=t|0,vP.bytes=n-r+1,e}var iY=T0,oY=128,tC=127;function T0(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw T0.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&tC)<<s:(o&tC)*Math.pow(2,s),s+=7}while(o>=oY);return T0.bytes=i-r,n}var aY=Math.pow(2,7),cY=Math.pow(2,14),lY=Math.pow(2,21),uY=Math.pow(2,28),dY=Math.pow(2,35),fY=Math.pow(2,42),hY=Math.pow(2,49),pY=Math.pow(2,56),gY=Math.pow(2,63),mY=function(t){return t<aY?1:t<cY?2:t<lY?3:t<uY?4:t<dY?5:t<fY?6:t<hY?7:t<pY?8:t<gY?9:10},yY={encode:nY,decode:iY,encodingLength:mY},EP=yY;const nC=(t,e,n=0)=>(EP.encode(t,e,n),e),rC=t=>EP.encodingLength(t),N0=(t,e)=>{const n=e.byteLength,r=rC(t),s=r+rC(n),i=new Uint8Array(s+n);return nC(t,i,0),nC(n,i,r),i.set(e,s),new wY(t,n,e,i)};class wY{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const _P=({name:t,code:e,encode:n})=>new bY(t,e,n);class bY{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?N0(this.code,n):n.then(r=>N0(this.code,r))}else throw Error("Unknown type, must be binary type")}}const CP=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),vY=_P({name:"sha2-256",code:18,encode:CP("SHA-256")}),EY=_P({name:"sha2-512",code:19,encode:CP("SHA-512")});var _Y=Object.freeze({__proto__:null,sha256:vY,sha512:EY});const AP=0,CY="identity",IP=yP,AY=t=>N0(AP,IP(t)),IY={code:AP,name:CY,encode:IP,digest:AY};var SY=Object.freeze({__proto__:null,identity:IY});new TextEncoder,new TextDecoder;const sC={...bG,...EG,...CG,...IG,...NG,...MG,...jG,...qG,...YG,...tY};({..._Y,...SY});function SP(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function TY(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?SP(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function TP(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const iC=TP("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Rm=TP("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=TY(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),NY={utf8:iC,"utf-8":iC,hex:sC.base16,latin1:Rm,ascii:Rm,binary:Rm,...sC};function xY(t,e="utf8"){const n=NY[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?SP(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var PY=Object.defineProperty,OY=(t,e,n)=>e in t?PY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ps=(t,e,n)=>OY(t,typeof e!="symbol"?e+"":e,n);class RY{constructor(e,n){this.core=e,this.logger=n,Ps(this,"keychain",new Map),Ps(this,"name",RK),Ps(this,"version",DK),Ps(this,"initialized",!1),Ps(this,"storagePrefix",Xs),Ps(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Ps(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Ps(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Ps(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Ps(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ln(n,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,f0(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?h0(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DY=Object.defineProperty,$Y=(t,e,n)=>e in t?DY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mn=(t,e,n)=>$Y(t,typeof e!="symbol"?e+"":e,n);class kY{constructor(e,n,r){this.core=e,this.logger=n,mn(this,"name",PK),mn(this,"keychain"),mn(this,"randomSessionIdentifier",C0()),mn(this,"initialized",!1),mn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),mn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),mn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=D1(s);return Fx(i.publicKey)}),mn(this,"generateKeyPair",()=>{this.isInitialized();const s=Kz();return this.setPrivateKey(s.publicKey,s.privateKey)}),mn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=D1(i),a=this.randomSessionIdentifier;return await gj(a,s,OK,o)}),mn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Gz(a,i);return this.setSymKey(c,o)}),mn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||th(s);return await this.keychain.set(o,s),o}),mn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),mn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),mn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=sP(o),c=Oi(i);if(O_(a))return Jz(c,o==null?void 0:o.encoding);if(P_(a)){const f=a.senderPublicKey,h=a.receiverPublicKey;s=await this.generateSharedKey(f,h)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Yz({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),mn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=Qz(i,o);if(O_(a)){const c=Xz(i,o==null?void 0:o.encoding);return Oa(c)}if(P_(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Zz({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Oa(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),mn(this,"getPayloadType",(s,i=us)=>{const o=ld({encoded:s,encoding:i});return Da(o.type)}),mn(this,"getPayloadSenderPublicKey",(s,i=us)=>{const o=ld({encoded:s,encoding:i});return o.senderPublicKey?ur(o.senderPublicKey,Kn):void 0}),this.core=e,this.logger=Ln(n,this.name),this.keychain=r||new RY(this.core,this.logger)}get context(){return hr(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(J_)}catch{e=C0(),await this.keychain.set(J_,e)}return xY(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var UY=Object.defineProperty,LY=Object.defineProperties,MY=Object.getOwnPropertyDescriptors,oC=Object.getOwnPropertySymbols,BY=Object.prototype.hasOwnProperty,FY=Object.prototype.propertyIsEnumerable,x0=(t,e,n)=>e in t?UY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jY=(t,e)=>{for(var n in e||(e={}))BY.call(e,n)&&x0(t,n,e[n]);if(oC)for(var n of oC(e))FY.call(e,n)&&x0(t,n,e[n]);return t},HY=(t,e)=>LY(t,MY(e)),mr=(t,e,n)=>x0(t,typeof e!="symbol"?e+"":e,n);class WY extends hB{constructor(e,n){super(e,n),this.logger=e,this.core=n,mr(this,"messages",new Map),mr(this,"messagesWithoutClientAck",new Map),mr(this,"name",$K),mr(this,"version",kK),mr(this,"initialized",!1),mr(this,"storagePrefix",Xs),mr(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),mr(this,"set",async(r,s,i)=>{this.isInitialized();const o=Fs(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===nh.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,HY(jY({},c),{[o]:s}))}return await this.persist(),o}),mr(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),mr(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),mr(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Fs(s);return typeof i[o]<"u"}),mr(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Fs(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),mr(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ln(e,this.name),this.core=n}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,f0(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,f0(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?h0(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?h0(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qY=Object.defineProperty,zY=Object.defineProperties,VY=Object.getOwnPropertyDescriptors,aC=Object.getOwnPropertySymbols,KY=Object.prototype.hasOwnProperty,GY=Object.prototype.propertyIsEnumerable,P0=(t,e,n)=>e in t?qY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pf=(t,e)=>{for(var n in e||(e={}))KY.call(e,n)&&P0(t,n,e[n]);if(aC)for(var n of aC(e))GY.call(e,n)&&P0(t,n,e[n]);return t},Dm=(t,e)=>zY(t,VY(e)),ss=(t,e,n)=>P0(t,typeof e!="symbol"?e+"":e,n);class YY extends pB{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,ss(this,"events",new Jr.EventEmitter),ss(this,"name",UK),ss(this,"queue",new Map),ss(this,"publishTimeout",me.toMiliseconds(me.ONE_MINUTE)),ss(this,"initialPublishTimeout",me.toMiliseconds(me.ONE_SECOND*15)),ss(this,"needsTransportRestart",!1),ss(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||X_,c=Jh(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||pa().toString(),f={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},h=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const m=({id:b})=>{f.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(ln.publish,m),g(f))};this.relayer.events.on(ln.publish,m);const y=yo(new Promise((b,w)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),w(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(ln.publish,m)}catch(b){this.queue.set(d,Dm(Pf({},f),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await yo(p,this.publishTimeout,h)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),ss(this,"on",(r,s)=>{this.events.on(r,s)}),ss(this,"once",(r,s)=>{this.events.once(r,s)}),ss(this,"off",(r,s)=>{this.events.off(r,s)}),ss(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ln(n,this.name),this.registerEventListeners()}get context(){return hr(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=X_,prompt:l,tag:u,id:d,attestation:f,tvf:h}=e,p={method:Xl(Jh().protocol).publish,params:Pf({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:f},h),id:d};bn((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),bn((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(ln.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,Dm(Pf({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(Dm(Pf({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(qa.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ln.connection_stalled);return}this.checkQueue()}),this.relayer.on(ln.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var ZY=Object.defineProperty,JY=(t,e,n)=>e in t?ZY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rc=(t,e,n)=>JY(t,typeof e!="symbol"?e+"":e,n);class XY{constructor(){rc(this,"map",new Map),rc(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),rc(this,"get",e=>this.map.get(e)||[]),rc(this,"exists",(e,n)=>this.get(e).includes(n)),rc(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),rc(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var QY=Object.defineProperty,eZ=Object.defineProperties,tZ=Object.getOwnPropertyDescriptors,cC=Object.getOwnPropertySymbols,nZ=Object.prototype.hasOwnProperty,rZ=Object.prototype.propertyIsEnumerable,O0=(t,e,n)=>e in t?QY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jl=(t,e)=>{for(var n in e||(e={}))nZ.call(e,n)&&O0(t,n,e[n]);if(cC)for(var n of cC(e))rZ.call(e,n)&&O0(t,n,e[n]);return t},$m=(t,e)=>eZ(t,tZ(e)),At=(t,e,n)=>O0(t,typeof e!="symbol"?e+"":e,n);class sZ extends yB{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,At(this,"subscriptions",new Map),At(this,"topicMap",new XY),At(this,"events",new Jr.EventEmitter),At(this,"name",WK),At(this,"version",qK),At(this,"pending",new Map),At(this,"cached",[]),At(this,"initialized",!1),At(this,"storagePrefix",Xs),At(this,"subscribeTimeout",me.toMiliseconds(me.ONE_MINUTE)),At(this,"initialSubscribeTimeout",me.toMiliseconds(me.ONE_SECOND*15)),At(this,"clientId"),At(this,"batchSubscribeTopicsLimit",500),At(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),At(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=Jh(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),At(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),At(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),At(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),At(this,"on",(r,s)=>{this.events.on(r,s)}),At(this,"once",(r,s)=>{this.events.once(r,s)}),At(this,"off",(r,s)=>{this.events.off(r,s)}),At(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),At(this,"start",async()=>{await this.onConnect()}),At(this,"stop",async()=>{await this.onDisconnect()}),At(this,"restart",async()=>{await this.restore(),await this.onRestart()}),At(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),At(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(qa.pulse,async()=>{await this.checkPending()}),this.events.on(yr.created,async r=>{const s=yr.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(yr.deleted,async r=>{const s=yr.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ln(n,this.name),this.clientId=""}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=Jh(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=$t("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===xt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Xl(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===xt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},me.toMiliseconds(me.ONE_SECOND)),a;const c=new Promise(async u=>{const d=f=>{f.topic===e&&(this.events.removeListener(yr.created,d),u(f.id))};this.events.on(yr.created,d);try{const f=await yo(new Promise((h,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(h)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(yr.created,d),u(f)}catch{}}),l=await yo(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ln.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Xl(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await yo(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ln.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Xl(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await yo(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ln.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Xl(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,$m(jl({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,jl({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,jl({},n)),this.topicMap.set(n.topic,e),this.events.emit(yr.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(yr.deleted,$m(jl({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(yr.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(yr.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>$m(jl({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await gW(me.toMiliseconds(me.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Fs(e+await this.getClientId())}}var iZ=Object.defineProperty,lC=Object.getOwnPropertySymbols,oZ=Object.prototype.hasOwnProperty,aZ=Object.prototype.propertyIsEnumerable,R0=(t,e,n)=>e in t?iZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uC=(t,e)=>{for(var n in e||(e={}))oZ.call(e,n)&&R0(t,n,e[n]);if(lC)for(var n of lC(e))aZ.call(e,n)&&R0(t,n,e[n]);return t},it=(t,e,n)=>R0(t,typeof e!="symbol"?e+"":e,n);class cZ extends gB{constructor(e){super(e),it(this,"protocol","wc"),it(this,"version",2),it(this,"core"),it(this,"logger"),it(this,"events",new Jr.EventEmitter),it(this,"provider"),it(this,"messages"),it(this,"subscriber"),it(this,"publisher"),it(this,"name",MK),it(this,"transportExplicitlyClosed",!1),it(this,"initialized",!1),it(this,"connectionAttemptInProgress",!1),it(this,"relayUrl"),it(this,"projectId"),it(this,"packageName"),it(this,"bundleId"),it(this,"hasExperiencedNetworkDisruption",!1),it(this,"pingTimeout"),it(this,"heartBeatTimeout",me.toMiliseconds(me.THIRTY_SECONDS+me.FIVE_SECONDS)),it(this,"reconnectTimeout"),it(this,"connectPromise"),it(this,"reconnectInProgress",!1),it(this,"requestsInFlight",[]),it(this,"connectTimeout",me.toMiliseconds(me.ONE_SECOND*15)),it(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||pa().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),it(this,"resetPingTimeout",()=>{Kh()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),it(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),it(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(ln.connect)}),it(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),it(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(ln.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),it(this,"registerProviderListeners",()=>{this.provider.on(Dr.payload,this.onPayloadHandler),this.provider.on(Dr.connect,this.onConnectHandler),this.provider.on(Dr.disconnect,this.onDisconnectHandler),this.provider.on(Dr.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ln(e.logger,this.name):zd(ll({level:e.logger||LK})),this.messages=new WY(this.logger,e.core),this.subscriber=new sZ(this,this.logger),this.publisher=new YY(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||gP,this.projectId=e.projectId,QH()?this.packageName=X1():eW()&&(this.bundleId=X1()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return hr(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:xt.relay},nh.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(yr.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(yr.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,uC({internal:{throwOnFailedPublish:o}},n)).catch(f=>{o&&d(f)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await yo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await H_())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Jt(me.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(ln.message,e),await this.recordMessageEvent(e,nh.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(Dr.disconnect,i),await yo(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Dr.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Dr.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Dr.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,me.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(Kh())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Xr(new SK(iW({sdkVersion:S0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Mb(e)){if(!e.method.endsWith(BK))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:xt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(uC({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else og(e)&&this.events.emit(ln.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,nh.inbound),this.events.emit(ln.message,e))}async acknowledgePayload(e){const n=sg(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Dr.payload,this.onPayloadHandler),this.provider.off(Dr.connect,this.onConnectHandler),this.provider.off(Dr.disconnect,this.onDisconnectHandler),this.provider.off(Dr.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await H_();VV(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(qa.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&YV())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ln.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},me.toMiliseconds(FK)))))}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function lZ(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function dC(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function fC(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const uZ="[object RegExp]",dZ="[object String]",fZ="[object Number]",hZ="[object Boolean]",hC="[object Arguments]",pZ="[object Symbol]",gZ="[object Date]",mZ="[object Map]",yZ="[object Set]",wZ="[object Array]",bZ="[object Function]",vZ="[object ArrayBuffer]",km="[object Object]",EZ="[object Error]",_Z="[object DataView]",CZ="[object Uint8Array]",AZ="[object Uint8ClampedArray]",IZ="[object Uint16Array]",SZ="[object Uint32Array]",TZ="[object BigUint64Array]",NZ="[object Int8Array]",xZ="[object Int16Array]",PZ="[object Int32Array]",OZ="[object BigInt64Array]",RZ="[object Float32Array]",DZ="[object Float64Array]";function $Z(){}function pC(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function kZ(t,e,n){return Ql(t,e,void 0,void 0,void 0,void 0,n)}function Ql(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return bu(t,e,i,o)}return bu(t,e,i,o)}function bu(t,e,n,r){if(Object.is(t,e))return!0;let s=fC(t),i=fC(e);if(s===hC&&(s=km),i===hC&&(i=km),s!==i)return!1;switch(s){case dZ:return t.toString()===e.toString();case fZ:{const c=t.valueOf(),l=e.valueOf();return lZ(c,l)}case hZ:case gZ:case pZ:return Object.is(t.valueOf(),e.valueOf());case uZ:return t.source===e.source&&t.flags===e.flags;case bZ:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case mZ:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Ql(l,e.get(c),c,t,e,n,r))return!1;return!0}case yZ:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],f=l.findIndex(h=>Ql(d,h,void 0,t,e,n,r));if(f===-1)return!1;l.splice(f,1)}return!0}case wZ:case CZ:case AZ:case IZ:case SZ:case TZ:case NZ:case xZ:case PZ:case OZ:case RZ:case DZ:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Ql(t[c],e[c],c,t,e,n,r))return!1;return!0}case vZ:return t.byteLength!==e.byteLength?!1:bu(new Uint8Array(t),new Uint8Array(e),n,r);case _Z:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:bu(new Uint8Array(t),new Uint8Array(e),n,r);case EZ:return t.name===e.name&&t.message===e.message;case km:{if(!(bu(t.constructor,e.constructor,n,r)||pC(t)&&pC(e)))return!1;const c=[...Object.keys(t),...dC(t)],l=[...Object.keys(e),...dC(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],f=t[d];if(!Object.hasOwn(e,d))return!1;const h=e[d];if(!Ql(f,h,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function UZ(t,e){return kZ(t,e,$Z)}var LZ=Object.defineProperty,gC=Object.getOwnPropertySymbols,MZ=Object.prototype.hasOwnProperty,BZ=Object.prototype.propertyIsEnumerable,D0=(t,e,n)=>e in t?LZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mC=(t,e)=>{for(var n in e||(e={}))MZ.call(e,n)&&D0(t,n,e[n]);if(gC)for(var n of gC(e))BZ.call(e,n)&&D0(t,n,e[n]);return t},Qn=(t,e,n)=>D0(t,typeof e!="symbol"?e+"":e,n);class Va extends mB{constructor(e,n,r,s=Xs,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Qn(this,"map",new Map),Qn(this,"version",jK),Qn(this,"cached",[]),Qn(this,"initialized",!1),Qn(this,"getKey"),Qn(this,"storagePrefix",Xs),Qn(this,"recentlyDeleted",[]),Qn(this,"recentlyDeletedLimit",200),Qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!bn(o)?this.map.set(this.getKey(o),o):CV(o)?this.map.set(o.id,o):AV(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Qn(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Qn(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Qn(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>UZ(a[c],o[c]))):this.values)),Qn(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=mC(mC({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Qn(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ln(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var FZ=Object.defineProperty,jZ=(t,e,n)=>e in t?FZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ye=(t,e,n)=>jZ(t,typeof e!="symbol"?e+"":e,n);class HZ{constructor(e,n){this.core=e,this.logger=n,Ye(this,"name",zK),Ye(this,"version",VK),Ye(this,"events",new ub),Ye(this,"pairings"),Ye(this,"initialized",!1),Ye(this,"storagePrefix",Xs),Ye(this,"ignoredPayloadTypes",[Ni]),Ye(this,"registeredMethods",[]),Ye(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ye(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ye(this,"create",async r=>{this.isInitialized();const s=C0(),i=await this.core.crypto.setSymKey(s),o=Jt(me.FIVE_MINUTES),a={protocol:pP},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=D_({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(ia.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Ye(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[$s.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=R_(r.uri);s.props.properties.topic=i,s.addTrace($s.pairing_uri_validation_success),s.addTrace($s.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace($s.existing_pairing),u.active)throw s.setError(yi.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace($s.pairing_not_expired)}const d=c||Jt(me.FIVE_MINUTES),f={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,f),s.addTrace($s.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(ia.create,f),s.addTrace($s.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace($s.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(yi.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(h){throw s.setError(yi.subscribe_pairing_topic_failure),h}return s.addTrace($s.subscribe_pairing_topic_success),f}),Ye(this,"activate",async({topic:r})=>{this.isInitialized();const s=Jt(me.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ye(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=na();this.events.once(ft("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Ye(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ye(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ye(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ye(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",$t("USER_DISCONNECTED")),await this.deletePairing(s))}),Ye(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return D_({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ye(this,"sendRequest",async(r,s,i)=>{const o=wo(s,i),a=await this.core.crypto.encode(r,o),c=Bl[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Ye(this,"sendResult",async(r,s,i)=>{const o=sg(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Bl[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ye(this,"sendError",async(r,s,i)=>{const o=ig(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Bl[c]?Bl[c].res:Bl.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ye(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,$t("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ye(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>oo(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ye(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ye(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ye(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(ia.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ye(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Ls(s)?this.events.emit(ft("pairing_ping",i),{}):Lr(s)&&this.events.emit(ft("pairing_ping",i),{error:s.error})},500)}),Ye(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(ia.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ye(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=$t("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ye(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error($t("WC_METHOD_UNSUPPORTED",r))}),Ye(this,"isValidPair",(r,s)=>{var i;if(!rr(r)){const{message:a}=ge("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(yi.malformed_pairing_uri),new Error(a)}if(!_V(r.uri)){const{message:a}=ge("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(yi.malformed_pairing_uri),new Error(a)}const o=R_(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(yi.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ge("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(yi.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&me.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(yi.pairing_expired);const{message:a}=ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ye(this,"isValidPing",async r=>{if(!rr(r)){const{message:i}=ge("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ye(this,"isValidDisconnect",async r=>{if(!rr(r)){const{message:i}=ge("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ye(this,"isValidPairingTopic",async r=>{if(!Kt(r,!1)){const{message:s}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(oo(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ge("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ln(n,this.name),this.pairings=new Va(this.core,this.logger,this.name,this.storagePrefix)}get context(){return hr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ln.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==xt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);Mb(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):og(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Ur.expired,async e=>{const{topic:n}=p2(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(ia.expire,{topic:n}))})}}var WZ=Object.defineProperty,qZ=(t,e,n)=>e in t?WZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yn=(t,e,n)=>qZ(t,typeof e!="symbol"?e+"":e,n);class zZ extends fB{constructor(e,n){super(e,n),this.core=e,this.logger=n,yn(this,"records",new Map),yn(this,"events",new Jr.EventEmitter),yn(this,"name",KK),yn(this,"version",GK),yn(this,"cached",[]),yn(this,"initialized",!1),yn(this,"storagePrefix",Xs),yn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),yn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Jt(me.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ns.created,o)}),yn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Lr(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ns.updated,s))}),yn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),yn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ns.deleted,i)}}),this.persist()}),yn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),yn(this,"on",(r,s)=>{this.events.on(r,s)}),yn(this,"once",(r,s)=>{this.events.once(r,s)}),yn(this,"off",(r,s)=>{this.events.off(r,s)}),yn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ln(n,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:wo(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ns.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ns.created,e=>{const n=ns.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ns.updated,e=>{const n=ns.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ns.deleted,e=>{const n=ns.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(qa.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{me.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ns.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var VZ=Object.defineProperty,KZ=(t,e,n)=>e in t?VZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rn=(t,e,n)=>KZ(t,typeof e!="symbol"?e+"":e,n);class GZ extends wB{constructor(e,n){super(e,n),this.core=e,this.logger=n,Rn(this,"expirations",new Map),Rn(this,"events",new Jr.EventEmitter),Rn(this,"name",YK),Rn(this,"version",ZK),Rn(this,"cached",[]),Rn(this,"initialized",!1),Rn(this,"storagePrefix",Xs),Rn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Rn(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),Rn(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Ur.created,{target:i,expiration:o})}),Rn(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),Rn(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ur.deleted,{target:s,expiration:i})}}),Rn(this,"on",(r,s)=>{this.events.on(r,s)}),Rn(this,"once",(r,s)=>{this.events.once(r,s)}),Rn(this,"off",(r,s)=>{this.events.off(r,s)}),Rn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ln(n,this.name)}get context(){return hr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return oW(e);if(typeof e=="number")return aW(e);const{message:n}=ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ur.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;me.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ur.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(qa.pulse,()=>this.checkExpirations()),this.events.on(Ur.created,e=>{const n=Ur.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ur.expired,e=>{const n=Ur.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ur.deleted,e=>{const n=Ur.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var YZ=Object.defineProperty,ZZ=(t,e,n)=>e in t?YZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>ZZ(t,typeof e!="symbol"?e+"":e,n);class JZ extends bB{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Vt(this,"name",JK),Vt(this,"abortController"),Vt(this,"isDevEnv"),Vt(this,"verifyUrlV3",QK),Vt(this,"storagePrefix",Xs),Vt(this,"version",hP),Vt(this,"publicKey"),Vt(this,"fetchPromise"),Vt(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&me.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Vt(this,"register",async s=>{if(!pl()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Ri.getDocument(),u=this.startAbortTimer(me.ONE_SECOND*5),d=await new Promise((f,h)=>{const p=()=>{window.removeEventListener("message",m),l.body.removeChild(g),h("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const m=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(r0(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",m),f(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",m,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Vt(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(r0(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Vt(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(me.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Vt(this,"getVerifyUrl",s=>{let i=s||wu;return eG.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${wu}`),i=wu),i}),Vt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(me.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Vt(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Vt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Vt(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Vt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Vt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Vt(this,"validateAttestation",(s,i)=>{const o=tV(s,i.publicKey),a={hasExpired:me.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ln(n,this.name),this.abortController=new AbortController,this.isDevEnv=Cb(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return hr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),me.toMiliseconds(e))}}var XZ=Object.defineProperty,QZ=(t,e,n)=>e in t?XZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yC=(t,e,n)=>QZ(t,typeof e!="symbol"?e+"":e,n);class eJ extends vB{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,yC(this,"context",tG),yC(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${nG}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ln(n,this.context)}}var tJ=Object.defineProperty,wC=Object.getOwnPropertySymbols,nJ=Object.prototype.hasOwnProperty,rJ=Object.prototype.propertyIsEnumerable,$0=(t,e,n)=>e in t?tJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hl=(t,e)=>{for(var n in e||(e={}))nJ.call(e,n)&&$0(t,n,e[n]);if(wC)for(var n of wC(e))rJ.call(e,n)&&$0(t,n,e[n]);return t},sn=(t,e,n)=>$0(t,typeof e!="symbol"?e+"":e,n);class sJ extends EB{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,sn(this,"context",sG),sn(this,"storagePrefix",Xs),sn(this,"storageVersion",rG),sn(this,"events",new Map),sn(this,"shouldPersist",!1),sn(this,"init",async()=>{if(!Cb())try{const s={eventId:e_(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:f2(this.core.relayer.protocol,this.core.relayer.version,S0)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),sn(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=e_(),u=this.core.projectId||"",d=Date.now(),f=Hl({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,f),this.shouldPersist=!0),f}),sn(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Hl(Hl({},a),this.setMethods(a.eventId))}),sn(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),sn(this,"setEventListeners",()=>{this.core.heartbeat.on(qa.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{me.fromMiliseconds(Date.now())-me.fromMiliseconds(s.timestamp)>iG&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),sn(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),sn(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),sn(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),sn(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),sn(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Hl(Hl({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),sn(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),sn(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${oG}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${S0}${i}`,{method:"POST",body:JSON.stringify(s)})}),sn(this,"getAppDomain",()=>d2().url),this.logger=Ln(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var iJ=Object.defineProperty,bC=Object.getOwnPropertySymbols,oJ=Object.prototype.hasOwnProperty,aJ=Object.prototype.propertyIsEnumerable,k0=(t,e,n)=>e in t?iJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vC=(t,e)=>{for(var n in e||(e={}))oJ.call(e,n)&&k0(t,n,e[n]);if(bC)for(var n of bC(e))aJ.call(e,n)&&k0(t,n,e[n]);return t},St=(t,e,n)=>k0(t,typeof e!="symbol"?e+"":e,n);let cJ=class NP extends cB{constructor(e){var n;super(e),St(this,"protocol",fP),St(this,"version",hP),St(this,"name",I0),St(this,"relayUrl"),St(this,"projectId"),St(this,"customStoragePrefix"),St(this,"events",new Jr.EventEmitter),St(this,"logger"),St(this,"heartbeat"),St(this,"relayer"),St(this,"crypto"),St(this,"storage"),St(this,"history"),St(this,"expirer"),St(this,"pairing"),St(this,"verify"),St(this,"echoClient"),St(this,"linkModeSupportedApps"),St(this,"eventClient"),St(this,"initialized",!1),St(this,"logChunkController"),St(this,"on",(a,c)=>this.events.on(a,c)),St(this,"once",(a,c)=>this.events.once(a,c)),St(this,"off",(a,c)=>this.events.off(a,c)),St(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),St(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:xt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||gP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=ll({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:NK.logger,name:I0}),{logger:i,chunkLoggerController:o}=fb({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ln(i,this.name),this.heartbeat=new aM,this.crypto=new kY(this,this.logger,e==null?void 0:e.keychain),this.history=new zZ(this,this.logger),this.expirer=new GZ(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new WM(vC(vC({},xK),e==null?void 0:e.storageOptions)),this.relayer=new cZ({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new HZ(this,this.logger),this.verify=new JZ(this,this.logger,this.storage),this.echoClient=new eJ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new sJ(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new NP(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(HK,r),n}get context(){return hr(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Q_,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Q_)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&TK.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const lJ=cJ,xP="wc",PP=2,OP="client",Bb=`${xP}@${PP}:${OP}:`,Um={name:OP,logger:"error"},EC="WALLETCONNECT_DEEPLINK_CHOICE",uJ="proposal",_C="Proposal expired",dJ="session",sc=me.SEVEN_DAYS,fJ="engine",on={wc_sessionPropose:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1104},res:{ttl:me.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1106},res:{ttl:me.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:me.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1112},res:{ttl:me.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:me.ONE_DAY,prompt:!1,tag:1114},res:{ttl:me.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:me.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:me.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:me.FIVE_MINUTES,prompt:!1,tag:1119}}},Lm={min:me.FIVE_MINUTES,max:me.SEVEN_DAYS},Os={idle:"IDLE",active:"ACTIVE"},hJ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},pJ="request",gJ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],mJ="wc",yJ="auth",wJ="authKeys",bJ="pairingTopics",vJ="requests",cg=`${mJ}@${1.5}:${yJ}:`,rh=`${cg}:PUB_KEY`;var EJ=Object.defineProperty,_J=Object.defineProperties,CJ=Object.getOwnPropertyDescriptors,CC=Object.getOwnPropertySymbols,AJ=Object.prototype.hasOwnProperty,IJ=Object.prototype.propertyIsEnumerable,U0=(t,e,n)=>e in t?EJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nt=(t,e)=>{for(var n in e||(e={}))AJ.call(e,n)&&U0(t,n,e[n]);if(CC)for(var n of CC(e))IJ.call(e,n)&&U0(t,n,e[n]);return t},er=(t,e)=>_J(t,CJ(e)),ce=(t,e,n)=>U0(t,typeof e!="symbol"?e+"":e,n);class SJ extends IB{constructor(e){super(e),ce(this,"name",fJ),ce(this,"events",new ub),ce(this,"initialized",!1),ce(this,"requestQueue",{state:Os.idle,queue:[]}),ce(this,"sessionRequestQueue",{state:Os.idle,queue:[]}),ce(this,"emittedSessionRequests",new mW({limit:500})),ce(this,"requestQueueDelay",me.ONE_SECOND),ce(this,"expectedPairingMethodMap",new Map),ce(this,"recentlyDeletedMap",new Map),ce(this,"recentlyDeletedLimit",200),ce(this,"relayMessageCache",[]),ce(this,"pendingSessions",new Map),ce(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(on)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},me.toMiliseconds(this.requestQueueDelay)))}),ce(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=er(Nt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=yV(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,f=!1;try{if(u){const _=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=_.active}}catch(_){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),_}if(!u||!f){const{topic:_,uri:A}=await this.client.core.pairing.create();u=_,d=A}if(!u){const{message:_}=ge("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(_)}const h=await this.client.core.crypto.generateKeyPair(),p=on.wc_sessionPropose.req.ttl||me.FIVE_MINUTES,g=Jt(p),m=er(Nt(Nt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:pP}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Us()}),y=ft("session_connect",m.id),{reject:b,resolve:w,done:E}=na(p,_C),v=({id:_})=>{_===m.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(m.id),this.events.emit(y,{error:{message:_C,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(y,({error:_,session:A})=>{this.client.events.off("proposal_expire",v),_?b(_):A&&w(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:m,throwOnFailedPublish:!0,clientRpcId:m.id}),await this.setProposal(m.id,m),{uri:d,approval:E}}),ce(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ce(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[rs.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(Zo.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Zo.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Zo.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=n,h=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:m,optionalNamespaces:y}=h;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:rs.session_approve_started,properties:{topic:p,trace:[rs.session_approve_started,rs.session_namespaces_validation_success]}}));const w=await this.client.core.crypto.generateKeyPair(),E=g.publicKey,v=await this.client.core.crypto.generateSharedKey(w,E),_=Nt(Nt(Nt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:w,metadata:this.client.metadata},expiry:Jt(sc)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),A=xt.relay;b.addTrace(rs.subscribing_session_topic);try{await this.client.core.relayer.subscribe(v,{transportType:A})}catch(C){throw b.setError(Zo.subscribe_session_topic_failure),C}b.addTrace(rs.subscribe_session_topic_success);const N=er(Nt({},_),{topic:v,requiredNamespaces:m,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:_.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:w,transportType:xt.relay});await this.client.session.set(v,N),b.addTrace(rs.store_session);try{b.addTrace(rs.publishing_session_settle),await this.sendRequest({topic:v,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(Zo.session_settle_publish_failure),C}),b.addTrace(rs.session_settle_publish_success),b.addTrace(rs.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:w},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(Zo.session_approve_publish_failure),C}),b.addTrace(rs.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(v,$t("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(v),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(v,Jt(sc)),{topic:v,acknowledged:()=>Promise.resolve(this.client.session.get(v))}}),ce(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:on.wc_sessionPropose.reject}),await this.deleteProposal(r)}),ce(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=na(),c=Us(),l=pa().toString(),u=this.client.session.get(r).namespaces;return this.events.once(ft("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),ce(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Us(),{done:i,resolve:o,reject:a}=na();return this.events.once(ft("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Jt(sc)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ce(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=on.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===xt.relay&&await this.confirmOnlineStateOrThrow();const c=Us(),l=pa().toString(),{done:u,resolve:d,reject:f}=na(o,"Request expired. Please try again.");this.events.once(ft("session_request",c),({error:m,result:y})=>{m?f(m):d(y)});const h="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:{request:er(Nt({},s),{expiryTimestamp:Jt(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>f(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:er(Nt({},s),{expiryTimestamp:Jt(o)}),chainId:r};return await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:h,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var y;if(!((y=a.sessionConfig)!=null&&y.disableDeepLink)){const b=await dW(this.client.core.storage,EC);await cW({id:c,topic:i,wcDeepLink:b})}m()}),u()]).then(m=>m[2])}),ce(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===xt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Ls(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Lr(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),ce(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Us(),i=pa().toString(),{done:o,resolve:a,reject:c}=na();this.events.once(ft("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ce(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=pa().toString(),a=Us();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ce(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:$t("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ce(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>vV(r,n)))),ce(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ce(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?xt.link_mode:xt.relay;o===xt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:f,exp:h,nbf:p,methods:g=[],expiry:m}=n,y=[...n.resources||[]],{topic:b,uri:w}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:w}});const E=await this.client.core.crypto.generateKeyPair(),v=th(E);if(await Promise.all([this.client.auth.authKeys.set(rh,{responseTopic:v,publicKey:E}),this.client.auth.pairingTopics.set(v,{topic:v,pairingTopic:b})]),await this.client.core.relayer.subscribe(v,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:F}=Dc(a[0]);let j=Tq(F,"request",g);eh(y)&&(j=xq(j,y.pop())),y.push(j)}const _=m&&m>on.wc_sessionAuthenticate.req.ttl?m:on.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:f??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:h,nbf:p,resources:y},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:Jt(_)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:Jt(on.wc_sessionPropose.req.ttl),id:Us()},{done:x,resolve:P,reject:D}=na(_,"Request expired"),H=Us(),B=ft("session_connect",C.id),I=ft("session_request",H),S=async({error:F,session:j})=>{this.events.off(I,O),F?D(F):j&&P({session:j})},O=async F=>{var j,G,J;if(await this.deletePendingAuthRequest(H,{message:"fulfilled",code:0}),F.error){const Q=$t("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return F.error.code===Q.code?void 0:(this.events.off(B,S),D(F.error.message))}await this.deleteProposal(C.id),this.events.off(B,S);const{cacaos:oe,responder:se}=F.result,de=[],he=[];for(const Q of oe){await d_({cacao:Q,projectId:this.client.core.projectId})||(this.client.logger.error(Q,"Signature verification failed"),D($t("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:le}=Q,Oe=eh(le.resources),L=[p0(le.iss)],M=Gh(le.iss);if(Oe){const z=f_(Oe),X=h_(Oe);de.push(...z),L.push(...X)}for(const z of L)he.push(`${z}:${M}`)}const K=await this.client.core.crypto.generateSharedKey(E,se.publicKey);let ie;de.length>0&&(ie={topic:K,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:se,controller:se.publicKey,expiry:Jt(sc),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:L_([...new Set(de)],[...new Set(he)]),transportType:o},await this.client.core.relayer.subscribe(K,{transportType:o}),await this.client.session.set(K,ie),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:se.metadata}),ie=this.client.session.get(K)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(G=se.metadata.redirect)!=null&&G.linkMode&&(J=se.metadata.redirect)!=null&&J.universal&&r&&(this.client.core.addLinkModeSupportedApp(se.metadata.redirect.universal),this.client.session.update(K,{transportType:xt.link_mode})),P({auths:oe,session:ie})};this.events.once(B,S),this.events.once(I,O);let U;try{if(i){const F=wo("wc_sessionAuthenticate",A,H);this.client.core.history.set(b,F);const j=await this.client.core.crypto.encode("",F,{type:Xd,encoding:ho});U=xf(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:A,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:H}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:on.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(F){throw this.events.off(B,S),this.events.off(I,O),F}return await this.setProposal(C.id,C),await this.setAuthRequest(H,{request:er(Nt({},A),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:U??w,response:x}}),ce(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Jo.authenticated_session_approve_started]}});try{this.isInitialized()}catch(m){throw i.setError(Fl.no_internet_connection),m}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Fl.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||xt.relay;a===xt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=th(c),d={type:Ni,receiverPublicKey:c,senderPublicKey:l},f=[],h=[];for(const m of s){if(!await d_({cacao:m,projectId:this.client.core.projectId})){i.setError(Fl.invalid_cacao);const v=$t("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:v,encodeOpts:d}),new Error(v.message)}i.addTrace(Jo.cacaos_verified);const{p:y}=m,b=eh(y.resources),w=[p0(y.iss)],E=Gh(y.iss);if(b){const v=f_(b),_=h_(b);f.push(...v),w.push(..._)}for(const v of w)h.push(`${v}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Jo.create_authenticated_session_topic);let g;if((f==null?void 0:f.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Jt(sc),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:L_([...new Set(f)],[...new Set(h)]),transportType:a},i.addTrace(Jo.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(m){throw i.setError(Fl.subscribe_authenticated_session_topic_failure),m}i.addTrace(Jo.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Jo.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Jo.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(m){throw i.setError(Fl.authenticated_session_approve_publish_failure),m}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),ce(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===xt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=th(o),l={type:Ni,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:on.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),ce(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return x2(r,s)}),ce(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ce(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ce(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,$t("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(EC).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,$t("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Os.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ce(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Zo.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,$t("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ce(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Os.idle,this.client.events.emit("session_request_expire",{id:n}))}),ce(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ce(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ce(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Jt(on.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ce(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=xt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ce(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Jt(on.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),ce(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,f=wo(s,i,c);let h;const p=!!u;try{const y=p?ho:us;h=await this.client.core.crypto.encode(r,f,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(gJ.includes(s)){const y=Fs(JSON.stringify(f)),b=Fs(h);g=await this.client.core.verify.register({id:b,decryptedId:y})}const m=on[s].req;if(m.attestation=g,o&&(m.ttl=o),a&&(m.id=a),this.client.core.history.set(r,f),p){const y=xf(u,r,h);await global.Linking.openURL(y,this.client.name)}else{const y=on[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=er(Nt({},d),{correlationId:f.id}),l?(y.internal=er(Nt({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,h,y)):this.client.core.relayer.publish(r,h,y).catch(b=>this.client.logger.error(b))}return f.id}),ce(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=sg(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?ho:us;u=await this.client.core.crypto.encode(s,l,er(Nt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let f,h;try{f=await this.client.core.history.get(s,r);const p=f.request;try{h=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=xf(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,g=on[p].res;g.tvf=er(Nt({},h),{correlationId:r}),o?(g.internal=er(Nt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(m=>this.client.logger.error(m))}await this.client.core.history.resolve(l)}),ce(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=ig(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=d?ho:us;u=await this.client.core.crypto.encode(s,l,er(Nt({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),h}let f;try{f=await this.client.core.history.get(s,r)}catch(h){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),h}if(d){const h=xf(c,s,u);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,p=a||on[h].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),ce(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;oo(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{oo(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ce(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ce(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ce(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Os.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Os.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Os.idle}),ce(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ce(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ce(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ge("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ce(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ce(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(yi.proposal_listener_not_found)),this.isValidConnect(Nt({},s.params));const u=a.expiryTimestamp||Jt(on.wc_sessionPropose.req.ttl),d=Nt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const f=await this.getVerifyContext({attestationId:i,hash:Fs(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace($s.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:f})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:on.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ce(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Ls(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Lr(r)){await this.deleteProposal(i);const o=ft("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ce(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:f}=r.params,h=[...this.pendingSessions.values()].find(m=>m.sessionTopic===n);if(!h)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(h.proposalId),g=er(Nt(Nt(Nt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:h.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:h.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),f&&{sessionConfig:f}),{transportType:xt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:h.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(ft("session_connect",h.proposalId),{session:g}),this.pendingSessions.delete(h.proposalId),this.deleteProposal(h.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ce(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Ls(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(ft("session_approve",s),{})):Lr(r)&&(await this.client.session.delete(n,$t("USER_DISCONNECTED")),this.events.emit(ft("session_approve",s),{error:r.error}))}),ce(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Ml.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:$t("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Nt({topic:n},s));try{Ml.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw Ml.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ce(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ce(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=ft("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ls(r)?this.events.emit(ft("session_update",s),{}):Lr(r)&&this.events.emit(ft("session_update",s),{error:r.error})}),ce(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Jt(sc)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ce(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=ft("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ls(r)?this.events.emit(ft("session_extend",s),{}):Lr(r)&&this.events.emit(ft("session_extend",s),{error:r.error})}),ce(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ce(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=ft("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Ls(r)?this.events.emit(ft("session_ping",s),{}):Lr(r)&&this.events.emit(ft("session_ping",s),{error:r.error})},500)}),ce(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(ln.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:$t("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ce(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:f}=a;try{await this.isValidRequest(Nt({topic:o},f));const h=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Fs(JSON.stringify(wo("wc_sessionRequest",f,d))),encryptedId:l,metadata:h.peer.metadata,transportType:u}),g={id:d,topic:o,params:f,verifyContext:p};await this.setPendingSessionRequest(g),u===xt.link_mode&&(r=h.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=h.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(h){await this.sendError({id:d,topic:o,error:h}),this.client.logger.error(h)}}),ce(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=ft("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Ls(r)?this.events.emit(ft("session_request",s),{result:r.result}):Lr(r)&&this.events.emit(ft("session_request",s),{error:r.error})}),ce(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Ml.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Nt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Ml.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ce(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Ls(r)?this.events.emit(ft("session_request",s),{result:r.result}):Lr(r)&&this.events.emit(ft("session_request",s),{error:r.error})}),ce(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,f=await this.getVerifyContext({attestationId:o,hash:Fs(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),h={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:f,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:h,pairingTopic:s,transportType:c}),c===xt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:f})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),h={type:Ni,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:h,rpcOpts:on.wc_sessionAuthenticate.autoReject,appLink:f})}}),ce(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ce(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Os.idle,this.processSessionRequestQueue()},me.toMiliseconds(this.requestQueueDelay))}),ce(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=ft("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(ft("session_request",i.request.id),{error:r})})}),ce(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Os.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ce(this,"emitSessionRequest",n=>{if(this.emittedSessionRequests.has(n.id)){this.client.logger.warn({id:n.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${n.id}`);return}this.sessionRequestQueue.state=Os.active,this.emittedSessionRequests.add(n.id),this.client.events.emit("session_request",n)}),ce(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:wo("wc_sessionPropose",er(Nt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),ce(this,"isValidConnect",async n=>{if(!rr(n)){const{message:l}=ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(bn(r)||await this.isValidPairingTopic(r),!RV(c)){const{message:l}=ge("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!bn(s)&&Vs(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!bn(i)&&Vs(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),bn(o)||this.validateSessionProps(o,"sessionProperties"),!bn(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ce(this,"validateNamespaces",(n,r)=>{const s=OV(n,"connect()",r);if(s)throw new Error(s.message)}),ce(this,"isValidApprove",async n=>{if(!rr(n))throw new Error(ge("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=xm(s,"approve()");if(l)throw new Error(l.message);const u=F_(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Kt(i,!0)){const{message:d}=ge("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(bn(o)||this.validateSessionProps(o,"sessionProperties"),!bn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(f=>d.has(f.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ce(this,"isValidReject",async n=>{if(!rr(n)){const{message:i}=ge("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!$V(s)){const{message:i}=ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ce(this,"isValidSessionSettleRequest",n=>{if(!rr(n)){const{message:l}=ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!oP(r)){const{message:l}=ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=IV(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=xm(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(oo(o)){const{message:l}=ge("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ce(this,"isValidUpdate",async n=>{if(!rr(n)){const{message:c}=ge("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=xm(s,"update()");if(o)throw new Error(o.message);const a=F_(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ce(this,"isValidExtend",async n=>{if(!rr(n)){const{message:s}=ge("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ce(this,"isValidRequest",async n=>{if(!rr(n)){const{message:c}=ge("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!B_(a,i)){const{message:c}=ge("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!kV(s)){const{message:c}=ge("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!MV(a,i,s.method)){const{message:c}=ge("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!HV(o,Lm)){const{message:c}=ge("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${Lm.min} and ${Lm.max}`);throw new Error(c)}}),ce(this,"isValidRespond",async n=>{var r;if(!rr(n)){const{message:o}=ge("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!UV(i)){const{message:o}=ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),ce(this,"isValidPing",async n=>{if(!rr(n)){const{message:s}=ge("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ce(this,"isValidEmit",async n=>{if(!rr(n)){const{message:a}=ge("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!B_(o,i)){const{message:a}=ge("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!LV(s)){const{message:a}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!BV(o,i,s.name)){const{message:a}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ce(this,"isValidDisconnect",async n=>{if(!rr(n)){const{message:s}=ge("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ce(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Kt(s,!1))throw new Error("uri is required parameter");if(!Kt(i,!1))throw new Error("domain is required parameter");if(!Kt(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Dc(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Dc(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ce(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||wu,validation:"UNKNOWN",origin:o.url||""}};try{if(a===xt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ce(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ge("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),ce(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ce(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ce(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ce(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,f;return!n||r!==xt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ce(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),ce(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Q1(n,"topic")||"",s=decodeURIComponent(Q1(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:xt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ce(this,"registerLinkModeListeners",async()=>{var n;if(Cb()||Bo()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ce(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),ce(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ce(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=hJ[i];if(i==="sui_signTransaction")return[dq(r.transactionBytes)];if(i==="near_signTransaction")return[a_(r)];if(i==="near_signTransactions")return r.map(c=>a_(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[rK({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return xi(r)?r.map(c=>c_(c)):[c_(r)];if(i==="cosmos_signDirect")return[hq(r)];if(typeof r=="string")return[r];const a=r[o.key];if(xi(a))return i==="solana_signAllTransactions"?a.map(c=>uq(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ln.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(rh)?this.client.auth.authKeys.get(rh):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===xt.link_mode?ho:us});Mb(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Fs(r)})):og(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ur.expired,async e=>{const{topic:n,id:r}=p2(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ge("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ge("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(ia.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ia.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Kt(e,!1)){const{message:n}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(oo(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ge("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Kt(e,!1)){const{message:n}=ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(oo(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ge("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Kt(e,!1)){const{message:n}=ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!DV(e)){const{message:n}=ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(oo(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ge("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class TJ extends Va{constructor(e,n){super(e,n,uJ,Bb),this.core=e,this.logger=n}}let NJ=class extends Va{constructor(e,n){super(e,n,dJ,Bb),this.core=e,this.logger=n}};class xJ extends Va{constructor(e,n){super(e,n,pJ,Bb,r=>r.id),this.core=e,this.logger=n}}class PJ extends Va{constructor(e,n){super(e,n,wJ,cg,()=>rh),this.core=e,this.logger=n}}class OJ extends Va{constructor(e,n){super(e,n,bJ,cg),this.core=e,this.logger=n}}class RJ extends Va{constructor(e,n){super(e,n,vJ,cg,r=>r.id),this.core=e,this.logger=n}}var DJ=Object.defineProperty,$J=(t,e,n)=>e in t?DJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mm=(t,e,n)=>$J(t,typeof e!="symbol"?e+"":e,n);class kJ{constructor(e,n){this.core=e,this.logger=n,Mm(this,"authKeys"),Mm(this,"pairingTopics"),Mm(this,"requests"),this.authKeys=new PJ(this.core,this.logger),this.pairingTopics=new OJ(this.core,this.logger),this.requests=new RJ(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var UJ=Object.defineProperty,LJ=(t,e,n)=>e in t?UJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ze=(t,e,n)=>LJ(t,typeof e!="symbol"?e+"":e,n);let MJ=class RP extends AB{constructor(e){super(e),Ze(this,"protocol",xP),Ze(this,"version",PP),Ze(this,"name",Um.name),Ze(this,"metadata"),Ze(this,"core"),Ze(this,"logger"),Ze(this,"events",new Jr.EventEmitter),Ze(this,"engine"),Ze(this,"session"),Ze(this,"proposal"),Ze(this,"pendingRequest"),Ze(this,"auth"),Ze(this,"signConfig"),Ze(this,"on",(r,s)=>this.events.on(r,s)),Ze(this,"once",(r,s)=>this.events.once(r,s)),Ze(this,"off",(r,s)=>this.events.off(r,s)),Ze(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Ze(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Ze(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Ze(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Ze(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Ze(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||Um.name,this.metadata=nW(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zd(ll({level:(e==null?void 0:e.logger)||Um.logger}));this.core=(e==null?void 0:e.core)||new lJ(e),this.logger=Ln(n,this.name),this.session=new NJ(this.core,this.logger),this.proposal=new TJ(this.core,this.logger),this.pendingRequest=new xJ(this.core,this.logger),this.engine=new SJ(this),this.auth=new kJ(this.core,this.logger)}static async init(e){const n=new RP(e);return await n.initialize(),n}get context(){return hr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Of={exports:{}},AC;function BJ(){return AC||(AC=1,function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Bs<"u"&&Bs,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Bs<"u"&&Bs||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function f(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function h(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var S={next:function(){var O=I.shift();return{done:O===void 0,value:O}}};return c.iterable&&(S[Symbol.iterator]=function(){return S}),S}function g(I){this.map={},I instanceof g?I.forEach(function(S,O){this.append(O,S)},this):Array.isArray(I)?I.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(S){this.append(S,I[S])},this)}g.prototype.append=function(I,S){I=f(I),S=h(S);var O=this.map[I];this.map[I]=O?O+", "+S:S},g.prototype.delete=function(I){delete this.map[f(I)]},g.prototype.get=function(I){return I=f(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(f(I))},g.prototype.set=function(I,S){this.map[f(I)]=h(S)},g.prototype.forEach=function(I,S){for(var O in this.map)this.map.hasOwnProperty(O)&&I.call(S,this.map[O],O,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(S,O){I.push(O)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(S){I.push(S)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(S,O){I.push([O,S])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function m(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function y(I){return new Promise(function(S,O){I.onload=function(){S(I.result)},I.onerror=function(){O(I.error)}})}function b(I){var S=new FileReader,O=y(S);return S.readAsArrayBuffer(I),O}function w(I){var S=new FileReader,O=y(S),U=/charset=([A-Za-z0-9_-]+)/.exec(I.type),F=U?U[1]:"utf-8";return S.readAsText(I,F),O}function E(I){for(var S=new Uint8Array(I),O=new Array(S.length),U=0;U<S.length;U++)O[U]=String.fromCharCode(S[U]);return O.join("")}function v(I){if(I.slice)return I.slice(0);var S=new Uint8Array(I.byteLength);return S.set(new Uint8Array(I)),S.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=v(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=v(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=m(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=m(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=m(this);if(I)return I;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(I){var S=I.toUpperCase();return A.indexOf(S)>-1?S:I}function C(I,S){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var O=S.body;if(I instanceof C){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,S.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!O&&I._bodyInit!=null&&(O=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new g(S.headers)),this.method=N(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var U=/([?&])_=[^&]*/;if(U.test(this.url))this.url=this.url.replace(U,"$1_="+new Date().getTime());else{var F=/\?/;this.url+=(F.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function x(I){var S=new FormData;return I.trim().split("&").forEach(function(O){if(O){var U=O.split("="),F=U.shift().replace(/\+/g," "),j=U.join("=").replace(/\+/g," ");S.append(decodeURIComponent(F),decodeURIComponent(j))}}),S}function P(I){var S=new g,O=I.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(U){return U.indexOf(`
`)===0?U.substr(1,U.length):U}).forEach(function(U){var F=U.split(":"),j=F.shift().trim();if(j){var G=F.join(":").trim();try{S.append(j,G)}catch(J){console.warn("Response "+J.message)}}}),S}_.call(C.prototype);function D(I,S){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new g(S.headers),this.url=S.url||"",this._initBody(I)}_.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},D.error=function(){var I=new D(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var H=[301,302,303,307,308];D.redirect=function(I,S){if(H.indexOf(S)===-1)throw new RangeError("Invalid status code");return new D(null,{status:S,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(S,O){this.message=S,this.name=O;var U=Error(S);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(I,S){return new Promise(function(O,U){var F=new C(I,S);if(F.signal&&F.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function G(){j.abort()}j.onload=function(){var se={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};F.url.indexOf("file://")===0&&(j.status<200||j.status>599)?se.status=200:se.status=j.status,se.url="responseURL"in j?j.responseURL:se.headers.get("X-Request-URL");var de="response"in j?j.response:j.responseText;setTimeout(function(){O(new D(de,se))},0)},j.onerror=function(){setTimeout(function(){U(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){U(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){U(new o.DOMException("Aborted","AbortError"))},0)};function J(se){try{return se===""&&a.location.href?a.location.href:se}catch{return se}}if(j.open(F.method,J(F.url),!0),F.credentials==="include"?j.withCredentials=!0:F.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof g||a.Headers&&S.headers instanceof a.Headers)){var oe=[];Object.getOwnPropertyNames(S.headers).forEach(function(se){oe.push(f(se)),j.setRequestHeader(se,h(S.headers[se]))}),F.headers.forEach(function(se,de){oe.indexOf(de)===-1&&j.setRequestHeader(de,se)})}else F.headers.forEach(function(se,de){j.setRequestHeader(de,se)});F.signal&&(F.signal.addEventListener("abort",G),j.onreadystatechange=function(){j.readyState===4&&F.signal.removeEventListener("abort",G)}),j.send(typeof F._bodyInit>"u"?null:F._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=C,a.Response=D),o.Headers=g,o.Request=C,o.Response=D,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(Of,Of.exports)),Of.exports}var FJ=BJ();const IC=rl(FJ);var jJ=Object.defineProperty,HJ=Object.defineProperties,WJ=Object.getOwnPropertyDescriptors,SC=Object.getOwnPropertySymbols,qJ=Object.prototype.hasOwnProperty,zJ=Object.prototype.propertyIsEnumerable,TC=(t,e,n)=>e in t?jJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NC=(t,e)=>{for(var n in e||(e={}))qJ.call(e,n)&&TC(t,n,e[n]);if(SC)for(var n of SC(e))zJ.call(e,n)&&TC(t,n,e[n]);return t},xC=(t,e)=>HJ(t,WJ(e));const VJ={Accept:"application/json","Content-Type":"application/json"},KJ="POST",PC={headers:VJ,method:KJ},OC=10;let Cs=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Jr.EventEmitter,this.isAvailable=!1,this.registering=!1,!K_(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Oi(e),r=await(await IC(this.url,xC(NC({},PC),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!K_(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Oi({id:1,jsonrpc:"2.0",method:"test",params:[]});await IC(e,xC(NC({},PC),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Oa(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=ig(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return lP(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>OC&&this.events.setMaxListeners(OC)}};const RC="error",GJ="wss://relay.walletconnect.org",YJ="wc",ZJ="universal_provider",Rf=`${YJ}@2:${ZJ}:`,DP="https://rpc.walletconnect.org/v1/",vc="generic",JJ=`${DP}bundler`,Qr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function Fb(t){return t==null||typeof t!="object"&&typeof t!="function"}function $P(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function kP(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const XJ="[object RegExp]",UP="[object String]",LP="[object Number]",MP="[object Boolean]",BP="[object Arguments]",QJ="[object Symbol]",eX="[object Date]",tX="[object Map]",nX="[object Set]",rX="[object Array]",sX="[object ArrayBuffer]",iX="[object Object]",oX="[object DataView]",aX="[object Uint8Array]",cX="[object Uint8ClampedArray]",lX="[object Uint16Array]",uX="[object Uint32Array]",dX="[object Int8Array]",fX="[object Int16Array]",hX="[object Int32Array]",pX="[object Float32Array]",gX="[object Float64Array]";function jb(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mX(t,e){return Tc(t,void 0,t,new Map,e)}function Tc(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(Fb(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Tc(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Tc(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Tc(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(jb(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Tc(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),oa(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),oa(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),oa(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,oa(o,t,n,r,s),o}if(typeof t=="object"&&yX(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),oa(o,t,n,r,s),o}return t}function oa(t,e,n=t,r,s){const i=[...Object.keys(e),...$P(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Tc(e[a],a,n,r,s))}}function yX(t){switch(kP(t)){case BP:case rX:case sX:case oX:case MP:case eX:case pX:case gX:case dX:case fX:case hX:case tX:case LP:case iX:case XJ:case nX:case UP:case QJ:case aX:case cX:case lX:case uX:return!0;default:return!1}}function wX(t,e){return mX(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case LP:case UP:case MP:{const o=new t.constructor(t==null?void 0:t.valueOf());return oa(o,t),o}case BP:{const o={};return oa(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function DC(t){return wX(t)}function $C(t){return t!==null&&typeof t=="object"&&kP(t)==="[object Arguments]"}function kC(t){return typeof t=="object"&&t!==null}function bX(){}function vX(t){return jb(t)}function EX(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function _X(t){if(Fb(t))return t;if(Array.isArray(t)||jb(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function CX(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=L0(s,o,r,new Map)}return s}function L0(t,e,n,r){if(Fb(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return _X(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...$P(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if($C(a)&&(a={...a}),$C(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=DC(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let f=0;f<d.length;f++){const h=d[f];u[h]=c[h]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||kC(c)&&kC(a)?t[o]=L0(c,a,n,r):c==null&&EX(a)?t[o]=L0({},a,n,r):c==null&&vX(a)?t[o]=DC(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function AX(t,...e){return CX(t,...e,bX)}var IX=Object.defineProperty,SX=Object.defineProperties,TX=Object.getOwnPropertyDescriptors,UC=Object.getOwnPropertySymbols,NX=Object.prototype.hasOwnProperty,xX=Object.prototype.propertyIsEnumerable,LC=(t,e,n)=>e in t?IX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Df=(t,e)=>{for(var n in e||(e={}))NX.call(e,n)&&LC(t,n,e[n]);if(UC)for(var n of UC(e))xX.call(e,n)&&LC(t,n,e[n]);return t},PX=(t,e)=>SX(t,TX(e));function Sr(t,e,n){var r;const s=Dc(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${DP}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Ka(t){return t.includes(":")?t.split(":")[1]:t}function FP(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function OX(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function MC(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>{var r,s;return((r=n==null?void 0:n.chains)==null?void 0:r.length)&&((s=n==null?void 0:n.chains)==null?void 0:s.length)>0}))}function $f(t={},e={}){const n=MC(BC(t)),r=MC(BC(e));return AX(n,r)}function BC(t){var e,n,r,s,i;const o={};if(!Vs(t))return o;for(const[a,c]of Object.entries(t)){const l=rg(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],f=c.rpcMap||{},h=Sc(a);o[h]=PX(Df(Df({},o[h]),c),{chains:zs(l,(e=o[h])==null?void 0:e.chains),methods:zs(u,(n=o[h])==null?void 0:n.methods),events:zs(d,(r=o[h])==null?void 0:r.events)}),(Vs(f)||Vs(((s=o[h])==null?void 0:s.rpcMap)||{}))&&(o[h].rpcMap=Df(Df({},f),(i=o[h])==null?void 0:i.rpcMap))}return o}function FC(t){return t.includes(":")?t.split(":")[2]:t}function jC(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=rg(n)?[n]:r.chains?r.chains:FP(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function Bm(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const jP={},ct=t=>jP[t],Fm=(t,e)=>{jP[t]=e};var RX=Object.defineProperty,HC=Object.getOwnPropertySymbols,DX=Object.prototype.hasOwnProperty,$X=Object.prototype.propertyIsEnumerable,WC=(t,e,n)=>e in t?RX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qC=(t,e)=>{for(var n in e||(e={}))DX.call(e,n)&&WC(t,n,e[n]);if(HC)for(var n of HC(e))$X.call(e,n)&&WC(t,n,e[n]);return t};const zC="eip155",kX=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],UX=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,jm=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,VC=t=>Object.keys(t).filter(e=>kX.includes(e)).reduce((e,n)=>(e[n]=t[n],e),{}),LX=(t,e,n)=>{const{sessionProperties:r={},scopedProperties:s={}}=t,i={};if(!Vs(s)&&!Vs(r))return;const o=VC(r);for(const a of n){const c=UX(a);if(!c)continue;i[jm(c)]=o;const l=s==null?void 0:s[`${zC}:${c}`];if(l){const u=l==null?void 0:l[`${zC}:${c}:${e}`];i[jm(c)]=qC(qC({},i[jm(c)]),VC(u||l))}}for(const[a,c]of Object.entries(i))Object.keys(c).length===0&&delete i[a];return Object.keys(i).length>0?i:void 0};var MX=Object.defineProperty,BX=(t,e,n)=>e in t?MX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ic=(t,e,n)=>BX(t,typeof e!="symbol"?e+"":e,n);class FX{constructor(e){ic(this,"name","polkadot"),ic(this,"client"),ic(this,"httpProviders"),ic(this,"events"),ic(this,"namespace"),ic(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ka(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var jX=Object.defineProperty,HX=Object.defineProperties,WX=Object.getOwnPropertyDescriptors,KC=Object.getOwnPropertySymbols,qX=Object.prototype.hasOwnProperty,zX=Object.prototype.propertyIsEnumerable,M0=(t,e,n)=>e in t?jX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GC=(t,e)=>{for(var n in e||(e={}))qX.call(e,n)&&M0(t,n,e[n]);if(KC)for(var n of KC(e))zX.call(e,n)&&M0(t,n,e[n]);return t},YC=(t,e)=>HX(t,WX(e)),oc=(t,e,n)=>M0(t,typeof e!="symbol"?e+"":e,n);class VX{constructor(e){oc(this,"name","eip155"),oc(this,"client"),oc(this,"chainId"),oc(this,"namespace"),oc(this,"httpProviders"),oc(this,"events"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Sr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Ka(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const l=this.client.session.get(e.topic),u=((o=l==null?void 0:l.sessionProperties)==null?void 0:o.capabilities)||{},d=`${a}${c.join(",")}`,f=u==null?void 0:u[d];if(f)return f;let h;try{h=LX(l,a,c)}catch(g){console.warn("Failed to extract capabilities from session",g)}if(h)return h;const p=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:YC(GC({},l.sessionProperties||{}),{capabilities:YC(GC({},u||{}),{[d]:p})})})}catch(g){console.warn("Failed to update session with capabilities",g)}return p}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(wo("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${JJ}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var KX=Object.defineProperty,GX=(t,e,n)=>e in t?KX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ac=(t,e,n)=>GX(t,typeof e!="symbol"?e+"":e,n);class YX{constructor(e){ac(this,"name","solana"),ac(this,"client"),ac(this,"httpProviders"),ac(this,"events"),ac(this,"namespace"),ac(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ka(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var ZX=Object.defineProperty,JX=(t,e,n)=>e in t?ZX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cc=(t,e,n)=>JX(t,typeof e!="symbol"?e+"":e,n);class XX{constructor(e){cc(this,"name","cosmos"),cc(this,"client"),cc(this,"httpProviders"),cc(this,"events"),cc(this,"namespace"),cc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ka(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var QX=Object.defineProperty,eQ=(t,e,n)=>e in t?QX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lc=(t,e,n)=>eQ(t,typeof e!="symbol"?e+"":e,n);class tQ{constructor(e){lc(this,"name","algorand"),lc(this,"client"),lc(this,"httpProviders"),lc(this,"events"),lc(this,"namespace"),lc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Sr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Xr(new Cs(r,ct("disableProviderPing")))}}var nQ=Object.defineProperty,rQ=(t,e,n)=>e in t?nQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uc=(t,e,n)=>rQ(t,typeof e!="symbol"?e+"":e,n);class sQ{constructor(e){uc(this,"name","cip34"),uc(this,"client"),uc(this,"httpProviders"),uc(this,"events"),uc(this,"namespace"),uc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Ka(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var iQ=Object.defineProperty,oQ=(t,e,n)=>e in t?iQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dc=(t,e,n)=>oQ(t,typeof e!="symbol"?e+"":e,n);class aQ{constructor(e){dc(this,"name","elrond"),dc(this,"client"),dc(this,"httpProviders"),dc(this,"events"),dc(this,"namespace"),dc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ka(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var cQ=Object.defineProperty,lQ=(t,e,n)=>e in t?cQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fc=(t,e,n)=>lQ(t,typeof e!="symbol"?e+"":e,n);class uQ{constructor(e){fc(this,"name","multiversx"),fc(this,"client"),fc(this,"httpProviders"),fc(this,"events"),fc(this,"namespace"),fc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Ka(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var dQ=Object.defineProperty,fQ=(t,e,n)=>e in t?dQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hc=(t,e,n)=>fQ(t,typeof e!="symbol"?e+"":e,n);class hQ{constructor(e){hc(this,"name","near"),hc(this,"client"),hc(this,"httpProviders"),hc(this,"events"),hc(this,"namespace"),hc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Sr(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace);return typeof r>"u"?void 0:new Xr(new Cs(r,ct("disableProviderPing")))}}var pQ=Object.defineProperty,gQ=(t,e,n)=>e in t?pQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pc=(t,e,n)=>gQ(t,typeof e!="symbol"?e+"":e,n);class mQ{constructor(e){pc(this,"name","tezos"),pc(this,"client"),pc(this,"httpProviders"),pc(this,"events"),pc(this,"namespace"),pc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Sr(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace);return typeof r>"u"?void 0:new Xr(new Cs(r))}}var yQ=Object.defineProperty,wQ=(t,e,n)=>e in t?yQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gc=(t,e,n)=>wQ(t,typeof e!="symbol"?e+"":e,n);class bQ{constructor(e){gc(this,"name",vc),gc(this,"client"),gc(this,"httpProviders"),gc(this,"events"),gc(this,"namespace"),gc(this,"chainId"),this.namespace=e.namespace,this.events=ct("events"),this.client=ct("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Qr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Dc(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Sr(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xr(new Cs(r,ct("disableProviderPing")))}}var vQ=Object.defineProperty,EQ=Object.defineProperties,_Q=Object.getOwnPropertyDescriptors,ZC=Object.getOwnPropertySymbols,CQ=Object.prototype.hasOwnProperty,AQ=Object.prototype.propertyIsEnumerable,B0=(t,e,n)=>e in t?vQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kf=(t,e)=>{for(var n in e||(e={}))CQ.call(e,n)&&B0(t,n,e[n]);if(ZC)for(var n of ZC(e))AQ.call(e,n)&&B0(t,n,e[n]);return t},Hm=(t,e)=>EQ(t,_Q(e)),$r=(t,e,n)=>B0(t,typeof e!="symbol"?e+"":e,n);class Hb{constructor(e){$r(this,"client"),$r(this,"namespaces"),$r(this,"optionalNamespaces"),$r(this,"sessionProperties"),$r(this,"scopedProperties"),$r(this,"events",new ub),$r(this,"rpcProviders",{}),$r(this,"session"),$r(this,"providerOpts"),$r(this,"logger"),$r(this,"uri"),$r(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zd(ll({level:(e==null?void 0:e.logger)||RC})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new Hb(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:kf({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,sg(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$t("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=jC(this.session.namespaces);this.namespaces=$f(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=jC(s.namespaces);return this.namespaces=$f(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===vc?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(xi(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await MJ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||RC,relayUrl:this.providerOpts.relayUrl||GJ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Sc(n)))];Fm("client",this.client),Fm("events",this.events),Fm("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=OX(n,this.session);if((r==null?void 0:r.length)===0)return;const s=FP(r),i=$f(this.namespaces,this.optionalNamespaces),o=Hm(kf({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new VX({namespace:o});break;case"algorand":this.rpcProviders[n]=new tQ({namespace:o});break;case"solana":this.rpcProviders[n]=new YX({namespace:o});break;case"cosmos":this.rpcProviders[n]=new XX({namespace:o});break;case"polkadot":this.rpcProviders[n]=new FX({namespace:o});break;case"cip34":this.rpcProviders[n]=new sQ({namespace:o});break;case"elrond":this.rpcProviders[n]=new aQ({namespace:o});break;case"multiversx":this.rpcProviders[n]=new uQ({namespace:o});break;case"near":this.rpcProviders[n]=new hQ({namespace:o});break;case"tezos":this.rpcProviders[n]=new mQ({namespace:o});break;default:this.rpcProviders[vc]?this.rpcProviders[vc].updateNamespace(o):this.rpcProviders[vc]=new bQ({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&xi(o)&&this.events.emit("accountsChanged",o.map(FC))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Sc(o),l=Bm(o)!==Bm(a)?`${c}:${Bm(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=Hm(kf({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Hm(kf({},$t("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Qr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vc]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=$f(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Sc(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Sc(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(FC);if(!xi(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Rf}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Rf}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Rf}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Rf)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}}let Xo=null;const Br={getSIWX(){return re.state.siwx},async initializeIfEnabled(t=R.getActiveCaipAddress()){var i,o,a;const e=re.state.siwx;if(!(e&&t))return;const[n,r,s]=t.split(":");if(R.checkIfSupportedNetwork(n,`${n}:${r}`))try{if((i=re.state.remoteFeatures)!=null&&i.emailCapture){const l=(o=R.getAccountData(n))==null?void 0:o.user;await et.open({view:"DataCapture",data:{email:(l==null?void 0:l.email)??void 0}});return}if(Xo&&await Xo,(await e.getSessions(`${n}:${r}`,s)).length)return;await et.open({view:"SIWXSignMessage"})}catch(c){console.error("SIWXUtil:initializeIfEnabled",c),yt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((a=ye._getClient())==null?void 0:a.disconnect().catch(console.error)),Fe.reset("Connect"),Hs.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=re.state.siwx,e=Ie.getPlainAddress(R.getActiveCaipAddress()),n=mo(),r=ye._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();pe.getConnectorId(n.chainNamespace)===V.CONNECTOR_ID.AUTH&&Fe.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),R.setLastConnectedSIWECaipNetwork(n),et.close(),yt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!et.state.open||Fe.state.view==="ApproveTransaction")&&await et.open({view:"SIWXSignMessage"}),Hs.showError("Error signing message"),yt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=R.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,Ie.getPlainAddress(R.getActiveCaipAddress())||""));s&&s.length>0?await R.switchActiveNetwork(r):await ye.disconnect()}else await ye.disconnect()}else et.close();et.close(),yt.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=R.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Ie.getPlainAddress(R.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(t){const e=re.state.siwx;let n=t==null?void 0:t.address;if(!n){const s=R.getActiveCaipAddress();n=Ie.getPlainAddress(s)}let r=t==null?void 0:t.caipNetworkId;if(!r){const s=R.getActiveCaipNetwork();r=s==null?void 0:s.caipNetworkId}return e&&n&&r?e.getSessions(r,n):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Fe.state.view==="ApproveTransaction",r=Fe.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var u;const i=Br.getSIWX();if(!i||!s.includes(V.CHAIN.EVM)||(u=re.state.remoteFeatures)!=null&&u.emailCapture){const d=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:d.address,chainId:d.chainId,accounts:d.accounts}}const o=`${s}:${e}`,a=await i.createMessage({chainId:o,accountAddress:"<<AccountAddress>>"}),c={accountAddress:a.accountAddress,chainId:a.chainId,domain:a.domain,uri:a.uri,version:a.version,nonce:a.nonce,notBefore:a.notBefore,statement:a.statement,resources:a.resources,requestId:a.requestId,issuedAt:a.issuedAt,expirationTime:a.expirationTime,serializedMessage:a.toString()},l=await t.connect({chainId:e,socialUri:n,siwxMessage:c,preferredAccountType:r});return c.accountAddress=l.address,c.serializedMessage=l.message||"",l.signature&&l.message&&await Br.addEmbeddedWalletSession(c,l.message,l.signature),{address:l.address,chainId:l.chainId,accounts:l.accounts}},async addEmbeddedWalletSession(t,e,n){if(Xo)return Xo;const r=Br.getSIWX();return r?(Xo=r.addSession({data:t,message:e,signature:n}).finally(()=>{Xo=null}),Xo):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var c,l,u;const r=Br.getSIWX(),s=mo(),i=new Set(e.map(d=>d.split(":")[0]));if(!r||i.size!==1||!i.has("eip155"))return!1;const o=await r.createMessage({chainId:((c=mo())==null?void 0:c.caipNetworkId)||"",accountAddress:""}),a=await t.authenticate({nonce:o.nonce,domain:o.domain,uri:o.uri,exp:o.expirationTime,iat:o.issuedAt,nbf:o.notBefore,requestId:o.requestId,version:o.version,resources:o.resources,statement:o.statement,chainId:o.chainId,methods:n,chains:[o.chainId,...e.filter(d=>d!==o.chainId)]});if(Hs.showLoading("Authenticating...",{autoClose:!1}),xe.setConnectedWalletInfo({...a.session.peer.metadata,name:a.session.peer.metadata.name,icon:(l=a.session.peer.metadata.icons)==null?void 0:l[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(u=a==null?void 0:a.auths)!=null&&u.length){const d=a.auths.map(f=>{const h=t.client.formatAuthMessage({request:f.p,iss:f.p.iss});return{data:{...f.p,accountAddress:f.p.iss.split(":").slice(-1).join(""),chainId:f.p.iss.split(":").slice(2,4).join(":"),uri:f.p.aud,version:f.p.version||o.version,expirationTime:f.p.exp,issuedAt:f.p.iat,notBefore:f.p.nbf},message:h,signature:f.s.s,cacao:f}});try{await r.setSessions(d),s&&R.setLastConnectedSIWECaipNetwork(s),yt.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Br.getSIWXEventProperties()})}catch(f){throw console.error("SIWX:universalProviderAuth - failed to set sessions",f),yt.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Br.getSIWXEventProperties()}),await t.disconnect().catch(console.error),f}finally{Hs.hide()}}return!0},getSIWXEventProperties(){var e;const t=R.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=R.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Ir(t)===nn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Ot={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:V.CHAIN.EVM,ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},br={ConnectorExplorerIds:{[V.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[V.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[V.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[V.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[V.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Ot.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Ot.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Ot.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Ot.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Ot.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Ot.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Ot.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Ot.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Ot.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Ot.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Ot.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[V.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[V.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[V.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[V.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[V.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[V.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[V.CONNECTOR_ID.INJECTED]:"Browser Wallet",[V.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[V.CONNECTOR_ID.COINBASE]:"Coinbase",[V.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[V.CONNECTOR_ID.LEDGER]:"Ledger",[V.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[V.CONNECTOR_ID.INJECTED]:"INJECTED",[V.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[V.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[V.CONNECTOR_ID.AUTH]:"AUTH",[Ot.CONNECTOR_TYPE_AUTH]:"AUTH"}},vn={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ot.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=R.state.activeChain;return V.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>pe.getConnectorId(e)===V.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},IQ=new AbortController,kt={EmbeddedWalletAbortController:IQ,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"ORIGIN_NOT_ALLOWED"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{code:"APKT001",displayMessage:"Network Not Found",debugMessage:"The specified network is not recognized. Please ensure it is included in the `networks` array of your `createAppKit` configuration."},ORIGIN_NOT_ALLOWED:{code:"APKT002",displayMessage:"Invalid App Configuration",debugMessage:()=>`The origin ${Ic()?window.origin:"unknown"} is not in your allow list. Please update your allowed domains at https://dashboard.reown.com.`},IFRAME_LOAD_FAILED:{code:"APKT003",displayMessage:"Network Error: Wallet Load Failed",debugMessage:()=>"Failed to load the embedded wallet. This may be due to network issues or server downtime. Please check your network connection and try again shortly. Contact support if the issue persists."},IFRAME_REQUEST_TIMEOUT:{code:"APKT004",displayMessage:"Wallet Request Timeout",debugMessage:()=>"The request to the embedded wallet timed out. Please check your network connection and try again shortly. Contact support if the issue persists."},UNVERIFIED_DOMAIN:{code:"APKT005",displayMessage:"Unverified Domain",debugMessage:()=>"Embedded wallet load failed. Ensure your domain is verified in https://dashboard.reown.com."},JWT_TOKEN_NOT_VALID:{code:"APKT006",displayMessage:"Session Expired",debugMessage:"Your session is invalid or expired. Please check your system’s date and time settings, then reconnect."},INVALID_PROJECT_ID:{code:"APKT007",displayMessage:"Invalid Project ID",debugMessage:"The specified project ID is invalid. Please visit https://dashboard.reown.com to obtain a valid project ID."},PROJECT_ID_NOT_CONFIGURED:{code:"APKT008",displayMessage:"Project ID Missing",debugMessage:"No project ID is configured. You can create and configure a project ID at https://dashboard.reown.com."},SERVER_ERROR_APP_CONFIGURATION:{code:"APKT009",displayMessage:"Server Error",debugMessage:t=>`Unable to fetch App Configuration. ${t}. Please check your network connection and try again shortly. Contact support if the issue persists.`},RATE_LIMITED_APP_CONFIGURATION:{code:"APKT010",displayMessage:"Rate Limited",debugMessage:"You have been rate limited while retrieving App Configuration. Please wait a few minutes and try again. Contact support if the issue persists."}},ALERT_WARNINGS:{LOCAL_CONFIGURATION_IGNORED:{debugMessage:t=>`[Reown Config Notice] ${t}`}}},SQ={createLogger(t,e="error"){const n=ll({level:e}),{logger:r}=fb({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},TQ="rpc.walletconnect.org";function JC(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const Wm=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],js={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===TQ}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:V.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${V.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return Wm.includes(e)?JC(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var f,h,p,g,m,y,b;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(p=(h=(f=t.rpcUrls)==null?void 0:f.default)==null?void 0:h.http)==null?void 0:p[0],a=this.getDefaultRpcUrl(t,i,n),c=((y=(m=(g=t==null?void 0:t.rpcUrls)==null?void 0:g.chainDefault)==null?void 0:m.http)==null?void 0:y[0])||o,l=((b=r==null?void 0:r[i])==null?void 0:b.map(w=>w.url))||[],u=[...l,...a?[a]:[]],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:br.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>js.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Yl(a.url,a.config))}),Wm.includes(t.caipNetworkId)&&r.push(Yl(JC(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Yl(a))}),WE(r)},extendWagmiTransports(t,e,n){if(Wm.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return WE([n,Yl(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:V.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=ae.getActiveCaipNetworkId(),n=R.getAllRequestedCaipNetworks(),r=Array.from(((c=R.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},Qh={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0},tr=It({providers:{...Qh},providerIds:{...Qh}}),vt={state:tr,subscribeKey(t,e){return Cn(tr,t,e)},subscribe(t){return _n(tr,()=>{t(tr)})},subscribeProviders(t){return _n(tr.providers,()=>t(tr.providers))},setProvider(t,e){t&&e&&(tr.providers[t]=Aa(e))},getProvider(t){if(t)return tr.providers[t]},setProviderId(t,e){e&&(tr.providerIds[t]=e)},getProviderId(t){if(t)return tr.providerIds[t]},reset(){tr.providers={...Qh},tr.providerIds={...Qh}},resetChain(t){tr.providers[t]=void 0,tr.providerIds[t]=void 0}},XC={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},wn={set(t,e){vr.isClient&&localStorage.setItem(`${Te.STORAGE_KEY}${t}`,e)},get(t){return vr.isClient?localStorage.getItem(`${Te.STORAGE_KEY}${t}`):null},delete(t,e){vr.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Te.STORAGE_KEY}${t}`))}},Uf=30*1e3,vr={checkIfAllowedToTriggerEmail(){const t=wn.get(Te.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Uf){const n=Math.ceil((Uf-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=wn.get(Te.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<Uf)return Math.ceil((Uf-e)/1e3)}return 0},checkIfRequestExists(t){return nn.NOT_SAFE_RPC_METHODS.includes(t.method)||nn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(XC.transactionHash))||(t==null?void 0:t.match(XC.signedMessage)))?Te.RPC_RESPONSE_TYPE_TX:Te.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return nn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var at;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(at||(at={}));var F0;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(F0||(F0={}));const Ee=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),po=t=>{switch(typeof t){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return isNaN(t)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(t)?Ee.array:t===null?Ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ee.promise:typeof Map<"u"&&t instanceof Map?Ee.map:typeof Set<"u"&&t instanceof Set?Ee.set:typeof Date<"u"&&t instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},fe=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),NQ=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class gs extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}gs.create=t=>new gs(t);const ud=(t,e)=>{let n;switch(t.code){case fe.invalid_type:t.received===Ee.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,at.jsonStringifyReplacer)}`;break;case fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${at.joinValues(t.keys,", ")}`;break;case fe.invalid_union:n="Invalid input";break;case fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${at.joinValues(t.options)}`;break;case fe.invalid_enum_value:n=`Invalid enum value. Expected ${at.joinValues(t.options)}, received '${t.received}'`;break;case fe.invalid_arguments:n="Invalid function arguments";break;case fe.invalid_return_type:n="Invalid function return type";break;case fe.invalid_date:n="Invalid date";break;case fe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:at.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case fe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case fe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case fe.custom:n="Invalid input";break;case fe.invalid_intersection_types:n="Intersection results could not be merged";break;case fe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case fe.not_finite:n="Number must be finite";break;default:n=e.defaultError,at.assertNever(t)}return{message:n}};let HP=ud;function xQ(t){HP=t}function ep(){return HP}const tp=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},PQ=[];function Ae(t,e){const n=tp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ep(),ud].filter(r=>!!r)});t.common.issues.push(n)}class Un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return He;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Un.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return He;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const He=Object.freeze({status:"aborted"}),WP=t=>({status:"dirty",value:t}),Gn=t=>({status:"valid",value:t}),j0=t=>t.status==="aborted",H0=t=>t.status==="dirty",dd=t=>t.status==="valid",np=t=>typeof Promise<"u"&&t instanceof Promise;var Ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Ue||(Ue={}));class Qs{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const QC=(t,e)=>{if(dd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new gs(t.common.issues);return this._error=n,this._error}}};function qe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ve{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return po(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:po(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Un,ctx:{common:e.parent.common,data:e.data,parsedType:po(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(np(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:po(e)},i=this._parseSync({data:e,path:s.path,parent:s});return QC(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:po(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(np(s)?s:Promise.resolve(s));return QC(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:fe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new bs({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Pi.create(this,this._def)}nullable(){return Ua.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ms.create(this,this._def)}promise(){return Zc.create(this,this._def)}or(e){return gd.create([this,e],this._def)}and(e){return md.create(this,e,this._def)}transform(e){return new bs({...qe(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ed({...qe(this._def),innerType:this,defaultValue:n,typeName:Be.ZodDefault})}brand(){return new zP({typeName:Be.ZodBranded,type:this,...qe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new op({...qe(this._def),innerType:this,catchValue:n,typeName:Be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return ef.create(this,e)}readonly(){return cp.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OQ=/^c[^\s-]{8,}$/i,RQ=/^[a-z][a-z0-9]*$/,DQ=/^[0-9A-HJKMNP-TV-Z]{26}$/,$Q=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,UQ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let qm;const LQ=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,MQ=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,BQ=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function FQ(t,e){return!!((e==="v4"||!e)&&LQ.test(t)||(e==="v6"||!e)&&MQ.test(t))}class ds extends Ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ee.string){const i=this._getOrReturnCtx(e);return Ae(i,{code:fe.invalid_type,expected:Ee.string,received:i.parsedType}),He}const r=new Un;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ae(s,{code:fe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ae(s,{code:fe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")kQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"email",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")qm||(qm=new RegExp(UQ,"u")),qm.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"emoji",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")$Q.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"uuid",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")OQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"cuid",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")RQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"cuid2",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")DQ.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"ulid",code:fe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ae(s,{validation:"url",code:fe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"regex",code:fe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?BQ(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?FQ(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"ip",code:fe.invalid_string,message:i.message}),r.dirty()):at.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:fe.invalid_string,...Ue.errToObj(r)})}_addCheck(e){return new ds({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ue.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Ue.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ue.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Ue.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ue.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ue.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ue.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ue.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ue.errToObj(n)})}nonempty(e){return this.min(1,Ue.errToObj(e))}trim(){return new ds({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ds({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ds({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ds.create=t=>{var e;return new ds({checks:[],typeName:Be.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};function jQ(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Do extends Ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ee.number){const i=this._getOrReturnCtx(e);return Ae(i,{code:fe.invalid_type,expected:Ee.number,received:i.parsedType}),He}let r;const s=new Un;for(const i of this._def.checks)i.kind==="int"?at.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?jQ(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.not_finite,message:i.message}),s.dirty()):at.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ue.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ue.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ue.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ue.toString(n))}setLimit(e,n,r,s){return new Do({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ue.toString(s)}]})}_addCheck(e){return new Do({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ue.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ue.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Do.create=t=>new Do({checks:[],typeName:Be.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class $o extends Ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ee.bigint){const i=this._getOrReturnCtx(e);return Ae(i,{code:fe.invalid_type,expected:Ee.bigint,received:i.parsedType}),He}let r;const s=new Un;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ae(r,{code:fe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):at.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ue.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ue.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ue.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ue.toString(n))}setLimit(e,n,r,s){return new $o({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ue.toString(s)}]})}_addCheck(e){return new $o({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ue.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ue.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$o.create=t=>{var e;return new $o({checks:[],typeName:Be.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...qe(t)})};class fd extends Ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ee.boolean){const r=this._getOrReturnCtx(e);return Ae(r,{code:fe.invalid_type,expected:Ee.boolean,received:r.parsedType}),He}return Gn(e.data)}}fd.create=t=>new fd({typeName:Be.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...qe(t)});class $a extends Ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ee.date){const i=this._getOrReturnCtx(e);return Ae(i,{code:fe.invalid_type,expected:Ee.date,received:i.parsedType}),He}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ae(i,{code:fe.invalid_date}),He}const r=new Un;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:fe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):at.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ue.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ue.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}$a.create=t=>new $a({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Be.ZodDate,...qe(t)});class rp extends Ve{_parse(e){if(this._getType(e)!==Ee.symbol){const r=this._getOrReturnCtx(e);return Ae(r,{code:fe.invalid_type,expected:Ee.symbol,received:r.parsedType}),He}return Gn(e.data)}}rp.create=t=>new rp({typeName:Be.ZodSymbol,...qe(t)});class hd extends Ve{_parse(e){if(this._getType(e)!==Ee.undefined){const r=this._getOrReturnCtx(e);return Ae(r,{code:fe.invalid_type,expected:Ee.undefined,received:r.parsedType}),He}return Gn(e.data)}}hd.create=t=>new hd({typeName:Be.ZodUndefined,...qe(t)});class pd extends Ve{_parse(e){if(this._getType(e)!==Ee.null){const r=this._getOrReturnCtx(e);return Ae(r,{code:fe.invalid_type,expected:Ee.null,received:r.parsedType}),He}return Gn(e.data)}}pd.create=t=>new pd({typeName:Be.ZodNull,...qe(t)});class Yc extends Ve{constructor(){super(...arguments),this._any=!0}_parse(e){return Gn(e.data)}}Yc.create=t=>new Yc({typeName:Be.ZodAny,...qe(t)});class wa extends Ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Gn(e.data)}}wa.create=t=>new wa({typeName:Be.ZodUnknown,...qe(t)});class $i extends Ve{_parse(e){const n=this._getOrReturnCtx(e);return Ae(n,{code:fe.invalid_type,expected:Ee.never,received:n.parsedType}),He}}$i.create=t=>new $i({typeName:Be.ZodNever,...qe(t)});class sp extends Ve{_parse(e){if(this._getType(e)!==Ee.undefined){const r=this._getOrReturnCtx(e);return Ae(r,{code:fe.invalid_type,expected:Ee.void,received:r.parsedType}),He}return Gn(e.data)}}sp.create=t=>new sp({typeName:Be.ZodVoid,...qe(t)});class ms extends Ve{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ee.array)return Ae(n,{code:fe.invalid_type,expected:Ee.array,received:n.parsedType}),He;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ae(n,{code:o?fe.too_big:fe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ae(n,{code:fe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ae(n,{code:fe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Qs(n,o,n.path,a)))).then(o=>Un.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Qs(n,o,n.path,a)));return Un.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ms({...this._def,minLength:{value:e,message:Ue.toString(n)}})}max(e,n){return new ms({...this._def,maxLength:{value:e,message:Ue.toString(n)}})}length(e,n){return new ms({...this._def,exactLength:{value:e,message:Ue.toString(n)}})}nonempty(e){return this.min(1,e)}}ms.create=(t,e)=>new ms({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...qe(e)});function Ec(t){if(t instanceof Bt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Pi.create(Ec(r))}return new Bt({...t._def,shape:()=>e})}else return t instanceof ms?new ms({...t._def,type:Ec(t.element)}):t instanceof Pi?Pi.create(Ec(t.unwrap())):t instanceof Ua?Ua.create(Ec(t.unwrap())):t instanceof ei?ei.create(t.items.map(e=>Ec(e))):t}class Bt extends Ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=at.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ee.object){const l=this._getOrReturnCtx(e);return Ae(l,{code:fe.invalid_type,expected:Ee.object,received:l.parsedType}),He}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof $i&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Qs(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof $i){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ae(s,{code:fe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Qs(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Un.mergeObjectSync(r,l)):Un.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Ue.errToObj,new Bt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Ue.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Bt({...this._def,unknownKeys:"strip"})}passthrough(){return new Bt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Bt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Bt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Bt({...this._def,catchall:e})}pick(e){const n={};return at.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Bt({...this._def,shape:()=>n})}omit(e){const n={};return at.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Bt({...this._def,shape:()=>n})}deepPartial(){return Ec(this)}partial(e){const n={};return at.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Bt({...this._def,shape:()=>n})}required(e){const n={};return at.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Pi;)i=i._def.innerType;n[r]=i}}),new Bt({...this._def,shape:()=>n})}keyof(){return qP(at.objectKeys(this.shape))}}Bt.create=(t,e)=>new Bt({shape:()=>t,unknownKeys:"strip",catchall:$i.create(),typeName:Be.ZodObject,...qe(e)});Bt.strictCreate=(t,e)=>new Bt({shape:()=>t,unknownKeys:"strict",catchall:$i.create(),typeName:Be.ZodObject,...qe(e)});Bt.lazycreate=(t,e)=>new Bt({shape:t,unknownKeys:"strip",catchall:$i.create(),typeName:Be.ZodObject,...qe(e)});class gd extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new gs(a.ctx.common.issues));return Ae(n,{code:fe.invalid_union,unionErrors:o}),He}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new gs(c));return Ae(n,{code:fe.invalid_union,unionErrors:a}),He}}get options(){return this._def.options}}gd.create=(t,e)=>new gd({options:t,typeName:Be.ZodUnion,...qe(e)});const sh=t=>t instanceof wd?sh(t.schema):t instanceof bs?sh(t.innerType()):t instanceof bd?[t.value]:t instanceof ko?t.options:t instanceof vd?Object.keys(t.enum):t instanceof Ed?sh(t._def.innerType):t instanceof hd?[void 0]:t instanceof pd?[null]:null;class lg extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.object)return Ae(n,{code:fe.invalid_type,expected:Ee.object,received:n.parsedType}),He;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ae(n,{code:fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),He)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=sh(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new lg({typeName:Be.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...qe(r)})}}function W0(t,e){const n=po(t),r=po(e);if(t===e)return{valid:!0,data:t};if(n===Ee.object&&r===Ee.object){const s=at.objectKeys(e),i=at.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=W0(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ee.array&&r===Ee.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=W0(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ee.date&&r===Ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class md extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(j0(i)||j0(o))return He;const a=W0(i.value,o.value);return a.valid?((H0(i)||H0(o))&&n.dirty(),{status:n.value,value:a.data}):(Ae(r,{code:fe.invalid_intersection_types}),He)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}md.create=(t,e,n)=>new md({left:t,right:e,typeName:Be.ZodIntersection,...qe(n)});class ei extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.array)return Ae(r,{code:fe.invalid_type,expected:Ee.array,received:r.parsedType}),He;if(r.data.length<this._def.items.length)return Ae(r,{code:fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&r.data.length>this._def.items.length&&(Ae(r,{code:fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Qs(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Un.mergeArray(n,o)):Un.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ei({...this._def,rest:e})}}ei.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ei({items:t,typeName:Be.ZodTuple,rest:null,...qe(e)})};class yd extends Ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.object)return Ae(r,{code:fe.invalid_type,expected:Ee.object,received:r.parsedType}),He;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Qs(r,a,r.path,a)),value:o._parse(new Qs(r,r.data[a],r.path,a))});return r.common.async?Un.mergeObjectAsync(n,s):Un.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ve?new yd({keyType:e,valueType:n,typeName:Be.ZodRecord,...qe(r)}):new yd({keyType:ds.create(),valueType:e,typeName:Be.ZodRecord,...qe(n)})}}class ip extends Ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.map)return Ae(r,{code:fe.invalid_type,expected:Ee.map,received:r.parsedType}),He;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Qs(r,a,r.path,[l,"key"])),value:i._parse(new Qs(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return He;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return He;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}ip.create=(t,e,n)=>new ip({valueType:e,keyType:t,typeName:Be.ZodMap,...qe(n)});class ka extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ee.set)return Ae(r,{code:fe.invalid_type,expected:Ee.set,received:r.parsedType}),He;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ae(r,{code:fe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ae(r,{code:fe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return He;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Qs(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new ka({...this._def,minSize:{value:e,message:Ue.toString(n)}})}max(e,n){return new ka({...this._def,maxSize:{value:e,message:Ue.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ka.create=(t,e)=>new ka({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...qe(e)});class $c extends Ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.function)return Ae(n,{code:fe.invalid_type,expected:Ee.function,received:n.parsedType}),He;function r(a,c){return tp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ep(),ud].filter(l=>!!l),issueData:{code:fe.invalid_arguments,argumentsError:c}})}function s(a,c){return tp({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ep(),ud].filter(l=>!!l),issueData:{code:fe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Zc){const a=this;return Gn(async function(...c){const l=new gs([]),u=await a._def.args.parseAsync(c,i).catch(h=>{throw l.addIssue(r(c,h)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(h=>{throw l.addIssue(s(d,h)),l})})}else{const a=this;return Gn(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new gs([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new gs([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $c({...this._def,args:ei.create(e).rest(wa.create())})}returns(e){return new $c({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new $c({args:e||ei.create([]).rest(wa.create()),returns:n||wa.create(),typeName:Be.ZodFunction,...qe(r)})}}class wd extends Ve{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}wd.create=(t,e)=>new wd({getter:t,typeName:Be.ZodLazy,...qe(e)});class bd extends Ve{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ae(n,{received:n.data,code:fe.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}bd.create=(t,e)=>new bd({value:t,typeName:Be.ZodLiteral,...qe(e)});function qP(t,e){return new ko({values:t,typeName:Be.ZodEnum,...qe(e)})}class ko extends Ve{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ae(n,{expected:at.joinValues(r),received:n.parsedType,code:fe.invalid_type}),He}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ae(n,{received:n.data,code:fe.invalid_enum_value,options:r}),He}return Gn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return ko.create(e)}exclude(e){return ko.create(this.options.filter(n=>!e.includes(n)))}}ko.create=qP;class vd extends Ve{_parse(e){const n=at.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ee.string&&r.parsedType!==Ee.number){const s=at.objectValues(n);return Ae(r,{expected:at.joinValues(s),received:r.parsedType,code:fe.invalid_type}),He}if(n.indexOf(e.data)===-1){const s=at.objectValues(n);return Ae(r,{received:r.data,code:fe.invalid_enum_value,options:s}),He}return Gn(e.data)}get enum(){return this._def.values}}vd.create=(t,e)=>new vd({values:t,typeName:Be.ZodNativeEnum,...qe(e)});class Zc extends Ve{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ee.promise&&n.common.async===!1)return Ae(n,{code:fe.invalid_type,expected:Ee.promise,received:n.parsedType}),He;const r=n.parsedType===Ee.promise?n.data:Promise.resolve(n.data);return Gn(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zc.create=(t,e)=>new Zc({type:t,typeName:Be.ZodPromise,...qe(e)});class bs extends Ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ae(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?He:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?He:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!dd(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>dd(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);at.assertNever(s)}}bs.create=(t,e,n)=>new bs({schema:t,typeName:Be.ZodEffects,effect:e,...qe(n)});bs.createWithPreprocess=(t,e,n)=>new bs({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...qe(n)});class Pi extends Ve{_parse(e){return this._getType(e)===Ee.undefined?Gn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pi.create=(t,e)=>new Pi({innerType:t,typeName:Be.ZodOptional,...qe(e)});class Ua extends Ve{_parse(e){return this._getType(e)===Ee.null?Gn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ua.create=(t,e)=>new Ua({innerType:t,typeName:Be.ZodNullable,...qe(e)});class Ed extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ee.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ed.create=(t,e)=>new Ed({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...qe(e)});class op extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return np(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new gs(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new gs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}op.create=(t,e)=>new op({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...qe(e)});class ap extends Ve{_parse(e){if(this._getType(e)!==Ee.nan){const r=this._getOrReturnCtx(e);return Ae(r,{code:fe.invalid_type,expected:Ee.nan,received:r.parsedType}),He}return{status:"valid",value:e.data}}}ap.create=t=>new ap({typeName:Be.ZodNaN,...qe(t)});const HQ=Symbol("zod_brand");class zP extends Ve{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ef extends Ve{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?He:i.status==="dirty"?(n.dirty(),WP(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?He:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new ef({in:e,out:n,typeName:Be.ZodPipeline})}}class cp extends Ve{_parse(e){const n=this._def.innerType._parse(e);return dd(n)&&(n.value=Object.freeze(n.value)),n}}cp.create=(t,e)=>new cp({innerType:t,typeName:Be.ZodReadonly,...qe(e)});const VP=(t,e={},n)=>t?Yc.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Yc.create(),WQ={object:Bt.lazycreate};var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const qQ=(t,e={message:`Input not instance of ${t.name}`})=>VP(n=>n instanceof t,e),KP=ds.create,GP=Do.create,zQ=ap.create,VQ=$o.create,YP=fd.create,KQ=$a.create,GQ=rp.create,YQ=hd.create,ZQ=pd.create,JQ=Yc.create,XQ=wa.create,QQ=$i.create,eee=sp.create,tee=ms.create,nee=Bt.create,ree=Bt.strictCreate,see=gd.create,iee=lg.create,oee=md.create,aee=ei.create,cee=yd.create,lee=ip.create,uee=ka.create,dee=$c.create,fee=wd.create,hee=bd.create,pee=ko.create,gee=vd.create,mee=Zc.create,eA=bs.create,yee=Pi.create,wee=Ua.create,bee=bs.createWithPreprocess,vee=ef.create,Eee=()=>KP().optional(),_ee=()=>GP().optional(),Cee=()=>YP().optional(),Aee={string:t=>ds.create({...t,coerce:!0}),number:t=>Do.create({...t,coerce:!0}),boolean:t=>fd.create({...t,coerce:!0}),bigint:t=>$o.create({...t,coerce:!0}),date:t=>$a.create({...t,coerce:!0})},Iee=He;var T=Object.freeze({__proto__:null,defaultErrorMap:ud,setErrorMap:xQ,getErrorMap:ep,makeIssue:tp,EMPTY_PATH:PQ,addIssueToContext:Ae,ParseStatus:Un,INVALID:He,DIRTY:WP,OK:Gn,isAborted:j0,isDirty:H0,isValid:dd,isAsync:np,get util(){return at},get objectUtil(){return F0},ZodParsedType:Ee,getParsedType:po,ZodType:Ve,ZodString:ds,ZodNumber:Do,ZodBigInt:$o,ZodBoolean:fd,ZodDate:$a,ZodSymbol:rp,ZodUndefined:hd,ZodNull:pd,ZodAny:Yc,ZodUnknown:wa,ZodNever:$i,ZodVoid:sp,ZodArray:ms,ZodObject:Bt,ZodUnion:gd,ZodDiscriminatedUnion:lg,ZodIntersection:md,ZodTuple:ei,ZodRecord:yd,ZodMap:ip,ZodSet:ka,ZodFunction:$c,ZodLazy:wd,ZodLiteral:bd,ZodEnum:ko,ZodNativeEnum:vd,ZodPromise:Zc,ZodEffects:bs,ZodTransformer:bs,ZodOptional:Pi,ZodNullable:Ua,ZodDefault:Ed,ZodCatch:op,ZodNaN:ap,BRAND:HQ,ZodBranded:zP,ZodPipeline:ef,ZodReadonly:cp,custom:VP,Schema:Ve,ZodSchema:Ve,late:WQ,get ZodFirstPartyTypeKind(){return Be},coerce:Aee,any:JQ,array:tee,bigint:VQ,boolean:YP,date:KQ,discriminatedUnion:iee,effect:eA,enum:pee,function:dee,instanceof:qQ,intersection:oee,lazy:fee,literal:hee,map:lee,nan:zQ,nativeEnum:gee,never:QQ,null:ZQ,nullable:wee,number:GP,object:nee,oboolean:Cee,onumber:_ee,optional:yee,ostring:Eee,pipeline:vee,preprocess:bee,promise:mee,record:cee,set:uee,strictObject:ree,string:KP,symbol:GQ,transformer:eA,tuple:aee,undefined:YQ,union:see,unknown:XQ,void:eee,NEVER:Iee,ZodIssueCode:fe,quotelessJson:NQ,ZodError:gs});const Ht=T.object({message:T.string()});function _e(t){return T.literal(Te[t])}const ug=T.object({serializedMessage:T.string().optional(),accountAddress:T.string(),chainId:T.string(),notBefore:T.string().optional(),domain:T.string(),uri:T.string(),version:T.string(),nonce:T.string(),statement:T.string().optional(),resources:T.array(T.string()).optional(),requestId:T.string().optional(),issuedAt:T.string().optional(),expirationTime:T.string().optional()});T.object({accessList:T.array(T.string()),blockHash:T.string().nullable(),blockNumber:T.string().nullable(),chainId:T.string().or(T.number()),from:T.string(),gas:T.string(),hash:T.string(),input:T.string().nullable(),maxFeePerGas:T.string(),maxPriorityFeePerGas:T.string(),nonce:T.string(),r:T.string(),s:T.string(),to:T.string(),transactionIndex:T.string().nullable(),type:T.string(),v:T.string(),value:T.string()});const See=T.object({chainId:T.string().or(T.number()),rpcUrl:T.optional(T.string())}),Tee=T.object({email:T.string().email()}),Nee=T.object({otp:T.string()}),xee=T.object({uri:T.string(),preferredAccountType:T.optional(T.string()),chainId:T.optional(T.string().or(T.number())),siwxMessage:T.optional(ug),rpcUrl:T.optional(T.string())}),Pee=T.object({chainId:T.optional(T.string().or(T.number())),preferredAccountType:T.optional(T.string()),socialUri:T.optional(T.string()),siwxMessage:T.optional(ug),rpcUrl:T.optional(T.string())}),Oee=T.object({provider:T.enum(["google","github","apple","facebook","x","discord"])}),Ree=T.object({email:T.string().email()}),Dee=T.object({otp:T.string()}),$ee=T.object({otp:T.string()}),kee=T.object({themeMode:T.optional(T.enum(["light","dark"])),themeVariables:T.optional(T.record(T.string(),T.string().or(T.number()))),w3mThemeVariables:T.optional(T.record(T.string(),T.string()))}),Uee=T.object({metadata:T.object({name:T.string(),description:T.string(),url:T.string(),icons:T.array(T.string())}).optional(),sdkVersion:T.string().optional(),sdkType:T.string().optional(),projectId:T.string()}),Lee=T.object({type:T.string()}),Mee=T.object({action:T.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),Bee=T.object({url:T.string()}),Fee=T.object({userName:T.string()}),jee=T.object({email:T.string().optional().nullable(),address:T.string(),chainId:T.string().or(T.number()),accounts:T.array(T.object({address:T.string(),type:T.enum([nn.ACCOUNT_TYPES.EOA,nn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:T.string().optional().nullable(),preferredAccountType:T.optional(T.string()),signature:T.string().optional(),message:T.string().optional(),siwxMessage:T.optional(ug)}),Hee=T.object({action:T.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Wee=T.object({email:T.string().email().optional().nullable(),address:T.string(),chainId:T.string().or(T.number()),smartAccountDeployed:T.optional(T.boolean()),accounts:T.array(T.object({address:T.string(),type:T.enum([nn.ACCOUNT_TYPES.EOA,nn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:T.optional(T.string()),signature:T.string().optional(),message:T.string().optional(),siwxMessage:T.optional(ug)}),qee=T.object({uri:T.string()}),zee=T.object({isConnected:T.boolean()}),Vee=T.object({chainId:T.string().or(T.number())}),Kee=T.object({chainId:T.string().or(T.number())}),Gee=T.object({newEmail:T.string().email()}),Yee=T.object({smartAccountEnabledNetworks:T.array(T.number())});T.object({address:T.string(),isDeployed:T.boolean()});const Zee=T.object({version:T.string().optional()}),Jee=T.object({type:T.string(),address:T.string()}),Xee=T.any(),Qee=T.object({method:T.literal("eth_accounts")}),ete=T.object({method:T.literal("eth_blockNumber")}),tte=T.object({method:T.literal("eth_call"),params:T.array(T.any())}),nte=T.object({method:T.literal("eth_chainId")}),rte=T.object({method:T.literal("eth_estimateGas"),params:T.array(T.any())}),ste=T.object({method:T.literal("eth_feeHistory"),params:T.array(T.any())}),ite=T.object({method:T.literal("eth_gasPrice")}),ote=T.object({method:T.literal("eth_getAccount"),params:T.array(T.any())}),ate=T.object({method:T.literal("eth_getBalance"),params:T.array(T.any())}),cte=T.object({method:T.literal("eth_getBlockByHash"),params:T.array(T.any())}),lte=T.object({method:T.literal("eth_getBlockByNumber"),params:T.array(T.any())}),ute=T.object({method:T.literal("eth_getBlockReceipts"),params:T.array(T.any())}),dte=T.object({method:T.literal("eth_getBlockTransactionCountByHash"),params:T.array(T.any())}),fte=T.object({method:T.literal("eth_getBlockTransactionCountByNumber"),params:T.array(T.any())}),hte=T.object({method:T.literal("eth_getCode"),params:T.array(T.any())}),pte=T.object({method:T.literal("eth_getFilterChanges"),params:T.array(T.any())}),gte=T.object({method:T.literal("eth_getFilterLogs"),params:T.array(T.any())}),mte=T.object({method:T.literal("eth_getLogs"),params:T.array(T.any())}),yte=T.object({method:T.literal("eth_getProof"),params:T.array(T.any())}),wte=T.object({method:T.literal("eth_getStorageAt"),params:T.array(T.any())}),bte=T.object({method:T.literal("eth_getTransactionByBlockHashAndIndex"),params:T.array(T.any())}),vte=T.object({method:T.literal("eth_getTransactionByBlockNumberAndIndex"),params:T.array(T.any())}),Ete=T.object({method:T.literal("eth_getTransactionByHash"),params:T.array(T.any())}),_te=T.object({method:T.literal("eth_getTransactionCount"),params:T.array(T.any())}),Cte=T.object({method:T.literal("eth_getTransactionReceipt"),params:T.array(T.any())}),Ate=T.object({method:T.literal("eth_getUncleCountByBlockHash"),params:T.array(T.any())}),Ite=T.object({method:T.literal("eth_getUncleCountByBlockNumber"),params:T.array(T.any())}),Ste=T.object({method:T.literal("eth_maxPriorityFeePerGas")}),Tte=T.object({method:T.literal("eth_newBlockFilter")}),Nte=T.object({method:T.literal("eth_newFilter"),params:T.array(T.any())}),xte=T.object({method:T.literal("eth_newPendingTransactionFilter")}),Pte=T.object({method:T.literal("eth_sendRawTransaction"),params:T.array(T.any())}),Ote=T.object({method:T.literal("eth_syncing"),params:T.array(T.any())}),Rte=T.object({method:T.literal("eth_uninstallFilter"),params:T.array(T.any())}),tA=T.object({method:T.literal("personal_sign"),params:T.array(T.any())}),Dte=T.object({method:T.literal("eth_signTypedData_v4"),params:T.array(T.any())}),$te=T.object({method:T.literal("eth_sendTransaction"),params:T.array(T.any())}),kte=T.object({method:T.literal("solana_signMessage"),params:T.object({message:T.string(),pubkey:T.string()})}),Ute=T.object({method:T.literal("solana_signTransaction"),params:T.object({transaction:T.string()})}),Lte=T.object({method:T.literal("solana_signAllTransactions"),params:T.object({transactions:T.array(T.string())})}),Mte=T.object({method:T.literal("solana_signAndSendTransaction"),params:T.object({transaction:T.string(),options:T.object({skipPreflight:T.boolean().optional(),preflightCommitment:T.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:T.number().optional(),minContextSlot:T.number().optional()}).optional()})}),Bte=T.object({method:T.literal("wallet_sendCalls"),params:T.array(T.object({chainId:T.string().or(T.number()).optional(),from:T.string().optional(),version:T.string().optional(),capabilities:T.any().optional(),calls:T.array(T.object({to:T.string().startsWith("0x"),data:T.string().startsWith("0x").optional(),value:T.string().optional()}))}))}),Fte=T.object({method:T.literal("wallet_getCallsStatus"),params:T.array(T.string())}),jte=T.object({method:T.literal("wallet_getCapabilities"),params:T.array(T.string().or(T.number()).optional()).optional()}),Hte=T.object({method:T.literal("wallet_grantPermissions"),params:T.array(T.any())}),Wte=T.object({method:T.literal("wallet_revokePermissions"),params:T.any()}),qte=T.object({method:T.literal("wallet_getAssets"),params:T.any()}),nA=T.object({token:T.string()}),Ce=T.object({id:T.string().optional()}),zm={appEvent:Ce.extend({type:_e("APP_SWITCH_NETWORK"),payload:See}).or(Ce.extend({type:_e("APP_CONNECT_EMAIL"),payload:Tee})).or(Ce.extend({type:_e("APP_CONNECT_DEVICE")})).or(Ce.extend({type:_e("APP_CONNECT_OTP"),payload:Nee})).or(Ce.extend({type:_e("APP_CONNECT_SOCIAL"),payload:xee})).or(Ce.extend({type:_e("APP_GET_FARCASTER_URI")})).or(Ce.extend({type:_e("APP_CONNECT_FARCASTER")})).or(Ce.extend({type:_e("APP_GET_USER"),payload:T.optional(Pee)})).or(Ce.extend({type:_e("APP_GET_SOCIAL_REDIRECT_URI"),payload:Oee})).or(Ce.extend({type:_e("APP_SIGN_OUT")})).or(Ce.extend({type:_e("APP_IS_CONNECTED"),payload:T.optional(nA)})).or(Ce.extend({type:_e("APP_GET_CHAIN_ID")})).or(Ce.extend({type:_e("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Ce.extend({type:_e("APP_INIT_SMART_ACCOUNT")})).or(Ce.extend({type:_e("APP_SET_PREFERRED_ACCOUNT"),payload:Lee})).or(Ce.extend({type:_e("APP_RPC_REQUEST"),payload:tA.or(qte).or(Qee).or(ete).or(tte).or(nte).or(rte).or(ste).or(ite).or(ote).or(ate).or(cte).or(lte).or(ute).or(dte).or(fte).or(hte).or(pte).or(gte).or(mte).or(yte).or(wte).or(bte).or(vte).or(Ete).or(_te).or(Cte).or(Ate).or(Ite).or(Ste).or(Tte).or(Nte).or(xte).or(Pte).or(Ote).or(Rte).or(tA).or(Dte).or($te).or(kte).or(Ute).or(Lte).or(Mte).or(Fte).or(Bte).or(jte).or(Hte).or(Wte).and(T.object({chainId:T.string().or(T.number()).optional(),chainNamespace:T.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:T.string().optional()}))})).or(Ce.extend({type:_e("APP_UPDATE_EMAIL"),payload:Ree})).or(Ce.extend({type:_e("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Dee})).or(Ce.extend({type:_e("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:$ee})).or(Ce.extend({type:_e("APP_SYNC_THEME"),payload:kee})).or(Ce.extend({type:_e("APP_SYNC_DAPP_DATA"),payload:Uee})).or(Ce.extend({type:_e("APP_RELOAD")})).or(Ce.extend({type:_e("APP_RPC_ABORT")})),frameEvent:Ce.extend({type:_e("FRAME_SWITCH_NETWORK_ERROR"),payload:Ht}).or(Ce.extend({type:_e("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Kee})).or(Ce.extend({type:_e("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Mee})).or(Ce.extend({type:_e("FRAME_CONNECT_EMAIL_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:Bee})).or(Ce.extend({type:_e("FRAME_GET_FARCASTER_URI_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:Fee})).or(Ce.extend({type:_e("FRAME_CONNECT_FARCASTER_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_CONNECT_OTP_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_CONNECT_OTP_SUCCESS")})).or(Ce.extend({type:_e("FRAME_CONNECT_DEVICE_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Ce.extend({type:_e("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:jee})).or(Ce.extend({type:_e("FRAME_CONNECT_SOCIAL_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_GET_USER_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_GET_USER_SUCCESS"),payload:Wee})).or(Ce.extend({type:_e("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:qee})).or(Ce.extend({type:_e("FRAME_SIGN_OUT_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_SIGN_OUT_SUCCESS")})).or(Ce.extend({type:_e("FRAME_IS_CONNECTED_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_IS_CONNECTED_SUCCESS"),payload:zee})).or(Ce.extend({type:_e("FRAME_GET_CHAIN_ID_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Vee})).or(Ce.extend({type:_e("FRAME_RPC_REQUEST_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_RPC_REQUEST_SUCCESS"),payload:Xee})).or(Ce.extend({type:_e("FRAME_SESSION_UPDATE"),payload:nA})).or(Ce.extend({type:_e("FRAME_UPDATE_EMAIL_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Hee})).or(Ce.extend({type:_e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Ce.extend({type:_e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Gee})).or(Ce.extend({type:_e("FRAME_SYNC_THEME_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_SYNC_THEME_SUCCESS")})).or(Ce.extend({type:_e("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Ce.extend({type:_e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Yee})).or(Ce.extend({type:_e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Jee})).or(Ce.extend({type:_e("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_READY"),payload:Zee})).or(Ce.extend({type:_e("FRAME_RELOAD_ERROR"),payload:Ht})).or(Ce.extend({type:_e("FRAME_RELOAD_SUCCESS")}))};function Vm(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function zte({projectId:t,chainId:e,enableLogger:n,rpcUrl:r=V.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){const i=new URL(A$);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",S$),i.searchParams.set("enableLogger",String(n)),i.searchParams.set("rpcUrl",r),s&&i.searchParams.set("enableCloudAuthAccount","true"),i.toString()}class Vte{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:i=!1,rpcUrl:o=V.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const a=document.getElementById("w3m-iframe");this.iframe&&!a&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(a,c,l)=>{function u({data:d}){var h;if(!Vm(Te.FRAME_EVENT_KEY,d))return;const f=zm.frameEvent.safeParse(d);if(!f.success){console.warn("W3mFrame: invalid frame event",f.error.message);return}((h=f.data)==null?void 0:h.id)===a&&(c(f.data),window.removeEventListener("message",u))}vr.isClient&&(window.addEventListener("message",u),l.addEventListener("abort",()=>{window.removeEventListener("message",u)}))},onFrameEvent:a=>{vr.isClient&&window.addEventListener("message",({data:c})=>{if(!Vm(Te.FRAME_EVENT_KEY,c))return;const l=zm.frameEvent.safeParse(c);l.success?a(l.data):console.warn("W3mFrame: invalid frame event",l.error.message)})},onAppEvent:a=>{vr.isClient&&window.addEventListener("message",({data:c})=>{if(!Vm(Te.APP_EVENT_KEY,c))return;const l=zm.appEvent.safeParse(c);l.success||console.warn("W3mFrame: invalid app event",l.error.message),a(c)})},postAppEvent:a=>{var c;if(vr.isClient){if(!((c=this.iframe)!=null&&c.contentWindow))throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(a,"*")}},postFrameEvent:a=>{if(vr.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(a,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),this.rpcUrl=o,n&&(this.frameLoadPromise=new Promise((a,c)=>{this.frameLoadPromiseResolver={resolve:a,reject:c}}),vr.isClient)){const a=document.createElement("iframe");a.id="w3m-iframe",a.src=zte({projectId:e,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:i}),a.name="w3m-secure-iframe",a.style.position="fixed",a.style.zIndex="999999",a.style.display="none",a.style.border="none",a.style.animationDelay="0s, 50ms",a.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",a.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=a,this.iframe.onerror=()=>{var c;(c=this.frameLoadPromiseResolver)==null||c.reject("Unable to load email login dependency")},this.events.onFrameEvent(c=>{var l;c.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(l=this.frameLoadPromiseResolver)==null||l.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Kte{constructor(e){var i;const n=ll({level:I$}),{logger:r,chunkLoggerController:s}=fb({opts:n});this.logger=Ln(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Gte{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:c}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Kte(e)),this.abortController=i,this.getActiveCaipNetwork=o,this.getCaipNetworks=a;const l=this.getRpcUrl(n);this.w3mFrame=new Vte({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:l,enableCloudAuthAccount:c}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Te.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!wn.get(Te.EMAIL_LOGIN_USED_KEY)}getEmail(){return wn.get(Te.EMAIL)}getUsername(){return wn.get(Te.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Te.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{vr.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Te.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Te.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Te.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Te.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Te.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Te.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Te.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Te.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Te.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Te.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Te.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Te.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Te.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Te.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Te.APP_GET_USER,payload:{...e,chainId:r,rpcUrl:this.getRpcUrl(r)}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Te.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Te.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Te.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Te.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Te.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(nn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Te.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Te.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Te.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Te.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Te.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Te.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Te.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Te.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:nn.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{nn.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Te.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Te.APP_SYNC_DAPP_DATA,Te.APP_SYNC_THEME,Te.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Te.APP_CONNECT_EMAIL,Te.APP_CONNECT_DEVICE,Te.APP_CONNECT_OTP,Te.APP_CONNECT_SOCIAL,Te.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var h,p,g;const u=Math.random().toString(36).substring(7);(g=(h=this.w3mLogger)==null?void 0:(p=h.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const m=e;this.openRpcRequests=[...this.openRpcRequests,{...m.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function f(m,y){var b,w,E;m.id===u&&((w=y==null?void 0:(b=y.logger).info)==null||w.call(b,{framEvent:m,id:u},"Received frame response"),m.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&c(m.payload),c(void 0)):m.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in m&&l(new Error(((E=m.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,m=>f(m,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){wn.set(Te.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){wn.set(Te.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&wn.set(Te.EMAIL,e),wn.set(Te.EMAIL_LOGIN_USED_KEY,"true"),wn.delete(Te.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){wn.delete(Te.EMAIL_LOGIN_USED_KEY),wn.delete(Te.EMAIL),wn.delete(Te.LAST_USED_CHAIN_KEY),wn.delete(Te.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&wn.set(Te.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=wn.get(Te.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){wn.set(Te.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var i,o;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(i=ar.parseCaipNetworkId(e))==null?void 0:i.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getCaipNetworks(n),s=e?r.find(a=>String(a.id)===String(e)||a.caipNetworkId===e):r[0];return(o=s==null?void 0:s.rpcUrls.default.http)==null?void 0:o[0]}}class ba{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a}){var c;return ba.instance||(ba.instance=new Gte({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o,getCaipNetworks:a,enableCloudAuthAccount:!!((c=re.state.remoteFeatures)!=null&&c.emailCapture)})),ba.instance}}var rA={};const Yte={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof rA<"u"?rA.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},q0={filterOutDuplicatesByRDNS(t){const e=re.state.enableEIP6963?pe.state.connectors:[],n=ae.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ie.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=pe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=ae.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=pe.state,{featuredWalletIds:n}=re.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=re.state.features)==null?void 0:c.connectMethodsOrder),r=e||pe.state.connectors;if(n)return n;const{injected:s,announced:i}=ih.getConnectorsByType(r,De.state.recommended,De.state.featured),o=s.filter(ih.showConnector),a=i.filter(ih.showConnector);return o.length||a.length?["wallet","email","social"]:Yte.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&De.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&De.state.excludedWallets.some(r=>vn.isLowerCaseMatch(r.name,t.name));return e||n},markWalletsWithDisplayIndex(t){return t.map((e,n)=>({...e,display_index:n}))}},ih={getConnectorsByType(t,e,n){const{customWallets:r}=re.state,s=ae.getRecentWallets(),i=q0.filterOutDuplicateWallets(e),o=q0.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&De.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&De.state.excludedWallets.some(i=>vn.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ie.isMobile()||Ie.isMobile()&&!e&&!ye.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(R.state.chains.values()).some(n=>pe.getConnectorId(n.namespace)===V.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=re.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const f=[{type:"walletConnect",isEnabled:re.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),h=new Set(f.map(m=>m.type)),p=c.filter(m=>h.has(m)).map(m=>({type:m,isEnabled:!0})),g=f.filter(({type:m})=>!p.some(({type:b})=>b===m));return Array.from(new Set([...p,...g].map(({type:m})=>m)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Ie.isMobile())return{accounts:[],chainId:void 0};if(t.id===V.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oh=globalThis,Wb=oh.ShadowRoot&&(oh.ShadyCSS===void 0||oh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,qb=Symbol(),sA=new WeakMap;let ZP=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==qb)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(Wb&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=sA.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&sA.set(n,e))}return e}toString(){return this.cssText}};const kr=t=>new ZP(typeof t=="string"?t:t+"",void 0,qb),kc=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new ZP(n,t,qb)},Zte=(t,e)=>{if(Wb)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=oh.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},iA=Wb?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return kr(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Jte,defineProperty:Xte,getOwnPropertyDescriptor:Qte,getOwnPropertyNames:ene,getOwnPropertySymbols:tne,getPrototypeOf:nne}=Object,Io=globalThis,oA=Io.trustedTypes,rne=oA?oA.emptyScript:"",Km=Io.reactiveElementPolyfillSupport,vu=(t,e)=>t,z0={toAttribute(t,e){switch(e){case Boolean:t=t?rne:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},JP=(t,e)=>!Jte(t,e),aA={attribute:!0,type:String,converter:z0,reflect:!1,useDefault:!1,hasChanged:JP};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Io.litPropertyMetadata??(Io.litPropertyMetadata=new WeakMap);let _c=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=aA){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Xte(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Qte(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??aA}static _$Ei(){if(this.hasOwnProperty(vu("elementProperties")))return;const e=nne(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(vu("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(vu("properties"))){const n=this.properties,r=[...ene(n),...tne(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(iA(s))}else e!==void 0&&n.push(iA(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Zte(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:z0).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:z0;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??JP)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};_c.elementStyles=[],_c.shadowRootOptions={mode:"open"},_c[vu("elementProperties")]=new Map,_c[vu("finalized")]=new Map,Km==null||Km({ReactiveElement:_c}),(Io.reactiveElementVersions??(Io.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Eu=globalThis,lp=Eu.trustedTypes,cA=lp?lp.createPolicy("lit-html",{createHTML:t=>t}):void 0,XP="$lit$",go=`lit$${Math.random().toFixed(9).slice(2)}$`,QP="?"+go,sne=`<${QP}>`,La=document,_d=()=>La.createComment(""),Cd=t=>t===null||typeof t!="object"&&typeof t!="function",zb=Array.isArray,ine=t=>zb(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Gm=`[ 	
\f\r]`,Wl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,lA=/-->/g,uA=/>/g,Qo=RegExp(`>|${Gm}(?:([^\\s"'>=/]+)(${Gm}*=${Gm}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),dA=/'/g,fA=/"/g,eO=/^(?:script|style|textarea|title)$/i,tO=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),ole=tO(1),ale=tO(2),Jc=Symbol.for("lit-noChange"),un=Symbol.for("lit-nothing"),hA=new WeakMap,ga=La.createTreeWalker(La,129);function nO(t,e){if(!zb(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return cA!==void 0?cA.createHTML(e):e}const one=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Wl;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,f=0;for(;f<c.length&&(o.lastIndex=f,u=o.exec(c),u!==null);)f=o.lastIndex,o===Wl?u[1]==="!--"?o=lA:u[1]!==void 0?o=uA:u[2]!==void 0?(eO.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Qo):u[3]!==void 0&&(o=Qo):o===Qo?u[0]===">"?(o=s??Wl,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Qo:u[3]==='"'?fA:dA):o===fA||o===dA?o=Qo:o===lA||o===uA?o=Wl:(o=Qo,s=void 0);const h=o===Qo&&t[a+1].startsWith("/>")?" ":"";i+=o===Wl?c+sne:d>=0?(r.push(l),c.slice(0,d)+XP+c.slice(d)+go+h):c+go+(d===-2?a:h)}return[nO(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Ad{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=one(e,n);if(this.el=Ad.createElement(l,r),ga.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=ga.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(XP)){const f=u[o++],h=s.getAttribute(d).split(go),p=/([.?@])?(.*)/.exec(f);c.push({type:1,index:i,name:p[2],strings:h,ctor:p[1]==="."?cne:p[1]==="?"?lne:p[1]==="@"?une:dg}),s.removeAttribute(d)}else d.startsWith(go)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(eO.test(s.tagName)){const d=s.textContent.split(go),f=d.length-1;if(f>0){s.textContent=lp?lp.emptyScript:"";for(let h=0;h<f;h++)s.append(d[h],_d()),ga.nextNode(),c.push({type:2,index:++i});s.append(d[f],_d())}}}else if(s.nodeType===8)if(s.data===QP)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(go,d+1))!==-1;)c.push({type:7,index:i}),d+=go.length-1}i++}}static createElement(e,n){const r=La.createElement("template");return r.innerHTML=e,r}}function Xc(t,e,n=t,r){var o,a;if(e===Jc)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Cd(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Xc(t,s._$AS(t,e.values),s,r)),e}class ane{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??La).importNode(n,!0);ga.currentNode=s;let i=ga.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new tf(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new dne(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=ga.nextNode(),o++)}return ga.currentNode=La,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class tf{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=un,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Xc(this,e,n),Cd(e)?e===un||e==null||e===""?(this._$AH!==un&&this._$AR(),this._$AH=un):e!==this._$AH&&e!==Jc&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ine(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==un&&Cd(this._$AH)?this._$AA.nextSibling.data=e:this.T(La.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Ad.createElement(nO(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new ane(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=hA.get(e.strings);return n===void 0&&hA.set(e.strings,n=new Ad(e)),n}k(e){zb(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new tf(this.O(_d()),this.O(_d()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class dg{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=un,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=un}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Xc(this,e,n,0),o=!Cd(e)||e!==this._$AH&&e!==Jc,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Xc(this,a[r+c],n,c),l===Jc&&(l=this._$AH[c]),o||(o=!Cd(l)||l!==this._$AH[c]),l===un?e=un:e!==un&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===un?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class cne extends dg{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===un?void 0:e}}class lne extends dg{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==un)}}class une extends dg{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Xc(this,e,n,0)??un)===Jc)return;const r=this._$AH,s=e===un&&r!==un||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==un&&(r===un||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class dne{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Xc(this,e)}}const Ym=Eu.litHtmlPolyfillSupport;Ym==null||Ym(Ad,tf),(Eu.litHtmlVersions??(Eu.litHtmlVersions=[])).push("3.3.1");const fne=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new tf(e.insertBefore(_d(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const va=globalThis;class ah extends _c{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=fne(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Jc}}var SI;ah._$litElement$=!0,ah.finalized=!0,(SI=va.litElementHydrateSupport)==null||SI.call(va,{LitElement:ah});const Zm=va.litElementPolyfillSupport;Zm==null||Zm({LitElement:ah});(va.litElementVersions??(va.litElementVersions=[])).push("4.2.1");let _u,So,To;function cle(t,e){_u=document.createElement("style"),So=document.createElement("style"),To=document.createElement("style"),_u.textContent=Uc(t).core.cssText,So.textContent=Uc(t).dark.cssText,To.textContent=Uc(t).light.cssText,document.head.appendChild(_u),document.head.appendChild(So),document.head.appendChild(To),rO(e)}function rO(t){So&&To&&(t==="light"?(So.removeAttribute("media"),To.media="enabled"):(To.removeAttribute("media"),So.media="enabled"))}function hne(t){_u&&So&&To&&(_u.textContent=Uc(t).core.cssText,So.textContent=Uc(t).dark.cssText,To.textContent=Uc(t).light.cssText)}function Uc(t){return{core:kc`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${kr(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${kr((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${kr((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${kr((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${kr((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:kc`
      :root {
        --w3m-color-mix: ${kr((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${kr(Ai(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${kr(Ai(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:kc`
      :root {
        --w3m-color-mix: ${kr((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${kr(Ai(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${kr(Ai(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const lle=kc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,ule=kc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,dle=kc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,ch={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([ch.getAddresses(t),ch.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:ch.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[br.NetworkImageIds[e.id]]}]})}},mc={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}},sO=g4({id:56,name:"BNB Smart Chain",nativeCurrency:{decimals:18,name:"BNB",symbol:"BNB"},rpcUrls:{default:{http:["https://56.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"BscScan",url:"https://bscscan.com",apiUrl:"https://api.bscscan.com/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:15921452}}});function nf(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const pA=nf({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),gA=nf({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});nf({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});nf({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});nf({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const pne={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ks={getMethodsByChainNamespace(t){return pne[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case pA.caipNetworkId:u.chains.push(pA.deprecatedCaipNetworkId);break;case gA.caipNetworkId:u.chains.push(gA.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await uu.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Ks.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Ks.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>Ie.isCaipAddress(d)).map(d=>ar.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>ar.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class gne{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case V.CHAIN.EVM:await this.syncEVMConnections(e);break;case V.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case V.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===V.CONNECTOR_ID.WALLET_CONNECT){const c=Ks.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,f;return u.chainNamespace===this.namespace&&u.id.toString()===((f=(d=c[0])==null?void 0:d.chainId)==null?void 0:f.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await ih.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==V.CONNECTOR_ID.AUTH&&a.id!==V.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===V.CONNECTOR_ID.WALLET_CONNECT){const c=Ks.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var f,h,p,g,m,y;if(a.id===V.CONNECTOR_ID.WALLET_CONNECT){const b=Ks.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(w=>({address:w.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>Ie.createAccount(V.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:V.CHAIN.BITCOIN,publicKey:((f=u[mc.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.publicKey)??"",path:((h=u[mc.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.path)??"",address:((p=u[mc.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:V.CHAIN.BITCOIN,publicKey:((g=u[mc.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((m=u[mc.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.path)??"",address:((y=u[mc.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>vn.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>vn.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>vn.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>vn.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>vn.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}const eu={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://localhost:*","http://127.0.0.1:*","https://127.0.0.1:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};class Vb{constructor({provider:e,namespace:n}){this.id=V.CONNECTOR_ID.WALLET_CONNECT,this.name=br.ConnectorNamesMap[V.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=br.ConnectorImageIds[V.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=R.getCaipNetworks.bind(R),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=re.state.universalProviderConfigOverride,s=Ks.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Br.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:mne})}}const mne=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],yne=[V.CONNECTOR_ID.AUTH,V.CONNECTOR_ID.WALLET_CONNECT];class iO{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>R.getCaipNetworks(n),this.getConnectorId=n=>pe.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new gne({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:V.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:V.CONNECTOR_ID.AUTH,type:"AUTH",name:V.CONNECTOR_NAMES.AUTH,provider:e,imageId:br.ConnectorImageIds[V.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!vn.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){xe.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Ir(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Vb);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=Ie.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=Ie.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=Ie.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&vn.isLowerCaseMatch(this.getConnectorId(V.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=Ie.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),vn.isLowerCaseMatch(this.getConnectorId(V.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?ch.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),vn.isLowerCaseMatch(this.getConnectorId(V.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(yne.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}class wne extends iO{async setUniversalProvider(e){if(!this.namespace)throw new Error("UniversalAdapter:setUniversalProvider - namespace is required");return this.addConnector(new Vb({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace})),Promise.resolve()}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect(),this.emit("disconnect")}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}return{connections:[]}}syncConnections(){return Promise.resolve()}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ie.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&ut.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(xe.state.balanceLoading&&e.chainId===((c=R.state.activeCaipNetwork)==null?void 0:c.id))return{balance:xe.state.balance||"0.00",symbol:xe.state.balanceSymbol||""};const s=(await xe.fetchTokenBalance()).find(u=>{var d,f;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((f=e.caipNetwork)==null?void 0:f.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=R.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===V.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:hl.encode(new TextEncoder().encode(r)),pubkey:s}},(a=R.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=R.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}emitFirstAvailableConnection(){}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===V.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Hc(n.id)}]}))}catch(u){if(u.code===eu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===eu.ERROR_INVALID_CHAIN_ID||u.code===eu.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===eu.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Hc(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const bne=["email","socials","swaps","onramp","activity","reownBranding","multiWallet","emailCapture"],Lf={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?ut.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?ut.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?ut.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ut.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?ut.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?ut.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?ut.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ut.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?ut.DEFAULT_REMOTE_FEATURES.reownBranding:!!t},emailCapture:{apiFeatureName:"email_capture",localFeatureName:"emailCapture",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>t.isEnabled&&(t.config??[]),processFallback:t=>!1},multiWallet:{apiFeatureName:"multi_wallet",localFeatureName:"multiWallet",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:()=>ut.DEFAULT_REMOTE_FEATURES.multiWallet}},vne={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Lf[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Lf[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Lf[t].processApi(e)},processFallbackFeature(t,e){return Lf[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await De.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?ut.DEFAULT_REMOTE_FEATURES:ut.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of bne){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),ut.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Pt.open({debugMessage:kt.ALERT_WARNINGS.LOCAL_CONFIGURATION_IGNORED.debugMessage(o)},"warning")}return i}};class Ene{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o;if(n){const a=(s=R.getCaipNetworks(n))==null?void 0:s.find(u=>u.id===r);if(a)return a;const c=(i=R.getNetworkData(n))==null?void 0:i.caipNetwork;return c||((o=R.getRequestedCaipNetworks(n).filter(u=>u.chainNamespace===n))==null?void 0:o[0])}return R.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>R.getCaipNetworks(n),this.getActiveChainNamespace=()=>R.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{R.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>R.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>{var r,s;return R.state.activeChain===n||!n?R.state.activeCaipAddress:(s=(r=R.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.caipAddress},this.setClientId=n=>{Le.setClientId(n)},this.getProvider=n=>vt.getProvider(n),this.getProviderType=n=>vt.getProviderId(n),this.getPreferredAccountType=n=>Ir(n),this.setCaipAddress=(n,r)=>{xe.setCaipAddress(n,r)},this.setBalance=(n,r,s)=>{xe.setBalance(n,r,s)},this.setProfileName=(n,r)=>{xe.setProfileName(n,r)},this.setProfileImage=(n,r)=>{xe.setProfileImage(n,r)},this.setUser=(n,r)=>{xe.setUser(n,r)},this.resetAccount=n=>{xe.resetAccount(n)},this.setCaipNetwork=n=>{R.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{R.setChainNetworkData(r,{caipNetwork:n})},this.setStatus=(n,r)=>{xe.setStatus(n,r),pe.isConnected()?ae.setConnectionStatus("connected"):ae.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>{var r,s;return(s=(r=R.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.address},this.setConnectors=n=>{const r=[...pe.state.allConnectors,...n];pe.setConnectors(r)},this.setConnections=(n,r)=>{ae.setConnections(n,r),ye.setConnections(n,r)},this.fetchIdentity=n=>Le.fetchIdentity(n),this.getReownName=n=>uu.getNamesForAddress(n),this.getConnectors=()=>pe.getConnectors(),this.getConnectorImage=n=>ST.getConnectorImage(n),this.getConnections=n=>this.remoteFeatures.multiWallet?Nh.getConnectionsData(n).connections:(Pt.open(V.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.getRecentConnections=n=>this.remoteFeatures.multiWallet?Nh.getConnectionsData(n).recentConnections:(Pt.open(V.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),[]),this.switchConnection=async n=>{if(!this.remoteFeatures.multiWallet){Pt.open(V.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}await ye.switchConnection(n)},this.deleteConnection=n=>{if(!this.remoteFeatures.multiWallet){Pt.open(V.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info");return}ae.deleteAddressFromConnection(n),ye.syncStorageConnections()},this.setConnectedWalletInfo=(n,r)=>{const s=vt.getProviderId(r),i=n?{...n,type:s}:void 0;xe.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!R.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{xe.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{xe.removeAddressLabel(n,r)},this.getAddress=n=>{var r,s;return R.state.activeChain===n||!n?xe.state.address:(s=(r=R.state.chains.get(n))==null?void 0:r.accountState)==null?void 0:s.address},this.setApprovedCaipNetworksData=n=>R.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{R.resetNetwork(n)},this.addConnector=n=>{pe.addConnector(n)},this.resetWcConnection=()=>{ye.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{xe.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{xe.setSmartAccountDeployed(n,r)},this.setPreferredAccountType=(n,r)=>{R.setAccountProp("preferredAccountType",n,r)},this.setEIP6963Enabled=n=>{re.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),re.state.enableReconnect?(await this.syncExistingConnection(),await this.syncAdapterConnections()):await this.unSyncExistingConnection(),this.remoteFeatures=await vne.fetchRemoteFeatures(e),re.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&Ky.setOnrampProviders(this.remoteFeatures.onramp),((n=re.state.remoteFeatures)!=null&&n.email||Array.isArray((r=re.state.remoteFeatures)==null?void 0:r.socials)&&((s=re.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await De.fetchAllowedOrigins();if(!e||!Ie.isClient()){Pt.open(kt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;Ks.isOriginAllowed(n,e,eu.DEFAULT_ALLOWED_ANCESTORS)||Pt.open(kt.ALERT_ERRORS.ORIGIN_NOT_ALLOWED,"error")}catch(e){if(!(e instanceof Error)){Pt.open(kt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":Pt.open(kt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;Pt.open({displayMessage:kt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.displayMessage,debugMessage:kt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.debugMessage(n.message)},"error");break}default:Pt.open(kt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,yt.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&sr.setThemeMode(e.themeMode),e.themeVariables&&sr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");R.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&R.setActiveCaipNetwork(n)}initializeConnectionController(e){ye.initialize(e.adapters??[]),ye.setWcBasic(e.basic??!1)}initializeConnectorController(){pe.initialize(this.chainNamespaces)}initializeProjectSettings(e){re.setProjectId(e.projectId),re.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var s;re.setDebug(e.debug!==!1),re.setEnableWalletConnect(e.enableWalletConnect!==!1),re.setEnableWalletGuide(e.enableWalletGuide!==!1),re.setEnableWallets(e.enableWallets!==!1),re.setEIP6963Enabled(e.enableEIP6963!==!1),re.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),re.setEnableReconnect(e.enableReconnect!==!1),re.setEnableAuthLogger(e.enableAuthLogger!==!1),re.setCustomRpcUrls(e.customRpcUrls),re.setEnableEmbedded(e.enableEmbedded),re.setAllWallets(e.allWallets),re.setIncludeWalletIds(e.includeWalletIds),re.setExcludeWalletIds(e.excludeWalletIds),re.setFeaturedWalletIds(e.featuredWalletIds),re.setTokens(e.tokens),re.setTermsConditionsUrl(e.termsConditionsUrl),re.setPrivacyPolicyUrl(e.privacyPolicyUrl),re.setCustomWallets(e.customWallets),re.setFeatures(e.features),re.setAllowUnsupportedChain(e.allowUnsupportedChain),re.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),re.setPreferUniversalLinks(e.experimental_preferUniversalLinks),re.setDefaultAccountTypes(e.defaultAccountTypes);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),re.setMetadata(e.metadata),re.setDisableAppend(e.disableAppend),re.setEnableEmbedded(e.enableEmbedded),re.setSIWX(e.siwx),!e.projectId){Pt.open(kt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((s=e.adapters)==null?void 0:s.find(i=>i.namespace===V.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");re.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ie.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=js.getUnsupportedNetwork(`${n}:${e}`);R.setActiveCaipNetwork(r)}}getDefaultNetwork(){return js.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return js.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return js.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?js.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e,n){var r,s;try{this.setLoading(!0,e);let i={connections:[]};const o=this.getAdapter(e);return(((s=(r=R.state.chains.get(e))==null?void 0:r.accountState)==null?void 0:s.caipAddress)||!re.state.enableReconnect)&&(o!=null&&o.disconnect)&&(i=await o.disconnect({id:n})),this.setLoading(!1,e),i}catch(i){throw this.setLoading(!1,e),new Error(`Failed to disconnect chains: ${i.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var l;const e=R.state.activeChain,n=this.getAdapter(e),r=(l=this.getCaipNetwork(e))==null?void 0:l.id,s=ye.getConnections(e),i=this.remoteFeatures.multiWallet,o=s.length>0;if(!n)throw new Error("Adapter not found");const a=await n.connectWalletConnect(r);(!o||!i)&&this.close(),this.setClientId((a==null?void 0:a.clientId)||null),ae.setConnectedNamespaces([...R.state.chains.keys()]),await this.syncWalletConnectAccount(),await Br.initializeIfEnabled()},connectExternal:async({id:e,address:n,info:r,type:s,provider:i,chain:o,caipNetwork:a,socialUri:c})=>{var p,g,m,y,b,w;const l=R.state.activeChain,u=o||l,d=this.getAdapter(u);if(o&&o!==l&&!a){const E=this.getCaipNetworks().find(v=>v.chainNamespace===o);E&&this.setCaipNetwork(E)}if(!u)throw new Error("connectExternal: namespace not found");if(!d)throw new Error("connectExternal: adapter not found");const f=this.getCaipNetwork(u),h=await d.connect({id:e,address:n,info:r,type:s,provider:i,socialUri:c,chainId:(a==null?void 0:a.id)||(f==null?void 0:f.id),rpcUrl:((m=(g=(p=a==null?void 0:a.rpcUrls)==null?void 0:p.default)==null?void 0:g.http)==null?void 0:m[0])||((w=(b=(y=f==null?void 0:f.rpcUrls)==null?void 0:y.default)==null?void 0:b.http)==null?void 0:w[0])});if(h)return ae.addConnectedNamespace(u),this.syncProvider({...h,chainNamespace:u}),this.setStatus("connected",u),this.syncConnectedWalletInfo(u),ae.removeDisconnectedConnectorId(e,u),{address:h.address}},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=R.state.activeChain,o=this.getAdapter(i);if(!i)throw new Error("reconnectExternal: namespace not found");if(!o)throw new Error("reconnectExternal: adapter not found");o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),ae.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{var l;const{id:n,chainNamespace:r,initialDisconnect:s}=e||{},i=r||R.state.activeChain,o=pe.getConnectorId(i),a=n===V.CONNECTOR_ID.AUTH||o===V.CONNECTOR_ID.AUTH,c=n===V.CONNECTOR_ID.WALLET_CONNECT||o===V.CONNECTOR_ID.WALLET_CONNECT;try{const u=Array.from(R.state.chains.keys());let d=r?[r]:u;(c||a)&&(d=u);const f=d.map(async g=>{const m=pe.getConnectorId(g),y=await this.disconnectNamespace(g,n||m);y&&(a&&ae.deleteConnectedSocialProvider(),y.connections.forEach(b=>{ae.addDisconnectedConnectorId(b.connectorId,g)})),s&&this.onDisconnectNamespace({chainNamespace:g,closeModal:!1})}),h=await Promise.allSettled(f);lt.resetSend(),ye.resetWcConnection(),(l=Br.getSIWX())!=null&&l.signOutOnDisconnect&&await Br.clearSessions(),pe.setFilterByNamespace(void 0),ye.syncStorageConnections();const p=h.filter(g=>g.status==="rejected");if(p.length>0)throw new Error(p.map(g=>g.reason.message).join(", "));yt.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:r||"all"}})}catch(u){throw new Error(`Failed to disconnect chains: ${u.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=R.state.activeChain,r=this.getAdapter(R.state.activeChain);if(!n)throw new Error("signMessage: namespace not found");if(!r)throw new Error("signMessage: adapter not found");const s=await(r==null?void 0:r.signMessage({message:e,address:xe.state.address,provider:vt.getProvider(n)}));return(s==null?void 0:s.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(!n)throw new Error("sendTransaction: namespace not found");if(ut.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(n);if(!r)throw new Error("sendTransaction: adapter not found");const s=vt.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{const n=e.chainNamespace;if(n===V.CHAIN.EVM){const r=this.getAdapter(n);if(!r)throw new Error("estimateGas: adapter is required but got undefined");const s=vt.getProvider(n),i=this.getCaipNetwork();if(!i)throw new Error("estimateGas: caipNetwork is required but got undefined");const o=await(r==null?void 0:r.estimateGas({...e,provider:s,caipNetwork:i}));return(o==null?void 0:o.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=R.state.activeChain;if(!e)throw new Error("getEnsAvatar: namespace is required but got undefined");return await this.syncIdentity({address:xe.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id),chainNamespace:e}),xe.state.profileImage||!1},getEnsAddress:async e=>await Ks.resolveReownName(e),writeContract:async e=>{const n=R.state.activeChain,r=this.getAdapter(n);if(!n)throw new Error("writeContract: namespace is required but got undefined");if(!r)throw new Error("writeContract: adapter is required but got undefined");const s=this.getCaipNetwork(),i=this.getCaipAddress(),o=vt.getProvider(n);if(!s||!i)throw new Error("writeContract: caipNetwork or caipAddress is required but got undefined");const a=await(r==null?void 0:r.writeContract({...e,caipNetwork:s,provider:o,caipAddress:i}));return a==null?void 0:a.hash},parseUnits:(e,n)=>{const r=this.getAdapter(R.state.activeChain);if(!r)throw new Error("parseUnits: adapter is required but got undefined");return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(R.state.activeChain);if(!r)throw new Error("formatUnits: adapter is required but got undefined");return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(R.state.activeChain);if(!n)throw new Error("getCapabilities: adapter is required but got undefined");return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(R.state.activeChain);if(!n)throw new Error("grantPermissions: adapter is required but got undefined");return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(R.state.activeChain);if(!n)throw new Error("revokePermissions: adapter is required but got undefined");return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(R.state.activeChain);if(!n)throw new Error("walletGetAssets: adapter is required but got undefined");return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!xe.state.address||this.updateNativeBalance(xe.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ye.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(vt.getProviderId(R.state.activeChain)===Ot.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=vt.getProvider(n),i=vt.getProviderId(n);if(e.chainNamespace===R.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Ot.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=ar.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new wne({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=ae.getConnectionStatus();re.state.enableReconnect===!1?this.setStatus("disconnected",e):r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(ae.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{var l,u;const o=this.getCaipNetworks().find(d=>d.id.toString()===i.toString()||d.caipNetworkId.toString()===i.toString()),a=R.state.activeChain===e,c=(u=(l=R.state.chains.get(e))==null?void 0:l.accountState)==null?void 0:u.address;if(o){const d=a&&s?s:c;d&&this.syncAccount({address:d,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",()=>{const s=this.remoteFeatures.multiWallet,i=Array.from(ye.state.connections.values()).flat();this.onDisconnectNamespace({chainNamespace:e,closeModal:!s||i.length===0})}),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=xe.state.address,i=R.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i,connector:o})=>{var c,l;const a=R.state.activeChain===e;o!=null&&o.provider&&(this.syncProvider({id:o.id,type:o.type,provider:o.provider,chainNamespace:e}),this.syncConnectedWalletInfo(e)),a&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):a&&((c=R.state.activeCaipNetwork)!=null&&c.id)?this.syncAccount({address:s,chainId:(l=R.state.activeCaipNetwork)==null?void 0:l.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),ae.addConnectedNamespace(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&await((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null?void 0:s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async unSyncExistingConnection(){try{await Promise.allSettled(this.chainNamespaces.map(e=>ye.disconnect({namespace:e,initialDisconnect:!0})))}catch(e){console.error("Error disconnecting existing connections:",e)}}async syncNamespaceConnection(e){try{e===V.CHAIN.EVM&&Ie.isSafeApp()&&pe.setConnectorId(V.CONNECTOR_ID.SAFE,e);const n=pe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case V.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case V.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}onDisconnectNamespace(e){const{chainNamespace:n,closeModal:r}=e||{};R.resetAccount(n),R.resetNetwork(n),ae.removeConnectedNamespace(n);const s=Array.from(R.state.chains.keys());(n?[n]:s).forEach(o=>ae.addDisconnectedConnectorId(pe.getConnectorId(o)||"",o)),pe.removeConnectorId(n),vt.resetChain(n),this.setUser(void 0,n),this.setStatus("disconnected",n),this.setConnectedWalletInfo(void 0,n),r!==!1&&et.close()}async syncAdapterConnections(){await Promise.allSettled(this.chainNamespaces.map(e=>{var s;const n=this.getCaipAddress(e),r=this.getCaipNetwork(e);return(s=this.chainAdapters)==null?void 0:s[e].syncConnections({connectToFirstConnector:!n,caipNetwork:r,getConnectorStorageInfo(i){const a=ae.getConnections()[e]??[];return{hasDisconnected:ae.isConnectorDisconnected(i,e),hasConnected:a.some(c=>vn.isLowerCaseMatch(c.connectorId,i))}}})}))}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=pe.getConnectorId(e),s=this.getCaipNetwork(e),o=pe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));u?(this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)):this.setStatus("disconnected",e)}catch{this.onDisconnectNamespace({chainNamespace:e,closeModal:!1})}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,f,h,p;const o=this.getAdapter(i);if(!o)return;const a=((h=(f=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:f[i])==null?void 0:h.accounts)||[],c=(p=R.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:m}=ar.parseCaipAddress(g);return m===(c==null?void 0:c.toString())})||a[0];if(l){const g=ar.validateCaipAddress(l),{chainId:m,address:y}=ar.parseCaipAddress(g);if(vt.setProviderId(i,Ot.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&R.state.activeCaipNetwork&&o.namespace!==V.CHAIN.EVM){const b=o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:R.state.activeCaipNetwork});vt.setProvider(i,b)}else vt.setProvider(i,this.universalProvider);pe.setConnectorId(V.CONNECTOR_ID.WALLET_CONNECT,i),ae.addConnectedNamespace(i),await this.syncAccount({address:y,chainId:m,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await R.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){vt.setProviderId(s,e),vt.setProvider(s,n),pe.setConnectorId(r,s)}async syncAccount(e){var d,f;const n=e.chainNamespace===R.state.activeChain,r=R.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=ae.getActiveNetworkProps(),c=i||a,l=((d=R.state.activeCaipNetwork)==null?void 0:d.name)===V.UNSUPPORTED_NETWORK_NAME,u=R.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let h=this.getCaipNetworks().find(m=>m.id.toString()===c.toString()),p=this.getCaipNetworks().find(m=>m.chainNamespace===o);if(!u&&!h&&!p){const m=this.getApprovedCaipNetworkIds()||[],y=m.find(w=>{var E;return((E=ar.parseCaipNetworkId(w))==null?void 0:E.chainId)===c.toString()}),b=m.find(w=>{var E;return((E=ar.parseCaipNetworkId(w))==null?void 0:E.chainNamespace)===o});h=this.getCaipNetworks().find(w=>w.caipNetworkId===y),p=this.getCaipNetworks().find(w=>w.caipNetworkId===b||"deprecatedCaipNetworkId"in w&&w.deprecatedCaipNetworkId===b)}const g=h||p;(g==null?void 0:g.chainNamespace)===R.state.activeChain?re.state.enableNetworkSwitch&&!re.state.allowUnsupportedChain&&((f=R.state.activeCaipNetwork)==null?void 0:f.name)===V.UNSUPPORTED_NETWORK_NAME?R.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),vn.isLowerCaseMatch(s,xe.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o}),this.syncIdentity({address:s,chainId:i,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=pe.getConnectorId(e),r=vt.getProviderId(e);if(r===Ot.CONNECTOR_TYPE_ANNOUNCED||r===Ot.CONNECTOR_TYPE_INJECTED){if(n){const o=this.getConnectors().find(a=>{var d,f;const c=a.id===n,l=((d=a.info)==null?void 0:d.rdns)===n,u=(f=a.connectors)==null?void 0:f.some(h=>{var p;return h.id===n||((p=h.info)==null?void 0:p.rdns)===n});return c||l||!!u});if(o){const{info:a,name:c,imageUrl:l}=o,u=l||this.getConnectorImage(o);this.setConnectedWalletInfo({name:c,icon:u,...a},e)}}}else if(r===Ot.CONNECTOR_TYPE_WALLET_CONNECT){const i=vt.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&(n===V.CONNECTOR_ID.COINBASE_SDK||n===V.CONNECTOR_ID.COINBASE)){const i=this.getConnectors().find(l=>l.id===n),o=(i==null?void 0:i.name)||"Coinbase Wallet",a=(i==null?void 0:i.imageUrl)||this.getConnectorImage(i),c=i==null?void 0:i.info;this.setConnectedWalletInfo({...c,name:o,icon:a},e)}}async syncBalance(e){!Lu.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=R.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,f;const e=SQ.createLogger((h,...p)=>{h&&this.handleAlertError(h),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};re.setManualWCControl(!!((f=this.options)!=null&&f.manualWCControl)),this.universalProvider=this.options.universalProvider??await Hb.init(n),re.state.enableReconnect===!1&&this.universalProvider.session&&await this.universalProvider.disconnect(),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&this.chainNamespaces.forEach(e=>{Ks.listenWcProvider({universalProvider:this.universalProvider,namespace:e,onDisplayUri:n=>{ye.setUri(n)},onConnect:n=>{const{address:r}=Ie.getAccount(n[0]);ye.finalizeWcConnection(r)},onDisconnect:()=>{R.state.noAdapters&&this.resetAccount(e),ye.resetWcConnection()},onChainChanged:n=>{const r=R.state.activeChain,s=r&&pe.state.activeConnectorIds[r]===V.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(R.state.noAdapters||s)){const i=this.getCaipNetworks().find(a=>a.id.toString()===n.toString()||a.caipNetworkId.toString()===n.toString()),o=this.getCaipNetwork();if(!i){this.setUnsupportedNetwork(n);return}(o==null?void 0:o.id.toString())!==(i==null?void 0:i.id.toString())&&(o==null?void 0:o.chainNamespace)===(i==null?void 0:i.chainNamespace)&&this.setCaipNetwork(i)}},onAccountsChanged:n=>{const r=R.state.activeChain,s=r&&pe.state.activeConnectorIds[r]===V.CONNECTOR_ID.WALLET_CONNECT;if(r===e&&(R.state.noAdapters||s)&&n.length>0){const i=n[0];this.syncAccount({address:i.address,chainId:i.chainId,chainNamespace:i.chainNamespace})}}})})}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ie.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){yt.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(kt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=kt.ALERT_ERRORS[o];a&&(Pt.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ye.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return et.open({...e,data:{swap:e.arguments}})}return et.open(e)}async close(){await this.injectModalUi(),et.close()}setLoading(e,n){et.setLoading(e,n)}async disconnect(e){await ye.disconnect({namespace:e})}getSIWX(){return re.state.siwx}getError(){return""}getChainId(){var e;return(e=R.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Pt.open(kt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await R.switchActiveNetwork(n)}getWalletProvider(){return R.state.activeChain?vt.state.providers[R.state.activeChain]:null}getWalletProviderType(){return vt.getProviderId(R.state.activeChain)}subscribeProviders(e){return vt.subscribeProviders(e)}getThemeMode(){return sr.state.themeMode}getThemeVariables(){return sr.state.themeVariables}setThemeMode(e){sr.setThemeMode(e),rO(sr.state.themeMode)}setTermsConditionsUrl(e){re.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){re.setPrivacyPolicyUrl(e)}setThemeVariables(e){sr.setThemeVariables(e),hne(sr.state.themeVariables)}subscribeTheme(e){return sr.subscribe(e)}subscribeConnections(e){return this.remoteFeatures.multiWallet?ye.subscribe(e):(Pt.open(V.REMOTE_FEATURES_ALERTS.MULTI_WALLET_NOT_ENABLED.DEFAULT,"info"),()=>{})}getWalletInfo(e){var n,r;return e?(r=(n=R.state.chains.get(e))==null?void 0:n.accountState)==null?void 0:r.connectedWalletInfo:xe.state.connectedWalletInfo}getAccount(e){const n=e||R.state.activeChain,r=pe.getAuthConnector(n),s=R.getAccountData(n),i=ae.getConnectedConnectorId(R.state.activeChain),o=ye.getConnections(n);if(!n)throw new Error("AppKit:getAccount - namespace is required");const a=o.flatMap(c=>c.accounts.map(({address:l,type:u,publicKey:d})=>Ie.createAccount(n,l,u||"eoa",d)));if(s)return{allAccounts:a,caipAddress:s.caipAddress,address:Ie.getPlainAddress(s.caipAddress),isConnected:!!s.caipAddress,status:s.status,embeddedWalletInfo:r&&i===V.CONNECTOR_ID.AUTH?{user:s.user?{...s.user,username:ae.getConnectedSocialUsername()}:void 0,authProvider:s.socialProvider||"email",accountType:Ir(n),isSmartAccountDeployed:!!s.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?R.subscribeChainProp("accountState",r,n):R.subscribe(r),pe.subscribe(r)}subscribeNetwork(e){return R.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?xe.subscribeKey("connectedWalletInfo",e,n):xe.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){xe.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){R.subscribeKey("activeCaipNetwork",e)}getState(){return ls.state}getRemoteFeatures(){return re.state.remoteFeatures}subscribeState(e){return ls.subscribe(e)}subscribeRemoteFeatures(e){return re.subscribeKey("remoteFeatures",e)}showErrorMessage(e){Hs.showError(e)}showSuccessMessage(e){Hs.showSuccess(e)}getEvent(){return{...yt.state}}subscribeEvents(e){return yt.subscribe(e)}replace(e){Fe.replace(e)}redirect(e){Fe.push(e)}popTransactionStack(e){Fe.popTransactionStack(e)}isOpen(){return et.state.open}isTransactionStackEmpty(){return Fe.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){re.setFeatures(e)}updateRemoteFeatures(e){re.setRemoteFeatures(e)}updateOptions(e){const r={...re.state||{},...e};re.setOptions(r)}setConnectMethodsOrder(e){re.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){re.setWalletFeaturesOrder(e)}setCollapseWallets(e){re.setCollapseWallets(e)}setSocialsOrder(e){re.setSocialsOrder(e)}getConnectMethodsOrder(){return q0.getConnectOrderMethod(re.state.features,pe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||R.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&R.removeNetwork(e,n)}}let mA=!1;class _ne extends Ene{async onAuthProviderConnected(e){e.message&&e.signature&&e.siwxMessage&&await Br.addEmbeddedWalletSession({chainId:e.siwxMessage.chainId,accountAddress:e.address,notBefore:e.siwxMessage.notBefore,statement:e.siwxMessage.statement,resources:e.siwxMessage.resources,requestId:e.siwxMessage.requestId,issuedAt:e.siwxMessage.issuedAt,domain:e.siwxMessage.domain,uri:e.siwxMessage.uri,version:e.siwxMessage.version,nonce:e.siwxMessage.nonce},e.message,e.signature);const n=R.state.activeChain;if(!n)throw new Error("AppKit:onAuthProviderConnected - namespace is required");const r=n===V.CHAIN.EVM?`eip155:${e.chainId}:${e.address}`:`${e.chainId}:${e.address}`,s=re.state.defaultAccountTypes[n],i=Ir(n),o=e.preferredAccountType||i||s;this.setCaipAddress(r,n);const{signature:a,siwxMessage:c,message:l,...u}=e;this.setUser({...xe.state.user||{},...u},n),this.setSmartAccountDeployed(!!e.smartAccountDeployed,n),this.setPreferredAccountType(o,n),this.setLoading(!1,n)}setupAuthConnectorListeners(e){e.onRpcRequest(n=>{vr.checkIfRequestExists(n)?vr.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(nn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(nn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=vr.checkIfRequestIsSafe(r),i=xe.state.address,o=R.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=R.state.activeChain;if(!n)throw new Error("AppKit:onNotConnected - namespace is required");pe.getConnectorId(n)===V.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(this.onAuthProviderConnected.bind(this)),e.onSocialConnected(this.onAuthProviderConnected.bind(this)),e.onSetPreferredAccount(({address:n,type:r})=>{const s=R.state.activeChain;if(!s)throw new Error("AppKit:onSetPreferredAccount - namespace is required");n&&this.setPreferredAccountType(r,s)})}async syncAuthConnectorTheme(e){if(!e)return;const n=sr.getSnapshot(),r=re.getSnapshot();await Promise.all([e.syncDappData({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),e.syncTheme({themeMode:n.themeMode,themeVariables:n.themeVariables,w3mThemeVariables:Ai(n.themeVariables,n.themeMode)})])}async syncAuthConnector(e,n){var l,u,d,f;const r=V.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===R.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((l=xe.state)==null?void 0:l.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected();if(await this.syncAuthConnectorTheme(e),n&&r&&s){const h=await e.getSmartAccountEnabledNetworks();R.setSmartAccountEnabledNetworks((h==null?void 0:h.smartAccountEnabledNetworks)||[],n),c&&((u=this.connectionControllerClient)!=null&&u.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:V.CONNECTOR_ID.AUTH,info:{name:V.CONNECTOR_ID.AUTH},type:Ot.CONNECTOR_TYPE_AUTH,provider:e,chainId:(d=R.state.activeCaipNetwork)==null?void 0:d.id,chain:n})),this.setStatus("connected",n)):pe.getConnectorId(n)===V.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),ae.removeConnectedNamespace(n))}this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ie.isTelegram())return;const r=ae.getTelegramSocialProvider();if(!r||!Ie.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;xe.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=pe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ye.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),ae.setConnectedSocialProvider(r),ae.removeTelegramSocialProvider(),yt.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,f;if(!V.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=vn.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=ba.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(f=this.getCaipNetwork(a))==null?void 0:f.caipNetworkId,abortController:kt.EmbeddedWalletAbortController,onTimeout:h=>{h==="iframe_load_failed"?Pt.open(kt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):h==="iframe_request_timeout"?Pt.open(kt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):h==="unverified_domain"&&Pt.open(kt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:h=>mo(h),getCaipNetworks:h=>R.getCaipNetworks(h)}),ls.subscribeOpen(h=>{var p;!h&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===R.state.activeChain&&re.state.enableReconnect;re.state.enableReconnect===!1?this.syncAuthConnectorTheme(this.authProvider):this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&De.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=R.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=vt.getProvider(r),u=vt.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=vt.getProviderId(n)===Ot.CONNECTOR_TYPE_AUTH,u=vt.getProviderId(r),d=u===Ot.CONNECTOR_TYPE_AUTH,f=V.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if(!r)throw new Error("AppKit:switchCaipNetwork - networkNamespace is required");if((l&&u===void 0||d)&&f)try{if(R.state.activeChain=e.chainNamespace,s){const h=this.getAdapter(r);await(h==null?void 0:h.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:V.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Ot.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else if(u===Ot.CONNECTOR_TYPE_WALLET_CONNECT){if(!R.state.noAdapters){const h=this.getAdapter(r),p=vt.getProvider(r),g=vt.getProviderId(r);await(h==null?void 0:h.switchNetwork({caipNetwork:e,provider:p,providerType:g}))}this.setCaipNetwork(e),this.syncWalletConnectAccount()}else this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r})}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),ls.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var a;const s=`${r}:${n}`,i=(a=this.caipNetworks)==null?void 0:a.find(c=>c.caipNetworkId===s);if(r!==V.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}const o=pe.getConnectorId(r)===V.CONNECTOR_ID.AUTH;try{const{name:c,avatar:l}=await this.fetchIdentity({address:e,caipNetworkId:s});!c&&o?await this.syncReownName(e,r):(this.setProfileName(c,r),this.setProfileImage(l,r))}catch{n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=vt.getProviderId(e);if(n===Ot.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=ae.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ie.isClient()&&!mA)try{const e={...ut.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ie.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!re.state.disableAppend&&!re.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}mA=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ie.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(cn(()=>import("./embedded-wallet-EC5_tlvE.js"),__vite__mapDeps([5,6,7,8,9,10,11,12,13,14,15,16]))),n.email&&r.push(cn(()=>import("./email-381UbEW6.js"),__vite__mapDeps([17,6,16,10,15,9,14,18,11]))),n.socials&&r.push(cn(()=>import("./socials-CQ970wnQ.js"),__vite__mapDeps([19,6,20,9,21,22,15,23,14,10,16,24,8,25]))),n.swaps&&n.swaps.length>0&&r.push(cn(()=>import("./swaps-BZ8IQfWC.js"),__vite__mapDeps([26,6,14,10,27,28,29,25,30,8,15,11,9]))),e.send&&r.push(cn(()=>import("./send-xcD8_sTN.js"),__vite__mapDeps([31,6,14,10,15,9,21,16,30,8,25,29,11,32,33]))),e.receive&&r.push(cn(()=>import("./receive-BEzbPL71.js"),__vite__mapDeps([34,6,35,8,24]))),n.onramp&&n.onramp.length>0&&r.push(cn(()=>import("./onramp-DRDoP1HG.js"),__vite__mapDeps([36,6,37,8,10,15,20,9,21,38,16,14,23,11]))),n.activity&&r.push(cn(()=>import("./transactions-CviMqMgT.js"),__vite__mapDeps([39,6,40,15,16,8,25]))),e.pay&&r.push(cn(()=>import("./index-1-9WV-4h.js"),__vite__mapDeps([41,6,14,10,42,8,15,12,37,33,23]))),n.emailCapture&&r.push(cn(()=>import("./ui-BhHQALR3.js"),__vite__mapDeps([43,6,17,16,10,15,9,14,18,11]))),await Promise.all([...r,cn(()=>import("./index-DP_aqsjC.js"),__vite__mapDeps([44,6,8,10,32,15,45,28,12,37,14,13,42,7,40,16,25,27,33,9,11,18,20,21,22,23,35,24,38])),cn(()=>import("./w3m-modal-COzpH2jU.js"),__vite__mapDeps([46,6,12,8,15,13,10,28,45,29]))])}}const Cne="1.7.19";let Jm;function Ane(t){return Jm||(Jm=new _ne({...t,sdkVersion:Ie.generateSdkVersion(t.adapters??[],"html",Cne)})),Jm}function zr(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const lh="2.19.0",Ine=()=>`@wagmi/core@${lh}`;var oO=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},up,aO;class vs extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Ine()}constructor(e,n={}){var i;super(),up.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof vs?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof vs&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return oO(this,up,"m",aO).call(this,this,e)}}up=new WeakSet,aO=function t(e,n){return n!=null&&n(e)?e:e.cause?oO(this,up,"m",t).call(this,e.cause,n):e};class Id extends vs{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Sne extends vs{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Tne extends vs{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Nne extends vs{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class xne extends vs{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Pne extends vs{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Xm(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Sne;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function fg(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new Pne({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(f=>{if(e.account===null)return[];throw f}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new Tne;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new xne({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=ti(e.account??n.accounts[0]);if(o&&(o.address=aa(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Nne({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return sx({account:o,chain:a,name:"Connector Client",transport:l=>c4(c)({...l,retryCount:0})})}async function yA(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}function cO(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(fU[t])}async function One(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await fg(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return zr(o,FN,"estimateGas")({...s,account:i})}function Cu(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Rne(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return zr(o,w4,"multicall")({allowFailure:n,contracts:s,...i})}function Dne(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return zr(s,ex,"readContract")(r)}async function $ne(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[f,h]of o.entries()){const p=h.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:h,index:f})}const l=()=>Object.entries(c).map(([f,h])=>Rne(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(f),contracts:h.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(f=>f.map(({index:h})=>h));return u.reduce((f,h,p)=>(f&&(f[d[p]]=h),f),[])}catch(c){if(c instanceof vN)throw c;const l=()=>o.map(u=>Dne(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function kne(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await wA(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(f){if(f.name==="ContractFunctionExecutionError"){const h=await wA(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=XT(_o(h.symbol,{dir:"right"}));return{...h,symbol:p}}throw f}const c=t.getClient({chainId:i}),u=await zr(c,BN,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(f=>f.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:al(u,cO(a)),symbol:d.nativeCurrency.symbol,value:u}}async function wA(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await $ne(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=al(c??"0",cO(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Sd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Sd(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.hasOwn(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Sd(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let Mf=[];function wi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Sd(Mf,e)?Mf:(Mf=e,e)}async function Une(t,e){const{account:n,chainId:r,...s}=e,i=n??Cu(t).address,o=t.getClient({chainId:r});return zr(o,ib,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Qm=!1;async function bA(t,e={}){var l,u;if(Qm)return[];Qm=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let f;typeof d=="function"?f=t._internal.connectors.setup(d):f=d,n.push(f)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,f)=>(s[d.id]??10)-(s[f.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const f=await d.getProvider().catch(()=>{});if(!f||c.some(g=>g===f)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const m=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:m}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(f),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Qm=!1,a}async function Lne(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await fg(t,{account:n??void 0,chainId:r,connector:s}),await zr(o,nx,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Mne(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await fg(t,{account:n,connector:r}),zr(i,_4,"signMessage")({...s,...n?{account:n}:{}})}class uo extends vs{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Bne extends vs{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function vA(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Bne({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Id;return t.setState(a=>({...a,chainId:r})),i}async function Fne(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await zr(i,v4,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await zr(i,ox,"getTransaction")({hash:a.transactionHash}),d=await zr(i,QN,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),f=d!=null&&d.data?XT(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(f)}return{...a,chainId:i.chain.id}}function jne(t,e){const{onChange:n}=e;return t.subscribe(()=>Cu(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Sd(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Hne(t,e){const{onChange:n}=e;return t.subscribe(()=>wi(t),n,{equalityFn:Sd})}function Wne(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function qne(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=zr(l,E4,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function zne(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await fg(t,{account:n??void 0,chainId:r,connector:s}),await zr(o,n4,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function fle(t){return t}hg.type="injected";function hg(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Vne[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:hg.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var h,p,g,m,y,b;const d=await this.getProvider();if(!d)throw new uo;let f=[];if(u)f=await this.getAccounts().catch(()=>[]);else if(e)try{f=(m=(g=(p=(h=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:h.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:m.map(E=>aa(E)),f.length>0&&(f=await this.getAccounts())}catch(w){const E=w;if(E.code===Xt.code)throw new Xt(E);if(E.code===Co.code)throw E}try{!(f!=null&&f.length)&&!u&&(f=(await d.request({method:"eth_requestAccounts"})).map(v=>aa(v))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let w=await this.getChainId();if(l&&w!==l){const E=await this.switchChain({chainId:l}).catch(v=>{if(v.code===Xt.code)throw v;return{id:w}});w=(E==null?void 0:E.id)??w}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:f,chainId:w}}catch(w){const E=w;throw E.code===Xt.code?new Xt(E):E.code===Co.code?new Co(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new uo;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await ix(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new uo;return(await l.request({method:"eth_accounts"})).map(d=>aa(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new uo;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=uh(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new uo}return!!(await Mh(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,m,y;const d=await this.getProvider();if(!d)throw new uo;const f=c.chains.find(b=>b.id===u);if(!f)throw new Js(new Id);const h=new Promise(b=>{const w=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",w),b())};c.emitter.on("change",w)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ge(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),h]),f}catch(b){const w=b;if(w.code===4902||((g=(p=w==null?void 0:w.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:E,...v}=f.blockExplorers??{};let _;l!=null&&l.blockExplorerUrls?_=l.blockExplorerUrls:E&&(_=[E.url,...Object.values(v).map(C=>C.url)]);let A;(m=l==null?void 0:l.rpcUrls)!=null&&m.length?A=l.rpcUrls:A=[((y=f.rpcUrls.default)==null?void 0:y.http[0])??""];const N={blockExplorerUrls:_,chainId:Ge(u),chainName:(l==null?void 0:l.chainName)??f.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??f.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Xt(new Error("User rejected switch after adding network."))}),h]),f}catch(E){throw new Xt(E)}throw w.code===Xt.code?new Xt(w):new Js(w)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>aa(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Vne={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:uh(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return uh(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:uh(t,"isPhantom")}}};function uh(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Kne(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Gne(){const t=new Set;let e=[];const n=()=>Kne(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const Yne=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=f=>{const h=o(f);if(!u(d,h)){const p=d;a(d=h,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Zne=Yne;function Jne(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const V0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return V0(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return V0(r)(n)}}}},Xne=(t,e)=>(n,r,s)=>{let i={storage:Jne(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,m)=>{d(g,m),u()};const f=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>f;let h;const p=()=>{var g,m;if(!l)return;o=!1,a.forEach(b=>{var w;return b((w=r())!=null?w:f)});const y=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=r())!=null?g:f))||void 0;return V0(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var w;const[E,v]=b;if(h=i.merge(v,(w=r())!=null?w:f),n(h,!0),E)return u()}).then(()=>{y==null||y(h,void 0),h=r(),o=!0,c.forEach(b=>b(h))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),h||f},Qne=Xne,EA=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const f=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(h=>h(e,f))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},ey=t=>t?EA(t):EA;var ty={exports:{}},_A;function ere(){return _A||(_A=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new s(u,d||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,p){var g=n?n+l:l;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,b,w;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,f),!0;case 5:return m.fn.call(m.context,u,d,f,h),!0;case 6:return m.fn.call(m.context,u,d,f,h,p),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];m.fn.apply(m.context,b)}else{var E=m.length,v;for(w=0;w<E;w++)switch(m[w].once&&this.removeListener(l,m[w].fn,void 0,!0),y){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,u);break;case 3:m[w].fn.call(m[w].context,u,d);break;case 4:m[w].fn.call(m[w].context,u,d,f);break;default:if(!b)for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];m[w].fn.apply(m[w].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var g=0,m=[],y=p.length;g<y;g++)(p[g].fn!==u||f&&!p[g].once||d&&p[g].context!==d)&&m.push(p[g]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(ty)),ty.exports}var tre=ere();const nre=rl(tre);class rre{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new nre})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function sre(t){return new rre(t)}function ire(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function CA(t,e){return t.slice(0,e).join(".")||"."}function AA(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function ore(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=AA(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=AA(s,c);if(u!==0)return r?e.call(this,a,c,CA(i,u)):`[ref=${CA(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function are(t,e,n,r){return JSON.stringify(t,ore((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function cre(t){const{deserialize:e=ire,key:n="wagmi",serialize:r=are,storage:s=lO}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const lO={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function lre(){const t=typeof window<"u"&&window.localStorage?window.localStorage:lO;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const K0=256;let Bf=K0,Ff;function ure(t=11){if(!Ff||Bf+t>K0*2){Ff="",Bf=0;for(let e=0;e<K0;e++)Ff+=(256+Math.random()*256|0).toString(16).substring(1)}return Ff.substring(Bf,Bf+++t)}function dre(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=cre({storage:lre()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Gne():void 0,a=ey(()=>i.chains),c=ey(()=>{const v=[],_=new Set;for(const A of i.connectors??[]){const N=l(A);if(v.push(N),!s&&N.rdns){const C=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const x of C)_.add(x)}}if(!s&&o){const A=o.getProviders();for(const N of A)_.has(N.info.rdns)||v.push(l(u(N)))}return v});function l(v){var N;const _=sre(ure()),A={...v({emitter:_,chains:a.getState(),storage:n,transports:i.transports}),emitter:_,uid:_.uid};return _.on("connect",w),(N=A.setup)==null||N.call(A),A}function u(v){const{info:_}=v,A=v.provider;return hg({target:{..._,id:_.rdns,provider:A}})}const d=new Map;function f(v={}){const _=v.chainId??m.getState().chainId,A=a.getState().find(C=>C.id===_);if(v.chainId&&!A)throw new Id;{const C=d.get(m.getState().chainId);if(C&&!A)return C;if(!A)throw new Id}{const C=d.get(_);if(C)return C}let N;if(i.client)N=i.client({chain:A});else{const C=A.id,x=a.getState().map(H=>H.id),P={},D=Object.entries(i);for(const[H,B]of D)if(!(H==="chains"||H==="client"||H==="connectors"||H==="transports"))if(typeof B=="object")if(C in B)P[H]=B[C];else{if(x.some(S=>S in B))continue;P[H]=B}else P[H]=B;N=sx({...P,chain:A,batch:P.batch??{multicall:!0},transport:H=>i.transports[C]({...H,connectors:c})})}return d.set(_,N),N}function h(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";lh.startsWith(g)?p=Number.parseInt(lh.replace(g,"")):p=Number.parseInt(lh.split(".")[0]??"0");const m=ey(Zne(n?Qne(h,{migrate(v,_){if(_===p)return v;const A=h(),N=y(v,A.chainId);return{...A,chainId:N}},name:"store",partialize(v){return{connections:{__type:"Map",value:Array.from(v.connections.entries()).map(([_,A])=>{const{id:N,name:C,type:x,uid:P}=A.connector;return[_,{...A,connector:{id:N,name:C,type:x,uid:P}}]})},chainId:v.chainId,current:v.current}},merge(v,_){typeof v=="object"&&v&&"status"in v&&delete v.status;const A=y(v,_.chainId);return{..._,...v,chainId:A}},skipHydration:s,storage:n,version:p}):h));m.setState(h());function y(v,_){return v&&typeof v=="object"&&"chainId"in v&&typeof v.chainId=="number"&&a.getState().some(A=>A.id===v.chainId)?v.chainId:_}r&&m.subscribe(({connections:v,current:_})=>{var A;return _?(A=v.get(_))==null?void 0:A.chainId:void 0},v=>{if(a.getState().some(A=>A.id===v))return m.setState(A=>({...A,chainId:v??A.chainId}))}),o==null||o.subscribe(v=>{const _=new Set,A=new Set;for(const C of c.getState())if(_.add(C.id),C.rdns){const x=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const P of x)A.add(P)}const N=[];for(const C of v){if(A.has(C.info.rdns))continue;const x=l(u(C));_.has(x.id)||N.push(x)}n&&!m.persist.hasHydrated()||c.setState(C=>[...C,...N],!0)});function b(v){m.setState(_=>{const A=_.connections.get(v.uid);return A?{..._,connections:new Map(_.connections).set(v.uid,{accounts:v.accounts??A.accounts,chainId:v.chainId??A.chainId,connector:A.connector})}:_})}function w(v){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(_=>{const A=c.getState().find(N=>N.uid===v.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",b),A.emitter.listenerCount("change")||A.emitter.on("change",b),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",E),{..._,connections:new Map(_.connections).set(v.uid,{accounts:v.accounts,chainId:v.chainId,connector:A}),current:v.uid,status:"connected"}):_})}function E(v){m.setState(_=>{const A=_.connections.get(v.uid);if(A){const C=A.connector;C.emitter.listenerCount("change")&&A.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",E),C.emitter.listenerCount("connect")||A.connector.emitter.on("connect",w)}if(_.connections.delete(v.uid),_.connections.size===0)return{..._,connections:new Map,current:null,status:"disconnected"};const N=_.connections.values().next().value;return{..._,connections:new Map(_.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:f,get state(){return m.getState()},setState(v){let _;typeof v=="function"?_=v(m.getState()):_=v;const A=h();typeof _!="object"&&(_=A),Object.keys(A).some(C=>!(C in _))&&(_=A),m.setState(_,!0)},subscribe(v,_,A){return m.subscribe(v,_,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:m,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(v){const _=typeof v=="function"?v(a.getState()):v;if(_.length!==0)return a.setState(_,!0)},subscribe(v){return a.subscribe(v)}},connectors:{providerDetailToConnector:u,setup:l,setState(v){return c.setState(typeof v=="function"?v(c.getState()):v,!0)},subscribe(v){return c.subscribe(v)}},events:{change:b,connect:w,disconnect:E}}}}function fre(t){let e=[],n,r;function s(a){return Lu.parseEvmChainId(a)||1}function i(){var a;return n||(n=ba.getInstance({projectId:t.options.projectId,chainId:(a=mo())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Pt.open(kt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Pt.open(kt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Pt.open(kt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:kt.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>mo(c),getCaipNetworks:c=>R.getCaipNetworks(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const m=Lu.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=m||y,!l)throw new Error("ChainId not found in provider")}const u=Ir("eip155"),{address:d,chainId:f,accounts:h}=await Br.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:V.CHAIN.EVM});e=(h==null?void 0:h.map(m=>m.address))||[d];const p=s(f);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:V.CONNECTOR_ID.AUTH,name:V.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:V.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=ba.getInstance({projectId:t.options.projectId,chainId:(c=mo())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:kt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Pt.open(kt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Pt.open(kt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Pt.open(kt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>mo(l),getCaipNetworks:l=>R.getCaipNetworks(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=R.state.activeChain===V.CHAIN.EVM;if(V.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(f=>pe.getConnectorId(f)===V.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Js(new Error("chain not found on connector."));const d=await this.getProvider(),f=Ir("eip155"),h=await d.connect({chainId:c,preferredAccountType:f});return e=((l=h==null?void 0:h.accounts)==null?void 0:l.map(p=>p.address))||[h.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Js(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(aa)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}Kb.type="walletConnect";function Kb(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:Kb.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var f,h,p;try{const g=R.getCaipNetworks(),m=await this.getProvider();if(!m)throw new uo;a||(a=this.onDisplayUri,m.on("display_uri",a));const y=await this.isChainsStale();m.session&&y&&await m.disconnect();const b=re.state.universalProviderConfigOverride;if(!m.session||y){const C=Ks.createNamespaces(g,b);await m.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(x=>Number(x.id)))}const w=await this.getAccounts(),E=await this.getChainId(),v=(p=(h=(f=m.session)==null?void 0:f.namespaces)==null?void 0:h.eip155)==null?void 0:p.chains,_=v==null?void 0:v.some(C=>Number(C.split(":")[1])===E);let A=1;_?A=E:v!=null&&v[0]&&(A=Number(v[0].split(":")[1])),a&&(m.removeListener("display_uri",a),a=void 0),o&&(m.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),m.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),m.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),m.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),m.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return m.setDefaultChain(N??`eip155:${A}`),{accounts:w,chainId:A}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Xt(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(f){if(!/No matching key/i.test(f.message))throw f}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var m,y,b;const d=await this.getProvider();if(!((m=d==null?void 0:d.session)!=null&&m.namespaces))return[];const f=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[V.CHAIN.EVM])==null?void 0:b.accounts,h=(f==null?void 0:f.map(w=>w.split(":")[2]))??[],p=new Set;return h.filter(w=>{const E=w==null?void 0:w.toLowerCase();return p.has(E)?!1:(p.add(E),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const f=ae.getActiveNamespace(),h=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&h!==d&&f){const m=ae.getStoredActiveCaipNetworkId(),y=f?e.getCaipNetworks(f):[],b=y==null?void 0:y.find(w=>w.id===m);b&&b.chainNamespace===V.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,m,y,b;const d=(g=e.getCaipNetwork(V.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const h=(b=(y=(m=(await this.getProvider()).session)==null?void 0:m.namespaces[V.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=R.getCaipNetworks().find(w=>w.id===h);return p==null?void 0:p.id},async isAuthorized(){try{const[d,f]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&f.session?(await f.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:f}){var g,m,y,b;const h=await this.getProvider();if(!h)throw new uo;const p=R.getCaipNetworks().find(w=>w.id===f);if(!p)throw new Js(new Id);try{await h.request({method:"wallet_switchEthereumChain",params:[{chainId:Ge(f)}]}),p!=null&&p.caipNetworkId&&h.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(f)});const w=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...w,f]),{...p,id:p.id}}catch(w){const E=w;if(/(?:user rejected)/iu.test(E.message))throw new Xt(E);try{let v;d!=null&&d.blockExplorerUrls?v=d.blockExplorerUrls:v=(g=p.blockExplorers)!=null&&g.default.url?[(m=p.blockExplorers)==null?void 0:m.default.url]:[];const _=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],A={blockExplorerUrls:v,chainId:Ge(f),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:_};await h.request({method:"wallet_addEthereumChain",params:[A]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,f]),{...p,id:p.id}}catch(v){throw new Xt(v)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(f=>aa(f))})},onChainChanged(d){const f=Number(d);u.emitter.emit("change",{chainId:f})},onConnect(d){this.setRequestedChainsIds(R.getCaipNetworks().map(f=>Number(f.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const f=await this.getProvider();s&&(f.removeListener("accountsChanged",s),s=void 0),i&&(f.removeListener("chainChanged",i),i=void 0),l&&(f.removeListener("disconnect",l),l=void 0),c&&(f.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),f.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var h,p,g;if(!((h=r==null?void 0:r.session)!=null&&h.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[V.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(m=>Number.parseInt(m.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var f;const d=await((f=u.storage)==null?void 0:f.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),f=this.getNamespaceChainsIds();if(f.length&&!f.some(p=>d.includes(p)))return!1;const h=await this.getRequestedChainsIds();return!d.every(p=>h.includes(Number(p)))},async setRequestedChainsIds(d){var f;await((f=u.storage)==null?void 0:f.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const ql=It({pendingTransactions:0}),IA={state:ql,subscribeKey(t,e){return Cn(ql,t,e)},increase(t){ql[t]+=1},decrease(t){ql[t]-=1},reset(t){ql[t]=0}};async function hre(t){if(Ie.isSafeApp()){const{safe:e}=await cn(async()=>{const{safe:n}=await import("./index--vynJQt0.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function pre(t){try{const{coinbaseWallet:e}=await cn(async()=>{const{coinbaseWallet:n}=await import("./index--vynJQt0.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const gre={enable:!1,pollingInterval:3e4};class mre extends iO{constructor(e){const n=js.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=V.CHAIN.EVM,this.adapterType=V.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...gre,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===V.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Ie.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Cu(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Ie.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Cu(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===V.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=js.getCaipNetworkId(s);i?n[s.id]=js.extendWagmiTransports(s,e.projectId,i):n[s.id]=js.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=dre({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=qne(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),IA.increase("pendingTransactions")}});const e=IA.subscribeKey("pendingTransactions",n=>{var r;n>=V.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){Hne(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===V.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:ae.getConnectedSocialProvider(),username:ae.getConnectedSocialUsername()}:void 0}}))}}),jne(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await pre(this.wagmiConfig.connectors);s&&n.push(s)}const r=await hre(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(Kb(e,n)),e.enableEIP6963!==!1&&r.push(hg({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(fre({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(f=>[...f,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:br.ConnectorNamesMap[r.id]??r.name,imageId:br.ConnectorImageIds[r.id],type:br.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===V.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await Mne(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Cu(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Une(this.wagmiConfig,s);const i=await Lne(this.wagmiConfig,s);return await Fne(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(Lu.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await zne(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await One(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return y4(e.value,e.decimals)}formatUnits(e){return al(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===V.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===V.CONNECTOR_ID.AUTH||e.id===V.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:br.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:br.ConnectorNamesMap[e.id]??e.name,imageId:br.ConnectorImageIds[e.id],type:br.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===V.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){Wne(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=wi(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Ie.isSafeApp()&&n===V.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const f=await Xm(this.wagmiConfig,{connector:d,chainId:Number(r)}),h=await d.getProvider();return{chainId:Number(r),address:f.accounts[0],provider:h,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Xm(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await vA(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var f,h,p,g,m;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===V.CONNECTOR_ID.EIP6963&&((f=l.setEip6963Wallet)==null||f.call(l,{provider:s,info:o}));const u=(p=(h=this.wagmiConfig.state)==null?void 0:h.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,w)=>vn.isLowerCaseMatch(b,r)?-1:vn.isLowerCaseMatch(w,r)?1:0);return(m=this.wagmiConfig)==null||m.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await Xm(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await bA(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=ae.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await kne(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});ae.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=wi(this.wagmiConfig).find(i=>vn.isLowerCaseMatch(i.connector.id,e.id));return await yA(this.wagmiConfig,{connector:n}),re.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=wi(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await yA(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,f,h;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await vA(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((h=(f=n.blockExplorers)==null?void 0:f.default)==null?void 0:h.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=wi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=wi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=wi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=wi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:V.CONNECTOR_ID.AUTH,type:"AUTH",name:V.CONNECTOR_NAMES.AUTH,provider:e,imageId:br.ConnectorImageIds[V.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=wi(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(R.state.activeChain==="eip155")return;bA(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Vb({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const uO="b893ea706942c24332e6cf78cb4d1ead",dO=[sO],fO=new mre({transports:{[sO.id]:Yl()},projectId:uO,networks:dO}),hle=fO.wagmiConfig,yre=Ma({__name:"App",setup(t){return Ane({adapters:[fO],projectId:uO,networks:dO}),(e,n)=>{const r=u3("RouterView"),s=H6;return vh(),Eh(s,{namespace:"z"},{default:oS(()=>[En(r)]),_:1})}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Cc=typeof document<"u";function hO(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function wre(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&hO(t.default)}const ht=Object.assign;function ny(t,e){const n={};for(const r in e){const s=e[r];n[r]=Es(s)?s.map(t):t(s)}return n}const Au=()=>{},Es=Array.isArray,pO=/#/g,bre=/&/g,vre=/\//g,Ere=/=/g,_re=/\?/g,gO=/\+/g,Cre=/%5B/g,Are=/%5D/g,mO=/%5E/g,Ire=/%60/g,yO=/%7B/g,Sre=/%7C/g,wO=/%7D/g,Tre=/%20/g;function Gb(t){return encodeURI(""+t).replace(Sre,"|").replace(Cre,"[").replace(Are,"]")}function Nre(t){return Gb(t).replace(yO,"{").replace(wO,"}").replace(mO,"^")}function G0(t){return Gb(t).replace(gO,"%2B").replace(Tre,"+").replace(pO,"%23").replace(bre,"%26").replace(Ire,"`").replace(yO,"{").replace(wO,"}").replace(mO,"^")}function xre(t){return G0(t).replace(Ere,"%3D")}function Pre(t){return Gb(t).replace(pO,"%23").replace(_re,"%3F")}function Ore(t){return t==null?"":Pre(t).replace(vre,"%2F")}function Td(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Rre=/\/$/,Dre=t=>t.replace(Rre,"");function ry(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Lre(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Td(o)}}function $re(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function SA(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function kre(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Qc(e.matched[r],n.matched[s])&&bO(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Qc(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bO(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Ure(t[n],e[n]))return!1;return!0}function Ure(t,e){return Es(t)?TA(t,e):Es(e)?TA(e,t):t===e}function TA(t,e){return Es(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Lre(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Qi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Nd;(function(t){t.pop="pop",t.push="push"})(Nd||(Nd={}));var Iu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Iu||(Iu={}));function Mre(t){if(!t)if(Cc){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Dre(t)}const Bre=/^[^#]+#/;function Fre(t,e){return t.replace(Bre,"#")+e}function jre(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const pg=()=>({left:window.scrollX,top:window.scrollY});function Hre(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=jre(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function NA(t,e){return(history.state?history.state.position-e:-1)+t}const Y0=new Map;function Wre(t,e){Y0.set(t,e)}function qre(t){const e=Y0.get(t);return Y0.delete(t),e}let zre=()=>location.protocol+"//"+location.host;function vO(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),SA(c,"")}return SA(n,t)+r+s}function Vre(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=vO(t,location),p=n.value,g=e.value;let m=0;if(f){if(n.value=h,e.value=f,o&&o===p){o=null;return}m=g?f.position-g.position:0}else r(h);s.forEach(y=>{y(n.value,p,{delta:m,type:Nd.pop,direction:m?m>0?Iu.forward:Iu.back:Iu.unknown})})};function c(){o=n.value}function l(f){s.push(f);const h=()=>{const p=s.indexOf(f);p>-1&&s.splice(p,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(ht({},f.state,{scroll:pg()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:l,destroy:d}}function xA(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?pg():null}}function Kre(t){const{history:e,location:n}=window,r={value:vO(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,l,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:zre()+t+c;try{e[u?"replaceState":"pushState"](l,"",f),s.value=l}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(c,l){const u=ht({},e.state,xA(s.value.back,c,s.value.forward,!0),l,{position:s.value.position});i(c,u,!0),r.value=c}function a(c,l){const u=ht({},s.value,e.state,{forward:c,scroll:pg()});i(u.current,u,!0);const d=ht({},xA(r.value,c,null),{position:u.position+1},l);i(c,d,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function Gre(t){t=Mre(t);const e=Kre(t),n=Vre(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ht({location:"",base:t,go:r,createHref:Fre.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Yre(t){return typeof t=="string"||t&&typeof t=="object"}function EO(t){return typeof t=="string"||typeof t=="symbol"}const _O=Symbol("");var PA;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(PA||(PA={}));function el(t,e){return ht(new Error,{type:t,[_O]:!0},e)}function pi(t,e){return t instanceof Error&&_O in t&&(e==null||!!(t.type&e))}const OA="[^/]+?",Zre={sensitive:!1,strict:!1,start:!0,end:!0},Jre=/[.+*?^${}()[\]/\\]/g;function Xre(t,e){const n=ht({},Zre,e),r=[];let s=n.start?"^":"";const i=[];for(const l of t){const u=l.length?[]:[90];n.strict&&!l.length&&(s+="/");for(let d=0;d<l.length;d++){const f=l[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(Jre,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:m,regexp:y}=f;i.push({name:p,repeatable:g,optional:m});const b=y||OA;if(b!==OA){h+=10;try{new RegExp(`(${b})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+E.message)}}let w=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(w=m&&l.length<2?`(?:/${w})`:"/"+w),m&&(w+="?"),s+=w,h+=20,m&&(h+=-8),g&&(h+=-20),b===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const l=r.length-1;r[l][r[l].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(l){const u=l.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",p=i[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function c(l){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:m}=h,y=p in l?l[p]:"";if(Es(y)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Es(y)?y.join("/"):y;if(!b)if(m)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=b}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function Qre(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function CO(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Qre(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(RA(r))return 1;if(RA(s))return-1}return s.length-r.length}function RA(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ese={type:0,value:""},tse=/[a-zA-Z0-9_]/;function nse(t){if(!t)return[[]];if(t==="/")return[[ese]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${l}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,l="",u="";function d(){l&&(n===0?i.push({type:0,value:l}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),l="")}function f(){l+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(l&&d(),o()):c===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:c==="("?n=2:tse.test(c)?f():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:n=3:u+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${l}"`),d(),o(),s}function rse(t,e,n){const r=Xre(nse(t.path),n),s=ht(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function sse(t,e){const n=[],r=new Map;e=UA({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,f,h){const p=!h,g=$A(d);g.aliasOf=h&&h.record;const m=UA(e,d),y=[g];if("alias"in d){const E=typeof d.alias=="string"?[d.alias]:d.alias;for(const v of E)y.push($A(ht({},g,{components:h?h.record.components:g.components,path:v,aliasOf:h?h.record:g})))}let b,w;for(const E of y){const{path:v}=E;if(f&&v[0]!=="/"){const _=f.record.path,A=_[_.length-1]==="/"?"":"/";E.path=f.record.path+(v&&A+v)}if(b=rse(E,f,m),h?h.alias.push(b):(w=w||b,w!==b&&w.alias.push(b),p&&d.name&&!kA(b)&&o(d.name)),AO(b)&&c(b),g.children){const _=g.children;for(let A=0;A<_.length;A++)i(_[A],b,h&&h.children[A])}h=h||b}return w?()=>{o(w)}:Au}function o(d){if(EO(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){const f=ase(d,n);n.splice(f,0,d),d.record.name&&!kA(d)&&r.set(d.record.name,d)}function l(d,f){let h,p={},g,m;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw el(1,{location:d});m=h.record.name,p=ht(DA(f.params,h.keys.filter(w=>!w.optional).concat(h.parent?h.parent.keys.filter(w=>w.optional):[]).map(w=>w.name)),d.params&&DA(d.params,h.keys.map(w=>w.name))),g=h.stringify(p)}else if(d.path!=null)g=d.path,h=n.find(w=>w.re.test(g)),h&&(p=h.parse(g),m=h.record.name);else{if(h=f.name?r.get(f.name):n.find(w=>w.re.test(f.path)),!h)throw el(1,{location:d,currentLocation:f});m=h.record.name,p=ht({},f.params,d.params),g=h.stringify(p)}const y=[];let b=h;for(;b;)y.unshift(b.record),b=b.parent;return{name:m,path:g,params:p,matched:y,meta:ose(y)}}t.forEach(d=>i(d));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:l,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function DA(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function $A(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:ise(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function ise(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function kA(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ose(t){return t.reduce((e,n)=>ht(e,n.meta),{})}function UA(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function ase(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;CO(t,e[i])<0?r=i:n=i+1}const s=cse(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function cse(t){let e=t;for(;e=e.parent;)if(AO(e)&&CO(t,e)===0)return e}function AO({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function lse(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(gO," "),o=i.indexOf("="),a=Td(o<0?i:i.slice(0,o)),c=o<0?null:Td(i.slice(o+1));if(a in e){let l=e[a];Es(l)||(l=e[a]=[l]),l.push(c)}else e[a]=c}return e}function LA(t){let e="";for(let n in t){const r=t[n];if(n=xre(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Es(r)?r.map(i=>i&&G0(i)):[r&&G0(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function use(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Es(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const dse=Symbol(""),MA=Symbol(""),Yb=Symbol(""),IO=Symbol(""),Z0=Symbol("");function zl(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fo(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(el(4,{from:n,to:e})):f instanceof Error?c(f):Yre(f)?c(el(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[s],e,n,l));let d=Promise.resolve(u);t.length<3&&(d=d.then(l)),d.catch(f=>c(f))})}function sy(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(hO(c)){const u=(c.__vccOpts||c)[e];u&&i.push(fo(u,n,r,o,a,s))}else{let l=c();i.push(()=>l.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=wre(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&fo(h,n,r,o,a,s)()}))}}return i}function BA(t){const e=hn(Yb),n=hn(IO),r=Je(()=>{const c=zn(t.to);return e.resolve(c)}),s=Je(()=>{const{matched:c}=r.value,{length:l}=c,u=c[l-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Qc.bind(null,u));if(f>-1)return f;const h=FA(c[l-2]);return l>1&&FA(u)===h&&d[d.length-1].path!==h?d.findIndex(Qc.bind(null,c[l-2])):f}),i=Je(()=>s.value>-1&&mse(n.params,r.value.params)),o=Je(()=>s.value>-1&&s.value===n.matched.length-1&&bO(n.params,r.value.params));function a(c={}){if(gse(c)){const l=e[zn(t.replace)?"replace":"push"](zn(t.to)).catch(Au);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>l),l}return Promise.resolve()}return{route:r,href:Je(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function fse(t){return t.length===1?t[0]:t}const hse=Ma({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:BA,setup(t,{slots:e}){const n=Dd(BA(t)),{options:r}=hn(Yb),s=Je(()=>({[jA(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[jA(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&fse(e.default(n));return t.custom?i:Ld("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),pse=hse;function gse(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function mse(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Es(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function FA(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const jA=(t,e,n)=>t??e??n,yse=Ma({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=hn(Z0),s=Je(()=>t.route||r.value),i=hn(MA,0),o=Je(()=>{let l=zn(i);const{matched:u}=s.value;let d;for(;(d=u[l])&&!d.components;)l++;return l}),a=Je(()=>s.value.matched[o.value]);ou(MA,Je(()=>o.value+1)),ou(dse,a),ou(Z0,s);const c=Cr();return Ws(()=>[c.value,a.value,t.name],([l,u,d],[f,h,p])=>{u&&(u.instances[d]=l,h&&h!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),l&&u&&(!h||!Qc(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(g=>g(l))},{flush:"post"}),()=>{const l=s.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return HA(n.default,{Component:f,route:l});const h=d.props[u],p=h?h===!0?l.params:typeof h=="function"?h(l):h:null,m=Ld(f,ht({},p,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return HA(n.default,{Component:m,route:l})||m}}});function HA(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const wse=yse;function bse(t){const e=sse(t.routes,t),n=t.parseQuery||lse,r=t.stringifyQuery||LA,s=t.history,i=zl(),o=zl(),a=zl(),c=_p(Qi);let l=Qi;Cc&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ny.bind(null,K=>""+K),d=ny.bind(null,Ore),f=ny.bind(null,Td);function h(K,ie){let Q,le;return EO(K)?(Q=e.getRecordMatcher(K),le=ie):le=K,e.addRoute(le,Q)}function p(K){const ie=e.getRecordMatcher(K);ie&&e.removeRoute(ie)}function g(){return e.getRoutes().map(K=>K.record)}function m(K){return!!e.getRecordMatcher(K)}function y(K,ie){if(ie=ht({},ie||c.value),typeof K=="string"){const z=ry(n,K,ie.path),X=e.resolve({path:z.path},ie),te=s.createHref(z.fullPath);return ht(z,X,{params:f(X.params),hash:Td(z.hash),redirectedFrom:void 0,href:te})}let Q;if(K.path!=null)Q=ht({},K,{path:ry(n,K.path,ie.path).path});else{const z=ht({},K.params);for(const X in z)z[X]==null&&delete z[X];Q=ht({},K,{params:d(z)}),ie.params=d(ie.params)}const le=e.resolve(Q,ie),Oe=K.hash||"";le.params=u(f(le.params));const L=$re(r,ht({},K,{hash:Nre(Oe),path:le.path})),M=s.createHref(L);return ht({fullPath:L,hash:Oe,query:r===LA?use(K.query):K.query||{}},le,{redirectedFrom:void 0,href:M})}function b(K){return typeof K=="string"?ry(n,K,c.value.path):ht({},K)}function w(K,ie){if(l!==K)return el(8,{from:ie,to:K})}function E(K){return A(K)}function v(K){return E(ht(b(K),{replace:!0}))}function _(K){const ie=K.matched[K.matched.length-1];if(ie&&ie.redirect){const{redirect:Q}=ie;let le=typeof Q=="function"?Q(K):Q;return typeof le=="string"&&(le=le.includes("?")||le.includes("#")?le=b(le):{path:le},le.params={}),ht({query:K.query,hash:K.hash,params:le.path!=null?{}:K.params},le)}}function A(K,ie){const Q=l=y(K),le=c.value,Oe=K.state,L=K.force,M=K.replace===!0,z=_(Q);if(z)return A(ht(b(z),{state:typeof z=="object"?ht({},Oe,z.state):Oe,force:L,replace:M}),ie||Q);const X=Q;X.redirectedFrom=ie;let te;return!L&&kre(r,le,Q)&&(te=el(16,{to:X,from:le}),G(le,le,!0,!1)),(te?Promise.resolve(te):x(X,le)).catch(ee=>pi(ee)?pi(ee,2)?ee:j(ee):U(ee,X,le)).then(ee=>{if(ee){if(pi(ee,2))return A(ht({replace:M},b(ee.to),{state:typeof ee.to=="object"?ht({},Oe,ee.to.state):Oe,force:L}),ie||X)}else ee=D(X,le,!0,M,Oe);return P(X,le,ee),ee})}function N(K,ie){const Q=w(K,ie);return Q?Promise.reject(Q):Promise.resolve()}function C(K){const ie=se.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(K):K()}function x(K,ie){let Q;const[le,Oe,L]=vse(K,ie);Q=sy(le.reverse(),"beforeRouteLeave",K,ie);for(const z of le)z.leaveGuards.forEach(X=>{Q.push(fo(X,K,ie))});const M=N.bind(null,K,ie);return Q.push(M),he(Q).then(()=>{Q=[];for(const z of i.list())Q.push(fo(z,K,ie));return Q.push(M),he(Q)}).then(()=>{Q=sy(Oe,"beforeRouteUpdate",K,ie);for(const z of Oe)z.updateGuards.forEach(X=>{Q.push(fo(X,K,ie))});return Q.push(M),he(Q)}).then(()=>{Q=[];for(const z of L)if(z.beforeEnter)if(Es(z.beforeEnter))for(const X of z.beforeEnter)Q.push(fo(X,K,ie));else Q.push(fo(z.beforeEnter,K,ie));return Q.push(M),he(Q)}).then(()=>(K.matched.forEach(z=>z.enterCallbacks={}),Q=sy(L,"beforeRouteEnter",K,ie,C),Q.push(M),he(Q))).then(()=>{Q=[];for(const z of o.list())Q.push(fo(z,K,ie));return Q.push(M),he(Q)}).catch(z=>pi(z,8)?z:Promise.reject(z))}function P(K,ie,Q){a.list().forEach(le=>C(()=>le(K,ie,Q)))}function D(K,ie,Q,le,Oe){const L=w(K,ie);if(L)return L;const M=ie===Qi,z=Cc?history.state:{};Q&&(le||M?s.replace(K.fullPath,ht({scroll:M&&z&&z.scroll},Oe)):s.push(K.fullPath,Oe)),c.value=K,G(K,ie,Q,M),j()}let H;function B(){H||(H=s.listen((K,ie,Q)=>{if(!de.listening)return;const le=y(K),Oe=_(le);if(Oe){A(ht(Oe,{replace:!0,force:!0}),le).catch(Au);return}l=le;const L=c.value;Cc&&Wre(NA(L.fullPath,Q.delta),pg()),x(le,L).catch(M=>pi(M,12)?M:pi(M,2)?(A(ht(b(M.to),{force:!0}),le).then(z=>{pi(z,20)&&!Q.delta&&Q.type===Nd.pop&&s.go(-1,!1)}).catch(Au),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),U(M,le,L))).then(M=>{M=M||D(le,L,!1),M&&(Q.delta&&!pi(M,8)?s.go(-Q.delta,!1):Q.type===Nd.pop&&pi(M,20)&&s.go(-1,!1)),P(le,L,M)}).catch(Au)}))}let I=zl(),S=zl(),O;function U(K,ie,Q){j(K);const le=S.list();return le.length?le.forEach(Oe=>Oe(K,ie,Q)):console.error(K),Promise.reject(K)}function F(){return O&&c.value!==Qi?Promise.resolve():new Promise((K,ie)=>{I.add([K,ie])})}function j(K){return O||(O=!K,B(),I.list().forEach(([ie,Q])=>K?Q(K):ie()),I.reset()),K}function G(K,ie,Q,le){const{scrollBehavior:Oe}=t;if(!Cc||!Oe)return Promise.resolve();const L=!Q&&qre(NA(K.fullPath,0))||(le||!Q)&&history.state&&history.state.scroll||null;return Ap().then(()=>Oe(K,ie,L)).then(M=>M&&Hre(M)).catch(M=>U(M,K,ie))}const J=K=>s.go(K);let oe;const se=new Set,de={currentRoute:c,listening:!0,addRoute:h,removeRoute:p,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:g,resolve:y,options:t,push:E,replace:v,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:S.add,isReady:F,install(K){const ie=this;K.component("RouterLink",pse),K.component("RouterView",wse),K.config.globalProperties.$router=ie,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>zn(c)}),Cc&&!oe&&c.value===Qi&&(oe=!0,E(s.location).catch(Oe=>{}));const Q={};for(const Oe in Qi)Object.defineProperty(Q,Oe,{get:()=>c.value[Oe],enumerable:!0});K.provide(Yb,ie),K.provide(IO,JI(Q)),K.provide(Z0,c);const le=K.unmount;se.add(K),K.unmount=function(){se.delete(K),se.size<1&&(l=Qi,H&&H(),H=null,c.value=Qi,oe=!1,O=!1),le()}}};function he(K){return K.reduce((ie,Q)=>ie.then(()=>C(Q)),Promise.resolve())}return de}function vse(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(l=>Qc(l,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(l=>Qc(l,c))||s.push(c))}return[n,r,s]}var dh={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */var Ese=dh.exports,WA;function _se(){return WA||(WA=1,function(t,e){(function(n,r){t.exports=r()})(Ese,function(){var n={};n.version="0.2.0";var r=n.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};n.configure=function(p){var g,m;for(g in p)m=p[g],m!==void 0&&p.hasOwnProperty(g)&&(r[g]=m);return this},n.status=null,n.set=function(p){var g=n.isStarted();p=s(p,r.minimum,1),n.status=p===1?null:p;var m=n.render(!g),y=m.querySelector(r.barSelector),b=r.speed,w=r.easing;return m.offsetWidth,a(function(E){r.positionUsing===""&&(r.positionUsing=n.getPositioningCSS()),c(y,o(p,b,w)),p===1?(c(m,{transition:"none",opacity:1}),m.offsetWidth,setTimeout(function(){c(m,{transition:"all "+b+"ms linear",opacity:0}),setTimeout(function(){n.remove(),E()},b)},b)):setTimeout(E,b)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var p=function(){setTimeout(function(){n.status&&(n.trickle(),p())},r.trickleSpeed)};return r.trickle&&p(),this},n.done=function(p){return!p&&!n.status?this:n.inc(.3+.5*Math.random()).set(1)},n.inc=function(p){var g=n.status;return g?(typeof p!="number"&&(p=(1-g)*s(Math.random()*g,.1,.95)),g=s(g+p,0,.994),n.set(g)):n.start()},n.trickle=function(){return n.inc(Math.random()*r.trickleRate)},function(){var p=0,g=0;n.promise=function(m){return!m||m.state()==="resolved"?this:(g===0&&n.start(),p++,g++,m.always(function(){g--,g===0?(p=0,n.done()):n.set((p-g)/p)}),this)}}(),n.render=function(p){if(n.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var g=document.createElement("div");g.id="nprogress",g.innerHTML=r.template;var m=g.querySelector(r.barSelector),y=p?"-100":i(n.status||0),b=document.querySelector(r.parent),w;return c(m,{transition:"all 0 linear",transform:"translate3d("+y+"%,0,0)"}),r.showSpinner||(w=g.querySelector(r.spinnerSelector),w&&h(w)),b!=document.body&&u(b,"nprogress-custom-parent"),b.appendChild(g),g},n.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(r.parent),"nprogress-custom-parent");var p=document.getElementById("nprogress");p&&h(p)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var p=document.body.style,g="WebkitTransform"in p?"Webkit":"MozTransform"in p?"Moz":"msTransform"in p?"ms":"OTransform"in p?"O":"";return g+"Perspective"in p?"translate3d":g+"Transform"in p?"translate":"margin"};function s(p,g,m){return p<g?g:p>m?m:p}function i(p){return(-1+p)*100}function o(p,g,m){var y;return r.positionUsing==="translate3d"?y={transform:"translate3d("+i(p)+"%,0,0)"}:r.positionUsing==="translate"?y={transform:"translate("+i(p)+"%,0)"}:y={"margin-left":i(p)+"%"},y.transition="all "+g+"ms "+m,y}var a=function(){var p=[];function g(){var m=p.shift();m&&m(g)}return function(m){p.push(m),p.length==1&&g()}}(),c=function(){var p=["Webkit","O","Moz","ms"],g={};function m(E){return E.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(v,_){return _.toUpperCase()})}function y(E){var v=document.body.style;if(E in v)return E;for(var _=p.length,A=E.charAt(0).toUpperCase()+E.slice(1),N;_--;)if(N=p[_]+A,N in v)return N;return E}function b(E){return E=m(E),g[E]||(g[E]=y(E))}function w(E,v,_){v=b(v),E.style[v]=_}return function(E,v){var _=arguments,A,N;if(_.length==2)for(A in v)N=v[A],N!==void 0&&v.hasOwnProperty(A)&&w(E,A,N);else w(E,_[1],_[2])}}();function l(p,g){var m=typeof p=="string"?p:f(p);return m.indexOf(" "+g+" ")>=0}function u(p,g){var m=f(p),y=m+g;l(m,g)||(p.className=y.substring(1))}function d(p,g){var m=f(p),y;l(p,g)&&(y=m.replace(" "+g+" "," "),p.className=y.substring(1,y.length-1))}function f(p){return(" "+(p.className||"")+" ").replace(/\s+/gi," ")}function h(p){p&&p.parentNode&&p.parentNode.removeChild(p)}return n})}(dh)),dh.exports}var Cse=_se();const Zb=rl(Cse);Zb.configure({minimum:.1,trickleSpeed:300,speed:300});const Ase=()=>Zb.start(),Ise=()=>Zb.done(),Jb=bse({history:Gre("/alpha/"),routes:[{path:"/",name:"home",component:()=>cn(()=>import("./index-9zzmQXxm.js"),__vite__mapDeps([47,48]))}]});Jb.beforeEach(async(t,e,n)=>{Ase(),n()});Jb.afterEach(()=>{Ise()});/*!
 * pinia v3.0.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let SO;const gg=t=>SO=t,TO=Symbol();function J0(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Su;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Su||(Su={}));function Sse(){const t=gw(!0),e=t.run(()=>Cr({}));let n=[],r=[];const s=Aw({install(i){gg(s),s._a=i,i.provide(TO,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const NO=()=>{};function qA(t,e,n,r=NO){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&mw()&&UI(s),s}function yc(t,...e){t.slice().forEach(n=>{n(...e)})}const Tse=t=>t(),zA=Symbol(),iy=Symbol();function X0(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];J0(s)&&J0(r)&&t.hasOwnProperty(n)&&!Ut(r)&&!vo(r)?t[n]=X0(s,r):t[n]=r}return t}const Nse=Symbol();function xse(t){return!J0(t)||!t.hasOwnProperty(Nse)}const{assign:no}=Object;function Pse(t){return!!(Ut(t)&&t.effect)}function Ose(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function l(){a||(n.state.value[t]=s?s():{});const u=jR(n.state.value[t]);return no(u,i,Object.keys(o||{}).reduce((d,f)=>(d[f]=Aw(Je(()=>{gg(n);const h=n._s.get(t);return o[f].call(h,h)})),d),{}))}return c=xO(t,l,e,n,r,!0),c}function xO(t,e,n={},r,s,i){let o;const a=no({actions:{}},n),c={deep:!0};let l,u,d=[],f=[],h;const p=r.state.value[t];!i&&!p&&(r.state.value[t]={}),Cr({});let g;function m(N){let C;l=u=!1,typeof N=="function"?(N(r.state.value[t]),C={type:Su.patchFunction,storeId:t,events:h}):(X0(r.state.value[t],N),C={type:Su.patchObject,payload:N,storeId:t,events:h});const x=g=Symbol();Ap().then(()=>{g===x&&(l=!0)}),u=!0,yc(d,C,r.state.value[t])}const y=i?function(){const{state:C}=n,x=C?C():{};this.$patch(P=>{no(P,x)})}:NO;function b(){o.stop(),d=[],f=[],r._s.delete(t)}const w=(N,C="")=>{if(zA in N)return N[iy]=C,N;const x=function(){gg(r);const P=Array.from(arguments),D=[],H=[];function B(O){D.push(O)}function I(O){H.push(O)}yc(f,{args:P,name:x[iy],store:v,after:B,onError:I});let S;try{S=N.apply(this&&this.$id===t?this:v,P)}catch(O){throw yc(H,O),O}return S instanceof Promise?S.then(O=>(yc(D,O),O)).catch(O=>(yc(H,O),Promise.reject(O))):(yc(D,S),S)};return x[zA]=!0,x[iy]=C,x},E={_p:r,$id:t,$onAction:qA.bind(null,f),$patch:m,$reset:y,$subscribe(N,C={}){const x=qA(d,N,C.detached,()=>P()),P=o.run(()=>Ws(()=>r.state.value[t],D=>{(C.flush==="sync"?u:l)&&N({storeId:t,type:Su.direct,events:h},D)},no({},c,C)));return x},$dispose:b},v=Dd(E);r._s.set(t,v);const A=(r._a&&r._a.runWithContext||Tse)(()=>r._e.run(()=>(o=gw()).run(()=>e({action:w}))));for(const N in A){const C=A[N];if(Ut(C)&&!Pse(C)||vo(C))i||(p&&xse(C)&&(Ut(C)?C.value=p[N]:X0(C,p[N])),r.state.value[t][N]=C);else if(typeof C=="function"){const x=w(C,N);A[N]=x,a.actions[N]=C}}return no(v,A),no(Qe(v),A),Object.defineProperty(v,"$state",{get:()=>r.state.value[t],set:N=>{m(C=>{no(C,N)})}}),r._p.forEach(N=>{no(v,o.run(()=>N({store:v,app:r._a,pinia:r,options:a})))}),p&&i&&n.hydrate&&n.hydrate(v.$state,p),l=!0,u=!0,v}/*! #__NO_SIDE_EFFECTS__ */function ple(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const c=v3();return o=o||(c?hn(TO,null):null),o&&gg(o),o=SO,o._s.has(t)||(s?xO(t,e,r,o):Ose(t,r,o)),o._s.get(t)}return i.$id=t,i}const Rse=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Dse=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,$se=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function kse(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Use(t);return}return e}function Use(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Lse(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t.endsWith('"')&&!t.includes("\\"))return n.slice(1,-1);if(n.length<=9){const r=n.toLowerCase();if(r==="true")return!0;if(r==="false")return!1;if(r==="undefined")return;if(r==="null")return null;if(r==="nan")return Number.NaN;if(r==="infinity")return Number.POSITIVE_INFINITY;if(r==="-infinity")return Number.NEGATIVE_INFINITY}if(!$se.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Rse.test(t)||Dse.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,kse)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Mse(t,e){if(t==null)return;let n=t;for(let r=0;r<e.length;r++){if(n==null||n[e[r]]==null)return;n=n[e[r]]}return n}function Xb(t,e,n){if(n.length===0)return e;const r=n[0];return n.length>1&&(e=Xb(typeof t!="object"||t===null||!Object.prototype.hasOwnProperty.call(t,r)?Number.isInteger(Number(n[1]))?[]:{}:t[r],e,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(t)?t.slice()[r]:Object.assign({},t,{[r]:e})}function PO(t,e){if(t==null||e.length===0)return t;if(e.length===1){if(t==null)return t;if(Number.isInteger(e[0])&&Array.isArray(t))return Array.prototype.slice.call(t,0).splice(e[0],1);const n={};for(const r in t)n[r]=t[r];return delete n[e[0]],n}if(t[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(t))return Array.prototype.concat.call([],t);const n={};for(const r in t)n[r]=t[r];return n}return Xb(t,PO(t[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function OO(t,e){return e.map(n=>n.split(".")).map(n=>[n,Mse(t,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>Xb(n,r[1],r[0]),{})}function RO(t,e){return e.map(n=>n.split(".")).reduce((n,r)=>PO(n,r),t)}function VA(t,{storage:e,serializer:n,key:r,debug:s,pick:i,omit:o,beforeHydrate:a,afterHydrate:c},l,u=!0){try{u&&(a==null||a(l));const d=e.getItem(r);if(d){const f=n.deserialize(d),h=i?OO(f,i):f,p=o?RO(h,o):h;t.$patch(p)}u&&(c==null||c(l))}catch(d){s&&console.error("[pinia-plugin-persistedstate]",d)}}function KA(t,{storage:e,serializer:n,key:r,debug:s,pick:i,omit:o}){try{const a=i?OO(t,i):t,c=o?RO(a,o):a,l=n.serialize(c);e.setItem(r,l)}catch(a){s&&console.error("[pinia-plugin-persistedstate]",a)}}function Bse(t,e,n){const{pinia:r,store:s,options:{persist:i=n}}=t;if(!i)return;if(!(s.$id in r.state.value)){const c=r._s.get(s.$id.replace("__hot:",""));c&&Promise.resolve().then(()=>c.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(e);s.$hydrate=({runHooks:c=!0}={})=>{a.forEach(l=>{VA(s,l,t,c)})},s.$persist=()=>{a.forEach(c=>{KA(s.$state,c)})},a.forEach(c=>{VA(s,c,t),s.$subscribe((l,u)=>KA(u,c),{detached:!0})})}function Fse(t={}){return function(e){Bse(e,n=>({key:(t.key?t.key:r=>r)(n.key??e.store.$id),debug:n.debug??t.debug??!1,serializer:n.serializer??t.serializer??{serialize:r=>JSON.stringify(r),deserialize:r=>Lse(r)},storage:n.storage??t.storage??window.localStorage,beforeHydrate:n.beforeHydrate,afterHydrate:n.afterHydrate,pick:n.pick,omit:n.omit}),t.auto??!1)}}var jse=Fse();const DO=Sse();DO.use(jse);/*!
  * shared v11.1.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const dp=typeof window<"u",Fo=(t,e=!1)=>e?Symbol.for(t):Symbol(t),Hse=(t,e,n)=>Wse({l:t,k:e,s:n}),Wse=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Gt=t=>typeof t=="number"&&isFinite(t),qse=t=>ev(t)==="[object Date]",fp=t=>ev(t)==="[object RegExp]",mg=t=>tt(t)&&Object.keys(t).length===0,pn=Object.assign,zse=Object.create,_t=(t=null)=>zse(t);let GA;const Qb=()=>GA||(GA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:_t());function YA(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const Vse=Object.prototype.hasOwnProperty;function fs(t,e){return Vse.call(t,e)}const qt=Array.isArray,Ft=t=>typeof t=="function",Ne=t=>typeof t=="string",jt=t=>typeof t=="boolean",dt=t=>t!==null&&typeof t=="object",Kse=t=>dt(t)&&Ft(t.then)&&Ft(t.catch),$O=Object.prototype.toString,ev=t=>$O.call(t),tt=t=>ev(t)==="[object Object]",Gse=t=>t==null?"":qt(t)||tt(t)&&t.toString===$O?JSON.stringify(t,null,2):String(t);function tv(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function Yse(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const jf=t=>!dt(t)||qt(t);function fh(t,e){if(jf(t)||jf(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{i!=="__proto__"&&(dt(r[i])&&!dt(s[i])&&(s[i]=Array.isArray(r[i])?[]:_t()),jf(s[i])||jf(r[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]}))})}}/*!
  * message-compiler v11.1.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Zse(t,e,n){return{line:t,column:e,offset:n}}function Q0(t,e,n){return{start:t,end:e}}const mt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},Jse=17;function yg(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function Xse(t){throw t}const gi=" ",Qse="\r",Bn=`
`,eie="\u2028",tie="\u2029";function nie(t){const e=t;let n=0,r=1,s=1,i=0;const o=A=>e[A]===Qse&&e[A+1]===Bn,a=A=>e[A]===Bn,c=A=>e[A]===tie,l=A=>e[A]===eie,u=A=>o(A)||a(A)||c(A)||l(A),d=()=>n,f=()=>r,h=()=>s,p=()=>i,g=A=>o(A)||c(A)||l(A)?Bn:e[A],m=()=>g(n),y=()=>g(n+i);function b(){return i=0,u(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function w(){return o(n+i)&&i++,i++,e[n+i]}function E(){n=0,r=1,s=1,i=0}function v(A=0){i=A}function _(){const A=n+i;for(;A!==n;)b();i=0}return{index:d,line:f,column:h,peekOffset:p,charAt:g,currentChar:m,currentPeek:y,next:b,peek:w,reset:E,resetPeek:v,skipToPeek:_}}const eo=void 0,rie=".",ZA="'",sie="tokenizer";function iie(t,e={}){const n=e.location!==!1,r=nie(t),s=()=>r.index(),i=()=>Zse(r.line(),r.column(),r.index()),o=i(),a=s(),c={currentType:13,offset:a,startLoc:o,endLoc:o,lastType:13,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},l=()=>c,{onError:u}=e;function d($,k,q,...Y){const we=l();if(k.column+=q,k.offset+=q,u){const ne=n?Q0(we.startLoc,k):null,W=yg($,ne,{domain:sie,args:Y});u(W)}}function f($,k,q){$.endLoc=i(),$.currentType=k;const Y={type:k};return n&&(Y.loc=Q0($.startLoc,$.endLoc)),q!=null&&(Y.value=q),Y}const h=$=>f($,13);function p($,k){return $.currentChar()===k?($.next(),k):(d(mt.EXPECTED_TOKEN,i(),0,k),"")}function g($){let k="";for(;$.currentPeek()===gi||$.currentPeek()===Bn;)k+=$.currentPeek(),$.peek();return k}function m($){const k=g($);return $.skipToPeek(),k}function y($){if($===eo)return!1;const k=$.charCodeAt(0);return k>=97&&k<=122||k>=65&&k<=90||k===95}function b($){if($===eo)return!1;const k=$.charCodeAt(0);return k>=48&&k<=57}function w($,k){const{currentType:q}=k;if(q!==2)return!1;g($);const Y=y($.currentPeek());return $.resetPeek(),Y}function E($,k){const{currentType:q}=k;if(q!==2)return!1;g($);const Y=$.currentPeek()==="-"?$.peek():$.currentPeek(),we=b(Y);return $.resetPeek(),we}function v($,k){const{currentType:q}=k;if(q!==2)return!1;g($);const Y=$.currentPeek()===ZA;return $.resetPeek(),Y}function _($,k){const{currentType:q}=k;if(q!==7)return!1;g($);const Y=$.currentPeek()===".";return $.resetPeek(),Y}function A($,k){const{currentType:q}=k;if(q!==8)return!1;g($);const Y=y($.currentPeek());return $.resetPeek(),Y}function N($,k){const{currentType:q}=k;if(!(q===7||q===11))return!1;g($);const Y=$.currentPeek()===":";return $.resetPeek(),Y}function C($,k){const{currentType:q}=k;if(q!==9)return!1;const Y=()=>{const ne=$.currentPeek();return ne==="{"?y($.peek()):ne==="@"||ne==="|"||ne===":"||ne==="."||ne===gi||!ne?!1:ne===Bn?($.peek(),Y()):P($,!1)},we=Y();return $.resetPeek(),we}function x($){g($);const k=$.currentPeek()==="|";return $.resetPeek(),k}function P($,k=!0){const q=(we=!1,ne="")=>{const W=$.currentPeek();return W==="{"||W==="@"||!W?we:W==="|"?!(ne===gi||ne===Bn):W===gi?($.peek(),q(!0,gi)):W===Bn?($.peek(),q(!0,Bn)):!0},Y=q();return k&&$.resetPeek(),Y}function D($,k){const q=$.currentChar();return q===eo?eo:k(q)?($.next(),q):null}function H($){const k=$.charCodeAt(0);return k>=97&&k<=122||k>=65&&k<=90||k>=48&&k<=57||k===95||k===36}function B($){return D($,H)}function I($){const k=$.charCodeAt(0);return k>=97&&k<=122||k>=65&&k<=90||k>=48&&k<=57||k===95||k===36||k===45}function S($){return D($,I)}function O($){const k=$.charCodeAt(0);return k>=48&&k<=57}function U($){return D($,O)}function F($){const k=$.charCodeAt(0);return k>=48&&k<=57||k>=65&&k<=70||k>=97&&k<=102}function j($){return D($,F)}function G($){let k="",q="";for(;k=U($);)q+=k;return q}function J($){let k="";for(;;){const q=$.currentChar();if(q==="{"||q==="}"||q==="@"||q==="|"||!q)break;if(q===gi||q===Bn)if(P($))k+=q,$.next();else{if(x($))break;k+=q,$.next()}else k+=q,$.next()}return k}function oe($){m($);let k="",q="";for(;k=S($);)q+=k;return $.currentChar()===eo&&d(mt.UNTERMINATED_CLOSING_BRACE,i(),0),q}function se($){m($);let k="";return $.currentChar()==="-"?($.next(),k+=`-${G($)}`):k+=G($),$.currentChar()===eo&&d(mt.UNTERMINATED_CLOSING_BRACE,i(),0),k}function de($){return $!==ZA&&$!==Bn}function he($){m($),p($,"'");let k="",q="";for(;k=D($,de);)k==="\\"?q+=K($):q+=k;const Y=$.currentChar();return Y===Bn||Y===eo?(d(mt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),Y===Bn&&($.next(),p($,"'")),q):(p($,"'"),q)}function K($){const k=$.currentChar();switch(k){case"\\":case"'":return $.next(),`\\${k}`;case"u":return ie($,k,4);case"U":return ie($,k,6);default:return d(mt.UNKNOWN_ESCAPE_SEQUENCE,i(),0,k),""}}function ie($,k,q){p($,k);let Y="";for(let we=0;we<q;we++){const ne=j($);if(!ne){d(mt.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${k}${Y}${$.currentChar()}`);break}Y+=ne}return`\\${k}${Y}`}function Q($){return $!=="{"&&$!=="}"&&$!==gi&&$!==Bn}function le($){m($);let k="",q="";for(;k=D($,Q);)q+=k;return q}function Oe($){let k="",q="";for(;k=B($);)q+=k;return q}function L($){const k=q=>{const Y=$.currentChar();return Y==="{"||Y==="@"||Y==="|"||Y==="("||Y===")"||!Y||Y===gi?q:(q+=Y,$.next(),k(q))};return k("")}function M($){m($);const k=p($,"|");return m($),k}function z($,k){let q=null;switch($.currentChar()){case"{":return k.braceNest>=1&&d(mt.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),$.next(),q=f(k,2,"{"),m($),k.braceNest++,q;case"}":return k.braceNest>0&&k.currentType===2&&d(mt.EMPTY_PLACEHOLDER,i(),0),$.next(),q=f(k,3,"}"),k.braceNest--,k.braceNest>0&&m($),k.inLinked&&k.braceNest===0&&(k.inLinked=!1),q;case"@":return k.braceNest>0&&d(mt.UNTERMINATED_CLOSING_BRACE,i(),0),q=X($,k)||h(k),k.braceNest=0,q;default:{let we=!0,ne=!0,W=!0;if(x($))return k.braceNest>0&&d(mt.UNTERMINATED_CLOSING_BRACE,i(),0),q=f(k,1,M($)),k.braceNest=0,k.inLinked=!1,q;if(k.braceNest>0&&(k.currentType===4||k.currentType===5||k.currentType===6))return d(mt.UNTERMINATED_CLOSING_BRACE,i(),0),k.braceNest=0,te($,k);if(we=w($,k))return q=f(k,4,oe($)),m($),q;if(ne=E($,k))return q=f(k,5,se($)),m($),q;if(W=v($,k))return q=f(k,6,he($)),m($),q;if(!we&&!ne&&!W)return q=f(k,12,le($)),d(mt.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,q.value),m($),q;break}}return q}function X($,k){const{currentType:q}=k;let Y=null;const we=$.currentChar();switch((q===7||q===8||q===11||q===9)&&(we===Bn||we===gi)&&d(mt.INVALID_LINKED_FORMAT,i(),0),we){case"@":return $.next(),Y=f(k,7,"@"),k.inLinked=!0,Y;case".":return m($),$.next(),f(k,8,".");case":":return m($),$.next(),f(k,9,":");default:return x($)?(Y=f(k,1,M($)),k.braceNest=0,k.inLinked=!1,Y):_($,k)||N($,k)?(m($),X($,k)):A($,k)?(m($),f(k,11,Oe($))):C($,k)?(m($),we==="{"?z($,k)||Y:f(k,10,L($))):(q===7&&d(mt.INVALID_LINKED_FORMAT,i(),0),k.braceNest=0,k.inLinked=!1,te($,k))}}function te($,k){let q={type:13};if(k.braceNest>0)return z($,k)||h(k);if(k.inLinked)return X($,k)||h(k);switch($.currentChar()){case"{":return z($,k)||h(k);case"}":return d(mt.UNBALANCED_CLOSING_BRACE,i(),0),$.next(),f(k,3,"}");case"@":return X($,k)||h(k);default:{if(x($))return q=f(k,1,M($)),k.braceNest=0,k.inLinked=!1,q;if(P($))return f(k,0,J($));break}}return q}function ee(){const{currentType:$,offset:k,startLoc:q,endLoc:Y}=c;return c.lastType=$,c.lastOffset=k,c.lastStartLoc=q,c.lastEndLoc=Y,c.offset=s(),c.startLoc=i(),r.currentChar()===eo?f(c,13):te(r,c)}return{nextToken:ee,currentOffset:s,currentPosition:i,context:l}}const oie="parser",aie=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function cie(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function lie(t={}){const e=t.location!==!1,{onError:n}=t;function r(y,b,w,E,...v){const _=y.currentPosition();if(_.offset+=E,_.column+=E,n){const A=e?Q0(w,_):null,N=yg(b,A,{domain:oie,args:v});n(N)}}function s(y,b,w){const E={type:y};return e&&(E.start=b,E.end=b,E.loc={start:w,end:w}),E}function i(y,b,w,E){e&&(y.end=b,y.loc&&(y.loc.end=w))}function o(y,b){const w=y.context(),E=s(3,w.offset,w.startLoc);return E.value=b,i(E,y.currentOffset(),y.currentPosition()),E}function a(y,b){const w=y.context(),{lastOffset:E,lastStartLoc:v}=w,_=s(5,E,v);return _.index=parseInt(b,10),y.nextToken(),i(_,y.currentOffset(),y.currentPosition()),_}function c(y,b){const w=y.context(),{lastOffset:E,lastStartLoc:v}=w,_=s(4,E,v);return _.key=b,y.nextToken(),i(_,y.currentOffset(),y.currentPosition()),_}function l(y,b){const w=y.context(),{lastOffset:E,lastStartLoc:v}=w,_=s(9,E,v);return _.value=b.replace(aie,cie),y.nextToken(),i(_,y.currentOffset(),y.currentPosition()),_}function u(y){const b=y.nextToken(),w=y.context(),{lastOffset:E,lastStartLoc:v}=w,_=s(8,E,v);return b.type!==11?(r(y,mt.UNEXPECTED_EMPTY_LINKED_MODIFIER,w.lastStartLoc,0),_.value="",i(_,E,v),{nextConsumeToken:b,node:_}):(b.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Rs(b)),_.value=b.value||"",i(_,y.currentOffset(),y.currentPosition()),{node:_})}function d(y,b){const w=y.context(),E=s(7,w.offset,w.startLoc);return E.value=b,i(E,y.currentOffset(),y.currentPosition()),E}function f(y){const b=y.context(),w=s(6,b.offset,b.startLoc);let E=y.nextToken();if(E.type===8){const v=u(y);w.modifier=v.node,E=v.nextConsumeToken||y.nextToken()}switch(E.type!==9&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(E)),E=y.nextToken(),E.type===2&&(E=y.nextToken()),E.type){case 10:E.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(E)),w.key=d(y,E.value||"");break;case 4:E.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(E)),w.key=c(y,E.value||"");break;case 5:E.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(E)),w.key=a(y,E.value||"");break;case 6:E.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(E)),w.key=l(y,E.value||"");break;default:{r(y,mt.UNEXPECTED_EMPTY_LINKED_KEY,b.lastStartLoc,0);const v=y.context(),_=s(7,v.offset,v.startLoc);return _.value="",i(_,v.offset,v.startLoc),w.key=_,i(w,v.offset,v.startLoc),{nextConsumeToken:E,node:w}}}return i(w,y.currentOffset(),y.currentPosition()),{node:w}}function h(y){const b=y.context(),w=b.currentType===1?y.currentOffset():b.offset,E=b.currentType===1?b.endLoc:b.startLoc,v=s(2,w,E);v.items=[];let _=null;do{const C=_||y.nextToken();switch(_=null,C.type){case 0:C.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(C)),v.items.push(o(y,C.value||""));break;case 5:C.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(C)),v.items.push(a(y,C.value||""));break;case 4:C.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(C)),v.items.push(c(y,C.value||""));break;case 6:C.value==null&&r(y,mt.UNEXPECTED_LEXICAL_ANALYSIS,b.lastStartLoc,0,Rs(C)),v.items.push(l(y,C.value||""));break;case 7:{const x=f(y);v.items.push(x.node),_=x.nextConsumeToken||null;break}}}while(b.currentType!==13&&b.currentType!==1);const A=b.currentType===1?b.lastOffset:y.currentOffset(),N=b.currentType===1?b.lastEndLoc:y.currentPosition();return i(v,A,N),v}function p(y,b,w,E){const v=y.context();let _=E.items.length===0;const A=s(1,b,w);A.cases=[],A.cases.push(E);do{const N=h(y);_||(_=N.items.length===0),A.cases.push(N)}while(v.currentType!==13);return _&&r(y,mt.MUST_HAVE_MESSAGES_IN_PLURAL,w,0),i(A,y.currentOffset(),y.currentPosition()),A}function g(y){const b=y.context(),{offset:w,startLoc:E}=b,v=h(y);return b.currentType===13?v:p(y,w,E,v)}function m(y){const b=iie(y,pn({},t)),w=b.context(),E=s(0,w.offset,w.startLoc);return e&&E.loc&&(E.loc.source=y),E.body=g(b),t.onCacheKey&&(E.cacheKey=t.onCacheKey(y)),w.currentType!==13&&r(b,mt.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,y[w.offset]||""),i(E,b.currentOffset(),b.currentPosition()),E}return{parse:m}}function Rs(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function uie(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function JA(t,e){for(let n=0;n<t.length;n++)nv(t[n],e)}function nv(t,e){switch(t.type){case 1:JA(t.cases,e),e.helper("plural");break;case 2:JA(t.items,e);break;case 6:{nv(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function die(t,e={}){const n=uie(t);n.helper("normalize"),t.body&&nv(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function fie(t){const e=t.body;return e.type===2?XA(e):e.cases.forEach(n=>XA(n)),t}function XA(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=tv(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function Ac(t){switch(t.t=t.type,t.type){case 0:{const e=t;Ac(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)Ac(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)Ac(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Ac(e.key),e.k=e.key,delete e.key,e.modifier&&(Ac(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function hie(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,i=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};i&&t.loc&&(o.source=t.loc.source);const a=()=>o;function c(g,m){o.code+=g}function l(g,m=!0){const y=m?r:"";c(s?y+"  ".repeat(g):y)}function u(g=!0){const m=++o.indentLevel;g&&l(m)}function d(g=!0){const m=--o.indentLevel;g&&l(m)}function f(){l(o.indentLevel)}return{context:a,push:c,indent:u,deindent:d,newline:f,helper:g=>`_${g}`,needIndent:()=>o.needIndent}}function pie(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),tl(t,e.key),e.modifier?(t.push(", "),tl(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function gie(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(tl(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function mie(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(tl(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function yie(t,e){e.body?tl(t,e.body):t.push("null")}function tl(t,e){const{helper:n}=t;switch(e.type){case 0:yie(t,e);break;case 1:mie(t,e);break;case 2:gie(t,e);break;case 6:pie(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const wie=(t,e={})=>{const n=Ne(e.mode)?e.mode:"normal",r=Ne(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,i=e.needIndent?e.needIndent:n!=="arrow",o=t.helpers||[],a=hie(t,{filename:r,breakLineCode:s,needIndent:i});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(i),o.length>0&&(a.push(`const { ${tv(o.map(u=>`${u}: _${u}`),", ")} } = ctx`),a.newline()),a.push("return "),tl(a,t),a.deindent(i),a.push("}"),delete t.helpers;const{code:c,map:l}=a.context();return{ast:t,code:c,map:l?l.toJSON():void 0}};function bie(t,e={}){const n=pn({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=lie(n).parse(t);return r?(i&&fie(a),s&&Ac(a),{ast:a,code:""}):(die(a,n),wie(a,n))}/*!
  * core-base v11.1.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function vie(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Qb().__INTLIFY_PROD_DEVTOOLS__=!1)}function Gs(t){return dt(t)&&rv(t)===0&&(fs(t,"b")||fs(t,"body"))}const kO=["b","body"];function Eie(t){return jo(t,kO)}const UO=["c","cases"];function _ie(t){return jo(t,UO,[])}const LO=["s","static"];function Cie(t){return jo(t,LO)}const MO=["i","items"];function Aie(t){return jo(t,MO,[])}const BO=["t","type"];function rv(t){return jo(t,BO)}const FO=["v","value"];function Hf(t,e){const n=jo(t,FO);if(n!=null)return n;throw xd(e)}const jO=["m","modifier"];function Iie(t){return jo(t,jO)}const HO=["k","key"];function Sie(t){const e=jo(t,HO);if(e)return e;throw xd(6)}function jo(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(fs(t,s)&&t[s]!=null)return t[s]}return n}const WO=[...kO,...UO,...LO,...MO,...HO,...jO,...FO,...BO];function xd(t){return new Error(`unhandled node type: ${t}`)}function oy(t){return n=>Tie(n,t)}function Tie(t,e){const n=Eie(e);if(n==null)throw xd(0);if(rv(n)===1){const i=_ie(n);return t.plural(i.reduce((o,a)=>[...o,QA(t,a)],[]))}else return QA(t,n)}function QA(t,e){const n=Cie(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=Aie(e).reduce((s,i)=>[...s,ew(t,i)],[]);return t.normalize(r)}}function ew(t,e){const n=rv(e);switch(n){case 3:return Hf(e,n);case 9:return Hf(e,n);case 4:{const r=e;if(fs(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(fs(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw xd(n)}case 5:{const r=e;if(fs(r,"i")&&Gt(r.i))return t.interpolate(t.list(r.i));if(fs(r,"index")&&Gt(r.index))return t.interpolate(t.list(r.index));throw xd(n)}case 6:{const r=e,s=Iie(r),i=Sie(r);return t.linked(ew(t,i),s?ew(t,s):void 0,t.type)}case 7:return Hf(e,n);case 8:return Hf(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const Nie=t=>t;let Wf=_t();function xie(t,e={}){let n=!1;const r=e.onError||Xse;return e.onError=s=>{n=!0,r(s)},{...bie(t,e),detectError:n}}function Pie(t,e){if(Ne(t)){jt(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||Nie)(t),s=Wf[r];if(s)return s;const{ast:i,detectError:o}=xie(t,{...e,location:!1,jit:!0}),a=oy(i);return o?a:Wf[r]=a}else{const n=t.cacheKey;if(n){const r=Wf[n];return r||(Wf[n]=oy(t))}else return oy(t)}}let Pd=null;function Oie(t){Pd=t}function Rie(t,e,n){Pd&&Pd.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const Die=$ie("function:translate");function $ie(t){return e=>Pd&&Pd.emit(t,e)}const Ii={INVALID_ARGUMENT:Jse,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},kie=24;function Si(t){return yg(t,null,void 0)}function sv(t,e){return e.locale!=null?eI(e.locale):eI(t.locale)}let ay;function eI(t){if(Ne(t))return t;if(Ft(t)){if(t.resolvedOnce&&ay!=null)return ay;if(t.constructor.name==="Function"){const e=t();if(Kse(e))throw Si(Ii.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ay=e}else throw Si(Ii.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Si(Ii.NOT_SUPPORT_LOCALE_TYPE)}function Uie(t,e,n){return[...new Set([n,...qt(e)?e:dt(e)?Object.keys(e):Ne(e)?[e]:[n]])]}function qO(t,e,n){const r=Ne(n)?n:hp,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;qt(o);)o=tI(i,o,e);const a=qt(e)||!tt(e)?e:e.default?e.default:null;o=Ne(a)?[a]:a,qt(o)&&tI(i,o,!1),s.__localeChainCache.set(r,i)}return i}function tI(t,e,n){let r=!0;for(let s=0;s<e.length&&jt(r);s++){const i=e[s];Ne(i)&&(r=Lie(t,e[s],n))}return r}function Lie(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=Mie(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function Mie(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(qt(n)||tt(n))&&n[s]&&(r=n[s])}return r}const Ho=[];Ho[0]={w:[0],i:[3,0],"[":[4],o:[7]};Ho[1]={w:[1],".":[2],"[":[4],o:[7]};Ho[2]={w:[2],i:[3,0],0:[3,0]};Ho[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Ho[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Ho[5]={"'":[4,0],o:8,l:[5,0]};Ho[6]={'"':[4,0],o:8,l:[6,0]};const Bie=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Fie(t){return Bie.test(t)}function jie(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function Hie(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Wie(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Fie(e)?jie(e):"*"+e}function qie(t){const e=[];let n=-1,r=0,s=0,i,o,a,c,l,u,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,o===void 0||(o=Wie(o),o===!1))return!1;f[1]()}};function h(){const p=t[n+1];if(r===5&&p==="'"||r===6&&p==='"')return n++,a="\\"+p,f[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&h())){if(c=Hie(i),d=Ho[r],l=d[c]||d.l||8,l===8||(r=l[0],l[1]!==void 0&&(u=f[l[1]],u&&(a=i,u()===!1))))return;if(r===7)return e}}const nI=new Map;function zie(t,e){return dt(t)?t[e]:null}function Vie(t,e){if(!dt(t))return null;let n=nI.get(e);if(n||(n=qie(e),n&&nI.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=n[i];if(WO.includes(o)&&Gs(s))return null;const a=s[o];if(a===void 0||Ft(s))return null;s=a,i++}return s}const Kie="11.1.6",wg=-1,hp="en-US",rI="",sI=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function Gie(){return{upper:(t,e)=>e==="text"&&Ne(t)?t.toUpperCase():e==="vnode"&&dt(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Ne(t)?t.toLowerCase():e==="vnode"&&dt(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Ne(t)?sI(t):e==="vnode"&&dt(t)&&"__v_isVNode"in t?sI(t.children):t}}let zO;function Yie(t){zO=t}let VO;function Zie(t){VO=t}let KO;function Jie(t){KO=t}let GO=null;const Xie=t=>{GO=t},Qie=()=>GO;let YO=null;const iI=t=>{YO=t},eoe=()=>YO;let oI=0;function toe(t={}){const e=Ft(t.onWarn)?t.onWarn:Yse,n=Ne(t.version)?t.version:Kie,r=Ne(t.locale)||Ft(t.locale)?t.locale:hp,s=Ft(r)?hp:r,i=qt(t.fallbackLocale)||tt(t.fallbackLocale)||Ne(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=tt(t.messages)?t.messages:cy(s),a=tt(t.datetimeFormats)?t.datetimeFormats:cy(s),c=tt(t.numberFormats)?t.numberFormats:cy(s),l=pn(_t(),t.modifiers,Gie()),u=t.pluralRules||_t(),d=Ft(t.missing)?t.missing:null,f=jt(t.missingWarn)||fp(t.missingWarn)?t.missingWarn:!0,h=jt(t.fallbackWarn)||fp(t.fallbackWarn)?t.fallbackWarn:!0,p=!!t.fallbackFormat,g=!!t.unresolving,m=Ft(t.postTranslation)?t.postTranslation:null,y=tt(t.processor)?t.processor:null,b=jt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,w=!!t.escapeParameter,E=Ft(t.messageCompiler)?t.messageCompiler:zO,v=Ft(t.messageResolver)?t.messageResolver:VO||zie,_=Ft(t.localeFallbacker)?t.localeFallbacker:KO||Uie,A=dt(t.fallbackContext)?t.fallbackContext:void 0,N=t,C=dt(N.__datetimeFormatters)?N.__datetimeFormatters:new Map,x=dt(N.__numberFormatters)?N.__numberFormatters:new Map,P=dt(N.__meta)?N.__meta:{};oI++;const D={version:n,cid:oI,locale:r,fallbackLocale:i,messages:o,modifiers:l,pluralRules:u,missing:d,missingWarn:f,fallbackWarn:h,fallbackFormat:p,unresolving:g,postTranslation:m,processor:y,warnHtmlMessage:b,escapeParameter:w,messageCompiler:E,messageResolver:v,localeFallbacker:_,fallbackContext:A,onWarn:e,__meta:P};return D.datetimeFormats=a,D.numberFormats=c,D.__datetimeFormatters=C,D.__numberFormatters=x,__INTLIFY_PROD_DEVTOOLS__&&Rie(D,n,P),D}const cy=t=>({[t]:_t()});function iv(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return Ne(a)?a:e}else return e}function Vl(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function noe(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function roe(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(noe(t,e[r]))return!0;return!1}function aI(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[c,l,u,d]=tw(...e),f=jt(u.missingWarn)?u.missingWarn:t.missingWarn;jt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,p=sv(t,u),g=o(t,s,p);if(!Ne(c)||c==="")return new Intl.DateTimeFormat(p,d).format(l);let m={},y,b=null;const w="datetime format";for(let _=0;_<g.length&&(y=g[_],m=n[y]||{},b=m[c],!tt(b));_++)iv(t,c,y,f,w);if(!tt(b)||!Ne(y))return r?wg:c;let E=`${y}__${c}`;mg(d)||(E=`${E}__${JSON.stringify(d)}`);let v=a.get(E);return v||(v=new Intl.DateTimeFormat(y,pn({},b,d)),a.set(E,v)),h?v.formatToParts(l):v.format(l)}const ZO=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function tw(...t){const[e,n,r,s]=t,i=_t();let o=_t(),a;if(Ne(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Si(Ii.INVALID_ISO_DATE_ARGUMENT);const l=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(l);try{a.toISOString()}catch{throw Si(Ii.INVALID_ISO_DATE_ARGUMENT)}}else if(qse(e)){if(isNaN(e.getTime()))throw Si(Ii.INVALID_DATE_ARGUMENT);a=e}else if(Gt(e))a=e;else throw Si(Ii.INVALID_ARGUMENT);return Ne(n)?i.key=n:tt(n)&&Object.keys(n).forEach(c=>{ZO.includes(c)?o[c]=n[c]:i[c]=n[c]}),Ne(r)?i.locale=r:tt(r)&&(o=r),tt(s)&&(o=s),[i.key||"",a,i,o]}function cI(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function lI(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[c,l,u,d]=nw(...e),f=jt(u.missingWarn)?u.missingWarn:t.missingWarn;jt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn;const h=!!u.part,p=sv(t,u),g=o(t,s,p);if(!Ne(c)||c==="")return new Intl.NumberFormat(p,d).format(l);let m={},y,b=null;const w="number format";for(let _=0;_<g.length&&(y=g[_],m=n[y]||{},b=m[c],!tt(b));_++)iv(t,c,y,f,w);if(!tt(b)||!Ne(y))return r?wg:c;let E=`${y}__${c}`;mg(d)||(E=`${E}__${JSON.stringify(d)}`);let v=a.get(E);return v||(v=new Intl.NumberFormat(y,pn({},b,d)),a.set(E,v)),h?v.formatToParts(l):v.format(l)}const JO=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function nw(...t){const[e,n,r,s]=t,i=_t();let o=_t();if(!Gt(e))throw Si(Ii.INVALID_ARGUMENT);const a=e;return Ne(n)?i.key=n:tt(n)&&Object.keys(n).forEach(c=>{JO.includes(c)?o[c]=n[c]:i[c]=n[c]}),Ne(r)?i.locale=r:tt(r)&&(o=r),tt(s)&&(o=s),[i.key||"",a,i,o]}function uI(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}const soe=t=>t,ioe=t=>"",ooe="text",aoe=t=>t.length===0?"":tv(t),coe=Gse;function dI(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function loe(t){const e=Gt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Gt(t.named.count)||Gt(t.named.n))?Gt(t.named.count)?t.named.count:Gt(t.named.n)?t.named.n:e:e}function uoe(t,e){e.count||(e.count=t),e.n||(e.n=t)}function doe(t={}){const e=t.locale,n=loe(t),r=dt(t.pluralRules)&&Ne(e)&&Ft(t.pluralRules[e])?t.pluralRules[e]:dI,s=dt(t.pluralRules)&&Ne(e)&&Ft(t.pluralRules[e])?dI:void 0,i=y=>y[r(n,y.length,s)],o=t.list||[],a=y=>o[y],c=t.named||_t();Gt(t.pluralIndex)&&uoe(n,c);const l=y=>c[y];function u(y,b){const w=Ft(t.messages)?t.messages(y,!!b):dt(t.messages)?t.messages[y]:!1;return w||(t.parent?t.parent.message(y):ioe)}const d=y=>t.modifiers?t.modifiers[y]:soe,f=tt(t.processor)&&Ft(t.processor.normalize)?t.processor.normalize:aoe,h=tt(t.processor)&&Ft(t.processor.interpolate)?t.processor.interpolate:coe,p=tt(t.processor)&&Ne(t.processor.type)?t.processor.type:ooe,m={list:a,named:l,plural:i,linked:(y,...b)=>{const[w,E]=b;let v="text",_="";b.length===1?dt(w)?(_=w.modifier||_,v=w.type||v):Ne(w)&&(_=w||_):b.length===2&&(Ne(w)&&(_=w||_),Ne(E)&&(v=E||v));const A=u(y,!0)(m),N=v==="vnode"&&qt(A)&&_?A[0]:A;return _?d(_)(N,v):N},message:u,type:p,interpolate:h,normalize:f,values:pn(_t(),o,c)};return m}const fI=()=>"",Fr=t=>Ft(t);function hI(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[c,l]=rw(...e),u=jt(l.missingWarn)?l.missingWarn:t.missingWarn,d=jt(l.fallbackWarn)?l.fallbackWarn:t.fallbackWarn,f=jt(l.escapeParameter)?l.escapeParameter:t.escapeParameter,h=!!l.resolvedMessage,p=Ne(l.default)||jt(l.default)?jt(l.default)?i?c:()=>c:l.default:n?i?c:()=>c:null,g=n||p!=null&&(Ne(p)||Ft(p)),m=sv(t,l);f&&foe(l);let[y,b,w]=h?[c,m,a[m]||_t()]:XO(t,c,m,o,d,u),E=y,v=c;if(!h&&!(Ne(E)||Gs(E)||Fr(E))&&g&&(E=p,v=E),!h&&(!(Ne(E)||Gs(E)||Fr(E))||!Ne(b)))return s?wg:c;let _=!1;const A=()=>{_=!0},N=Fr(E)?E:QO(t,c,b,E,v,A);if(_)return E;const C=goe(t,b,w,l),x=doe(C),P=hoe(t,N,x),D=r?r(P,c):P;if(__INTLIFY_PROD_DEVTOOLS__){const H={timestamp:Date.now(),key:Ne(c)?c:Fr(E)?E.key:"",locale:b||(Fr(E)?E.locale:""),format:Ne(E)?E:Fr(E)?E.source:"",message:D};H.meta=pn({},t.__meta,Qie()||{}),Die(H)}return D}function foe(t){qt(t.list)?t.list=t.list.map(e=>Ne(e)?YA(e):e):dt(t.named)&&Object.keys(t.named).forEach(e=>{Ne(t.named[e])&&(t.named[e]=YA(t.named[e]))})}function XO(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:c,localeFallbacker:l}=t,u=l(t,r,n);let d=_t(),f,h=null;const p="translate";for(let g=0;g<u.length&&(f=u[g],d=o[f]||_t(),(h=c(d,e))===null&&(h=d[e]),!(Ne(h)||Gs(h)||Fr(h)));g++)if(!roe(f,u)){const m=iv(t,e,f,i,p);m!==e&&(h=m)}return[h,f,d]}function QO(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Fr(r)){const l=r;return l.locale=l.locale||n,l.key=l.key||e,l}if(o==null){const l=()=>r;return l.locale=n,l.key=e,l}const c=o(r,poe(t,n,s,r,a,i));return c.locale=n,c.key=e,c.source=r,c}function hoe(t,e,n){return e(n)}function rw(...t){const[e,n,r]=t,s=_t();if(!Ne(e)&&!Gt(e)&&!Fr(e)&&!Gs(e))throw Si(Ii.INVALID_ARGUMENT);const i=Gt(e)?String(e):(Fr(e),e);return Gt(n)?s.plural=n:Ne(n)?s.default=n:tt(n)&&!mg(n)?s.named=n:qt(n)&&(s.list=n),Gt(r)?s.plural=r:Ne(r)?s.default=r:tt(r)&&pn(s,r),[i,s]}function poe(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>Hse(e,n,o)}}function goe(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:c,missingWarn:l,fallbackContext:u}=t,f={locale:e,modifiers:s,pluralRules:i,messages:(h,p)=>{let g=o(n,h);if(g==null&&(u||p)){const[,,m]=XO(u||t,h,e,a,c,l);g=o(m,h)}if(Ne(g)||Gs(g)){let m=!1;const b=QO(t,h,e,g,h,()=>{m=!0});return m?fI:b}else return Fr(g)?g:fI}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),Gt(r.plural)&&(f.pluralIndex=r.plural),f}vie();/*!
  * vue-i18n v11.1.6
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const moe="11.1.6";function yoe(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Qb().__INTLIFY_PROD_DEVTOOLS__=!1)}const Yr={UNEXPECTED_RETURN_TYPE:kie,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function _s(t,...e){return yg(t,null,void 0)}const sw=Fo("__translateVNode"),iw=Fo("__datetimeParts"),ow=Fo("__numberParts"),woe=Fo("__setPluralRules"),boe=Fo("__injectWithOption"),aw=Fo("__dispose");function Od(t){if(!dt(t)||Gs(t))return t;for(const e in t)if(fs(t,e))if(!e.includes("."))dt(t[e])&&Od(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]==="__proto__")throw new Error(`unsafe key: ${n[o]}`);if(n[o]in s||(s[n[o]]=_t()),!dt(s[n[o]])){i=!0;break}s=s[n[o]]}if(i||(Gs(s)?WO.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!Gs(s)){const o=s[n[r]];dt(o)&&Od(o)}}return t}function eR(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=tt(n)?n:qt(r)?_t():{[t]:_t()};if(qt(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:l}=a;c?(o[c]=o[c]||_t(),fh(l,o[c])):fh(l,o)}else Ne(a)&&fh(JSON.parse(a),o)}),s==null&&i)for(const a in o)fs(o,a)&&Od(o[a]);return o}function tR(t){return t.type}function voe(t,e,n){let r=dt(e.messages)?e.messages:_t();"__i18nGlobal"in n&&(r=eR(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(dt(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(dt(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function pI(t){return En(kd,null,t,0)}const gI="__INTLIFY_META__",mI=()=>[],Eoe=()=>!1;let yI=0;function wI(t){return(e,n,r,s)=>t(n,r,Ar()||void 0,s)}const _oe=()=>{const t=Ar();let e=null;return t&&(e=tR(t)[gI])?{[gI]:e}:null};function nR(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,i=dp?Cr:_p;let o=jt(t.inheritLocale)?t.inheritLocale:!0;const a=i(e&&o?e.locale.value:Ne(t.locale)?t.locale:hp),c=i(e&&o?e.fallbackLocale.value:Ne(t.fallbackLocale)||qt(t.fallbackLocale)||tt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),l=i(eR(a.value,t)),u=i(tt(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),d=i(tt(t.numberFormats)?t.numberFormats:{[a.value]:{}});let f=e?e.missingWarn:jt(t.missingWarn)||fp(t.missingWarn)?t.missingWarn:!0,h=e?e.fallbackWarn:jt(t.fallbackWarn)||fp(t.fallbackWarn)?t.fallbackWarn:!0,p=e?e.fallbackRoot:jt(t.fallbackRoot)?t.fallbackRoot:!0,g=!!t.fallbackFormat,m=Ft(t.missing)?t.missing:null,y=Ft(t.missing)?wI(t.missing):null,b=Ft(t.postTranslation)?t.postTranslation:null,w=e?e.warnHtmlMessage:jt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,E=!!t.escapeParameter;const v=e?e.modifiers:tt(t.modifiers)?t.modifiers:{};let _=t.pluralRules||e&&e.pluralRules,A;A=(()=>{r&&iI(null);const W={version:moe,locale:a.value,fallbackLocale:c.value,messages:l.value,modifiers:v,pluralRules:_,missing:y===null?void 0:y,missingWarn:f,fallbackWarn:h,fallbackFormat:g,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:w,escapeParameter:E,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};W.datetimeFormats=u.value,W.numberFormats=d.value,W.__datetimeFormatters=tt(A)?A.__datetimeFormatters:void 0,W.__numberFormatters=tt(A)?A.__numberFormatters:void 0;const Z=toe(W);return r&&iI(Z),Z})(),Vl(A,a.value,c.value);function C(){return[a.value,c.value,l.value,u.value,d.value]}const x=Je({get:()=>a.value,set:W=>{A.locale=W,a.value=W}}),P=Je({get:()=>c.value,set:W=>{A.fallbackLocale=W,c.value=W,Vl(A,a.value,W)}}),D=Je(()=>l.value),H=Je(()=>u.value),B=Je(()=>d.value);function I(){return Ft(b)?b:null}function S(W){b=W,A.postTranslation=W}function O(){return m}function U(W){W!==null&&(y=wI(W)),m=W,A.missing=y}const F=(W,Z,Se,Me,Ke,zt)=>{C();let Mt;try{__INTLIFY_PROD_DEVTOOLS__,r||(A.fallbackContext=e?eoe():void 0),Mt=W(A)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(A.fallbackContext=void 0)}if(Se!=="translate exists"&&Gt(Mt)&&Mt===wg||Se==="translate exists"&&!Mt){const[Pr,es]=Z();return e&&p?Me(e):Ke(Pr)}else{if(zt(Mt))return Mt;throw _s(Yr.UNEXPECTED_RETURN_TYPE)}};function j(...W){return F(Z=>Reflect.apply(hI,null,[Z,...W]),()=>rw(...W),"translate",Z=>Reflect.apply(Z.t,Z,[...W]),Z=>Z,Z=>Ne(Z))}function G(...W){const[Z,Se,Me]=W;if(Me&&!dt(Me))throw _s(Yr.INVALID_ARGUMENT);return j(Z,Se,pn({resolvedMessage:!0},Me||{}))}function J(...W){return F(Z=>Reflect.apply(aI,null,[Z,...W]),()=>tw(...W),"datetime format",Z=>Reflect.apply(Z.d,Z,[...W]),()=>rI,Z=>Ne(Z)||qt(Z))}function oe(...W){return F(Z=>Reflect.apply(lI,null,[Z,...W]),()=>nw(...W),"number format",Z=>Reflect.apply(Z.n,Z,[...W]),()=>rI,Z=>Ne(Z)||qt(Z))}function se(W){return W.map(Z=>Ne(Z)||Gt(Z)||jt(Z)?pI(String(Z)):Z)}const he={normalize:se,interpolate:W=>W,type:"vnode"};function K(...W){return F(Z=>{let Se;const Me=Z;try{Me.processor=he,Se=Reflect.apply(hI,null,[Me,...W])}finally{Me.processor=null}return Se},()=>rw(...W),"translate",Z=>Z[sw](...W),Z=>[pI(Z)],Z=>qt(Z))}function ie(...W){return F(Z=>Reflect.apply(lI,null,[Z,...W]),()=>nw(...W),"number format",Z=>Z[ow](...W),mI,Z=>Ne(Z)||qt(Z))}function Q(...W){return F(Z=>Reflect.apply(aI,null,[Z,...W]),()=>tw(...W),"datetime format",Z=>Z[iw](...W),mI,Z=>Ne(Z)||qt(Z))}function le(W){_=W,A.pluralRules=_}function Oe(W,Z){return F(()=>{if(!W)return!1;const Se=Ne(Z)?Z:a.value,Me=z(Se),Ke=A.messageResolver(Me,W);return Gs(Ke)||Fr(Ke)||Ne(Ke)},()=>[W],"translate exists",Se=>Reflect.apply(Se.te,Se,[W,Z]),Eoe,Se=>jt(Se))}function L(W){let Z=null;const Se=qO(A,c.value,a.value);for(let Me=0;Me<Se.length;Me++){const Ke=l.value[Se[Me]]||{},zt=A.messageResolver(Ke,W);if(zt!=null){Z=zt;break}}return Z}function M(W){const Z=L(W);return Z??(e?e.tm(W)||{}:{})}function z(W){return l.value[W]||{}}function X(W,Z){if(s){const Se={[W]:Z};for(const Me in Se)fs(Se,Me)&&Od(Se[Me]);Z=Se[W]}l.value[W]=Z,A.messages=l.value}function te(W,Z){l.value[W]=l.value[W]||{};const Se={[W]:Z};if(s)for(const Me in Se)fs(Se,Me)&&Od(Se[Me]);Z=Se[W],fh(Z,l.value[W]),A.messages=l.value}function ee(W){return u.value[W]||{}}function $(W,Z){u.value[W]=Z,A.datetimeFormats=u.value,cI(A,W,Z)}function k(W,Z){u.value[W]=pn(u.value[W]||{},Z),A.datetimeFormats=u.value,cI(A,W,Z)}function q(W){return d.value[W]||{}}function Y(W,Z){d.value[W]=Z,A.numberFormats=d.value,uI(A,W,Z)}function we(W,Z){d.value[W]=pn(d.value[W]||{},Z),A.numberFormats=d.value,uI(A,W,Z)}yI++,e&&dp&&(Ws(e.locale,W=>{o&&(a.value=W,A.locale=W,Vl(A,a.value,c.value))}),Ws(e.fallbackLocale,W=>{o&&(c.value=W,A.fallbackLocale=W,Vl(A,a.value,c.value))}));const ne={id:yI,locale:x,fallbackLocale:P,get inheritLocale(){return o},set inheritLocale(W){o=W,W&&e&&(a.value=e.locale.value,c.value=e.fallbackLocale.value,Vl(A,a.value,c.value))},get availableLocales(){return Object.keys(l.value).sort()},messages:D,get modifiers(){return v},get pluralRules(){return _||{}},get isGlobal(){return r},get missingWarn(){return f},set missingWarn(W){f=W,A.missingWarn=f},get fallbackWarn(){return h},set fallbackWarn(W){h=W,A.fallbackWarn=h},get fallbackRoot(){return p},set fallbackRoot(W){p=W},get fallbackFormat(){return g},set fallbackFormat(W){g=W,A.fallbackFormat=g},get warnHtmlMessage(){return w},set warnHtmlMessage(W){w=W,A.warnHtmlMessage=W},get escapeParameter(){return E},set escapeParameter(W){E=W,A.escapeParameter=W},t:j,getLocaleMessage:z,setLocaleMessage:X,mergeLocaleMessage:te,getPostTranslationHandler:I,setPostTranslationHandler:S,getMissingHandler:O,setMissingHandler:U,[woe]:le};return ne.datetimeFormats=H,ne.numberFormats=B,ne.rt=G,ne.te=Oe,ne.tm=M,ne.d=J,ne.n=oe,ne.getDateTimeFormat=ee,ne.setDateTimeFormat=$,ne.mergeDateTimeFormat=k,ne.getNumberFormat=q,ne.setNumberFormat=Y,ne.mergeNumberFormat=we,ne[boe]=n,ne[sw]=K,ne[iw]=Q,ne[ow]=ie,ne}const ov={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function Coe({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===kn?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},_t())}function rR(){return kn}const Aoe=Ma({name:"i18n-t",props:pn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Gt(t)||!isNaN(t)}},ov),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||av({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(d=>d[0]!=="_"),o=_t();t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=Ne(t.plural)?+t.plural:t.plural);const a=Coe(e,i),c=s[sw](t.keypath,a,o),l=pn(_t(),r),u=Ne(t.tag)||dt(t.tag)?t.tag:rR();return Ld(u,l,c)}}}),bI=Aoe;function Ioe(t){return qt(t)&&!Ne(t[0])}function sR(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a=_t();t.locale&&(o.locale=t.locale),Ne(t.format)?o.key=t.format:dt(t.format)&&(Ne(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((f,h)=>n.includes(h)?pn(_t(),f,{[h]:t.format[h]}):f,_t()));const c=r(t.value,o,a);let l=[o.key];qt(c)?l=c.map((f,h)=>{const p=s[f.type],g=p?p({[f.type]:f.value,index:h,parts:c}):[f.value];return Ioe(g)&&(g[0].key=`${f.type}-${h}`),g}):Ne(c)&&(l=[c]);const u=pn(_t(),i),d=Ne(t.tag)||dt(t.tag)?t.tag:rR();return Ld(d,u,l)}}const Soe=Ma({name:"i18n-n",props:pn({value:{type:Number,required:!0},format:{type:[String,Object]}},ov),setup(t,e){const n=t.i18n||av({useScope:t.scope,__useComponent:!0});return sR(t,e,JO,(...r)=>n[ow](...r))}}),vI=Soe;function Toe(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function Noe(t){const e=o=>{const{instance:a,value:c}=o;if(!a||!a.$)throw _s(Yr.UNEXPECTED_ERROR);const l=Toe(t,a.$),u=EI(c);return[Reflect.apply(l.t,l,[..._I(u)]),l]};return{created:(o,a)=>{const[c,l]=e(a);dp&&t.global===l&&(o.__i18nWatcher=Ws(l.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=l,o.textContent=c},unmounted:o=>{dp&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const c=o.__composer,l=EI(a);o.textContent=Reflect.apply(c.t,c,[..._I(l)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function EI(t){if(Ne(t))return{path:t};if(tt(t)){if(!("path"in t))throw _s(Yr.REQUIRED_VALUE,"path");return t}else throw _s(Yr.INVALID_VALUE)}function _I(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return Ne(n)&&(o.locale=n),Gt(s)&&(o.plural=s),Gt(i)&&(o.plural=i),[e,a,o]}function xoe(t,e,...n){const r=tt(n[0])?n[0]:{};(jt(r.globalInstall)?r.globalInstall:!0)&&([bI.name,"I18nT"].forEach(i=>t.component(i,bI)),[vI.name,"I18nN"].forEach(i=>t.component(i,vI)),[AI.name,"I18nD"].forEach(i=>t.component(i,AI))),t.directive("t",Noe(e))}const Poe=Fo("global-vue-i18n");function Ooe(t={}){const e=jt(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=Roe(t),i=Fo("");function o(u){return n.get(u)||null}function a(u,d){n.set(u,d)}function c(u){n.delete(u)}const l={get mode(){return"composition"},async install(u,...d){if(u.__VUE_I18N_SYMBOL__=i,u.provide(u.__VUE_I18N_SYMBOL__,l),tt(d[0])){const p=d[0];l.__composerExtend=p.__composerExtend,l.__vueI18nExtend=p.__vueI18nExtend}let f=null;e&&(f=Foe(u,l.global)),xoe(u,l,...d);const h=u.unmount;u.unmount=()=>{f&&f(),l.dispose(),h()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:o,__setInstance:a,__deleteInstance:c};return l}function av(t={}){const e=Ar();if(e==null)throw _s(Yr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw _s(Yr.NOT_INSTALLED);const n=Doe(e),r=koe(n),s=tR(e),i=$oe(t,s);if(i==="global")return voe(r,t,s),r;if(i==="parent"){let c=Uoe(n,e,t.__useComponent);return c==null&&(c=r),c}const o=n;let a=o.__getInstance(e);if(a==null){const c=pn({},t);"__i18n"in s&&(c.__i18n=s.__i18n),r&&(c.__root=r),a=nR(c),o.__composerExtend&&(a[aw]=o.__composerExtend(a)),Moe(o,e,a),o.__setInstance(e,a)}return a}function Roe(t,e){const n=gw(),r=n.run(()=>nR(t));if(r==null)throw _s(Yr.UNEXPECTED_ERROR);return[n,r]}function Doe(t){const e=hn(t.isCE?Poe:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw _s(t.isCE?Yr.NOT_INSTALLED_WITH_PROVIDE:Yr.UNEXPECTED_ERROR);return e}function $oe(t,e){return mg(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function koe(t){return t.mode==="composition"?t.global:t.global.__composer}function Uoe(t,e,n=!1){let r=null;const s=e.root;let i=Loe(e,n);for(;i!=null;){const o=t;if(t.mode==="composition"&&(r=o.__getInstance(i)),r!=null||s===i)break;i=i.parent}return r}function Loe(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Moe(t,e,n){Tp(()=>{},e),Tw(()=>{const r=n;t.__deleteInstance(e);const s=r[aw];s&&(s(),delete r[aw])},e)}const Boe=["locale","fallbackLocale","availableLocales"],CI=["t","rt","d","n","tm","te"];function Foe(t,e){const n=Object.create(null);return Boe.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw _s(Yr.UNEXPECTED_ERROR);const o=Ut(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,CI.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw _s(Yr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,CI.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const joe=Ma({name:"i18n-d",props:pn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},ov),setup(t,e){const n=t.i18n||av({useScope:t.scope,__useComponent:!0});return sR(t,e,ZO,(...r)=>n[iw](...r))}}),AI=joe;yoe();Yie(Pie);Zie(Vie);Jie(qO);if(__INTLIFY_PROD_DEVTOOLS__){const t=Qb();t.__INTLIFY__=!0,Oie(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const ly=t=>t&&typeof t=="object"&&!Array.isArray(t),cw=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(ly(t)&&ly(n))for(const r in n)ly(n[r])?(t[r]||Object.assign(t,{[r]:{}}),cw(t[r],n[r])):Object.assign(t,{[r]:n[r]});return cw(t,...e)},Hoe=cw({},{en:{level1:{level12:{level3:{t:0,b:{t:2,i:[{t:3}],s:"level1->level2->level3"}}}},hello:{t:0,b:{t:2,i:[{t:3,v:"Hello, "},{t:4,k:"name"},{t:3,v:"!"}]}}}},{zh:{level1:{level12:{level3:{t:0,b:{t:2,i:[{t:3}],s:"等级1->等级2->等级3"}}}},hello:{t:0,b:{t:2,i:[{t:3,v:"哈喽, "},{t:4,k:"name"},{t:3,v:"!"}]}}}});var hh={exports:{}},Woe=hh.exports,II;function qoe(){return II||(II=1,function(t,e){(function(n,r){t.exports=r(vT())})(Woe,function(n){function r(o){return o&&typeof o=="object"&&"default"in o?o:{default:o}}var s=r(n),i={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(o,a){return a==="W"?o+"周":o+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(o,a){var c=100*o+a;return c<600?"凌晨":c<900?"早上":c<1100?"上午":c<1300?"中午":c<1800?"下午":"晚上"}};return s.default.locale(i,null,!0),i})}(hh)),hh.exports}qoe();const zoe=Ooe({locale:navigator.language.split("-")[0],fallbackLocale:"en",messages:Hoe});M6.locale("zh-cn");const bg=$5(yre);bg.use(DO);bg.use(Jb);bg.use(zoe);bg.mount("#app");export{Wc as $,xe as A,Le as B,ye as C,Yte as D,un as E,dle as F,fle as G,sN as H,aa as I,Js as J,Id as K,Ge as L,ix as M,d$ as N,hg as O,uo as P,ue as Q,Fe as R,Hs as S,Jw as T,Xt as U,qr as V,nn as W,lU as X,fL as Y,QN as Z,cn as _,Bae as a,Zf as a$,pN as a0,cu as a1,Oo as a2,et as a3,ST as a4,sr as a5,re as a6,Rh as a7,Kw as a8,Po as a9,Rae as aA,kp as aB,dr as aC,Gte as aD,kt as aE,Lu as aF,ke as aG,mo as aH,Re as aI,De as aJ,Ot as aK,Ai as aL,uu as aM,ar as aN,vt as aO,g$ as aP,Ky as aQ,as as aR,Br as aS,cle as aT,jp as aU,lt as aV,JP as aW,z0 as aX,Jc as aY,rl as aZ,M6 as a_,Oae as aa,Hp as ab,Gw as ac,xae as ad,Nae as ae,Fp as af,xh as ag,Hk as ah,Vk as ai,ice as aj,Y8 as ak,ae as al,Ph as am,Wae as an,Hae as ao,nL as ap,jae as aq,p8 as ar,Fae as as,jd as at,Hc as au,L8 as av,Zs as aw,xa as ax,Vae as ay,tn as az,ale as b,VU as b$,ih as b0,Nh as b1,vn as b2,q0 as b3,js as b4,A4 as b5,_k as b6,$k as b7,LT as b8,Tae as b9,_o as bA,U8 as bB,JN as bC,Mh as bD,_U as bE,G8 as bF,eN as bG,ZN as bH,lce as bI,oce as bJ,ex as bK,cce as bL,ace as bM,qp as bN,nb as bO,tb as bP,ML as bQ,Fk as bR,ol as bS,QT as bT,zae as bU,Dae as bV,Ys as bW,Mp as bX,ox as bY,RL as bZ,AN as b_,Pae as ba,Ww as bb,Up as bc,V8 as bd,Rt as be,FN as bf,ti as bg,Dh as bh,jN as bi,gL as bj,WN as bk,TL as bl,cl as bm,ob as bn,Uh as bo,tx as bp,JL as bq,ZL as br,Wu as bs,XL as bt,hL as bu,Py as bv,GT as bw,Sa as bx,r4 as by,jc as bz,Na as c,vD as c$,$p as c0,Xw as c1,eb as c2,Wp as c3,lN as c4,SL as c5,tce as c6,ece as c7,Qae as c8,Y$ as c9,BN as cA,p4 as cB,sx as cC,ab as cD,HT as cE,Hd as cF,lr as cG,CU as cH,vN as cI,s4 as cJ,rL as cK,Zae as cL,Yae as cM,nre as cN,g4 as cO,Yl as cP,XT as cQ,dce as cR,P4 as cS,k6 as cT,Bs as cU,ere as cV,kw as cW,Ih as cX,Lw as cY,$w as cZ,eE as c_,Vc as ca,vi as cb,Jae as cc,zN as cd,Xae as ce,NL as cf,$L as cg,uce as ch,YN as ci,fce as cj,Mae as ck,RU as cl,EU as cm,rd as cn,E4 as co,b4 as cp,v4 as cq,t4 as cr,ib as cs,w4 as ct,Gg as cu,KU as cv,Kae as cw,NN as cx,Gae as cy,LN as cz,Oh as d,a6 as d$,CD as d0,rD as d1,bD as d2,aT as d3,Z5 as d4,iT as d5,F5 as d6,Uw as d7,Mc as d8,nl as d9,Cl as dA,Ma as dB,B5 as dC,Je as dD,dae as dE,nae as dF,vh as dG,d3 as dH,V3 as dI,zn as dJ,$6 as dK,jS as dL,P6 as dM,o6 as dN,Ar as dO,M5 as dP,mae as dQ,hn as dR,Tp as dS,Voe as dT,Tw as dU,Cae as dV,_p as dW,je as dX,Ap as dY,tae as dZ,eae as d_,zD as da,Ba as db,aD as dc,cT as dd,lT as de,SD as df,uT as dg,i6 as dh,X5 as di,c6 as dj,Cr as dk,Ws as dl,v6 as dm,Bw as dn,yae as dp,sE as dq,Eae as dr,_y as ds,wae as dt,bae as du,u6 as dv,gae as dw,Lt as dx,Vr as dy,mT as dz,Ta as e,hle as e$,rae as e0,kn as e1,pw as e2,Eh as e3,oS as e4,Zoe as e5,En as e6,cae as e7,Hr as e8,bR as e9,Qe as eA,Ut as eB,aae as eC,z3 as eD,jR as eE,yp as eF,x6 as eG,Ld as eH,D3 as eI,T6 as eJ,UI as eK,Gf as eL,_ae as eM,Qoe as eN,vae as eO,Aae as eP,oae as eQ,ot as eR,uae as eS,u3 as eT,Joe as eU,Xoe as eV,lae as eW,Iae as eX,Aw as eY,ple as eZ,Dne as e_,hw as ea,pt as eb,bS as ec,Koe as ed,iae as ee,sae as ef,ou as eg,Dd as eh,e3 as ei,wS as ej,No as ek,kd as el,qn as em,hae as en,_6 as eo,gT as ep,fae as eq,$e as er,Goe as es,r3 as et,Ep as eu,t3 as ev,wT as ew,Sae as ex,Ru as ey,pae as ez,ule as f,Yoe as f0,vr as f1,ah as g,V as h,kc as i,yt as j,Ir as k,R as l,Ie as m,q$ as n,Pt as o,It as p,lb as q,lle as r,ut as s,jw as t,NT as u,pe as v,Tr as w,ole as x,Cn as y,_n as z};
